"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{1656:(e,t,i)=>{i.d(t,{Ku:()=>p0,LW:()=>y3,Mo:()=>yJ,On:()=>p1,a9:()=>y6,n1:()=>y8,uB:()=>fw,ui:()=>yX,xv:()=>iS});var a,s=i(6208),r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=(e,t)=>{for(var i in t)r(e,i,{get:t[i],enumerable:!0})},l=(e,t,i,a)=>{for(var s,o=a>1?void 0:a?n(t,i):t,l=e.length-1;l>=0;l--)(s=e[l])&&(o=(a?s(t,i,o):s(o))||o);return a&&o&&r(t,i,o),o},h=class{constructor(){this.destroyFns=[]}destroy(){for(let e of this.destroyFns)e()}},d=new class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...e){for(let t of e){this.registerDependencies(t);let e=this.modules.find(e=>t.type===e.type&&(!("optionsKey"in t)||!("optionsKey"in e)||t.optionsKey===e.optionsKey)&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){let i=this.modules.indexOf(e);this.modules.splice(i,1,t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}else this.modules.push(t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}hasEnterpriseModules(){return this.modules.some(e=>"enterprise"===e.packageType)}*byType(...e){let t=new Set,i=this.modules.filter(t=>e.includes(t.type)),a=e=>{let t=this.dependencies.get(e);return t?.flatMap(a).concat(t)??[]},s=[];for(let r of i){let i="optionsKey"in r?r.optionsKey:r.contextKey;if(!t.has(i)){for(let r of a(i)){if(t.has(r))continue;let i=this.modulesByOptionKey.get(r);if(!i){s.push(r);continue}e.includes(i.type)&&(yield i,t.add(r))}yield r,t.add(i)}}if(s.length>0)throw Error(`Could not resolve module dependencies: ${s}`)}registerDependencies(e){if(null==e.dependencies||0===e.dependencies.length)return;let t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},u={containsPoint:function(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height},equals:function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},isEmpty:function(e){return null==e||0===e.height||0===e.width||isNaN(e.height)||isNaN(e.width)},normalize:function(e){let{x:t,y:i,width:a,height:s}=e;return(null==a||a>0)&&(null==s||s>0)?e:(null!=t&&null!=a&&a<0&&(t-=a=-a),null!=i&&null!=s&&s<0&&(i-=s=-s),{x:t,y:i,width:a,height:s})}},c=Symbol("interpolate"),p=e=>null!=e[c];function g(e,t,i,a=1/0){let s={nearest:void 0,distanceSquared:a};for(let a of i){let i=a.distanceSquared(e,t);if(0===i)return{nearest:a,distanceSquared:0};i<s.distanceSquared&&(s.nearest=a,s.distanceSquared=i)}return s}function m(e,t,i,a=1/0){let{x:s=e,y:r=t}=i.transformPoint?.(e,t)??{},n={nearest:void 0,distanceSquared:a};for(let e of i.children){let{nearest:t,distanceSquared:i}=e.nearestSquared(s,r,n.distanceSquared);if(0===i)return{nearest:t,distanceSquared:i};i<n.distanceSquared&&(n.nearest=t,n.distanceSquared=i)}return n}var y=class e{constructor(e,t,i,a){this.x=e,this.y=t,this.width=i,this.height=a}static fromDOMRect({x:t,y:i,width:a,height:s}){return new e(t,i,a,s)}static merge(t){let i=1/0,a=1/0,s=-1/0,r=-1/0;for(let e of t)e.x<i&&(i=e.x),e.y<a&&(a=e.y),e.x+e.width>s&&(s=e.x+e.width),e.y+e.height>r&&(r=e.y+e.height);return new e(i,a,s-i,r-a)}static nearestBox(e,t,i){return g(e,t,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){let{x:t,y:i,width:a,height:s}=this;return new e(t,i,a,s)}equals(e){return u.equals(this,e)}containsPoint(e,t){return u.containsPoint(this,e,t)}intersection(t){if(!this.collidesBBox(t))return;let i=(0,s.qE)(t.x,this.x,t.x+t.width),a=(0,s.qE)(t.y,this.y,t.y+t.height);return new e(i,a,(0,s.qE)(t.x,this.x+this.width,t.x+t.width)-i,(0,s.qE)(t.y,this.y+this.height,t.y+t.height)-a)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;let i=e-(0,s.qE)(this.x,e,this.x+this.width),a=t-(0,s.qE)(this.y,t,this.y+this.height);return i*i+a*a}shrink(e,t){if("number"==typeof e)this.applyMargin(e,t);else for(let t of Object.keys(e)){let i=e[t];"number"==typeof i&&this.applyMargin(i,t)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,t){if("number"==typeof e)this.applyMargin(-e,t);else for(let t of Object.keys(e)){let i=e[t];"number"==typeof i&&this.applyMargin(-i,t)}return this}applyMargin(e,t){switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.y+=e,this.width-=2*e,this.height-=2*e}}translate(e,t){return this.x+=e,this.y+=t,this}[c](t,i){return new e(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};y.zero=Object.freeze(new y(0,0,0,0)),y.NaN=Object.freeze(new y(NaN,NaN,NaN,NaN));var f=Date.now(),b=()=>{let e=Date.now()-f;if(e>2e3){let t=(Math.floor(e/100)/10).toFixed(1);s.Vy.log(`**** ${t}s since last log message ****`)}f=Date.now()},x={create:(...e)=>Object.assign((...t)=>{x.check(...e)&&("function"==typeof t[0]&&(t=(0,s.$r)(t[0]())),b(),s.Vy.log(...t))},{check:()=>x.check(...e),group:(t,i)=>x.check(...e)?s.Vy.logGroup(t,i):i()}),check:(...e)=>(0===e.length&&e.push(!0),(0,s.$r)((0,s.zk)("agChartsDebug")).some(t=>e.includes(t))),inDevelopmentMode(e){if(x.check("dev"))return e()}};function M({context:e,pixelRatio:t,width:i,height:a}){e.save(),e.resetTransform(),e.clearRect(0,0,Math.ceil(i*t),Math.ceil(a*t)),e.restore()}function v(e){if(x.check("canvas")){let t=e.save.bind(e),i=e.restore.bind(e),a=0;Object.assign(e,{save(){t(),a++},restore(){if(0===a)throw Error("AG Charts - Unable to restore() past depth 0");i(),a--},verifyDepthZero(){if(0!==a)throw Error(`AG Charts - Save/restore depth is non-zero: ${a}`)}})}}function S(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var D=class{constructor(e){let{width:t,height:i,pixelRatio:a,willReadFrequently:s=!1}=e;this.width=t,this.height=i,this.pixelRatio=a;let[r,n]=S(t,i,a);this.canvas=new OffscreenCanvas(r,n),this.context=this.canvas.getContext("2d",{willReadFrequently:s}),this.context.setTransform(a,0,0,a,0,0),v(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;let{canvas:a,context:s}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){let[s,r]=S(e,t,i);a.width=s,a.height=r}s.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){M(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},I=Symbol("BREAK"),L="__decorator_config",A="__decorator_accessors";function w(e,t){if(null==Object.getOwnPropertyDescriptor(e,L)&&Object.defineProperty(e,L,{value:{}}),null==Object.getOwnPropertyDescriptor(e,A)){let t=Object.getPrototypeOf(e)?.[A];Object.defineProperty(e,A,{value:t?.slice()??[]})}let i=e[L],a=t.toString();if(null!=i[a])return i[a];i[a]={setters:[],getters:[],observers:[]};let s=Object.getOwnPropertyDescriptor(e,t),r=s?.get,n=s?.set;if(null==r||null==n){let i=e[A],a=i.indexOf(t);-1===a&&(a=i.push(t)-1),r??(r=function(){let e=this.__accessors;return null==e&&Object.defineProperty(this,"__accessors",{value:e=i.slice().fill(void 0)}),e[a]}),n??(n=function(e){let t=this.__accessors;null==t&&Object.defineProperty(this,"__accessors",{value:t=i.slice().fill(void 0)}),t[a]=e})}return Object.defineProperty(e,t,{set:function(e){let s,{setters:o,observers:l}=i[a];for(let i of(o.some(e=>e.length>2)&&(s=r.call(this)),o))if((e=i(this,t,e,s))===I)return;for(let t of(n.call(this,e),l))t(this,e,s)},get:function(){let e=r.call(this);for(let s of i[a].getters)if((e=s(this,t,e))===I)return;return e},enumerable:!0,configurable:!1}),i[a]}function C(e,t,i){return(a,s)=>{let r=w(a,s);r.setters.push(e),t&&r.getters.unshift(t),i&&Object.assign(r,i)}}function k(e){return(t,i)=>{w(t,i).observers.push(e)}}function N(e){return void 0!==e&&L in e}function T(e){let t=new Set;for(;N(e);)t.add(e?.[L]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(e=>Object.keys(e))}function E(e){return T(e).reduce((t,i)=>(t[i]=e[i]??null,t),{})}function O(e,t){return Array.isArray(e)?!!Array.isArray(t)&&e.length===t.length&&e.every((e,i)=>O(e,t[i])):(0,s.Qd)(e)?!!(0,s.Qd)(t)&&j(e,t,O):e===t}function j(e,t,i){if(Object.is(e,t))return!0;for(let i of Object.keys(t))if(!(i in e))return!1;for(let a of Object.keys(e))if(!(a in t)||!i(e[a],t[a]))return!1;return!0}function z(...e){let t={};for(let i of e)if((0,s.Gv)(i))for(let e of N(i)?T(i):Object.keys(i))(0,s.Qd)(t[e])&&(0,s.Qd)(i[e])?t[e]=z(t[e],i[e]):t[e]??(t[e]=i[e]);return t}function R(...e){let t={};for(let i of e)if((0,s.Gv)(i))for(let e of N(i)?T(i):Object.keys(i))(0,s.Qd)(t[e])&&(0,s.Qd)(i[e])?t[e]=R(t[e],i[e]):e in t||(t[e]??(t[e]=i[e]));return t}function P(e,...t){return t&&(0,s.cy)(e)?e.map(e=>z(e,...t)):e}function F(e,t){let i={};for(let[a,r]of(0,s.jO)(e))i[a]=t(r,a,e);return i}function B(e,t){let i={...e};for(let e of t)delete i[e];return i}function G(e,t){return((0,s.cy)(t)?t:t.split(".")).reduce((e,t)=>e[t],e)}var V=new Set(["__proto__","constructor","prototype"]);function Y(e,t,i){let a=(0,s.cy)(t)?t.slice():t.split("."),r=a.pop();if(a.some(e=>V.has(e)))return;let n=a.reduce((e,t)=>e[t],e);return n[r]=i,n[r]}function U(e,t,i){if(void 0===i)return t;for(let a of e){let e=i[a];void 0!==e&&(t[a]=e)}return t}function _(e){return null!=e&&"object"==typeof e&&(0,s.Qd)(e)&&(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{let i=e[t];null===i||"object"!=typeof i&&"function"!=typeof i||Object.isFrozen(i)||_(i)})),e}function $(e,t){return(0,s.Qd)(e)&&t in e}function W(e,t){return $(e,t)&&"string"==typeof e[t]}var H=(e,t)=>e===t;function Z(e){return function(t,i){let a=`__${i}`;t[i]||function(e,t,i,a){let{changeCb:s,convertor:r,checkDirtyOnAssignment:n=!1}=a??{},o={changeCb:s,checkDirtyOnAssignment:n,convertor:r};Object.defineProperty(e,t,{set:function(e,t,i){let{checkDirtyOnAssignment:a}=i;return a?function(i){let a=t.call(this,i);return i?._dirty===!0&&this.markDirty(e),a}:t}(i,function(e,t){let{changeCb:i}=t;return i?function(t){let a=e.call(this,t);return a!==Q&&i.call(this,this),a}:e}(function(e,t){let{convertor:i}=t;return i?function(t){e.call(this,i(t))}:e}(function(e,t){let{equals:i=H}=t;return function(t){return i(t,this[e])?Q:(this[e]=t,this.onChangeDetection(e),t)}}(i,o),o),o),o),get:function(){return this[i]},enumerable:!0,configurable:!0})}(t,i,a,e)}}function K(e){return Z(e)}function X(e){return(e??{}).equals=s.r1,Z(e)}var Q=Symbol("no-change"),q=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(q||{}),J=class e{constructor(t){this.serialNumber=e._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=(0,s.sX)(this),this.pointerEvents=0,this.scene=void 0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=t?.name,this.tag=t?.tag??NaN,this.zIndex=t?.zIndex??0,(t?.debugDirty??e._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(e,t,i){let a=e?.toSVG();if(null==a||!a.elements.length&&!a.defs?.length)return;let r=(0,s.FJ)("svg");if(r.setAttribute("width",String(t)),r.setAttribute("height",String(i)),r.setAttribute("viewBox",`0 0 ${t} ${i}`),a.defs?.length){let e=(0,s.FJ)("defs");e.append(...a.defs),r.append(e)}return r.append(...a.elements),r.outerHTML}static*extractBBoxes(e,t){for(let i of e)if(!t||i.visible&&!i.transitionOut){let e=i.getBBox();e&&(yield e)}}get datum(){return this._datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}get dirty(){return this._dirty}closestDatum(){for(let{datum:e}of this.traverseUp(!0))if(null!=e)return e}preRender(e,t=1){for(let i of(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=t,this.childNodeCounts.thisComplexity=t,this.children())){let t=i.preRender(e);this.childNodeCounts.groups+=t.groups,this.childNodeCounts.nonGroups+=t.nonGroups,this.childNodeCounts.complexity+=t.complexity}return this.childNodeCounts}render(e){let{stats:t}=e;if(this._dirty=!1,this.debugDirtyProperties(),e.debugNodeSearch){let t=this.name??this.id;e.debugNodeSearch.some(e=>"string"==typeof e?e===t:e.test(t))&&(e.debugNodes[this.name??this.id]=this)}t&&(t.nodesRendered++,t.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(e){for(let t of(this.scene=e,this._debug=e?.layersManager?.debug,this.children()))t.setScene(e)}sortChildren(e){if(this.dirtyZIndex=!1,!this.childNodes)return;let t=[...this.childNodes].sort(e);for(let e of(this.childNodes.clear(),t))this.childNodes.add(e)}*traverseUp(e){let t=this;for(e&&(yield t);t=t.parentNode;)yield t}*children(){if(this.childNodes)for(let e of this.childNodes)yield e}*descendants(){for(let e of this.children())yield e,yield*e.descendants()}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(e){for(let t of(this.childNodes??(this.childNodes=new Set),(0,s.Rp)(e)))t.parentNode?.removeChild(t),this.childNodes.add(t),t.parentNode=this,t.setScene(this.scene);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){if(!this.childNodes?.delete(e))throw Error(`AG Charts - internal error, unknown child node ${e.name??e.id} in $${this.name??this.id}`);delete e.parentNode,e.setScene(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}remove(){this.parentNode?.removeChild(this)}clear(){for(let e of this.children())delete e.parentNode,e.setScene();this.childNodes?.clear(),this.invalidateCachedBBox()}destroy(){this.parentNode?.removeChild(this)}setProperties(e,t){if(t)for(let i of t)this[i]=e[i];else Object.assign(this,e);return this}containsPoint(e,t){return!1}pickNode(e,t){if(this.visible&&1!==this.pointerEvents&&this.containsPoint(e,t)){if(null!=this.childNodes&&0!==this.childNodes.size){let i=[...this.children()];for(let a=i.length-1;a>=0;a--){let s=i[a].pickNode(e,t);if(s)return s}}else if(!this.isContainerNode)return this}}pickNodes(e,t,i=[]){if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return i;for(let a of(this.isContainerNode||i.push(this),this.children()))a.pickNodes(e,t,i);return i}invalidateCachedBBox(){null!=this.cachedBBox&&(this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox())}getBBox(){return null==this.cachedBBox&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(e){this.markDirty(e)}markDirty(e){let{_dirty:t}=this;null!=e&&this._debugDirtyProperties&&this.markDebugProperties(e),(null!=this.cachedBBox||!t)&&(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty)for(let e of(this._dirty=!1,this.debugDirtyProperties(),this.children()))e.markClean()}markDebugProperties(e){let t=this._debugDirtyProperties?.get(e)??[],i=Error().stack?.split("\n").filter(e=>"Error"!==e&&!e.includes(".markDebugProperties")&&!e.includes(".markDirty")&&!e.includes("Object.assign ")&&!e.includes(`${this.constructor.name}.`))??"unknown";t.push(i[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(e,t)}debugDirtyProperties(){null!=this._debugDirtyProperties&&(this._debugDirtyProperties.has("__first__")||this._debugDirtyProperties.forEach((e,t)=>{e.length>1&&(console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${t} (${e.length}x)`),e.forEach(e=>console.log(e)),console.groupEnd())}),this._debugDirtyProperties.clear())}onZIndexChange(){let{parentNode:e}=this;e&&(e.dirtyZIndex=!0)}toSVG(){}};J._nextSerialNumber=0,J._debugEnabled=!1,l([Z()],J.prototype,"visible",2),l([Z({equals:O,changeCb:e=>e.onZIndexChange()})],J.prototype,"zIndex",2);var ee=J,et=2*Math.PI,ei=Math.PI/2;function ea(e){return e%=et,e+=et,e%=et}function es(e){return e%=et,(e+=et)!==et&&(e%=et),e}function er(e){return(e%=et)<-Math.PI?e+=et:e>=Math.PI&&(e-=et),e}function en(e,t,i){let a=ea(e),s=ea(t),r=ea(i);return s<r?s<=a&&a<=r:!(s>r)||s<=a||a<=r}function eo(e){return e/180*Math.PI}function el(e){return e/Math.PI*180}function eh(e,t){return e=ea(e),(t=ea(t))-e+(e>t?et:0)}function ed(e){let t=ea(e);return t<=ei?t/ei:t<=Math.PI?(Math.PI-t)/ei:t<=1.5*Math.PI?(t-Math.PI)/ei:(et-t)/ei}function eu(e,t,i){let a=ed(i);return e*a+t*Math.abs(1-a)}function ec(e){return e?ea(eo(e)):0}var ep=(e,t,i)=>e*(1-i)+t*i,eg=e=>{let t=Math.abs(e);return t<=.04045?e/12.92:(e<0?-1:1)*((t+.055)/1.055)**2.4},em=e=>{let t=Math.abs(e);return t>.0031308?(e<0?-1:1)*(1.055*t**(1/2.4)-.055):12.92*e},ey=class e{constructor(e,t,i,a=1){this.r=(0,s.qE)(0,e||0,1),this.g=(0,s.qE)(0,t||0,1),this.b=(0,s.qE)(0,i||0,1),this.a=(0,s.qE)(0,a||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!e.parseHex(t):t.indexOf("rgb")>=0?!!e.stringToRgba(t):e.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.indexOf("#")>=0)return e.fromHexString(t);let i=e.nameToHex.get(t.toLowerCase());if(i)return e.fromHexString(i);if(t.indexOf("rgb")>=0)return e.fromRgbaString(t);throw Error(`Invalid color string: '${t}'`)}static parseHex(e){let t;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map(e=>parseInt(e,16)).map(e=>e+16*e)}if(t?.length>=3&&t.every(e=>e>=0))return 3===t.length&&t.push(255),t}static fromHexString(t){let i=e.parseHex(t);if(i){let[t,a,s,r]=i;return new e(t/255,a/255,s/255,r/255)}throw Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(e){let t=-1,i=-1;for(let a=0;a<e.length;a++){let s=e[a];if(-1===t&&"("===s)t=a;else if(")"===s){i=a;break}}if(-1===t||-1===i)return;let a=e.substring(t+1,i).split(","),r=[];for(let e=0;e<a.length;e++){let t=a[e],i=parseFloat(t);if(!Number.isFinite(i))return;i=t.indexOf("%")>=0?(0,s.qE)(0,i,100)/100:3===e?(0,s.qE)(0,i,1):(0,s.qE)(0,i,255)/255,r.push(i)}return r}static fromRgbaString(t){let i=e.stringToRgba(t);if(i){if(3===i.length)return new e(i[0],i[1],i[2]);else if(4===i.length)return new e(i[0],i[1],i[2],i[3])}throw Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new e(t[0],t[1],t[2],t[3]);if(3===t.length)return new e(t[0],t[1],t[2]);throw Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,a,s=1){let r=e.HSBtoRGB(t,i,a);return new e(r[0],r[1],r[2],s)}static fromHSL(t,i,a,s=1){let r=e.HSLtoRGB(t,i,a);return new e(r[0],r[1],r[2],s)}static fromOKLCH(t,i,a,s=1){let r=e.OKLCHtoRGB(t,i,a);return new e(r[0],r[1],r[2],s)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let t="#"+e.padHex(Math.round(255*this.r).toString(16))+e.padHex(Math.round(255*this.g).toString(16))+e.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=e.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(e=3){let t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return e.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){let a=eg(e),s=eg(t),r=eg(i),n=Math.cbrt(.4122214708*a+.5363325363*s+.0514459929*r),o=Math.cbrt(.2119034982*a+.6806995451*s+.1073969566*r),l=Math.cbrt(.0883024619*a+.2817188376*s+.6299787005*r),h=1.9779984951*n-2.428592205*o+.4505937099*l,d=.0259040371*n+.7827717662*o-.808675766*l,u=180*Math.atan2(d,h)/Math.PI;return[.2104542553*n+.793617785*o-.0040720468*l,Math.hypot(h,d),u>=0?u:u+360]}static OKLCHtoRGB(e,t,i){let a=t*Math.cos(i*Math.PI/180),s=t*Math.sin(i*Math.PI/180),r=(e+.3963377774*a+.2158037573*s)**3,n=(e-.1055613458*a-.0638541728*s)**3,o=(e-.0894841775*a-1.291485548*s)**3,l=em(4.0767416621*r-3.3077115913*n+.2309699292*o);return[l,em(-1.2684380046*r+2.6097574011*n-.3413193965*o),em(-.0041960863*r-.7034186147*n+1.707614701*o)]}static RGBtoHSL(e,t,i){let a,s,r=Math.min(e,t,i),n=Math.max(e,t,i),o=(n+r)/2;if(n===r)a=0,s=0;else{let l=n-r;s=o>.5?l/(2-n-r):l/(n+r),a=(n===e?(t-i)/l+6*(t<i):n===t?(i-e)/l+2:(e-t)/l+4)*60}return[a,s,o]}static HSLtoRGB(e,t,i){if(e=(e%360+360)%360,0===t)return[i,i,i];let a=i<.5?i*(1+t):i+t-i*t,s=2*i-a;function r(e){return(e<0&&(e+=1),e>1&&(e-=1),e<1/6)?s+(a-s)*6*e:e<.5?a:e<2/3?s+(a-s)*(2/3-e)*6:s}let n=r(e/360+1/3);return[n,r(e/360),r(e/360-1/3)]}static RGBtoHSB(e,t,i){let a=Math.min(e,t,i),s=Math.max(e,t,i),r=0;if(a!==s){let n=s-a,o=(s-e)/n,l=(s-t)/n,h=(s-i)/n;(r=(e===s?h-l:t===s?2+o-h:4+l-o)/6)<0&&(r+=1)}return[360*r,0===s?0:(s-a)/s,s]}static HSBtoRGB(e,t,i){e=(e%360+360)%360/360;let a=0,s=0,r=0;if(0===t)a=s=r=i;else{let n=(e-Math.floor(e))*6,o=n-Math.floor(n),l=i*(1-t),h=i*(1-t*o),d=i*(1-t*(1-o));switch(0|n){case 0:a=i,s=d,r=l;break;case 1:a=h,s=i,r=l;break;case 2:a=l,s=i,r=d;break;case 3:a=l,s=h,r=i;break;case 4:a=d,s=l,r=i;break;case 5:a=i,s=l,r=h}}return[a,s,r]}static mix(t,i,a){return new e(ep(t.r,i.r,a),ep(t.g,i.g,a),ep(t.b,i.b,a),ep(t.a,i.a,a))}static lighten(t,i){let a=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH((0,s.qE)(0,a[0]+i,1),a[1],a[2])}static darken(t,i){let a=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH((0,s.qE)(0,a[0]-i,1),a[1],a[2])}static interpolate(t,i){let a=1/(t.length-1),s=t.map(t=>e.RGBtoOKLCH(t.r,t.g,t.b));return Array.from({length:i},(r,n)=>{let o=n/(i-1),l=t.length<=2?0:Math.min(Math.floor(o*(t.length-1)),t.length-2),h=(o-l*a)/a,d=s[l],u=s[l+1];return e.fromOKLCH(ep(d[0],u[0],h),ep(d[1],u[1],h),ep(d[2],u[2],h))})}};ey.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var ef=class{ticks(e,t,i){}niceDomain(e,t=this.domain){return t}tickFormatter(e){}datumFormatter(e){}get bandwidth(){}get step(){}get inset(){}},eb=(e,t)=>{let i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(e){this[i]!==e&&(this[i]=e,this.invalid=!0)},enumerable:!0,configurable:!1})},ex=e=>{let t=ey.fromString(e),[i,a,s]=ey.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:a,h:s,a:t.a}},eM=e=>e.c<1e-6||e.l<1e-6||e.l>.999999,ev=(e,t,i)=>{let a;if(i=(0,s.qE)(0,i,1),eM(e))a=t.h;else if(eM(t))a=e.h;else{let s=e.h,r=t.h,n=t.h-e.h;n>180?r-=360:n<-180&&(r+=360),a=s*(1-i)+r*i}let r=e.c*(1-i)+t.c*i,n=e.l*(1-i)+t.l*i,o=e.a*(1-i)+t.a*i;return ey.fromOKLCH(n,r,a,o)},eS=class extends ef{constructor(){super(...arguments),this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(ex)}update(){let{domain:e,range:t}=this;e.length<2&&(s.Vy.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let t=1;t<e.length;t++)if(e[t-1]>=e[t]){s.Vy.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((e,t)=>e-t);break}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(ex)}normalizeDomains(...e){return{domain:e.flat(),animatable:!0}}toDomain(){}convert(e){let t,i;this.refresh();let{domain:a,range:s,parsedRange:r}=this,n=a[0],o=a.at(-1),l=s[0],h=s[s.length-1];if(e<=n)return l;if(e>=o)return h;if(2===a.length){let a=(e-n)/(o-n),r=1/(s.length-1);t=s.length<=2?0:Math.min(Math.floor(a*(s.length-1)),s.length-2),i=(a-t*r)/r}else{for(t=0;t<a.length-2&&!(e<a[t+1]);t++);let s=a[t];i=(e-s)/(a[t+1]-s)}return ev(r[t],r[t+1],i).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&s.Vy.warnOnce("Expected update to not invalidate scale"))}};l([eb],eS.prototype,"domain",2),l([eb],eS.prototype,"range",2);var eD=class{constructor(e,t=[],i){this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){let a=this.bbox??t;if(isNaN(a.x)||isNaN(a.y))return;if(null!=this._cache&&this._cache.ctx===e&&this._cache.bbox.equals(a))return this._cache.gradient;let{stops:s,colorSpace:r}=this;if(0===s.length)return;if(1===s.length)return s[0].color;let n=this.createCanvasGradient(e,a,i);if(null==n)return;let o="oklch"===r,l=s[0];n.addColorStop(l.stop,l.color);for(let e=1;e<s.length;e+=1){let t=s[e];if(o){let e=new eS;e.domain=[l.stop,t.stop],e.range=[l.color,t.color];for(let i=l.stop+.05;i<t.stop;i+=.05)n.addColorStop(i,e.convert(i))}n.addColorStop(t.stop,t.color),l=t}return"createPattern"in n&&(n=n.createPattern()),this._cache={ctx:e,bbox:a,gradient:n},n}toSvg(e){let t=this.bbox??e,i=this.createSvgGradient(t);return this.stops.forEach(({stop:e,color:t})=>{let a=(0,s.FJ)("stop");a.setAttribute("offset",`${e}`),a.setAttribute("stop-color",`${t}`),i.appendChild(a)}),i}},eI=class extends eD{constructor(e,t,i=0,a){super(e,t,a),this.angle=i}createCanvasGradient(e,t,i){let{angle:a}=this,s=ec(a+-90),r=i?.centerX??t.x+.5*t.width,n=i?.centerY??t.y+.5*t.height;return e.createConicGradient(s,r,n)}createSvgGradient(e){return(0,s.FJ)("linearGradient")}},eL=class extends eD{constructor(e,t,i=0,a){super(e,t,a),this.angle=i}getGradientPoints(e){let t,{angle:i}=this,a=ec(i+90),s=Math.cos(a),r=Math.sin(a),n=e.width,o=e.height,l=e.x+.5*n,h=e.y+.5*o,d=Math.sqrt(o*o+n*n)/2*Math.abs(Math.cos((a<Math.PI/2?a:a<Math.PI?Math.PI-a:a<1.5*Math.PI?a-Math.PI:2*Math.PI-a)-Math.atan2(o,n)));return{x0:l+s*d,y0:h+r*d,x1:l-s*d,y1:h-r*d}}createCanvasGradient(e,t){let{x0:i,y0:a,x1:s,y1:r}=this.getGradientPoints(t);return e.createLinearGradient(i,a,s,r)}createSvgGradient(e){let{x0:t,y0:i,x1:a,y1:r}=this.getGradientPoints(e),n=(0,s.FJ)("linearGradient");return n.setAttribute("x1",String(t)),n.setAttribute("y1",String(i)),n.setAttribute("x2",String(a)),n.setAttribute("y2",String(r)),n.setAttribute("gradientUnits","userSpaceOnUse"),n}},eA=class extends eD{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){let a=i?.centerX??t.x+.5*t.width,s=i?.centerY??t.y+.5*t.height,r=i?.innerRadius??0,n=i?.outerRadius??Math.hypot(.5*t.width,.5*t.height)/Math.SQRT2;return e.createRadialGradient(a,s,r,a,s,n)}createSvgGradient(e){let t=e.x+.5*e.width,i=e.y+.5*e.height,a=(0,s.FJ)("radialGradient");return a.setAttribute("cx",String(t)),a.setAttribute("cy",String(i)),a.setAttribute("r",String(Math.hypot(.5*e.width,.5*e.height)/Math.SQRT2)),a.setAttribute("gradientUnits","userSpaceOnUse"),a}},ew=function(e,t){w(e,t).optional=!0},eC=class{handleUnknownProperties(e,t){}set(e){let{className:t=this.constructor.name}=this.constructor;if("object"!=typeof e)return s.Vy.warn(`unable to set ${t} - expecting a properties object`),this;let i=new Set(Object.keys(e));for(let t of T(this))if(i.has(t)){let a=e[t];if(eN(this[t]))if(this[t]instanceof ek){let e=this[t].reset(a);null!=e?this[t]=e:s.Vy.warn(`unable to set [${t}] - expecting a properties array`)}else this[t].set(a);else(0,s.Qd)(a)?this[t]=R(a,this[t]??{}):this[t]=a;i.delete(t)}for(let a of(this.handleUnknownProperties(i,e),i))s.Vy.warn(`unable to set [${a}] in ${t} - property is unknown`);return this}toJson(){return T(this).reduce((e,t)=>{let i=this[t];return e[t]=eN(i)?i.toJson():i,e},{})}},ek=class e extends Array{constructor(e,...t){super(t.length),Object.defineProperty(this,"itemFactory",{value:e?.prototype?.constructor?.name?t=>new e().set(t):e,enumerable:!1,configurable:!1}),this.set(t)}set(e){if((0,s.cy)(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=this.itemFactory(e[t])}return this}reset(t){if(Array.isArray(t))return new e(this.itemFactory,...t)}toJson(){return this.map(e=>e?.toJson?.()??e)}};function eN(e){return e instanceof eC||e instanceof ek}var eT=class extends eC{constructor(){super(...arguments),this.color="black"}};function eE(e){return e.flatMap((t,i)=>{let{stop:a}=t,s=e.at(i+1)?.color;return null!=s?[t,{stop:a,color:s}]:[t]})}function eO(e,t,i,a="continuous"){let r,n=e.map(e=>"string"==typeof e?{color:e}:e);if(0===n.length){let e=+("discrete"===a),i=t.map((t,i,{length:a})=>({stop:(i+e)/(a-1+e),color:t}));return"discrete"===a?eE(i):i}if(!function(e){let t;for(let i of e)if(i?.stop!=null){if(null!=t&&i.stop<t)return!1;t=i.stop}return!0}(n))return s.Vy.warnOnce("[fills] must have the stops defined in ascending order"),[];let o=Math.min(...i),l=Math.max(...i),h="discrete"===a,d=new Float64Array(n.length),u=0,c=-1;for(let e=0;e<n.length;e+=1){let t=n[e];if(e>=c){c=n.length-1;for(let t=e+1;t<n.length;t+=1)if(n[t]?.stop!=null){c=t;break}}let i=t?.stop;if(null==i){let t=n[u]?.stop,a=n[c]?.stop,s=t??o,r=h&&null==t?1:0;i=s+((a??l)-s)*(e-u+r)/(c-u+r)}else u=e;d[e]=Math.max(0,Math.min(1,(i-o)/(l-o)))}let p=n.find(e=>null!=e.color)?.color,g=n.map((e,i)=>{let a=e?.color,s=d[i];return null!=a?p=a:null!=p?a=p:(null==r&&((r=new eS).domain=[0,1],r.range=t),a=r.convert(s)),{stop:s,color:a}});return"discrete"===a?eE(g):g}l([ew],eT.prototype,"stop",2),l([ew],eT.prototype,"color",2);var ej=class{constructor(e,t){this.imageLoader=e,this._cache=void 0,this.url=t.url,this.backgroundFill=t.backgroundFill??"black",this.backgroundFillOpacity=t.backgroundFillOpacity??1,this.repeat=t.repeat??"no-repeat",this.width=t.width,this.height=t.height,this.fit=t.fit??"stretch",this.rotation=t.rotation??0}createCanvasImage(e,t,i,a){if(!t)return null;let[r,n]=this.getSize(t.width,t.height,i,a);return r<1||n<1?(s.Vy.warnOnce("Image fill is too small to render, ignoring."),null):e.createPattern(t,this.repeat)}getSize(e,t,i,a){let{fit:s}=this,r=e,n=t,o=1,l=i/a,h=e/t;return"stretch"===s||0===e||0===t?(r=i,n=a):"contain"===s?o=h>l?i/e:a/t:"cover"===s&&(o=h>l?a/t:i/e),[Math.max(1,r*o),Math.max(1,n*o)]}setImageTransform(e,t){if("string"==typeof e)return;let{url:i,rotation:a,width:s,height:r}=this,n=this.imageLoader?.loadImage(i);if(!n)return;let o=ec(a),l=Math.cos(o),h=Math.sin(o),[d,u]=this.getSize(n.width,n.height,s??t.width,r??t.height),c=d/n.width,p=u/n.height,g=t.x+t.width/2,m=t.y+t.height/2;e?.setTransform(new DOMMatrix([l*c,h*p,-h*c,l*p,g-(l*d-h*u)/2,m-(h*d+l*u)/2]))}createPattern(e,t,i,a){let s=this.width??t,r=this.height??i,n=this._cache;if(null!=n&&n.ctx===e&&n.width===s&&n.height===r)return n.pattern;let o=this.imageLoader?.loadImage(this.url,a),l=this.createCanvasImage(e,o,s,r);return null==l?this.backgroundFill:(this._cache={ctx:e,pattern:l,width:s,height:r},l)}toSvg(e,t){let{url:i,rotation:a,backgroundFill:r,backgroundFillOpacity:n}=this,{x:o,y:l,width:h,height:d}=e,u=(0,s.FJ)("pattern");u.setAttribute("viewBox",`0 0 ${h} ${d}`),u.setAttribute("x",String(o)),u.setAttribute("y",String(l)),u.setAttribute("width",String(h)),u.setAttribute("height",String(d)),u.setAttribute("patternUnits","userSpaceOnUse");let c=(0,s.FJ)("rect");c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("width",String(h)),c.setAttribute("height",String(d)),c.setAttribute("fill",r),c.setAttribute("fill-opacity",String(n)),u.appendChild(c);let p=(0,s.FJ)("image");return p.setAttribute("href",i),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(h)),p.setAttribute("height",String(d)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("transform",`scale(${1/t}) rotate(${a}, ${h/2}, ${d/2})`),u.appendChild(p),u}},ez=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,eR=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,eP=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,eF=/^[01]/,eB={z:[],h:[eR],v:[eR],m:[eR,eR],l:[eR,eR],t:[eR,eR],s:[eR,eR,eR,eR],q:[eR,eR,eR,eR],c:[eR,eR,eR,eR,eR,eR],a:[eR,eR,eR,eF,eF,eR,eR]};function eG(e,t,i,a){let s=e-i,r=t-a;return s*s+r*r}function eV(e,t,i,a,s,r,n){if(i===s&&a===r)return Math.min(n,eG(e,t,i,a));let o=s-i,l=r-a,h=Math.max(0,Math.min(1,((e-i)*o+(t-a)*l)/(o*o+l*l)));return Math.min(n,eG(e,t,i+h*o,a+h*l))}function eY(e,t,i,a,s,r,n,o){let l=(i-e)*(o-r)-(a-t)*(n-s);if(0===l)return 0;let h=((n-s)*(t-r)-(e-s)*(o-r))/l,d=((i-e)*(t-r)-(a-t)*(e-s))/l;return+(h>=0&&h<=1&&d>=0&&d<=1)}function eU(e,t,i,a){return[-e+3*t-3*i+a,3*e-6*t+3*i,-3*e+3*t,e]}function e_(e,t,i,a,s,r,n,o,l,h){if(isNaN(e)||isNaN(t))return 0;r&&([s,a]=[a,s]);let d=(h-o)/(l-n),u=o-d*n,c=Math.pow(d,2)+1,p=2*(d*(u-t)-e),g=Math.pow(p,2)-4*c*(Math.pow(e,2)+Math.pow(u-t,2)-Math.pow(i,2));if(g<0)return 0;let m=0;return[(-p+Math.sqrt(g))/2/c,(-p-Math.sqrt(g))/2/c].forEach(i=>{i>=Math.min(n,l)&&i<=Math.max(n,l)&&en(Math.atan2(d*i+u-t,i-e),a,s)&&m++}),m}function e$(e,t,i,a,s){return(1-s)**3*e+3*(1-s)**2*s*t+3*(1-s)*s**2*i+s**3*a}function eW(e,t,i,a,s){if(s<=Math.min(e,a))return e<a?0:1;if(s>=Math.max(e,a))return+(e<a);let r=0,n=1,o=NaN;for(let l=0;l<12;l+=1)e$(e,t,i,a,o=(r+n)/2)<s?r=o:n=o;return o}function eH(e,t,i,a,s,r,n,o,l){let h=(1-l)*e+l*i,d=(1-l)*t+l*a,u=(1-l)*i+l*s,c=(1-l)*a+l*r,p=(1-l)*s+l*n,g=(1-l)*r+l*o,m=(1-l)*h+l*u,y=(1-l)*d+l*c,f=(1-l)*u+l*p,b=(1-l)*c+l*g,x=(1-l)*m+l*f,M=(1-l)*y+l*b;return[[{x:e,y:t},{x:h,y:d},{x:m,y:y},{x:x,y:M}],[{x:x,y:M},{x:f,y:b},{x:p,y:g},{x:n,y:o}]]}function eZ(e,t,i,a){let s=-e+3*t-3*i+a,r=2*(e-2*t+i),n=-e+t;if(0===s){if(0!==r){let e=-n/r;if(e>0&&e<1)return[e]}return[]}let o=r*r-4*s*n;if(o>=0){let e=Math.sqrt(o);return[(-r+e)/(2*s),(-r-e)/(2*s)].filter(e=>e>0&&e<1)}return[]}function eK(e,t,i,a,s,r,n,o){return[...eZ(e,i,s,n),...eZ(t,a,r,o)]}var eX=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commands.length}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,i,a){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+a),this.lineTo(e,t+a),this.closePath()}appendSvg(e){let t,i,a=0,s=0,r=0,n=0;for(let{command:o,params:l}of e){t??(t=l[0]),i??(i=l[1]);let e=o===o.toLowerCase(),h=e?t:0,d=e?i:0;switch(o.toLowerCase()){case"m":this.moveTo(h+l[0],d+l[1]),t=h+l[0],i=d+l[1],a=t,s=i;break;case"c":this.cubicCurveTo(h+l[0],d+l[1],h+l[2],d+l[3],h+l[4],d+l[5]),r=h+l[2],n=d+l[3],t=h+l[4],i=d+l[5];break;case"s":this.cubicCurveTo(t+t-r,i+i-n,h+l[0],d+l[1],h+l[2],d+l[3]),r=h+l[0],n=d+l[1],t=h+l[2],i=d+l[3];break;case"q":this.cubicCurveTo((h+2*l[0])/3,(d+2*l[1])/3,(2*l[0]+l[2])/3,(2*l[1]+l[3])/3,l[2],l[3]),r=l[0],n=l[1],t=l[2],i=l[3];break;case"t":this.cubicCurveTo((t+2*(t+t-r))/3,(i+2*(i+i-n))/3,(2*(t+t-r)+l[0])/3,(2*(i+i-n)+l[1])/3,l[0],l[1]),r=t+t-r,n=i+i-n,t=l[0],i=l[1];break;case"a":this.ellipse(t,i,l[0],l[1],l[2]*Math.PI/180,l[3],l[4],h+l[5],d+l[6]),t=h+l[5],i=d+l[6];break;case"h":this.lineTo(h+l[0],i),t=h+l[0];break;case"l":this.lineTo(h+l[0],d+l[1]),t=h+l[0],i=d+l[1];break;case"v":this.lineTo(t,d+l[0]),i=d+l[0];break;case"z":this.closePath(),t=a,i=s;break;default:throw Error(`Could not translate command '${o}' with '${l.join(" ")}'`)}}}ellipse(e,t,i,a,s,r,n,o,l){let h=(e-o)/2,d=(t-l)/2,u=Math.sin(s),c=Math.cos(s),p=c*h+u*d,g=-u*h+c*d,m=p/(i=Math.abs(i)),y=g/(a=Math.abs(a)),f=m*m+y*y,b=(e+o)/2,x=(t+l)/2,M=0,v=0;f>=1?(i*=f=Math.sqrt(f),a*=f):(f=Math.sqrt(1/f-1),r===n&&(f=-f),b+=c*(M=f*i*y)-u*(v=-f*a*m),x+=u*M+c*v);let S=Math.atan2((g-v)/a,(p-M)/i),D=Math.atan2((-g-v)/a,(-p-M)/i)-S;this.ellipticalArc(b,x,i,a,s,S,S+D,!!(1-n))}ellipticalArc(e,t,i,a,s,r,n,o){o&&([r,n]=[n,r]);let l=[],h=Math.sin(r),d=Math.cos(r),u=Math.sin(s),c=Math.cos(s),p=c*d*i-u*h*a,g=u*d*i+c*h*a,m=-c*h*i-u*d*a,y=-u*h*i+c*d*a;l.push(p+e,g+t),n-=r;let f=Math.PI/2,b=Math.floor((n=ea(n))/f),x=n%f;for(let i=0;i<b;i++)l.push(p+.5522847498307935*m+e,g+.5522847498307935*y+t,.5522847498307935*p+m+e,.5522847498307935*g+y+t,m+e,y+t),[p,m]=[m,-p],[g,y]=[y,-g];if(x>0){let i=Math.sin(x),a=Math.cos(x),s=4/3*Math.tan(x/4),r=a+s*i,n=i-s*a;l.push(p+m*s+e,g+y*s+t,p*r+m*n+e,g*r+y*n+t,p*a+m*i+e,g*a+y*i+t)}if(o)for(let e=0,t=l.length-2;e<t;e+=2,t-=2)[l[e],l[t]]=[l[t],l[e]],[l[e+1],l[t+1]]=[l[t+1],l[e+1]];for(let e=2;e<l.length;e+=6){let[t,i,a,s,r,n]=l.slice(e,e+6);this.cubicCurveTo(t,i,a,s,r,n)}}roundRect(e,t,i,a,s){s=Math.min(s,i/2,a/2),this.moveTo(e,t+s),this.arc(e+s,t+s,s,Math.PI,1.5*Math.PI),this.lineTo(e+s,t),this.lineTo(e+i-s,t),this.arc(e+i-s,t+s,s,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+s),this.lineTo(e+i,t+a-s),this.arc(e+i-s,t+a-s,s,0,Math.PI/2),this.lineTo(e+i-s,t+a),this.lineTo(e+s,t+a),this.arc(e+ +s,t+a-s,s,Math.PI/2,Math.PI),this.lineTo(e,t+a-s),this.closePath()}arc(e,t,i,a,s,r){this.openedPath=!0,this.path2d.arc(e,t,i,a,s,r),this.commands.push(2),this.params.push(e,t,i,a,s,+!!r)}cubicCurveTo(e,t,i,a,s,r){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,a,s,r),this.commands.push(3),this.params.push(e,t,i,a,s,r)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){let i=this.commands,a=this.params,s=i.length,r=NaN,n=NaN,o=0,l=0,h=0;for(let d=0,u=0;d<s;d++)switch(i[d]){case 0:h+=eY(r,n,o,l,-1e4,-1e4,e,t),r=o=a[u++],n=l=a[u++];break;case 1:h+=eY(o,l,a[u++],a[u++],-1e4,-1e4,e,t),o=a[u-2],l=a[u-1];break;case 3:h+=function(e,t,i,a,s,r,n,o,l,h,d,u){let c=0,p=-1e4-u,g=d- -1e4,m=eU(e,i,s,n),y=eU(t,a,r,o),f=p*m[0]+g*y[0],b=p*m[1]+g*y[1];for(let e of function(e,t,i,a){if(0===e)return function(e,t,i){if(0===e){let e=-i/t;return 0!==t&&e>=0&&e<=1?[e]:[]}let a=t*t-4*e*i,s=[];if(0===a){let i=-t/(2*e);i>=0&&i<=1&&s.push(i)}else if(a>0){let i=Math.sqrt(a),r=(-t-i)/(2*e),n=(-t+i)/(2*e);r>=0&&r<=1&&s.push(r),n>=0&&n<=1&&s.push(n)}return s}(t,i,a);let s=t/e,r=i/e,n=(3*r-s*s)/9,o=(9*s*r-a/e*27-2*s*s*s)/54,l=n*n*n+o*o,h=1/3,d=[];if(l>=0){let e=Math.sqrt(l),t=Math.sign(o+e)*Math.pow(Math.abs(o+e),h),i=Math.sign(o-e)*Math.pow(Math.abs(o-e),h),a=Math.abs(Math.sqrt(3)*(t-i)/2),r=-h*s+(t+i);if(r>=0&&r<=1&&d.push(r),0===a){let e=-h*s-(t+i)/2;e>=0&&e<=1&&d.push(e)}}else{let e=Math.acos(o/Math.sqrt(-n*n*n)),t=h*s,i=2*Math.sqrt(-n),a=i*Math.cos(h*e)-t,r=i*Math.cos(h*(e+2*Math.PI))-t,l=i*Math.cos(h*(e+4*Math.PI))-t;a>=0&&a<=1&&d.push(a),r>=0&&r<=1&&d.push(r),l>=0&&l<=1&&d.push(l)}return d}(f,b,p*m[2]+g*y[2],p*m[3]+g*y[3]+(-1e4*(u- -1e4)-h*(d-l)))){let t,i=e*e,a=e*i,s=m[0]*a+m[1]*i+m[2]*e+m[3],r=y[0]*a+y[1]*i+y[2]*e+y[3];(t=l===d?(r-h)/(u-h):(s-l)/(d-l))>=0&&t<=1&&c++}return c}(o,l,a[u++],a[u++],a[u++],a[u++],a[u++],a[u++],-1e4,-1e4,e,t),o=a[u-2],l=a[u-1];break;case 2:{let i=a[u++],s=a[u++],n=a[u++],d=a[u++],c=a[u++];h+=e_(i,s,n,d,c,!!a[u++],-1e4,-1e4,e,t),isNaN(r)||(h+=eY(o,l,i+Math.cos(d)*n,s+Math.sin(d)*n,-1e4,-1e4,e,t)),o=i+Math.cos(c)*n,l=s+Math.sin(c)*n;break}case 4:h+=eY(r,n,o,l,-1e4,-1e4,e,t)}return h%2==1}distanceSquared(e,t){let i=1/0,a=this.commands,r=this.params,n=a.length,o=NaN,l=NaN,h=0,d=0;for(let u=0,c=0;u<n;u++)switch(a[u]){case 0:h=o=r[c++],d=l=r[c++];break;case 1:i=eV(e,t,h,d,r[c++],r[c++],i);break;case 3:s.Vy.error("Command.Curve distanceSquare not implemented");break;case 2:{let a=r[c++],s=r[c++],n=r[c++],o=r[c++],l=r[c++],u=a+Math.cos(o)*n,p=s+Math.sin(o)*n,g=!!r[c++];i=eV(e,t,h,d,u,p,i),i=function(e,t,i,a,s,r,n,o,l){if(o&&([n,r]=[r,n]),!en(Math.atan2(t-a,e-i),r,n)){let n=i+Math.cos(r)*s,o=a+Math.sin(r)*s,h=i+Math.cos(r)*s,d=a+Math.sin(r)*s;return Math.min(l,eG(e,t,n,o),eG(e,t,h,d))}let h=s-Math.sqrt(eG(e,t,i,a));return Math.min(l,h*h)}(e,t,a,s,n,o,l,g,i),h=a+Math.cos(l)*n,d=s+Math.sin(l)*n;break}case 4:i=eV(e,t,h,d,o,l,i)}return i}toSVG(e=(e,t)=>({x:e,y:t})){let t=[],{commands:i,params:a}=this,s=(i,...a)=>{t.push(i);for(let i=0;i<a.length;i+=2){let{x:s,y:r}=e(a[i],a[i+1]);t.push(s,r)}},r=0;for(let e of i)switch(e){case 0:s("M",a[r++],a[r++]);break;case 1:s("L",a[r++],a[r++]);break;case 3:s("C",a[r++],a[r++],a[r++],a[r++],a[r++],a[r++]);break;case 2:{let e=a[r++],i=a[r++],n=a[r++],o=a[r++],l=a[r++],h=a[r++],d=h?o-l:l-o;d<0&&(d+=2*Math.ceil(-d/(2*Math.PI))*Math.PI),h&&(d=-d);let u=Math.max(Math.ceil(Math.abs(d)/(Math.PI/2)),1),c=d/u,p=4/3*Math.tan(c/4);s(0===t.length?"M":"L",e+Math.cos(o)*n,i+Math.sin(o)*n);for(let t=0;t<u;t+=1){let a=o+c*(t+0),r=o+c*(t+1),l=n*Math.sin(a),h=n*Math.cos(a),d=n*Math.sin(r),u=n*Math.cos(r);s("C",e+h-p*l,i+l+p*h,e+u+p*d,i+d-p*u,e+u,i+d)}break}case 4:t.push("Z")}return t.join(" ")}computeBBox(){let{commands:e,params:t}=this,[i,a,s,r]=[1/0,1/0,-1/0,-1/0],[n,o]=[NaN,NaN],[l,h]=[NaN,NaN],d=(e,t,l)=>{i=Math.min(t,i),a=Math.min(e,a),s=Math.max(e,s),r=Math.max(t,r),l&&([n,o]=[e,t])},u=(e,t,i,a,s)=>{d(e+i*Math.cos(a),t+i*Math.sin(a),s)},c=0;for(let i of e)switch(i){case 0:d(t[c++],t[c++],!0),[l,h]=[n,o];break;case 1:d(t[c++],t[c++],!0);break;case 3:{let e=t[c++],i=t[c++],a=t[c++],s=t[c++],r=t[c++],l=t[c++];eK(n,o,e,i,a,s,r,l).forEach(t=>{d(e$(n,e,a,r,t),e$(o,i,s,l,t))}),d(r,l,!0);break}case 2:{let e=t[c++],i=t[c++],a=t[c++],s=ea(t[c++]),r=ea(t[c++]),n=t[c++];u(e,i,a,s);let[o,l]=n?[r,s]:[s,r];for(let t of[0,Math.PI/2,Math.PI,3*Math.PI/2])(o<l&&o<=t&&t<=l||o>l&&(o<=t||t<=l))&&u(e,i,a,t);u(e,i,a,r,!0);break}case 4:[n,o]=[l,h]}return new y(a,i,s-a,r-i)}};function eQ(e,t,i){let a=Math.round(t*e)/e;return null==i?a:0===i?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-a}function eq(e,t){return Math.floor(t*e)/e}function eJ(e,t,i){let{width:a,height:s,padding:r,strokeWidth:n}=t,o=a/2,l=s/2,h=Math.max(1,a-r-n/2),d=Math.max(1,s-r-n/2),u=!1;for(let[t,a]of i){let i=o+(t-.5)*h,s=l+(a-.5)*d;u?e.lineTo(i,s):e.moveTo(i,s),u=!0}e.closePath()}var e0={circles(e,{width:t,strokeWidth:i,padding:a}){let s=t/2,r=Math.max(1,s-a-i/2);e.arc(s,s,r,0,2*Math.PI)},squares(e,{width:t,height:i,pixelRatio:a,padding:s,strokeWidth:r}){let n=s+r/2;e.moveTo(eQ(a,n),eQ(a,n)),e.lineTo(eQ(a,t-n),eQ(a,n)),e.lineTo(eQ(a,t-n),eQ(a,i-n)),e.lineTo(eQ(a,n),eQ(a,i-n)),e.closePath()},triangles(e,t){eJ(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){eJ(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,{width:t,height:i,padding:a}){let s=Math.max(1,(t-a)/2),r=s/2,n=Math.PI/2;for(let a=0;a<10;a++){let o=a%2==0?s:r,l=a*Math.PI/5-n,h=t/2+Math.cos(l)*o,d=i/2+Math.sin(l)*o;e.lineTo(h,d)}e.closePath()},hearts(e,{width:t,height:i,padding:a}){let s=Math.max(1,t/4-a/2),r=t/2,n=i/2+s/2;e.arc(r-s,n-s,s,eo(130),eo(330)),e.arc(r+s,n-s,s,eo(220),eo(50)),e.lineTo(r,n+s),e.closePath()},crosses(e,t){eJ(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,{width:t,height:i,pixelRatio:a,strokeWidth:s}){let r=eQ(a,t/2)-s%2/2;e.moveTo(r,0),e.lineTo(r,i)},"horizontal-lines"(e,{width:t,height:i,pixelRatio:a,strokeWidth:s}){let r=eQ(a,i/2)-s%2/2;e.moveTo(0,r),e.lineTo(t,r)},"forward-slanted-lines"(e,{width:t,height:i,strokeWidth:a}){let s=Math.atan2(i,t),r=a*Math.cos(s),n=a*Math.sin(s);e.moveTo(-r,n),e.lineTo(r,-n),e.moveTo(-r,i+n),e.lineTo(t+r,-n),e.moveTo(t-r,i+n),e.lineTo(t+r,i-n)},"backward-slanted-lines"(e,{width:t,height:i,strokeWidth:a}){let s=Math.atan2(i,t),r=a*Math.cos(s),n=a*Math.sin(s);e.moveTo(t-r,-n),e.lineTo(t+r,n),e.moveTo(-r,-n),e.lineTo(t+r,i+n),e.moveTo(-r,i-n),e.lineTo(r,i+n)}},e1=class{constructor(e){this._cache=void 0,this.width=Math.max(e?.width??10,1),this.height=Math.max(e?.height??10,1),this.fill=e.fill??"none",this.fillOpacity=e.fillOpacity??1,this.backgroundFill=e.backgroundFill??"none",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.stroke=e.stroke??"black",this.strokeOpacity=e.strokeOpacity??1,this.strokeWidth=e.strokeWidth??1,this.padding=e.padding??1,this.pattern=e.pattern??"forward-slanted-lines",this.rotation=e.rotation??0,this.scale=e.scale??1,this.path=e.path}getPath(e){let{pattern:t,width:i,height:a,padding:r,strokeWidth:n,path:o}=this,l=new eX,h=function(e){let t;if(!e)return;let i=[],a=0;for(;a<e.length;){let r,n=ez.exec(e.slice(a));if(null==n){if(!t)return void s.Vy.warnOnce(`Invalid SVG path, error at index ${a}: Missing command.`);r=t}else r=n[1],a+=n[0].length;let o=function(e,t,i){let a=eB[e.toLocaleLowerCase()],r={command:e,params:[]};for(let n of a){let a=t.slice(i),o=n.exec(a);if(null!=o){r.params.push(parseFloat(o[0])),i+=o[0].length;let e=eP.exec(a.slice(o[0].length));null!=e&&(i+=e[0].length)}else if(1!==r.params.length)return void s.Vy.warnOnce(`Invalid SVG path, error at index ${i}: No path segment parameters for command [${e}]`);else break}return[i,r]}(r,e,a);if(!o)return;a=o[0],t=r,i.push(o[1])}return i}(o);return h?l.appendSvg(h):e0[t](l,{width:i,height:a,pixelRatio:e,strokeWidth:n,padding:r}),l}renderStroke(e,t){let{stroke:i,strokeWidth:a,strokeOpacity:s}=this;a&&(t.strokeStyle=i,t.lineWidth=a,t.globalAlpha=s,t.stroke(e))}renderFill(e,t){let{fill:i,fillOpacity:a}=this;"none"!==i&&(t.fillStyle=i,t.globalAlpha=a,t.fill(e))}createCanvasPattern(e,t){let{width:i,height:a,scale:r,backgroundFill:n,backgroundFillOpacity:o}=this;if(i*r<1||a*r<1)return s.Vy.warnOnce("Pattern fill is too small to render, ignoring."),null;let l=new D({width:i,height:a,pixelRatio:t*r}),h=l.context;"none"!==n&&(h.fillStyle=n,h.globalAlpha=o,h.fillRect(0,0,i,a));let d=this.getPath(t).getPath2D();this.renderFill(d,h),this.renderStroke(d,h);let u=e.createPattern(l.canvas,"repeat");return this.setPatternTransform(u,t),l.destroy(),u}setPatternTransform(e,t,i=0,a=0){let s=ec(this.rotation),r=1/t,n=Math.cos(s)*r,o=Math.sin(s)*r;e?.setTransform(new DOMMatrix([n,o,-o,n,i,a]))}createPattern(e,t){if(null!=this._cache&&this._cache.ctx===e&&this._cache.pixelRatio===t)return this._cache.pattern;let i=this.createCanvasPattern(e,t);if(null!=i)return this._cache={ctx:e,pattern:i,pixelRatio:t},i}toSvg(){let{width:e,height:t,fill:i,fillOpacity:a,backgroundFill:r,backgroundFillOpacity:n,stroke:o,strokeWidth:l,strokeOpacity:h,rotation:d,scale:u}=this,c=(0,s.FJ)("pattern");c.setAttribute("viewBox",`0 0 ${e} ${t}`),c.setAttribute("width",String(e)),c.setAttribute("height",String(t)),c.setAttribute("patternUnits","userSpaceOnUse");let p=(0,s.FJ)("rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(e)),p.setAttribute("height",String(t)),p.setAttribute("fill",r),p.setAttribute("fill-opacity",String(n)),c.appendChild(p);let g=(0,s.FJ)("path");return g.setAttribute("fill",i),g.setAttribute("fill-opacity",String(a)),g.setAttribute("stroke-opacity",String(h)),g.setAttribute("stroke",o),g.setAttribute("stroke-width",String(l)),g.setAttribute("transform",`rotate(${d}) scale(${u})`),g.setAttribute("d",this.getPath(1).toSVG()),c.appendChild(g),c}};function e2(e){return(0,s.Gv)(e)&&"gradient"==e.type}function e4(e){return(0,s.cy)(e)&&e.every(e=>"string"==typeof e)}function e3(e){return null!==e&&(0,s.Gv)(e)&&"pattern"==e.type}function e5(e){return null!==e&&(0,s.Gv)(e)&&"image"==e.type}function e9(e){return e2(e)||e3(e)}var e6=class e extends ee{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=e.defaultStyles.fill,this.stroke=e.defaultStyles.stroke,this.strokeWidth=e.defaultStyles.strokeWidth,this.lineDash=e.defaultStyles.lineDash,this.lineDashOffset=e.defaultStyles.lineDashOffset,this.lineCap=e.defaultStyles.lineCap,this.lineJoin=e.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=e.defaultStyles.opacity,this.fillShadow=e.defaultStyles.fillShadow}restoreOwnStyles(){let{defaultStyles:e}=this.constructor;Object.assign(this,e)}getGradient(e){if(e2(e))return this.createGradient(e)}createGradient(e){let{colorSpace:t="rgb",gradient:i="linear",colorStops:a,rotation:s=0,reverse:r=!1}=e;if(null==a)return;let n=eO(a,["black"],[0,1]);switch(r&&(n=n.map(e=>({color:e.color,stop:1-e.stop})).reverse()),i){case"linear":return new eL(t,n,s);case"radial":return new eA(t,n);case"conic":return new eI(t,n,s)}}getPattern(e){if(e3(e))return this.createPattern(e)}createPattern(e){return new e1(e)}getImage(e){if(e5(e))return this.createImage(e)}createImage(e){return new ej(this.imageLoader,e)}onFillChange(){"object"==typeof this.fill&&O(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){return eQ(this.layerManager?.canvas?.pixelRatio??1,e,t)}preRender(e,t){return this.dirty&&(this.cachedDefaultGradientFillBBox=void 0),super.preRender(e,t)}fillStroke(e,t){this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){let{fill:i,fillImage:a}=this;if(i&&"none"!==i){let{globalAlpha:i}=e;a&&(e.globalAlpha=a.backgroundFillOpacity,e.fillStyle=a.backgroundFill,this.executeFill(e,t),e.globalAlpha=i),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=i}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,t){t?e.fill(t):e.fill()}applyFillAndAlpha(e){let{fill:t,fillGradient:i,fillPattern:a,fillImage:s,fillOpacity:r,opacity:n}=this;if(e.globalAlpha*=n*r,i){let{fillBBox:t=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:a}=this;e.fillStyle=i.createGradient(e,t,a)??"black"}else if(a){let{x:t,y:i}=this.getBBox(),s=this.layerManager?.canvas?.pixelRatio??1,r=a.createPattern(e,s);a.setPatternTransform(r,s,t,i),r?e.fillStyle=r:(e.fillStyle=a.fill,e.globalAlpha*=a.fillOpacity)}else if(s){let t=this.getBBox(),i=s.createPattern(e,t.width,t.height,this);s.setImageTransform(i,t),e.fillStyle=i??"transparent"}else e.fillStyle="string"==typeof t?t:"black"}applyStrokeAndAlpha(e){let{stroke:t,strokeOpacity:i,strokeGradient:a,opacity:s}=this;e.strokeStyle=a?.createGradient(e,this.getBBox())??("string"==typeof t?t:void 0)??"black",e.globalAlpha*=s*i}applyShadow(e){let t=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*t,e.shadowOffsetY=i.yOffset*t,e.shadowBlur=i.blur*t)}renderStroke(e,t){let{stroke:i,strokeWidth:a,lineDash:s,lineDashOffset:r,lineCap:n,lineJoin:o,miterLimit:l}=this;if(i&&a){let{globalAlpha:i}=e;this.applyStrokeAndAlpha(e),e.lineWidth=a,s&&e.setLineDash(s),r&&(e.lineDashOffset=r),n&&(e.lineCap=n),o&&(e.lineJoin=o),null!=l&&(e.miterLimit=l),this.executeStroke(e,t),e.globalAlpha=i}}executeStroke(e,t){t?e.stroke(t):e.stroke()}getDefaultGradientFillBBox(){return null==this.cachedDefaultGradientFillBBox&&(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e,t){let{fill:i,fillOpacity:a}=this;if("string"==typeof i)e.setAttribute("fill",i);else if(e2(i)&&this.fillGradient){t??(t=[]);let i=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),a=(0,s.lk)();i.setAttribute("id",a),t.push(i),e.setAttribute("fill",`url(#${a})`)}else if(e3(i)&&this.fillPattern){t??(t=[]);let i=this.fillPattern.toSvg(),a=(0,s.lk)();i.setAttribute("id",a),t.push(i),e.setAttribute("fill",`url(#${a})`)}else if(e5(i)&&this.fillImage){t??(t=[]);let i=this.layerManager?.canvas?.pixelRatio??1,a=this.fillImage.toSvg(this.getBBox(),i),r=(0,s.lk)();a.setAttribute("id",r),t.push(a),e.setAttribute("fill",`url(#${r})`)}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(a)),t}applySvgStrokeAttributes(e){let{stroke:t,strokeOpacity:i,strokeWidth:a,lineDash:s,lineDashOffset:r}=this;if(null!=t&&(e.setAttribute("stroke","string"==typeof t?t:"none"),e.setAttribute("stroke-opacity",String(i)),e.setAttribute("stroke-width",String(a))),s?.some(e=>0!==e)===!0){let t=s.length%2==1?[...s,...s]:s;e.setAttribute("stroke-dasharray",t.join(" ")),e.setAttribute("stroke-dashoffset",String(r))}}};e6.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},l([Z()],e6.prototype,"fillOpacity",2),l([Z()],e6.prototype,"strokeOpacity",2),l([Z({equals:O,changeCb:e=>e.onFillChange()})],e6.prototype,"fill",2),l([Z({equals:O,changeCb:e=>e.onStrokeChange()})],e6.prototype,"stroke",2),l([Z()],e6.prototype,"strokeWidth",2),l([X()],e6.prototype,"lineDash",2),l([Z()],e6.prototype,"lineDashOffset",2),l([Z()],e6.prototype,"lineCap",2),l([Z()],e6.prototype,"lineJoin",2),l([Z()],e6.prototype,"miterLimit",2),l([Z({convertor:e=>(0,s.qE)(0,e,1)})],e6.prototype,"opacity",2),l([Z({equals:H,checkDirtyOnAssignment:!0})],e6.prototype,"fillShadow",2),l([Z({equals:u.equals,changeCb:e=>e.onFillChange()})],e6.prototype,"fillBBox",2),l([Z({equals:O,changeCb:e=>e.onFillChange()})],e6.prototype,"fillParams",2);var e8=e6,e7=[1,0,0,1,0,0],te=class e{get e(){return[...this.elements]}constructor(e=e7){this.elements=[...e]}setElements(e){let t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){let e=this.elements;return(0,s.YX)(e[0],1)&&(0,s.YX)(e[1],0)&&(0,s.YX)(e[2],0)&&(0,s.YX)(e[3],1)&&(0,s.YX)(e[4],0)&&(0,s.YX)(e[5],0)}AxB(e,t,i){let a=e[0]*t[0]+e[2]*t[1],s=e[1]*t[0]+e[3]*t[1],r=e[0]*t[2]+e[2]*t[3],n=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];(i=i??e)[0]=a,i[1]=s,i[2]=r,i[3]=n,i[4]=o,i[5]=l}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(t){let i=Array(6);return t instanceof e?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new e(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){let t=this.elements,i=t[0],a=t[1],s=t[2],r=t[3],n=t[4],o=t[5],l=1/(i*r-a*s);return i*=l,a*=l,s*=l,new e([r*=l,-a,-s,i,s*o-r*n,a*n-i*o])}invertSelf(){let e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],r=e[4],n=e[5],o=1/(t*s-i*a);return t*=o,i*=o,a*=o,s*=o,e[0]=s,e[1]=-i,e[2]=-a,e[3]=t,e[4]=a*n-s*r,e[5]=i*r-t*n,this}transformPoint(e,t){let i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){let i=this.elements,a=i[0],s=i[1],r=i[2],n=i[3],o=.5*e.width,l=.5*e.height,h=e.x+o,d=e.y+l,u=Math.abs(o*a)+Math.abs(l*r),c=Math.abs(o*s)+Math.abs(l*n);return t??(t=new y(0,0,0,0)),t.x=h*a+d*r+i[4]-u,t.y=h*s+d*n+i[5]-c,t.width=u+u,t.height=c+c,t}toContext(e){if(this.identity)return;let t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static updateTransformMatrix(e,t,i,a,s,r,n){let o,l,h,d;1===t&&1===i?(o=0,l=0):(o=n?.scalingCenterX??0,l=n?.scalingCenterY??0);let u=Math.cos(a),c=Math.sin(a);0===a?(h=0,d=0):(h=n?.rotationCenterX??0,d=n?.rotationCenterY??0);let p=o*(1-t)-h,g=l*(1-i)-d;return e.setElements([u*t,c*t,-c*i,u*i,u*p-c*g+h+s,c*p+u*g+d+r]),e}};function tt(e){return!0===e.constructor[ti]}var ti=Symbol("isMatrixTransform");function ta(e){var t;let i=e;if(!0===e[ti])return e;let a=Symbol("matrix_combined_transform");class r extends i{constructor(){super(...arguments),this[t]=new te,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}onChangeDetection(e){super.onChangeDetection(e),this.markDirtyTransform()}updateMatrix(e){}computeTransformMatrix(){this._dirtyTransform&&(this[a].setElements(e7),this.updateMatrix(this[a]),this._dirtyTransform=!1)}toParent(e){return(this.computeTransformMatrix(),this[a].identity)?e.clone():this[a].transformBBox(e)}toParentPoint(e,t){return(this.computeTransformMatrix(),this[a].identity)?{x:e,y:t}:this[a].transformPoint(e,t)}fromParent(e){return(this.computeTransformMatrix(),this[a].identity)?e.clone():this[a].inverse().transformBBox(e)}fromParentPoint(e,t){return(this.computeTransformMatrix(),this[a].identity)?{x:e,y:t}:this[a].inverse().transformPoint(e,t)}computeBBox(){let e=super.computeBBox();return e?this.toParent(e):e}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(e,t){return{x:e,y:t}=this.fromParentPoint(e,t),super.pickNode(e,t)}pickNodes(e,t,i){return{x:e,y:t}=this.fromParentPoint(e,t),super.pickNodes(e,t,i)}render(e){this.computeTransformMatrix();let{ctx:t}=e,i=this[a],s=!1;i.identity||(t.save(),s=!0,i.toContext(t)),super.render(e),s&&t.restore()}toSVG(){this.computeTransformMatrix();let e=super.toSVG(),t=this[a];if(t.identity||null==e)return e;let i=(0,s.FJ)("g");i.append(...e.elements);let[r,n,o,l,h,d]=t.e;return i.setAttribute("transform",`matrix(${r} ${n} ${o} ${l} ${h} ${d})`),{elements:[i],defs:e.defs}}}return t=a,r[ti]=!0,r}function ts(e){var t;let i=e,a=Symbol("matrix_rotation");class s extends ta(i){constructor(){super(...arguments),this[t]=new te,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(e){super.updateMatrix(e);let{rotation:t,rotationCenterX:i,rotationCenterY:s}=this;0!==t&&(te.updateTransformMatrix(this[a],1,1,t,0,0,{rotationCenterX:i,rotationCenterY:s}),e.multiplySelf(this[a]))}}return t=a,l([Z()],s.prototype,"rotationCenterX",2),l([Z()],s.prototype,"rotationCenterY",2),l([Z()],s.prototype,"rotation",2),s}function tr(e){var t;let i=e,a=Symbol("matrix_scale");class s extends ta(i){constructor(){super(...arguments),this[t]=new te,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(e){super.updateMatrix(e);let{scalingX:t,scalingY:i,scalingCenterX:s,scalingCenterY:r}=this;(1!==t||1!==i)&&(te.updateTransformMatrix(this[a],t,i,0,0,0,{scalingCenterX:s,scalingCenterY:r}),e.multiplySelf(this[a]))}}return t=a,l([Z()],s.prototype,"scalingX",2),l([Z()],s.prototype,"scalingY",2),l([Z()],s.prototype,"scalingCenterX",2),l([Z()],s.prototype,"scalingCenterY",2),s}function tn(e){var t;let i=e,a=Symbol("matrix_translation");class s extends ta(i){constructor(){super(...arguments),this[t]=new te,this.translationX=0,this.translationY=0}updateMatrix(e){super.updateMatrix(e);let{translationX:t,translationY:i}=this;(0!==t||0!==i)&&(te.updateTransformMatrix(this[a],1,1,0,t,i),e.multiplySelf(this[a]))}}return t=a,l([Z()],s.prototype,"translationX",2),l([Z()],s.prototype,"translationY",2),s}var to=class{static fromCanvas(e,t){let i=[];for(let t of e.traverseUp())tt(t)&&i.unshift(t);for(let e of i)t=e.fromParent(t);return tt(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){for(let i of(null==t?t=e.getBBox():tt(e)&&(t=e.toParent(t)),e.traverseUp()))tt(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){let a=[];for(let t of e.traverseUp())tt(t)&&a.unshift(t);for(let e of a)({x:t,y:i}=e.fromParentPoint(t,i));return tt(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){for(let a of(tt(e)&&({x:t,y:i}=e.toParentPoint(t,i)),e.traverseUp()))tt(a)&&({x:t,y:i}=a.toParentPoint(t,i));return{x:t,y:i}}},tl=(e,t)=>Math.sign(e-t);function th(e,t){if("number"==typeof e&&"number"==typeof t)return tl(e,t);let i="number"==typeof e?[e]:e,a="number"==typeof t?[t]:t,s=Math.min(i.length,a.length);for(let e=0;e<s;e+=1){let t=tl(i[e],a[e]);if(0!==t)return t}return tl(i.length,a.length)}var td=class e extends ee{constructor(e){super(e),this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=e?.renderToOffscreenCanvas===!0}static is(t){return t instanceof e}static computeChildrenBBox(e,t=!0){return y.merge(ee.extractBBoxes(e,t))}static compareChildren(e,t){return th(e.zIndex,t.zIndex)||e.serialNumber-t.serialNumber}containsPoint(e,t){return!0}computeBBox(){return e.computeChildrenBBox(this.children())}computeSafeClippingBBox(e){let t=this.computeBBox();if(!t.isFinite())return;let i=0;for(let e of this.descendants())e instanceof e8&&(i=Math.max(i,e.strokeWidth));let a=Math.max(1,i/2*4),{x:s,y:r}=to.toCanvasPoint(this,0,0),n=eq(e,s+t.x-a)-s,o=eq(e,r+t.y-a)-r,l=Math.ceil(t.x+t.width-n+a),h=Math.ceil(t.y+t.height-o+a);return new y(n,o,l,h)}prepareSharedCanvas(e,t,i){return null==a||a.pixelRatio!==i?a=new D({width:e,height:t,pixelRatio:i}):a.resize(e,t,i),a}isDirty(e){let{width:t,height:i,devicePixelRatio:a}=e,{dirty:s,dirtyZIndex:r,layer:n}=this,o=null!=n&&(this._lastWidth!==t||this._lastHeight!==i),l=this._lastDevicePixelRatio!==a;if(this._lastWidth=t,this._lastHeight=i,this._lastDevicePixelRatio=a,s||r||o||l)return!0;for(let e of this.children())if(e.dirty)return!0;return!1}preRender(e){let t=super.preRender(e,0);return t.groups+=1,t.nonGroups-=1,this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&t.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):null!=this.layer&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),t}render(t){let{layer:i,renderToOffscreenCanvas:a}=this,s={...t};if(!a){this.renderInContext(s),super.render(s);return}let{ctx:r,stats:n,devicePixelRatio:o}=t,{image:l}=this;if(this.isDirty(t)){l?.bitmap.close(),l=void 0;let t=i?void 0:this.computeSafeClippingBBox(o),a=(e,...t)=>{let i=e.context;s.ctx=i,e.clear(),i.save(),i.setTransform(...t),i.globalAlpha=1,this.renderInContext(s),i.restore(),i.verifyDepthZero?.()};if(i)a(i,r.getTransform());else if(t){let{x:e,y:i,width:s,height:r}=t,n=this.prepareSharedCanvas(s,r,o);a(n,o,0,0,o,-e*o,-i*o),l={bitmap:n.transferToImageBitmap(),x:e,y:i,width:s,height:r}}else this.dirtyZIndex&&this.sortChildren(e.compareChildren);this.image=l,n&&n.layersRendered++}else this.skipRender(s),n&&n.layersSkipped++;let{globalAlpha:h}=r;if(r.globalAlpha=h*this.opacity,i)r.save(),r.resetTransform(),i.drawImage(r),r.restore();else if(l){let{bitmap:e,x:t,y:i,width:a,height:s}=l;r.drawImage(e,0,0,a*o,s*o,t,i,a,s)}r.globalAlpha=h,super.render(s)}skipRender(e){let{stats:t}=e;for(let e of this.children())e.markClean(),t&&(t.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,t.opsSkipped+=this.childNodeCounts.complexity)}applyClip(e,t){let{x:i,y:a,width:s,height:r}=t;e.beginPath(),e.rect(i,a,s,r),e.clip()}renderInContext(t){let{ctx:i,stats:a}=t;for(let s of(this.dirtyZIndex&&this.sortChildren(e.compareChildren),i.save(),i.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(i,this.clipRect),t.clipBBox=to.toCanvas(this,this.clipRect)),this.children())){if(!s.visible){s.markClean(),a&&(a.nodesSkipped+=s.childNodeCounts.nonGroups+s.childNodeCounts.groups,a.opsSkipped+=s.childNodeCounts.complexity);continue}i.save(),s.render(t),i.restore()}i.restore()}setClipRect(e){this.clipRect=e?to.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}setScene(e){this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0),super.setScene(e)}getVisibility(){for(let e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;let e=[],t=[];for(let i of this.children()){let a=i.toSVG();null!=a&&(t.push(...a.elements),null!=a.defs&&e.push(...a.defs))}return{elements:t,defs:e}}};td.className="Group",l([Z({convertor:e=>(0,s.qE)(0,e,1)})],td.prototype,"opacity",2);var tu=td,tc=class extends tr(tu){},tp=class extends ts(tu){},tg=class extends tn(tu){},tm=class extends ts(tn(tu)){};function ty(e,t){e&&(null==(t=u.normalize(t)).width?e.style.removeProperty("width"):e.style.width=`${t.width}px`,null==t.height?e.style.removeProperty("height"):e.style.height=`${t.height}px`,null==t.x?e.style.removeProperty("left"):e.style.left=`${t.x}px`,null==t.y?e.style.removeProperty("top"):e.style.top=`${t.y}px`)}function tf(e){let t=parseFloat(e.style.width)||e.offsetWidth,i=parseFloat(e.style.height)||e.offsetHeight;return{x:parseFloat(e.style.left)||e.offsetLeft,y:parseFloat(e.style.top)||e.offsetTop,width:t,height:i}}function tb(e){if(e.focus({preventScroll:!0}),e.lastChild?.textContent==null)return;let t=(0,s.YE)().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);let i=(0,s.zk)().getSelection();i?.removeAllRanges(),i?.addRange(t)}function tx(){let e=(0,s.zk)("navigator");if("scheduling"in e){let t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function tM(e){return`ag-charts-icon ag-charts-icon-${e}`}var tv="class-instance";function tS(e,t,i){if((0,s.cy)(t)){if(!(0,s.cy)(e)||e.length!==t.length||t.some((t,a)=>null!=tS(e[a],t,i)))return t}else if((0,s.Qd)(t)){if(!(0,s.Qd)(e))return t;let a={};for(let s of new Set([...Object.keys(e),...Object.keys(t)]))if(e[s]===t[s])continue;else if(i?.has(s))a[s]=t[s];else if(typeof e[s]==typeof t[s]){let r=tS(e[s],t[s],i);null!==r&&(a[s]=r)}else a[s]=t[s];return Object.keys(a).length?a:null}else if(e!==t)return t;return null}function tD(e,t){for(let i of Object.keys(e))if(e[i]!==t?.[i])return!1;return!0}function tI(e,t){return(0,s.cy)(e)?function(e,t){let i=[],a=t?.seen;for(let r of e){if("object"==typeof r&&a?.includes(r)){s.Vy.warn("cycle detected in array",r);continue}a?.push(r),i.push(tI(r,t)),a?.pop()}return i}(e,t):(0,s.Qd)(e)?function(e,t){let i={};for(let a of Object.keys(e))t?.assign?.has(a)?i[a]=e[a]:t?.shallow?.has(a)?i[a]=tL(e[a]):i[a]=tI(e[a],t);return i}(e,t):e instanceof Map?new Map(tI(Array.from(e))):tL(e)}function tL(e){return(0,s.cy)(e)?e.slice(0):(0,s.Qd)(e)?{...e}:(0,s.$P)(e)?new Date(e):(0,s.gd)(e)?new RegExp(e.source,e.flags):e}function tA(e,t,i,a,r,n){if((0,s.cy)(e)){n=t(e,a,r,n);let s=0;for(let o of e)n=tA(o,t,i,a?.[s],r,n),s++}else if((0,s.Qd)(e))for(let s of(n=t(e,a,r,n),Object.keys(e)))i?.has(s)||(n=tA(e[s],t,i,a?.[s],r,n));return n}function tw(e,t,i={}){let{path:a,matcherPath:r=a?.replace(/(\[[0-9+]+])/i,"[]"),skip:n=[]}=i;if(null==e)throw Error(`AG Charts - target is uninitialised: ${a??"<root>"}`);if(null==t)return e;if(eN(e))return e.set(t);let o=tC(e);for(let l of Object.keys(t)){if(V.has(l))continue;let h=`${r?r+".":""}${l}`;if(n.includes(h))continue;let d=t[l],u=`${a?a+".":""}${l}`,c=e.constructor,p=e[l];try{let t=tC(p),a=tC(d);if(o===tv&&!(l in e||"context"===l)){if(void 0===d)continue;s.Vy.warn(`unable to set [${u}] in ${c?.name} - property is unknown`);continue}if(null!=t&&null!=a&&a!==t&&(t!==tv||"object"!==a)){s.Vy.warn(`unable to set [${u}] in ${c?.name} - can't apply type of [${a}], allowed types are: [${t}]`);continue}if(eN(p))e[l].set(d);else if("object"===a&&"context"!==l){if(null==p){s.Vy.warn(`unable to set [${u}] in ${c?.name} - property is unknown`);continue}tw(p,d,{...i,path:u,matcherPath:h})}else e[l]=d}catch(e){s.Vy.warn(`unable to set [${u}] in [${c?.name}]; nested error is: ${e.message}`)}}return e}function tC(e){return null==e?null:(0,s.uE)(e)||(0,s.$P)(e)?"primitive":(0,s.cy)(e)?"array":(0,s.Gv)(e)?(0,s.Qd)(e)?"object":tv:(0,s.Tn)(e)?"function":"primitive"}function tk(e,t,i,a){return function e(t,i,a,r,n,o=[],l={}){if((0,s.cy)(t)){tT(t,i,a,r,o,l);let s=0;for(let h of t)e(h,i,a,r,n,[...o,`${s}`],l),s++}else if((0,s.Qd)(t))for(let s of(tT(t,i,a,r,o,l),Object.keys(t))){if(n?.has(s))continue;let h=t[s];tO(h)?t[s]=tE(h,i,a,r,[...o,s],l):e(h,i,a,r,n,[...o,s],l)}return l}(e,t,a??e,{matches:new Map},i)}var tN=Symbol("operation-resolved-undefined");function tT(e,t,i,a,r,n){if((0,s.cy)(e))for(let s=0;s<e.length;s++)e[s]=tE(e[s],t,i,a,[...r,`${s}`],n),e[s]===tN&&(e[s]=void 0);else{let s=!1;for(let o of Object.keys(e))e[o]=tE(e[o],t,i,a,[...r,o],n),s||(s=tz(o,tB)),e[o]===tN&&delete e[o];if(s&&Object.keys(e).length>1)for(let t of Object.keys(e))tz(t,tB)&&delete e[t]}}function tE(e,t,i,a,s,r){let n=tO(e);if(!n)return e;r[s.join(".")]=e;let o=tj(n.operation,n.values,t,i,s,a);return void 0===o?tN:o}function tO(e){if(!(0,s.Qd)(e))return;let[t]=Object.keys(e);if(tz(t,tB))return{operation:t,values:e[t]}}function tj(e,t,i,a,r,n){return n.referencedParams??(n.referencedParams=new Set),(0,s.cy)(t)&&!["$find","$map"].includes(e)&&(t=t.map(e=>{let t=tO(e);return t?tj(t.operation,t.values,i,a,r,n):e})),(0,tB[e])(t,r,i,a,n)}function tz(e,t){return(0,s.Kg)(e)&&((0,s.Gv)(t)||(0,s.cy)(t))&&e in t}function tR(e){return(0,s.Et)(e)&&e>=0&&e<=1}function tP(e){return(0,s.Gv)(e)&&"gradient"==e.type}function tF(e,t){let i=t.split("/"),a=[...e];t.startsWith("/")&&(a=[],i.shift());let s=!1;for(let t of i){if(".."===t)a.pop(),s||a.pop();else if("."===t)a.pop();else if("$index"===t){let t=e.findLast(e=>!isNaN(Number(e)));null!=t&&a.push(t)}else if("$prevIndex"===t){let t=e.findLast(e=>!isNaN(Number(e)));null!=t&&a.push(`${Number(t)-1}`)}else 0!==t.length&&a.push(t);s=".."===t}return a}var tB={$ref:function e(t,i,a,r,n){if(!tz(t,a))return void s.Vy.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${i.join(".")}], expecting one of [${Object.keys(a).join(", ")}].`);let o=tO(a[t]);return o?.operation!=="$ref"?a[t]:n.referencedParams?.has(o.values)?void s.Vy.warnOnce(`\`$ref\` json operation failed on [${String(t)}] at [${i.join(".")}], circular reference detected with [${[...n.referencedParams].join(", ")}].`):(n.referencedParams?.add(o.values),e(o.values,i,a,r,n))},$path:function(e,t,i,a){let r,n=!1,o=!1,l=a;if((0,s.cy)(e))n=!0,r=e[1],l=(o=3===e.length)?e[2]:l,e=e[0];else if(!(0,s.Kg)(e))return void s.Vy.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a string.`);let h=tF(o?[]:t,e),d=l;for(let i of h){if(!tz(i,d))if(!n)return void s.Vy.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${t.join(".")}] resolved to [${h.join(".")}], could not find path in object.`);else return r;d=d[i]}return Object.isFrozen(d)?tI(d):d},$palette:function(e,t,i,a){if(!(0,s.Kg)(e))return;let r=i.__palette;if(["fill","fillFallback","stroke","gradient","range2"].includes(e)){let i=t.findLastIndex(e=>!isNaN(Number(e))),n=Number(t[i]);if(isNaN(n))return;let o=t.slice(0,i),l=["map-shape-background","map-line-background"],h=G(a,o).slice(0,n).filter(e=>l.includes(e.type)).length;switch(n-=h,e){case"fill":return(0,s.XK)(r.fills,1,n)[0];case"fillFallback":return(0,s.XK)(r.fillsFallback,1,n)[0];case"stroke":return(0,s.XK)(r.strokes,1,n)[0];case"gradient":return(0,s.XK)(r.sequentialColors,1,n)[0];case"range2":return(0,s.XK)(r.fills,2,n)}return}return"gradients"===e?r.sequentialColors:G(r,e)},$if:([e,t,i])=>e?t:i,$eq:([e,t])=>e===t,$not:([e])=>!e,$or:e=>(0,s.cy)(e)&&e.some(Boolean),$and:e=>(0,s.cy)(e)&&e.every(Boolean),$switch:()=>{},$isOperation:function(e,t,i,a){let r=(0,s.Kg)(e)?tF(t,e):t;return null!=tO(0===r.length?a:G(a,r))},$isEven:function([e],t){if("number"==typeof e)return e%2==0;s.Vy.warnOnce(`\`$isEven\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)},$mul:function([e,t],i){if("number"==typeof e&&"number"==typeof t)return e*t;s.Vy.warnOnce(`\`$mul\` json operation failed on [${String(e)}] and [${String(t)}] at [${i.join(".")}], expecting two numbers.`)},$round:function([e],t){if("number"==typeof e)return Math.round(e);s.Vy.warnOnce(`\`$round\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)},$map:function([e,t],i,a,r,n){let o=tO(t);if(o&&(t=tj(o.operation,o.values,a,r,i,n)),!(0,s.cy)(t))return[];let l=tO(e);return l?(n.matches.set(i.join("."),t),t.map(()=>({[l.operation]:l.values}))):[]},$find:function([e,t],i,a,r,n){let o=tO(t);if(o&&(t=tj(o.operation,o.values,a,r,i,n)),!(0,s.cy)(t))return;let l=tO(e);return l?t.find(e=>tj(l.operation,l.values,a,e,[],n)):e?t[0]:void 0},$merge:function(e){if((0,s.cy)(e)){for(let t of e)if(!(0,s.Qd)(t))return;return z(...e)}},$omit:function([e,t]){if((0,s.cy)(e)&&(0,s.Qd)(t))return B(t,e)},$value:function(e,t,i,a,s){if("$1"!==e&&"$index"!==e)return e;let r=t.findLastIndex(e=>!isNaN(Number(e)));if(-1===r)return e;let n=Number(t[r]);if("$index"===e)return n;let o=t.slice(0,r).join(".");return s.matches.get(o)?.at(n)},$rem:function([e],t,i){let a="fontSize";if(tz(a,i)&&"number"==typeof i[a]&&"number"==typeof e)return Math.round(e*i[a]);s.Vy.warnOnce(`\`$rem\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)},$mix:function([e,t,i],a){let r=`\`$mix\` json operation failed on [${String(e)}, ${String(t)}, ${String(i)}] at [${a.join(".")}], expecting`,n=`${r} two colors and a number between 0 and 1.`;if("string"!=typeof t||!tR(i))return void s.Vy.warnOnce(n);if("string"==typeof e)try{return ey.mix(ey.fromString(e),ey.fromString(t),i).toString()}catch{s.Vy.warnOnce(n);return}if(!tP(e))return void s.Vy.warnOnce(n);let o=e.colorStops;try{o=o?.map(e=>{let a;return"string"==typeof e.color&&(a=ey.mix(ey.fromString(e.color),ey.fromString(t),i).toString()),{...e,color:a}})}catch{s.Vy.warnOnce(`${r} a gradient, a color and a number between 0 and 1.`);return}return{...e,colorStops:o}},$foregroundBackgroundMix:function([e],t,i){let a="foregroundColor",r="backgroundColor";if(tz(a,i)&&tz(r,i)&&"string"==typeof i[a]&&"string"==typeof i[r]&&tR(e))return ey.mix(ey.fromString(i[a]),ey.fromString(i[r]),e).toString();s.Vy.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(e)}}}] at [${t.join(".")}], expecting a number between 0 and 1.`)},$foregroundBackgroundAccentMix:function([e,t],i,a){let r="foregroundColor",n="backgroundColor",o="accentColor";if(tz(r,a)&&tz(n,a)&&tz(o,a)&&"string"==typeof a[r]&&"string"==typeof a[n]&&"string"==typeof a[o]&&tR(e)&&tR(t))return ey.mix(ey.mix(ey.fromString(a[r]),ey.fromString(a[n]),e),ey.fromString(a[o]),t).toString();s.Vy.warnOnce(`\`$foregroundBackgroundAccentMix\` json operation failed on [${String(e)}, ${String(t)}}] at [${i.join(".")}], expecting two numbers between 0 and 1.`)},$interpolate:function([e,t]){if((0,s.cy)(e)&&(0,s.Et)(t))return ey.interpolate(e.map(e=>ey.fromString(e)),t).map(e=>e.toString())},$isGradient:([e])=>tP(e),$isPattern:([e])=>(function(e){return null!==e&&(0,s.Gv)(e)&&"pattern"==e.type})(e),$isImage:([e])=>(function(e){return null!==e&&(0,s.Gv)(e)&&"image"==e.type})(e)},tG=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(e=>s.Vy.errorOnce(e))})}async acquireImmediately(e){return!!this.available&&(await this.acquire(e),!0)}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(e){s.Vy.error("mutex callback error",e),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},tV=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!=typeof t)throw Error("AG Charts - listener must be a Function");let i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){let i=this.eventListeners.get(e);null!=i&&(i.delete(t),0===i.size&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){this.eventListeners.get(e.type)?.forEach(t=>t(e))}},tY=class extends eC{constructor(e=0,t=e,i=e,a=t){super(),this.top=e,this.right=t,this.bottom=i,this.left=a}};function tU(e,t){let i=(0,s.cy)(e)?e:e.split(".");if(1===i.length){let[e]=i;return C((t,i,a)=>t[e]=a,t=>t[e],t)}return C((e,t,a)=>Y(e,i,a),e=>G(e,i),t)}function t_(e){return C((t,i,a)=>t[e]=a)}function t$(e,t){return C((i,a,s)=>i[e][t??a]=s)}function tW(e){let{newValue:t,oldValue:i,changeValue:a}=e;return C((e,s,r,n)=>(r!==n&&(void 0!==n&&i?.call(e,n),void 0!==r&&t?.call(e,r),a?.call(e,r,n)),r))}function tH(e){return k(e)}function tZ(e,t){let i,a,s=0,r=!1,n=()=>r,o=()=>{r=!1,a?.(),a=void 0,i=void 0,s>0&&e(l)},l=()=>{let e=s;s=0,r=!0;let i=t({count:e});if(!i)return void o();i.then(o,o)};return{schedule(t){0!==s||n()||e(l,t),s++},async await(){if(n())for(null==i&&(i=new Promise(e=>{a=e}));n();)await i}}}l([ew],tY.prototype,"top",2),l([ew],tY.prototype,"right",2),l([ew],tY.prototype,"bottom",2),l([ew],tY.prototype,"left",2);var tK=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function tX(e,t,i){let{offsetX:a,offsetY:s,clientX:r,clientY:n}=t,{currentX:o,currentY:l}=tJ.calcCurrentXY(i,t);return{type:e,offsetX:a,offsetY:s,clientX:r,clientY:n,currentX:o,currentY:l,sourceEvent:t}}function tQ(e,t,i){return{type:e,sourceEvent:t}}var tq={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>tX("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>tX("click",e,t),dblclick:(e,t)=>tX("dblclick",e,t),mouseenter:(e,t)=>tX("mouseenter",e,t),mousemove:(e,t)=>tX("mousemove",e,t),mouseleave:(e,t)=>tX("mouseleave",e,t),wheel:e=>{let{offsetX:t,offsetY:i,clientX:a,clientY:s}=e,r=0===e.deltaMode?.01:1;return{type:"wheel",offsetX:t,offsetY:i,clientX:a,clientY:s,deltaX:e.deltaX*r,deltaY:e.deltaY*r,sourceEvent:e}},touchstart:(e,t)=>tQ("touchstart",e,t),touchmove:(e,t)=>tQ("touchmove",e,t),touchend:(e,t)=>tQ("touchend",e,t),touchcancel:(e,t)=>tQ("touchcancel",e,t)},tJ=class{static alloc(e,t,i){return tq[e](t,i)}static isHTMLEvent(e){return tK.includes(e)}static calcCurrentXY(e,t){let i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},t0=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i;if(!(e in(this.sourceListeners??{}))){let i=i=>{let a=tJ.alloc(e,i,t.getElement());for(let i of this.widgetListeners?.[e]??[])i(a,t)},a={};e.startsWith("touch")&&(a.passive=!1),this.initSourceHandler(e,i),t.getElement().addEventListener(e,i,a)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[e]??(i[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){let a=this.lazyGetWidgetListeners(e,t),s=a.indexOf(i);s>-1&&a.splice(s,1)}destroy(e){for(let[t,i]of(0,s.jO)(this.sourceListeners??{}))e.getElement().removeEventListener(t,i);this.widgetListeners=void 0,this.sourceListeners=void 0}},t1=class{constructor(e,t,i,a){this.glob=e,this.self=t,this.window=(0,s.zk)(),this.mousegeneral=e=>{e.stopPropagation(),e.stopImmediatePropagation()},this.mousemove=e=>{e.stopPropagation(),e.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(e)},this.mouseup=e=>{0===e.button&&(e.stopPropagation(),e.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(e),this.destroy())};let{window:r,mousegeneral:n,mousemove:o,mouseup:l}=this;r.addEventListener("mousedown",n,{capture:!0}),r.addEventListener("mouseenter",n,{capture:!0}),r.addEventListener("mouseleave",n,{capture:!0}),r.addEventListener("mouseout",n,{capture:!0}),r.addEventListener("mouseover",n,{capture:!0}),r.addEventListener("mousemove",o,{capture:!0}),r.addEventListener("mouseup",l,{capture:!0}),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(a)}destroy(){let{window:e,mousegeneral:t,mousemove:i,mouseup:a}=this;e.removeEventListener("mousedown",t,{capture:!0}),e.removeEventListener("mouseenter",t,{capture:!0}),e.removeEventListener("mouseleave",t,{capture:!0}),e.removeEventListener("mouseout",t,{capture:!0}),e.removeEventListener("mouseover",t,{capture:!0}),e.removeEventListener("mousemove",i,{capture:!0}),e.removeEventListener("mouseup",a,{capture:!0}),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}},t2=!1,t4=class{constructor(e,t,i,a,r){this.glob=e,this.self=t,this.initialTouch=a,this.target=r,this.longTapInterrupted=!1,this.longtap=()=>{let{target:e,initialTouch:t}=this;if(!this.longTapInterrupted){e.dispatchEvent(new TouchEvent("touchcancel",{touches:[t],bubbles:!0})),t2=!0;let i=e=>{e.preventDefault()},a=t=>{t2=!1,t.preventDefault(),e.removeEventListener("touchmove",i),e.removeEventListener("touchend",a),e.removeEventListener("touchcancel",a)};e.addEventListener("touchmove",i,{passive:!1}),e.addEventListener("touchend",a,{passive:!1}),e.addEventListener("touchcancel",a,{passive:!1});let{clientX:r,clientY:n}=t,o=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:(0,s.zk)(),clientX:r,clientY:n,pointerType:"touch"});e.dispatchEvent(o)}},this.touchmove=e=>{let{glob:t,self:i,initialTouch:a}=this,s=this.findInitialFinger(e.targetTouches);null!=s&&(this.longTapInterrupted=this.longTapInterrupted||function(e,t){let i=e.clientX-t.clientX,a=e.clientY-t.clientY;return i*i+a*a}(a,s)>100,i.dragTouchEnabled&&null!=s&&t.globalTouchDragCallbacks?.touchmove(e,s))},this.touchend=e=>{this.longTapInterrupted=!0;let t=this.findInitialFinger(e.changedTouches,e.touches);null!=t&&this.glob.globalTouchDragCallbacks?.touchend(e,t),this.destroy()},this.longtapTimer=setTimeout(this.longtap,500);let{touchmove:n,touchend:o}=this;r.addEventListener("touchmove",n,{passive:!1}),r.addEventListener("touchstart",o,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),r.addEventListener("touchcancel",o,{passive:!1}),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){let{longtapTimer:e,touchmove:t,touchend:i}=this;clearTimeout(e),this.target.removeEventListener("touchstart",i),this.target.removeEventListener("touchmove",t),this.target.removeEventListener("touchend",i),this.target.removeEventListener("touchcancel",i),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...e){return Array.from(e.map(e=>Array.from(e)).flat()).find(e=>e.identifier===this.initialTouch.identifier)}};function t3(e,t,i,a){let{currentX:s,currentY:r}=tJ.calcCurrentXY(e.getElement(),a),n=a.pageX-i.pageX,o=a.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+n,offsetY:i.offsetY+o,clientX:a.clientX,clientY:a.clientY,currentX:s,currentY:r,originDeltaX:n,originDeltaY:o,sourceEvent:a}}function t5(e,t,i,a,s){let{currentX:r,currentY:n}=tJ.calcCurrentXY(e.getElement(),s),o=s.pageX-i.pageX,l=s.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+o,offsetY:i.offsetY+l,clientX:s.clientX,clientY:s.clientY,currentX:r,currentY:n,originDeltaX:o,originDeltaY:l,sourceEvent:a}}var t9={},t6=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(e){this.listeners??(this.listeners=new Map);let t=this.listeners.get(e);return void 0===t&&(t=new Set,this.listeners.set(e,t)),t}add(e,t,i){switch(this.getListenerSet(e).add(i),e){case"drag-start":case"drag-move":case"drag-end":this.registerDragTrigger(t)}}remove(e,t,i){this.getListenerSet(e).delete(i)}registerDragTrigger(e){if(null==this.dragTriggerRemover){let t=t=>this.triggerMouseDrag(e,t),i=t=>this.triggerTouchDrag(e,t);e.getElement().addEventListener("mousedown",t),e.getElement().addEventListener("touchstart",i,{passive:!1}),this.dragTriggerRemover=()=>{e.getElement().removeEventListener("mousedown",t),e.getElement().removeEventListener("touchstart",i)}}}triggerMouseDrag(e,t){0===t.button&&this.startMouseDrag(e,t)}startMouseDrag(e,t){let i={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};U(["pageX","pageY","offsetX","offsetY"],i,t),this.mouseDragger=function(e,t,i,a){if(null==e.globalMouseDragCallbacks)return new t1(e,t,i,a)}(t9,this,{mousedown:t=>{let a=t3(e,"drag-start",i,t);this.dispatch("drag-start",e,a)},mousemove:t=>{let a=t3(e,"drag-move",i,t);this.dispatch("drag-move",e,a)},mouseup:t=>{let a=t3(e,"drag-end",i,t);this.dispatch("drag-end",e,a),this.endDrag(e,a)}},t)}endDrag(e,{sourceEvent:t,clientX:i,clientY:a}){let s=e.getElement(),r=s.getBoundingClientRect();u.containsPoint(r,i,a)||(s.dispatchEvent(new MouseEvent("mouseleave",t)),t.target?.dispatchEvent(new MouseEvent("mouseenter",t)))}triggerTouchDrag(e,t){let i=t.targetTouches[0];1===t.targetTouches.length&&null!=i&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){let a={pageX:NaN,pageY:NaN,...function(e,{pageX:t,pageY:i}){let{x:a,y:s}=e.getElement().getBoundingClientRect();return{offsetX:t-a,offsetY:i-s}}(e,i)};U(["pageX","pageY"],a,i);let s=e.getElement();this.touchDragger=function(e,t,i,a,s){if(null==e.globalTouchDragCallbacks&&!t2)return new t4(e,t,i,a,s)}(t9,this,{touchmove:(t,i)=>{let s=t5(e,"drag-move",a,t,i);this.dispatch("drag-move",e,s)},touchend:(t,i)=>{let s=t5(e,"drag-end",a,t,i);this.dispatch("drag-end",e,s)}},i,s);let r=t5(e,"drag-start",a,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){for(let a of this.getListenerSet(e))a(i,t);this.dispatchCallback(e,i)}},t8=class{constructor(e){this.elem=e}setBounds(e){ty(this.elemContainer??this.elem,e)}getBounds(){return tf(this.elemContainer??this.elem)}static setElementContainer(e,t){ty(t,e.getBounds()),(0,s.Hs)(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},t7=class extends t8{constructor(e){super(e),this.elem=e,this.index=NaN,this.children=[]}set id(e){(0,s.Bq)(this.elem,"id",e)}get id(){return(0,s.D$)(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.parent?.removeChild(this),this.children.forEach(e=>{e.parent=void 0,e.destroy()}),this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(e){(0,s.EM)(this.elem,"display",e?"none":void 0)}isHidden(){return(0,s.zk)()?.getComputedStyle?.(this.elem).display==="none"}setCursor(e){(0,s.EM)(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){(0,s.Bq)(this.elem,"aria-describedby",e)}setAriaHidden(e){(0,s.Bq)(this.elem,"aria-hidden",e)}setAriaLabel(e){(0,s.Bq)(this.elem,"aria-label",e)}setAriaExpanded(e){(0,s.Bq)(this.elem,"aria-expanded",e)}setAriaControls(e){(0,s.Bq)(this.elem,"aria-controls",e)}setAriaHasPopup(e){(0,s.Bq)(this.elem,"aria-haspopup",e)}setInnerHTML(e){this.elem.innerHTML=e}setPointerEvents(e){(0,s.EM)(this.elem,"pointer-events",e)}isDisabled(){return(0,s.D$)(this.elem,"aria-disabled",!1)}hasPopup(){let e=(0,s.D$)(this.elem,"aria-haspopup");return void 0!==e&&"false"!==e}parseFloat(e){return""===e?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(e){this.elem.focus(e)}setFocusOverride(e){(0,s.Bq)(this.elem,"data-focus-override",e)}setPreventsDefault(e){(0,s.Bq)(this.elem,"data-preventdefault",e)}setTabIndex(e){(0,s.Bq)(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){let t=this.children.findIndex(t=>t===e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(void 0!==e)return this.children.filter(t=>void 0!==t.domIndex&&t.domIndex>e).reduce((e,t)=>!e||t.domIndex<e.domIndex?t:e,void 0)}addListener(e,t){return tJ.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new t0),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new t6(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){tJ.isHTMLEvent(e)?this.htmlListener?.remove(e,this,t):null!=this.htmlListener&&this.internalListener?.remove(e,this,t)}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new t6(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent?.bubbles)return;let{parent:i}=this;for(;null!=i;){let{internalListener:a}=i;if(null!=a){let s={...t,...tJ.calcCurrentXY(i.getElement(),t)};a.dispatch(e,i,s)}i=i.parent}}static addWindowEvent(e,t){let i=e=>{e.persisted||t()};return(0,s.zk)().addEventListener("pagehide",i),()=>(0,s.zk)().removeEventListener("pagehide",i)}},ie=class{constructor(e=5){this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;let t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){let e=this.store.keys(),t=this.store.size-this.maxCacheSize;for(;t>0;){let i=e.next();i.done||this.store.delete(i.value),t--}}return t}clear(){this.store.clear()}},it=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){let t="string"==typeof e.font?e.font:ia.toFontString(e.font),i=`${t}-${e.textAlign??"start"}-${e.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(t,e,i)}static clear(){this.instanceMap.clear()}static createFontMeasurer(e,t,i){let a=function(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}();a.font=e,a.textAlign=t.textAlign??"start",a.textBaseline=t.textBaseline??"alphabetic";let s=new ii(a,t);return this.instanceMap.set(i,s),s}};it.instanceMap=new ie(10);var ii=class{constructor(e,t){this.ctx=e,this.measureMap=new ie(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font="string"==typeof t.font?t.font:ia.toFontString(t.font),this.textMeasurer=new is(e=>this.cachedCtxMeasureText(e),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){let t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},ia=class{static toFontString({fontSize:e=10,fontStyle:t,fontWeight:i,fontFamily:a,lineHeight:s}){let r="";return t&&(r+=`${t} `),i&&(r+=`${i} `),r+=`${e}px`,s&&(r+=`/${s}px`),(r+=` ${a}`).trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return .5;default:return 1}}};ia.EllipsisChar="…",ia.defaultLineHeight=1.15,ia.lineSplitter=/\r?\n/g;var is=class{constructor(e,t="alphabetic"){this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){let t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,i=0,a=0,s=0,r=0,n=ia.getVerticalModifier(this.textBaseline),o=[],l=0,h=e.length;for(let n of e){let e=this.measureTextFn(n);e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),t<e.width&&(t=e.width),s<e.actualBoundingBoxLeft&&(s=e.actualBoundingBoxLeft),0===l?(i+=e.actualBoundingBoxAscent,a+=e.actualBoundingBoxAscent):r+=e.fontBoundingBoxAscent,l===h-1?i+=e.actualBoundingBoxDescent:r+=e.fontBoundingBoxDescent,o.push({text:n,width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}),l++}return{width:t,height:i+=r,offsetTop:a+=r*n,offsetLeft:s,lineMetrics:o}}textWidth(e,t){if(t){let t=0;for(let i=0;i<e.length;i++)t+=this.textWidth(e.charAt(i));return t}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){let t="string"==typeof e?e.split(ia.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){let{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},ir=class e extends e8{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=e.defaultStyles.textAlign,this.textBaseline=e.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split("\n").map(e=>e.trim())??[]}static computeBBox(e,t,i,a){let{offsetTop:s,offsetLeft:r,width:n,height:o}=it.measureLines(e,a);return new y(t-r,i-s,n,a.lineHeight?a.lineHeight*e.length:o)}computeBBox(){let{x:t,y:i,lines:a,textBaseline:s,textAlign:r,lineHeight:n}=this;return e.computeBBox(a,t,i,{font:this,textBaseline:s,textAlign:r,lineHeight:n})}getTextMeasureBBox(){return this.computeBBox()}isPointInPath(e,t){let i=this.getBBox();return!!i&&i.containsPoint(e,t)}render(e){let{ctx:t,stats:i}=e;if(!this.lines.length||!this.layerManager)return i&&(i.nodesSkipped+=1),super.render(e);let{fill:a,stroke:s,strokeWidth:r}=this,{globalAlpha:n}=t,{pixelRatio:o}=this.layerManager.canvas;if(!a&&!(null!=s&&r>0))return super.render(e);let l=ia.toFontString(this);if(t.font!==l&&(t.font=l),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,a){this.applyFillAndAlpha(t);let{fillShadow:e}=this;e?.enabled&&(t.shadowColor=e.color,t.shadowOffsetX=e.xOffset*o,t.shadowOffsetY=e.yOffset*o,t.shadowBlur=e.blur*o),this.renderLines((e,i,a)=>t.fillText(e,i,a)),t.globalAlpha=n}if(s&&r){this.applyStrokeAndAlpha(t),t.lineWidth=r;let{lineDash:e,lineDashOffset:i,lineCap:a,lineJoin:s}=this;e&&t.setLineDash([...e]),i&&(t.lineDashOffset=i),a&&(t.lineCap=a),s&&(t.lineJoin=s),this.renderLines((e,i,a)=>t.strokeText(e,i,a)),t.globalAlpha=n}super.render(e)}renderLines(e){let{lines:t,x:i,y:a}=this,s=this.lineHeight??ia.getLineHeight(this.fontSize),r=(s-s*t.length)*ia.getVerticalModifier(this.textBaseline);for(let n of t)e(n,i,a+r),r+=s}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}toSVG(){if(!this.visible||!this.text)return;let e=(0,s.FJ)("text");return this.applySvgFillAttributes(e),e.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),e.setAttribute("font-size",String(this.fontSize)),e.setAttribute("font-style",this.fontStyle??""),e.setAttribute("font-weight",String(this.fontWeight??"")),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text??"",{elements:[e]}}};ir.className="Text",ir.defaultStyles={...e8.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},l([Z()],ir.prototype,"x",2),l([Z()],ir.prototype,"y",2),l([Z({convertor:e=>(0,s.vM)(e)?String(e):e,changeCb:e=>e.onTextChange()})],ir.prototype,"text",2),l([Z()],ir.prototype,"fontStyle",2),l([Z()],ir.prototype,"fontWeight",2),l([Z()],ir.prototype,"fontSize",2),l([Z()],ir.prototype,"fontFamily",2),l([Z()],ir.prototype,"textAlign",2),l([Z()],ir.prototype,"textBaseline",2),l([Z()],ir.prototype,"lineHeight",2);var io=ir,il=class extends ts(io){},ih=class extends ts(tn(io)){},id=class{static wrapText(e,t){return this.wrapLines(e,t).join("\n")}static wrapLines(e,t){let i=this.textWrap(e,t);return"hide"===t.overflow&&i.some(e=>e.endsWith(ia.EllipsisChar))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+ia.EllipsisChar}static truncateLine(e,t,i,a){let s=t.textWidth(ia.EllipsisChar),r=0,n=0;for(;n<e.length;n++){let a=t.textWidth(e.charAt(n));if(r+a>i)break;r+=a}if(e.length===n&&(!a||r+s<=i))return a?e+ia.EllipsisChar:e;for(e=e.slice(0,n).trimEnd();e.length&&t.textWidth(e)+s>i;)e=e.slice(0,-1).trimEnd();return e+ia.EllipsisChar}static textWrap(e,t){let i=e.split(ia.lineSplitter),a=it.getMeasurer(t);if("never"===t.textWrap)return i.map(e=>this.truncateLine(e.trimEnd(),a,t.maxWidth));let s=[],r="hyphenate"===t.textWrap,n=null==t.textWrap||"on-space"===t.textWrap;for(let e of i){let i=e.trimEnd();if(""===i){s.push(i);continue}let o=0,l=0,h=0;for(;o<i.length;){let e=i.charAt(o);if(l+=a.textWidth(e)," "===e&&(h=o),l>t.maxWidth){if(0===o)break;let e=a.textWidth(i.slice(0,o+1));if(e<=t.maxWidth){l=e,o++;continue}if(h){let e=this.getWordAt(i,h+1),r=a.textWidth(e);if(r<=t.maxWidth){s.push(i.slice(0,h).trimEnd()),i=i.slice(h).trimStart(),o=0,l=0,h=0;continue}n&&r>t.maxWidth&&s.push(i.slice(0,h).trimEnd(),this.truncateLine(i.slice(h).trimStart(),a,t.maxWidth,!0))}else n&&s.push(this.truncateLine(i,a,t.maxWidth,!0));if(n){i="";break}let d=r?"-":"",u=i.slice(0,o).trim();for(;u.length&&a.textWidth(u+d)>t.maxWidth;)u=u.slice(0,-1).trimEnd();if(s.push(u+d),!u.length){i="";break}i=i.slice(u.length).trimStart(),o=-1,l=0,h=0}o++}i&&s.push(i)}return this.avoidOrphans(s,a,t),this.clipLines(s,a,t)}static getWordAt(e,t){let i=e.indexOf(" ",t);return -1===i?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;let{height:a,lineMetrics:s}=t.measureLines(e);if(a<=i.maxHeight)return e;for(let a=0,r=0;a<s.length;a++){let{lineHeight:n}=s[a];if((r+=n)>i.maxHeight){if("hide"===i.overflow)return[];let s=e.slice(0,a||1),r=s.pop();return s.concat(this.truncateLine(r,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(!1===i.avoidOrphans||e.length<2)return;let{length:a}=e,s=e[a-1],r=e[a-2];if(r.length<s.length)return;let n=r.lastIndexOf(" ");if(-1===n||n===r.indexOf(" ")||s.includes(" "))return;let o=r.slice(n+1);t.textWidth(s+o)<=i.maxWidth&&(e[a-2]=r.slice(0,n),e[a-1]=o+" "+s)}},iu=class extends eC{constructor(){super(...arguments),this.id=(0,s.sX)(this),this.node=new il({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.layoutManager.addListener("layout:complete",()=>this.updateA11yText(e,t))}computeTextWrap(e,t){let{text:i,padding:a,wrapping:s}=this,r=Math.min(this.maxWidth??1/0,e)-2*a,n=this.maxHeight??t-2*a;if(!isFinite(r)&&!isFinite(n)){this.node.text=i;return}let o=id.wrapText(i??"",{maxWidth:r,maxHeight:n,font:this,textWrap:s});this.node.text=o,this.truncated=o.includes(ia.EllipsisChar)}updateA11yText(e,t){let{proxyInteractionService:i}=e;if(this.enabled&&this.text){let a=to.toCanvas(this.node);if(a){let{id:s}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:s,where:t})),this.proxyText.textContent=this.text,this.proxyText.setBounds(a),this.proxyText.addListener("mousemove",t=>this.handleMouseMove(e,t)),this.proxyText.addListener("mouseleave",t=>this.handleMouseLeave(e,t))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(e,t){if(null!=t&&this.enabled&&this.node.visible&&this.truncated){let{x:i,y:a}=to.toCanvas(this.node),s=t.sourceEvent.offsetX+i,r=t.sourceEvent.offsetY+a;e.tooltipManager.updateTooltip(this.id,{canvasX:s,canvasY:r,showArrow:!1},[{type:"structured",title:this.text}])}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};iu.SMALL_PADDING=10,l([ew,t$("node","visible")],iu.prototype,"enabled",2),l([ew,t$("node")],iu.prototype,"text",2),l([ew,t$("node")],iu.prototype,"textAlign",2),l([ew,t$("node")],iu.prototype,"fontStyle",2),l([ew,t$("node")],iu.prototype,"fontWeight",2),l([ew,t$("node")],iu.prototype,"fontSize",2),l([ew,t$("node")],iu.prototype,"fontFamily",2),l([ew,t$("node","fill")],iu.prototype,"color",2),l([ew],iu.prototype,"spacing",2),l([ew],iu.prototype,"maxWidth",2),l([ew],iu.prototype,"maxHeight",2),l([ew],iu.prototype,"wrapping",2),l([ew],iu.prototype,"padding",2),l([ew],iu.prototype,"layoutStyle",2);var ic=(e=>(e.X="x",e.Y="y",e.Angle="angle",e.Radius="radius",e))(ic||{});function ip(e){switch(e){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var ig=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(ig||{}),im=class{constructor(){this.events=new s.bk,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){let i=new iy(e,t);for(let e of Object.values(ig))"number"==typeof e&&this.elements.get(e)?.forEach(e=>e(i));return i}emitLayoutComplete(e,t){let i="layout:complete",{width:a,height:s}=e;this.events.emit(i,{type:i,axes:t.axes??[],chart:{width:a,height:s},clipSeries:t.clipSeries??!1,series:t.series})}},iy=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new y(0,0,e,t)}},ib=class{constructor(){this.title=new iu,this.subtitle=new iu,this.footnote=new iu}positionCaptions(e){let{title:t,subtitle:i,footnote:a}=this,s=e.layoutBox.height/10;if(t.enabled){let{spacing:i}=t;this.positionCaption("top",t,e.layoutBox,s),this.shrinkLayoutByCaption("top",t,e.layoutBox,i)}i.enabled&&(this.positionCaption("top",i,e.layoutBox,s),this.shrinkLayoutByCaption("top",i,e.layoutBox,i.spacing)),a.enabled&&(this.positionCaption("bottom",a,e.layoutBox,s),this.shrinkLayoutByCaption("bottom",a,e.layoutBox,a.spacing))}positionAbsoluteCaptions(e){let{title:t,subtitle:i,footnote:a}=this,{rect:s}=e.series;for(let e of[t,i,a])if("overlay"===e.layoutStyle){if("left"===e.textAlign)e.node.x=s.x+e.padding;else if("right"===e.textAlign){let t=e.node.getBBox();e.node.x=s.x+s.width-t.width-e.padding}}}computeX(e,t){return"left"===e?t.x:"right"===e?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,a){let s=Math.max(ia.getLineHeight(t.fontSize),a);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+("top"===e?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,s)}shrinkLayoutByCaption(e,t,i,a=0){if("block"===t.layoutStyle){let s=t.node.getTextMeasureBBox();i.shrink("top"===e?Math.ceil(s.y-i.y+s.height+a):Math.ceil(i.y+i.height-s.y+a),e)}}};l([ew],ib.prototype,"title",2),l([ew],ib.prototype,"subtitle",2),l([ew],ib.prototype,"footnote",2);var ix=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],iM=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){let e=this.chartService.publicApi?.getOptions()?.chartType;return null==e&&(e="candlestick"),e}guardMemento(e){return null==e||ix.includes(e)}restoreMemento(e,t,i){null!=i&&this.chartService.publicApi?.updateDelta({chartType:i}).catch(e=>s.Vy.error("error restoring state",e))}},iv=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}push(...e){this.destroyFns.push(...e)}},iS="11.3.0",iD=Symbol("previous-memento-not-found"),iI=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=x.create(!0,"history"),this.destroyFns=new iv,this.destroyFns.setFns([e.addListener("series-undo",this.undo.bind(this)),e.addListener("series-redo",this.redo.bind(this))])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){for(let[e,t]of(this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1,this.originators.entries()))this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));let i=new Map;for(let e of t){if(!this.originators.has(e.mementoOriginatorKey))throw Error(`Originator [${e.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(e.mementoOriginatorKey,e.createMemento())}this.history.push({label:e,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){let e=this.history[this.historyIndex];if(e){for(let t of e.mementos.keys()){let e=this.findPreviousMemento(t);if(e===iD)throw Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,e)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){let e=this.history[this.historyIndex+1];if(e){for(let[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):iD}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(iS,iS,t)}debugEvent(...e){this.debug(...e,this.history.map((e,t)=>t===this.historyIndex?`** ${e.label} **`:e.label))}},iL=class e{constructor(e){this.version=e.split("-")[0]}save(...e){let t={version:this.version};for(let i of Object.values(e))t[i.mementoOriginatorKey]=this.encode(i,i.createMemento());return t}restore(e,...t){if("object"!=typeof e)return void s.Vy.warnOnce(`Could not restore data of type [${typeof e}], expecting an object, ignoring.`);if(null==e)return void s.Vy.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");if(!("version"in e)||"string"!=typeof e.version)return void s.Vy.warnOnce("Could not restore data, missing [version] string in object, ignoring.");for(let i of t){let t=this.decode(i,e[i.mementoOriginatorKey]),a=[];if(!i.guardMemento(t,a)){let e=a.length>0?`

${a.join("\n\n")}

`:"";s.Vy.warnOnce(`Could not restore [${i.mementoOriginatorKey}] data, value was invalid, ignoring.${e}`,t);return}i.restoreMemento(this.version,e.version,t)}}encode(t,i){try{return JSON.parse(JSON.stringify(i,e.encodeTypes))}catch(e){throw Error(`Failed to encode [${t.mementoOriginatorKey}] value [${e}].`,{cause:e})}}decode(t,i){if(null==i)return i;try{return JSON.parse(JSON.stringify(i),e.decodeTypes)}catch(e){throw Error(`Failed to decode [${t.mementoOriginatorKey}] value [${e}].`,{cause:e})}}static encodeTypes(e,t){return(0,s.$P)(this[e])?{__type:"date",value:this[e].toISOString()}:t}static decodeTypes(e,t){return(0,s.Gv)(this[e])&&"__type"in this[e]&&"date"===this[e].__type?new Date(this[e].value):t}},iA=class{constructor(){this.caretaker=new iL(iS),this.state=new Map}setState(e,t){O(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){let{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;let a=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:a},e)}},iw=class{constructor(){this.registeredListeners=new Map}addListener(e,t){let i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(let[t,i]of this.registeredListeners.entries()){let a=i.findIndex(t=>t.symbol===e);if(a>=0){i.splice(a,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(let i of this.getListenersByType(e))try{i.handler(...t)}catch(e){s.Vy.errorOnce(e)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},iC=class{constructor(){this.listeners=new iw,this.destroyFns=[],this.destroyed=!1}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(e=>e()),this.destroyed=!0}},ik=class e{constructor(e,t,i){this.element=e,this.topTabGuard=t,this.bottomTabGuard=i,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,e=>this.onTab(e,!1)),this.initTabGuard(this.bottomTabGuard,e=>this.onTab(e,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",e=>this.onBlur(e),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(let e of this.destroyFns)e();this.destroyFns.length=0}initTabGuard(e,t){let i=()=>t(e);e.addEventListener("focus",i),this.destroyFns.push(()=>e.removeEventListener("focus",i))}setGuardIndices(e){(0,s.Bq)(this.topTabGuard,"tabindex",e),(0,s.Bq)(this.bottomTabGuard,"tabindex",e)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur({relatedTarget:e}){let{topTabGuard:t,bottomTabGuard:i}=this;this.hasFocus=!1,0!==this.guardTabIndex&&e!==t&&e!==i&&this.setGuardIndices(this.guardTabIndex)}onTab(e,t){if(0!==this.guardTabIndex){let i;0===e.tabIndex?(i=this.findExitTarget(!t),this.setGuardIndices(this.guardTabIndex)):i=this.findEnterTarget(t),i?.focus()}}static queryFocusable(e,t){let i=(0,s.zk)();return Array.from(e.querySelectorAll(t)).filter(e=>{if(e instanceof HTMLElement){let t=i.getComputedStyle(e);return"none"!==t.display&&"none"!==t.visibility}return!1})}findEnterTarget(t){let i=e.queryFocusable(this.element,'[tabindex="0"]'),a=t?i.length-1:0;return i[a]}findExitTarget(t){let i=e.queryFocusable((0,s.YE)(),"[tabindex]").filter(e=>e.tabIndex>0).sort((e,t)=>e.tabIndex-t.tabIndex),{before:a,after:r}=e.findBeforeAndAfter(i,this.guardTabIndex);return t?a:r}static findBeforeAndAfter(e,t){let i,a,s=0,r=e.length-1;for(;s<=r;){let n=Math.floor((s+r)/2),o=e[n].tabIndex;if(o===t){i=e[n-1]||void 0,a=e[n+1]||void 0;break}o<t?(i=e[n],s=n+1):(a=e[n],r=n-1)}return{before:i,after:a}}};function iN(e,t,i,a,s){t.addEventListener(i,a);let r=()=>t.removeEventListener(i,a,s);return e.push(r),r}function iT(e,t,i,a=["Escape"]){iN(e,t,"keydown",e=>{iP(e,...a)&&i(e)})}function iE(e,t,i){let a=iN(e,window,"mousedown",e=>{[0,2].includes(e.button)&&!ij(t,e)&&(i(),a())});return a}function iO(e,t,i){let a=iN(e,window,"touchstart",e=>{Array.from(e.targetTouches).some(e=>!ij(t,e))&&(i(),a())});return a}function ij(e,t){return t.target instanceof Node&&e.contains(t.target)}function iz(e,t,i,a){i.forEach(e=>(0,s.Bq)(e,"data-focus-visible-override",a)),iN(e,t,"keydown",()=>{i.forEach(e=>(0,s.Bq)(e,"data-focus-visible-override",!0))},{once:!0})}function iR(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function iP(e,...t){return iR(e)&&t.some(t=>e.key===t)}function iF(e,t,i,a){i&&iN(e,t,"keydown",e=>{iP(e,a)&&i.focus()})}var iB={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function iG(e){let{orientation:t,buttons:i,wrapAround:a=!1,onEscape:s,onFocus:r,onBlur:n}=e,{nextKey:o,prevKey:l}=iB[t],h=e=>{e.target&&"tabIndex"in e.target&&(i.forEach(e=>e.tabIndex=-1),e.target.tabIndex=0)},[d,u]=a?[i.length,i.length]:[0,1/0],c=[];for(let e=0;e<i.length;e++){let t=i[(d+e-1)%u],a=i[e],p=i[(d+e+1)%u];iN(c,a,"focus",h),r&&iN(c,a,"focus",r),n&&iN(c,a,"blur",n),s&&iT(c,a,s),function(e,t,i,a,s,r){iF(e,t,s,r),iF(e,t,i,a),iN(e,t,"keydown",e=>{iP(e,a,r)&&e.preventDefault()})}(c,a,p,o,t,l),a.tabIndex=0===e?0:-1}return c}var iV=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(iE(this.destroyFns,e,()=>this.close(!0))),this.destroyFns.push(iO(this.destroyFns,e,()=>this.close(!0)))}close(e){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(e)}finishClosing(e){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0,(0,s.Bq)(this.lastFocus,"aria-expanded",!1),e||this.lastFocus?.focus({preventScroll:!0}),this.lastFocus=void 0}};function iY(e){let{sourceEvent:t,orientation:i,menu:a,buttons:r,closeCallback:n,overrideFocusVisible:o}=e,{nextKey:l,prevKey:h}=iB[i],d=i$(t);(0,s.Bq)(d,"aria-expanded",!0);let u=new iV(a,d,n),c=()=>u.close(),{destroyFns:p}=u;return a.role="menu",a.ariaOrientation=i,p.push(...iG({orientation:i,buttons:r,onEscape:c,wrapAround:!0})),a.tabIndex=-1,iT(p,a,c),iN(p,a,"keydown",e=>{e.target===a&&(e.key===l||e.key===h)&&(e.preventDefault(),r[0]?.focus())}),r[0]?.focus({preventScroll:!0}),void 0!==o&&iz(p,a,r,o),u}function iU(e,t){return i=>{if("true"===e.ariaDisabled)return i.preventDefault();t(i)}}function i_(e){return"button"in e?0===e.button:iR(e)&&("Space"===e.code||"Enter"===e.key)}function i$(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function iW(e){let t=e=>{!e.defaultPrevented&&(0,s.D$)(e.target,"data-preventdefault",!0)&&iP(e,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&e.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var iH=class{constructor(e){this.callback=e,this.devicePixelRatio=(0,s.zk)("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=e=>{e.matches||(this.devicePixelRatio=(0,s.zk)("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){let e=(0,s.zk)("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);e?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},iZ=class{constructor(){let e;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([e,t])=>this.observe(e,t)),this.queuedObserveRequests=[],this.observeWindow()},"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(e=>{for(let{target:t,contentRect:{width:i,height:a}}of e){let e=this.elements.get(t);this.checkSize(e,t,i,a)}})),this.pixelRatioObserver=new iH(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady="complete"===(0,s.YE)("readyState"),this.documentReady?this.observeWindow():(0,s.zk)()?.addEventListener("load",this.onLoad)}destroy(){(0,s.zk)()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){let e=this.pixelRatioObserver?.pixelRatio??1;for(let[t,i]of this.elements)if(null!=i.size&&i.size.pixelRatio!==e){let{width:a,height:s}=i.size;i.size={width:a,height:s,pixelRatio:e},i.cb(i.size,t)}}checkSize(e,t,i,a){e&&(i!==e.size?.width||a!==e.size?.height)&&(e.size={width:i,height:a,pixelRatio:this.pixelRatioObserver?.pixelRatio??1},e.cb(e.size,t))}observe(e,t){if(!this.documentReady)return void this.queuedObserveRequests.push([e,t]);this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e),this.elements.set(e,{cb:t})}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},iK=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),void 0!==t&&super.set(e,t),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},iX=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],iQ=new Set(["canvas-container","canvas","tooltip-container"]),iq={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},iJ=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]),i0={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>i0};function i1(e,t){let i=(0,s.n)("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var i2=class e extends iC{constructor(e,t,i,a="normal"){super(),this.chart=e,this.styleContainer=i,this.mode=a,this.anchorName=`--${(0,s.sX)(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new iZ,this.cursorState=new iK("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let r=!1;if(this.observer=function(e,t){if("undefined"==typeof IntersectionObserver)return;let i=new IntersectionObserver(i=>{for(let a of i)a.target===e&&t(a.intersectionRatio)},{root:e});return i.observe(e),i}(this.element,e=>{0!==e||r||this.listeners.dispatch("hidden",{type:"hidden"}),r=0===e}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-foreground-color: #464646;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-padding: 20px;--ag-charts-shadow-color: #00000080;--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #464646;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-input-background-color: #fff;--ag-charts-input-text-color: #464646;--ag-charts-crosshair-label-background-color: #fff;--ag-charts-crosshair-label-text-color: #464646;--ag-charts-spacing: 4px;--ag-charts-border-radius: 4px;--ag-charts-icon-size: 16px;--ag-charts-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-focus-shadow: 0 0 0 3px var(--ag-charts-accent-color);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-background-color: var(--ag-charts-background-color);--ag-charts-button-border-color: var(--ag-charts-border-color);--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-text-color: var(--ag-charts-text-color);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: solid 1px var(--ag-charts-border-color);--ag-charts-focus-border: solid 1px var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-chrome-text-color);background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-chrome-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-chrome-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-chrome-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);color:var(--ag-charts-chrome-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),this.setContainer(t),this.destroyFns.push(iW(this.element)),"normal"===this.mode){let e=this.rootElements["canvas-center"].element;if(null==e)throw Error("Error initializing tab guards");let t=i1(e,"beforebegin"),i=i1(e,"afterend");this.tabGuards=new ik(e,t,i)}}initDOM(){if("normal"===this.mode){let e=(0,s.n)("div");return e.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',e.firstChild}let e=(0,s.n)("div");e.role="presentation",e.dataset.agCharts="",e.classList.add("ag-charts-wrapper");let t=(0,s.n)("div");return e.appendChild(t),t.role="presentation",t.classList.add("ag-charts-series-area"),e}initRootElements(){let{mode:e,element:t}=this,i={};for(let a of iX){let r,n=`ag-charts-${a}`;if(null==(r="normal"===e?t.classList.contains(n)?t:t.getElementsByClassName(n)[0]:iQ.has(a)?t:t.getElementsByClassName(n)[0]??(0,s.n)("div")))throw Error(`AG Charts - unable to find DOM element ${n}`);i[a]={element:r,children:new Map,listeners:[]}}return i}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0,Object.values(this.rootElements).forEach(e=>{e.children.forEach(e=>e.remove()),e.element.remove()}),this.element.remove()}postRenderUpdate(){"minimal"!==this.mode&&null!=this.pendingContainer&&this.pendingContainer!==this.container&&(0===e.batchedUpdateContainer.length&&(0,s.zk)().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),e.batchedUpdateContainer.push(this))}applyBatchedUpdateContainer(){for(let t of e.batchedUpdateContainer)t.destroyed||t.updateContainer();e.batchedUpdateContainer.splice(0)}setSizeOptions(e=300,t=300,i,a){let{style:s}=this.element;s.width=`${i??e}px`,s.height=`${a??t}px`,this.minWidth=i??e,this.minHeight=a??t,this.updateContainerClassName()}updateContainerSize(){let{style:e}=this.rootElements["canvas-center"].element;e.visibility=null==this.containerSize?"hidden":"",this.containerSize?(e.width=`${this.containerSize.width??0}px`,e.height=`${this.containerSize.height??0}px`):(e.width="",e.height=""),this.updateContainerClassName()}setTabGuardIndex(e){this.tabGuards&&(this.tabGuards.tabIndex=e)}setContainer(e){e!==this.container&&(this.pendingContainer=e,("minimal"===this.mode||null==this.container)&&this.updateContainer())}updateContainer(){let{pendingContainer:e}=this;if(null!=e&&e!==this.container){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),null!=this.documentRoot)for(let e of this.rootElements.styles.children.keys())this.removeChild("styles",e);for(let[t,i]of(this.container=e,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(e),this.initiallyConnected="minimal"===this.mode||e.isConnected,this.styles))this.addStyles(t,i);e.appendChild(this.element),this.sizeMonitor.observe(e,e=>{this.containerSize=e,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}}setThemeClass(e){this.element.classList.forEach(t=>{t.startsWith("ag-charts-theme-")&&t!==e&&this.element.classList.remove(t)}),this.element.classList.add(e)}setThemeParameters(e){let t={accentColor:"accent-color",axisColor:"axis-color",backgroundColor:"background-color",borderColor:"border-color",foregroundColor:"foreground-color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",gridLineColor:"grid-line-color",padding:"padding",subtleTextColor:"subtle-text-color",textColor:"text-color",chromeBackgroundColor:"chrome-background-color",chromeFontFamily:"chrome-font-family",chromeFontSize:"chrome-font-size",chromeFontWeight:"chrome-font-weight",chromeSubtleTextColor:"chrome-subtle-text-color",chromeTextColor:"chrome-text-color",inputBackgroundColor:"input-background-color",inputTextColor:"input-text-color",crosshairLabelBackgroundColor:"crosshair-label-background-color",crosshairLabelTextColor:"crosshair-label-text-color"},i=["fontSize","chromeFontSize"];for(let[a,r]of(0,s.jO)(e)){let e=`${r}`;i.includes(a)&&(e=`${r}px`),this.element.style.setProperty(`--ag-charts-${t[a]}`,e)}}updateCanvasLabel(e){(0,s.Bq)(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){this.getEventElement(this.element,e).addEventListener(e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){let e=(0,s.zk)(),t=new y(0,0,e.innerWidth,e.innerHeight),i=this.getRawOverlayClientRect();return t.intersection(i)?.toDOMRect()??i0}getRawOverlayClientRect(){let e=this.element,t=this.element.getRootNode()?.fullscreenElement;for(;null!=e;){let i;if(null!=t&&e===t)i=!0;else{let t=e.computedStyleMap?.(),a=t?.get("overflow-y")?.toString();i="auto"===a||"scroll"===a}if(i)return y.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}if(null!=this.documentRoot)return y.fromDOMRect(this.documentRoot.getBoundingClientRect());let{innerWidth:i,innerHeight:a}=(0,s.zk)();return new y(0,0,i,a)}getShadowDocumentRoot(e=this.container){let t=e?.ownerDocument?.body??(0,s.YE)("body");for(;null!=e;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){let{children:t}=this.rootElements[e],i=[];for(let e of t.values())i.push(y.fromDOMRect(e.getBoundingClientRect()));return y.merge(i)}isManagedChildDOMElement(e,t,i){let{children:a}=this.rootElements[t],s=a?.get(i);return null!=s&&e.contains(s)}contains(e,t){return null==t?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(t,i){let a,r="data-ag-charts";if(this.styles.set(t,i),null==this.container)return;let n=e=>e.getAttribute(r)===t,o=e=>{let t,i=new Set(["TITLE","META"]),a=!0;for(let s of e.children){if(a&&i.has(s.tagName)){t=s;continue}if(a=!1,n(s))return;s.hasAttribute(r)&&(t=s)}let o=(0,s.n)("style");return null!=this.chart.styleNonce&&(o.nonce=this.chart.styleNonce),null==t?e.prepend(o):e.insertBefore(o,t.nextSibling),o};this.styleContainer?a=o(this.styleContainer):!1===this.initiallyConnected?a=this.addChild("styles",t):null!=this.documentRoot||e.headStyles.has(t)?null!=this.documentRoot&&(a=this.addChild("styles",t)):(a=o((0,s.YE)("head")),e.headStyles.add(t)),null==a||n(a)||(a.setAttribute(r,t),a.innerHTML=i)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e,t){this.cursorState.set(e,t),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(e,t,i,a){let{element:r,children:n,listeners:o}=this.rootElements[e];if(!n)throw Error("AG Charts - unable to create DOM elements after destroy()");if(n.has(t))return n.get(t);let{childElementType:l="div"}=iJ.get(e)??{};if(i&&i.tagName.toLowerCase()!==l.toLowerCase())throw Error("AG Charts - mismatching DOM element type");let h=i??(0,s.n)(l);for(let[e,t,i]of o)h.addEventListener(e,t,i);if(n.set(t,h),"style"===l&&null!=this.chart.styleNonce&&(h.nonce=this.chart.styleNonce),a){let e=r.querySelector(a.query);if(null==e)throw Error(`AG Charts - addChild query failed ${a.query}`);e.insertAdjacentElement(a.where,h)}else r?.appendChild(h);return h}removeChild(e,t){let{children:i}=this.rootElements[e];i&&(i.get(t)?.remove(),i.delete(t))}incrementDataCounter(e){let{dataset:t}=this.element;t[e]??(t[e]="0"),t[e]=String(Number(t[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}updateContainerClassName(){let{element:e,containerSize:t,minWidth:i,minHeight:a}=this;e.classList.toggle(iq.safeHorizontal,i>=(t?.width??1/0)),e.classList.toggle(iq.safeVertical,a>=(t?.height??1/0))}};i2.batchedUpdateContainer=[],i2.headStyles=new Set;var i4=class extends t7{constructor(){super((0,s.n)("div")),this.textElement=(0,s.FJ)("text"),this.textElement.role="presentation",this.svgElement=(0,s.FJ)("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){this.textElement.textContent=e;let t=this.textElement,i=t.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},i3=class extends t7{constructor(e,t){super(e),(0,s.Bq)(this.elem,"role",t),this.setEnabled(!0)}destructor(){}setEnabled(e){(0,s.Bq)(this.elem,"aria-disabled",!e)}addListener(e,t){return super.addListener(e,(i,a)=>{("click"===e||"dblclick"===e)&&this.isDisabled()||t(i,a)})}},i5=class extends i3{constructor(){super((0,s.n)("button"))}},i9=class extends t7{constructor(){super((0,s.n)("div")),(0,s.Bq)(this.elem,"role","group")}destructor(){}},i6=class extends t7{constructor(e,t){super((0,s.n)("div")),this.focusedChildIndex=0,this.onChildFocus=(e,t)=>{let i=this.children[this.focusedChildIndex];this.focusedChildIndex=t.index,i?.setTabIndex(-1),t.setTabIndex(0)},this.onChildKeyDown=(e,t)=>{let i=this.orientation,[a,s]="both"===i?[iB.horizontal,iB.vertical]:[iB[i],void 0],r=-1;if(iR(e.sourceEvent)){let i=e.sourceEvent.key;i===a.nextKey||i===s?.nextKey?r=t.index+1:(i===a.prevKey||i===s?.prevKey)&&(r=t.index-1)}this.children[r]?.focus()},(0,s.Bq)(this.elem,"role",t),this.orientation=e}get orientation(){return(0,s.D$)(this.elem,"aria-orientation")??"both"}set orientation(e){(0,s.Bq)(this.elem,"aria-orientation","both"!==e?e:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){for(let e of(this.focusedChildIndex=0,this.children))this.removeChildListeners(e),e.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown)}removeChildListeners(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}onChildAdded(e){this.addChildListeners(e),e.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(e){this.removeChildListeners(e);let{focusedChildIndex:t,children:i}=this,a=t===e.index;for(let e=0;e<i.length;e++){let a=i[e];a.index===t&&(this.focusedChildIndex=e),a.index=e}if(a){let e=i[t]??i[t-1];e?(this.focusedChildIndex=e.index,e.setTabIndex(0)):this.focusedChildIndex=0}}},i8=class extends i6{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(e=>e.getElement().parentElement.remove())}addChildToDOM(e,t){let i=(0,s.n)("div");(0,s.Bq)(i,"role","listitem"),(0,s.EM)(i,"position","absolute"),t7.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(e){0===this.children.length&&(e=!0),super.setHidden(e)}},i7=class extends t7{constructor(e){super(e)}destructor(){}},ae=new Intl.NumberFormat("en-US",{style:"percent"});function at(e,t=2){return"number"==typeof e?as(e,t):"string"==typeof e?e:String(e??"")}function ai(e){return ae.format(e)}var aa=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function as(e,t){let i=aa.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),aa.set(t,i)),i.format(e)}var ar=class e extends t7{constructor(){super((0,s.n)("input")),this._step=e.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(e){if(e!==this._keyboardStep?.step&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==e)){let t=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:()=>this.getElement().step=e.attributeValue,onKeyUp:t,onBlur:t},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return(0,s.D$)(this.elem,"aria-orientation")??"both"}set orientation(t){(0,s.Bq)(this.elem,"aria-orientation","both"!==t?t:void 0),e.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(e,t){let i=this.getValueRatio(),a=(0,s.qE)(e,i,t);return a!==i&&this.setValueRatio(a),a}setValueRatio(e,t){let{divider:i}=this.step,a=Math.round(1e4*e)/i,{ariaValueText:s=ai(a/i)}=t??{},r=this.getElement();r.value=`${a}`,r.ariaValueText=s}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(t,i){"both"===i?t.removeListener("keydown",e.onKeyDown):t.addListener("keydown",e.onKeyDown)}static onKeyDown(e,t){let i=[],{orientation:a}=t;"horizontal"===a?i=["ArrowUp","ArrowDown"]:"vertical"===a&&(i=["ArrowLeft","ArrowRight"]),i.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}};ar.STEP_ONE={attributeValue:"1",divider:1},ar.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var an=class extends i5{constructor(){super(),(0,s.Bq)(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){(0,s.Bq)(this.elem,"aria-checked",e)}},ao=class extends i6{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function al(e,t){return t.params?.type===e}function ah(e){let t={params:e,result:void 0};return t.result=function(e){if("button"===e)return new i5;if("slider"===e)return new ar;if("toolbar"===e)return new ao;if("group"===e)return new i9;if("list"===e)return new i8;else if("region"===e)return new i7((0,s.n)("div"));else if("text"===e)return new i4;else if("listswitch"===e)return new an;else throw Error("AG Charts - error allocating meta")}(t.params.type),t}var ad=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e())}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){let t=ah(e),{params:i,result:a}=t,s=a.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,s),s.classList.add(...i.classList,"ag-charts-proxy-container"),s.role=i.type,"ariaOrientation"in i&&(s.ariaOrientation=i.ariaOrientation),al("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),a}createProxyElement(e){let t=ah(e);if(al("button",t)){let{params:e,result:i}=t,a=i.getElement();if(this.initInteract(e,i),"string"==typeof e.textContent)a.textContent=e.textContent;else{let{textContent:t}=e;this.addLocalisation(()=>{a.textContent=this.localeManager.t(t.id,t.params)})}this.setParent(t.params,t.result)}if(al("slider",t)){let{params:e,result:i}=t,a=i.getElement();this.initInteract(e,i),a.type="range",a.role="presentation",a.style.margin="0px",this.addLocalisation(()=>{a.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)}),this.setParent(t.params,t.result)}if(al("text",t)){let{params:e,result:i}=t;this.initElement(e,i),this.setParent(t.params,t.result)}if(al("listswitch",t)){let{params:e,result:i}=t;this.initInteract(e,i),i.setTextContent(e.textContent),i.setChecked(e.ariaChecked),i.setAriaDescribedBy(e.ariaDescribedBy),this.setParent(t.params,t.result)}if(al("region",t)){let{params:e,result:i}=t,a=i.getElement();this.initInteract(e,i),a.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){let i=t.getElement();return(0,s.EM)(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){let{tabIndex:i,domIndex:a}=e,s=this.initElement(e,t);void 0!==i&&(s.tabIndex=i),void 0!==a&&(t.domIndex=a)}setParent(e,t){if("parent"in e)e.parent?.addChild(t);else{let i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i)}}},au={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},ac=/\$\{(\w+)}(?:\[(\w+)])?/gi,ap={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},ag=({defaultValue:e,variables:t})=>e?.replaceAll(ac,(e,i,a)=>{let r=t[i],n=null!=a?ap[a]:null;return(null!=a&&null==n&&s.Vy.warnOnce(`Format style [${a}] is not supported`),null!=n)?n.format(r):"number"==typeof r?ap.number.format(r):r instanceof Date?ap.datetime.format(r):String(r)}),am=class extends iw{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e,t={}){let{localeText:i=au,getLocaleText:a}=this,s=i[e];return a?.({key:e,defaultValue:s,variables:t})??ag({key:e,defaultValue:s,variables:t})??e}},ay=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;let{width:t,height:i,canvasElement:a,willReadFrequently:r=!1}=e;this.pixelRatio=e.pixelRatio??(0,s.zk)("devicePixelRatio")??1,this.element=a??(0,s.n)("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:r}),this.onEnabledChange(),this.resize(t??0,i??0,this.pixelRatio),v(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;let{element:a,context:s}=this;a.width=Math.round(e*i),a.height=Math.round(t*i),s.setTransform(i,0,0,i,0,0),a.style.width=e+"px",a.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){M(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};l([k(e=>e.onEnabledChange())],ay.prototype,"enabled",2);var af=class extends s.bk{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(e,t){let i=this.cache.get(e);if(i?.image)return i.image;if(null!=i&&t)return void i.nodes.add(t);if(!t)return;let a={image:void 0,nodes:new Set([t])},s=new Image;return this.imageLoadingCount++,s.onload=()=>{a.image=s,a.nodes.forEach(e=>e.markDirty()),a.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:e})},s.onerror=()=>{this.imageLoadingCount--,a.nodes.clear(),this.emit("image-error",{uri:e})},s.src=e,this.cache.set(e,a),a.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){this.cache.forEach(e=>{e.nodes.clear()}),this.cache.clear()}},ab=class{constructor(e){this.canvas=e,this.debug=x.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i),this.layersMap.forEach(({canvas:a})=>a.resize(e,t,i))}addLayer(e){let{width:t,height:i,pixelRatio:a}=this.canvas,{name:s}=e,r=new D({width:t,height:i,pixelRatio:a});return this.layersMap.set(r,{id:this.nextLayerId++,name:s,canvas:r}),this.debug("Scene.addLayer() - layers",this.layersMap),r}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(let e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}};function ax(e,t,i,a,r={},n=y.zero){if(!x.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:o=0,layersSkipped:l=0,nodesRendered:h=0,nodesSkipped:d=0,opsPerformed:u=0,opsSkipped:c=0}=a??{},p=performance.now(),{start:g,...m}=t,f=Object.entries(m).map(([e,t])=>aI(e,t)).filter(e=>null!=e).join(" + "),b=Object.entries(r).map(([e,t])=>`${e}: ${JSON.stringify(t)}`).join(" ; "),M=x.check("scene:stats:verbose"),v=function(){if(!("memory"in performance))return;let{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,a=[];for(let s of[t,e,i])"number"==typeof s&&a.push(function(e){for(let t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}(s));return`Heap ${a.join(" / ")}`}(),S=[`${aI("⏱️",g,p)} (${f})`,`${b}`,`Layers: ${M?aD(o,l):e.size}`,M?`Nodes: ${aD(h,d)}`:null,M?`Ops: ${aD(u,c)}`:null,M&&v?v:null].filter(s.Kg),D=new is(e=>i.measureText(e)),I=new Map(S.map(e=>[e,D.measureLines(e)])),L=Math.max(...Array.from(I.values(),e=>e.width)),A=function(e,t){let i=0;for(let a of e)i+=t(a);return i}(I.values(),e=>e.height),w=2+n.x;i.save(),i.fillStyle="white",i.fillRect(w,0,L,A),i.fillStyle="black";let C=0;for(let[e,t]of I.entries())C+=t.height,i.fillText(e,w,C);i.restore()}var aM=new Set,av=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function aS(e,t){if(!x.check(!0,"scene"))return{};let i=0;return{node:"json"===t?function(e){let{...t}=e;for(let e of Object.keys(t))av.has(e)||"number"==typeof t[e]||"string"==typeof t[e]||"boolean"!=typeof t[e]&&(aM.add(e),delete t[e]);return t}(e):e,name:e.name??e.id,dirty:e.dirty,...Array.from(e.children(),e=>aS(e,t)).reduce((e,t)=>{let{name:a}=t,{node:{visible:s,opacity:r,zIndex:n,translationX:o,translationY:l,rotation:h,scalingX:d,scalingY:u},node:c}=t;(!s||r<=0)&&(a=`(${a})`),tu.is(c)&&c.renderToOffscreenCanvas&&(a=`*${a}*`);let p=Array.isArray(n)?`(${n.join(", ")})`:n,g=[`${(i++).toString().padStart(3,"0")}|`,`${a??"<unknown>"}`,`z: ${p}`,o&&`x: ${o}`,l&&`y: ${l}`,h&&`r: ${h}`,null!=d&&1!==d&&`sx: ${d}`,null!=u&&1!==u&&`sy: ${u}`].filter(e=>!!e).join(" "),m=g,y=1;for(;null!=e[m]&&y<100;)m=`${g} (${y++})`;return e[m]=t,e},{})}}function aD(e,t){let i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function aI(e,t,i){return`${e}: ${Math.round(100*(null!=i?i-t:t))/100}ms`}var aL=class extends s.bk{constructor(e){super(),this.debug=x.create(!0,"scene"),this.id=(0,s.sX)(this),this.imageLoader=new af,this.root=null,this.pendingSize=null,this.isDirty=!1,this.destroyFns=[],this.updateDebugFlags(),this.canvas=new ay(e),this.layersManager=new ab(this.canvas),this.destroyFns.push(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",({uri:e})=>{s.Vy.warnOnce(`Unable to load image ${e}`)}))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(e){let{element:t}=this.canvas;return t.parentElement?.removeChild(t),e.appendChild(t),this}setRoot(e){return this.root===e||(this.isDirty=!0,this.root?.setScene(),this.root=e,e&&(e.visible=!0,e.setScene(this))),this}updateDebugFlags(){x.inDevelopmentMode(()=>ee._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return this.root?.removeChild(e),this}download(e,t){(0,s.Is)(this.canvas.toDataURL(t),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),i??(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)&&(this.pendingSize=[e,t,i],this.isDirty=!0,!0)}render(e){let{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:a}=e??{},{canvas:r,canvas:{context:n}={},root:o,pendingSize:l,width:h,height:d,pixelRatio:u}=this;if(!n)return;let c=performance.now(),p=!1;if(l&&(p=!0,this.layersManager.resize(...l),this.pendingSize=null),o&&!o.visible){this.isDirty=!1;return}if(o?.dirty===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:aS(o,"console")}),ax(this.layersManager,t,n,void 0,i,a);return}let g={ctx:n,width:h,height:d,devicePixelRatio:u,debugNodes:{}};x.check("scene:stats:verbose")&&(g.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0});let m=(0,s.$r)((0,s.zk)("agChartsSceneDebug")),y=[];for(let e of m)"layout"===e?y.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):y.push(e);g.debugNodeSearch=y;let f=!1;if((o?.dirty!==!1||p)&&(f=!0,r.clear()),o&&x.check("scene:dirtyTree")){let{dirtyTree:e,paths:t}=function e(t){if(!t.dirty)return{dirtyTree:{},paths:[]};let i=Array.from(t.children(),t=>e(t)).filter(e=>e.paths.length>0),a=tu.is(t)?t.name??t.id:t.id,s=i.length?i.flatMap(e=>e.paths).map(e=>`${a}.${e}`):[a];return{dirtyTree:{name:a,node:t,dirty:t.dirty,...i.map(e=>e.dirtyTree).filter(e=>null!=e.dirty).reduce((e,t)=>(e[t.name??"<unknown>"]=t,e),{})},paths:s}}(o);x.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}if(o&&f){if(o.visible&&o.preRender(g),this.debug.check()){let e=aS(o,"console");this.debug("Scene.render() - before",{canvasCleared:f,tree:e})}o.visible&&(n.save(),o.render(g),n.restore())}t["✍️"]=performance.now()-c,n.verifyDepthZero?.(),this.isDirty=!1,ax(this.layersManager,t,n,g.stats,i,a);var b=g.debugNodes;for(let[e,t]of(n.save(),Object.entries(b))){let i=to.toCanvas(t);if(!i){s.Vy.log(`Scene.render() - no bbox for debugged node [${e}].`);continue}n.globalAlpha=.8,n.strokeStyle="red",n.lineWidth=1,n.strokeRect(i.x,i.y,i.width,i.height),n.fillStyle="red",n.strokeStyle="white",n.font="16px sans-serif",n.textBaseline="top",n.textAlign="left",n.lineWidth=2,n.strokeText(e,i.x,i.y,i.width),n.fillText(e,i.x,i.y,i.width)}n.restore(),o&&this.debug.check()&&this.debug("Scene.render() - after",{tree:aS(o,"console"),canvasCleared:f})}toSVG(){let{root:e,width:t,height:i}=this;if(null!=e)return ee.toSVG(e,t,i)}strip(){let{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.destroyFns.forEach(e=>e()),Object.assign(this,{canvas:void 0})}};function aA(e,t){return"context"in e&&null!=t[0]&&"object"==typeof t[0]&&(t[0].context=e.context,!0)}function aw(e,t,i,a){return!aA(e,a)&&t&&aA(t,a),i(...a)}aL.className="Scene";var aC=class{constructor(){this.cache=new WeakMap}call(e,t,i,...a){let s,r=this.cache.get(i);try{s=JSON.stringify(a)}catch{return this.invoke(e,t,i,a,r)}return(null==r&&(r=new Map,this.cache.set(i,r)),r.has(s))?r.get(s):this.invoke(e,t,i,a,r,s)}invoke(e,t,i,a,r,n){try{let s=aw(e,t,i,a);return r&&null!=n&&r.set(n,s),s}catch(e){s.Vy.warnOnce("User callback errored, ignoring",e);return}}invalidateCache(){this.cache=new WeakMap}},ak=class extends iC{constructor(e,t){super(),this.annotationRoot=e,this.fireChartEvent=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return null==e||(0,s.cy)(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map(e=>{let t=this.getAnnotationTypeStyles(e.type);return z(e,t)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:tI([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>(this.annotationRoot?.removeChild(e),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(let t of e)"textAlign"in t&&delete t.textAlign;return e}},aN=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.ZOOM_SELECTION=3]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=4]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=5]="SERIES_LAYER",e[e.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=8]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=9]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=10]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=11]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=12]="STATUS_BAR",e[e.SERIES_LABEL=13]="SERIES_LABEL",e[e.LEGEND=14]="LEGEND",e[e.NAVIGATOR=15]="NAVIGATOR",e[e.FOREGROUND=16]="FOREGROUND",e))(aN||{}),aT=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new tu({name:"Axes-Grids",zIndex:1}),this.axisGroup=new tu({name:"Axes",zIndex:2}),this.axisLabelGroup=new tu({name:"Axes-Labels",zIndex:13}),this.axisCrosslineRangeGroup=new tu({name:"Axes-Crosslines-Range",zIndex:4}),this.axisCrosslineLineGroup=new tu({name:"Axes-Crosslines-Line",zIndex:8}),this.axisCrosslineLabelGroup=new tu({name:"Axes-Crosslines-Label",zIndex:13}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){let i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(let a of e)t.includes(a)||(a.detachAxis(i),a.destroy());for(let a of t)e?.includes(a)||a.attachAxis(i);for(let e of(this.axes.clear(),t)){let t=e.createAxisContext();this.axes.has(t.direction)?this.axes.get(t.direction)?.push(t):this.axes.set(t.direction,[t])}}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},aE=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",e[e.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=5]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=7]="SCENE_RENDER",e[e.NONE=8]="NONE",e))(aE||{}),aO=class extends iw{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=x.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){"function"==typeof e&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return(0,s.nF)(e=>this.fetch(e).catch(e=>s.Vy.error("callback failed",e)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return(0,s.nF)((e,t)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:t})},e,{leading:!0,trailing:!0})}async fetch(e){let t;if(!this.dataSourceCallback)throw Error("DataService - [dataSource.getData] callback not initialised");let i=performance.now(),a=this.requestCounter++;this.debug(`DataService - requesting | ${a}`),this.freshRequests.push(a);try{t=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-i}ms | ${a}`)}catch(e){this.debug(`DataService - request failed | ${a}`),s.Vy.errorOnce(`DataService - request failed | [${e}]`)}this.isLoadingInitialData=!1;let r=this.freshRequests.findIndex(e=>e===a);if(-1===r||this.dispatchOnlyLatest&&r!==this.freshRequests.length-1)return void this.debug(`DataService - discarding stale request | ${a}`);this.freshRequests=this.freshRequests.slice(r+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(t)?this.throttledDispatch(a,t):this.dispatch("data-error")}};l([tW({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],aO.prototype,"dispatchThrottle",2),l([tW({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],aO.prototype,"requestThrottle",2);var aj=class{constructor(e,t){this.domManager=e,this.updateService=t,this.observers=[]}updateFonts(e){e&&0!==e.size&&(this.loadFonts(e),e.forEach(e=>{this.observeFontStatus(e)}))}destroy(){for(let e of this.observers)e.disconnect();this.observers=[]}loadFonts(e){let t=Array.from(e).map(e=>encodeURIComponent(e)),i=":wght@100;200;300;400;500;600;700;800;900",a=`${i}&family=`,s=`@import url('https://fonts.googleapis.com/css2?family=${t.join(a)}${i}&display=swap');
`;this.domManager.addStyles(`google-font-${t.join("-")}`,s)}observeFontStatus(e){let t=window.document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("margin","0"),t.style.setProperty("padding","0"),t.style.setProperty("overflow","hidden"),t.style.setProperty("visibility","hidden"),t.style.setProperty("width","auto"),t.style.setProperty("max-width","none"),t.style.setProperty("font-synthesis","none"),t.style.setProperty("font-family",e),t.style.setProperty("font-size","16px"),t.style.setProperty("white-space","nowrap"),t.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(e)}`,t);let i=new ResizeObserver(e=>{let t=e?.at(0)?.contentBoxSize.at(0)?.inlineSize;null!=t&&t>0&&(it.clear(),this.updateService.update(4))});i.observe(t),this.observers.push(i)}};function az(e,t){if("string"==typeof e)try{e=ey.fromString(e)}catch{e=ey.fromArray([0,0,0])}if("string"==typeof t)try{t=ey.fromString(t)}catch{t=ey.fromArray([0,0,0])}return i=>ey.mix(e,t,i).toRgbaString()}var aR={};o(aR,{easeIn:()=>aF,easeInOut:()=>aG,easeInOutQuad:()=>aU,easeInQuad:()=>aV,easeOut:()=>aB,easeOutQuad:()=>aY,inverseEaseOut:()=>a_,linear:()=>aP});var aP=e=>e,aF=e=>1-Math.cos(e*Math.PI/2),aB=e=>Math.sin(e*Math.PI/2),aG=e=>-(Math.cos(e*Math.PI)-1)/2,aV=e=>e*e,aY=e=>1-(1-e)**2,aU=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,a_=e=>2*Math.asin(e)/Math.PI,a$=["initial","remove","update","add","trailing","end","none"],aW={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:.2,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},aH=(e=>(e.Loop="loop",e.Reverse="reverse",e))(aH||{});function aZ(e){return e.every(e=>e instanceof ee)?{nodes:e,selections:[]}:{nodes:[],selections:e}}var aK=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??aP,this.phase=e.phase;let t=e.duration??aW[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,!0===e.skip&&(this.onUpdate?.(e.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),!1!==e.collapsable&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return!function e(t,i){return t===i||(Array.isArray(t)&&Array.isArray(i)?t.length===i.length&&t.every((t,a)=>e(t,i[a])):p(t)&&p(i)?t.equals(i):!!((0,s.Qd)(t)&&(0,s.Qd)(i))&&j(t,i,e))}(e.from,e.to)?t:0}play(e=!1){if(!this.isPlaying&&!this.isComplete)this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,e&&this.onUpdate?.(this.from,!0,this))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(e){if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);let t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;let i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);let a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,this.onComplete?.(this),e-(a-t)):0}get delta(){return this.ease((0,s.qE)(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!=typeof t||p(t))return this.interpolateValue(e,t);let i=[];for(let a of Object.keys(t)){let s=this.interpolateValue(e[a],t[a]);null!=s&&i.push([a,s])}return e=>{let t={};for(let[a,s]of i)t[a]=s(e);return t}}interpolateValue(e,t){if(null!=e&&null!=t){if(p(e))return i=>e[c](t,i);try{switch(typeof e){case"number":return i=>Number(e)*(1-i)+Number(t)*i;case"string":return az(e,t);case"boolean":if(e===t)return()=>e;break;case"object":return()=>e;default:throw Error(`Unable to interpolate values: ${e}, ${t}`)}}catch{}throw Error(`Unable to interpolate values: ${e}, ${t}`)}}},aX=class{constructor(e){this.maxAnimationTime=e,this.debug=x.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(a$.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(a$[this.currentPhase])??[]}checkOverlappingId(e){null!=e&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(!e.isComplete){if(a$.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}}removeAnimation(e){this.controllers.delete(e.id);let t=this.phases.get(e.phase),i=t?.indexOf(e);null!=i&&i>=0&&t?.splice(i,1)}progress(e){if(!this.isReady)return;let t=0===e?.01:e,i=()=>{let e=a$[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:e,phaseMeta:aW[e]}},{phase:a,phaseControllers:s,phaseMeta:r}=i(),n=()=>null==a$[this.currentPhase],o=()=>{for({phase:a,phaseControllers:s,phaseMeta:r}=i();!n()&&0===s.length;)this.currentPhase++,({phase:a,phaseControllers:s,phaseMeta:r}=i()),this.debug(`AnimationBatch - phase changing to ${a}`,{unusedTime:t},s)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${a} with ${s?.length} of ${l}`);do{let e=t,i=r.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed,a=0;for(let r of s)i?r.stop():t=Math.min(r.update(e),t),r.isComplete&&(a++,this.removeAnimation(r));this.animationTimeConsumed+=e-t,this.debug(`AnimationBatch - updated ${s.length} controllers; ${a} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),o()}while(t>0&&!n());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(let[,t]of this.controllers)if(t.duration>0&&!0!==aW[t.phase].skipIfNoEarlierAnimations){e=!1;break}if(!e)for(let[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(e=!0){if(!1===this.skipAnimations&&!0===e){for(let e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(let e of this.controllers.values())e.play()}stop(){for(let e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(e){s.Vy.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(e){if(null!=e&&this.controllers.has(e)){let t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(let t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach(e=>e()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(e){if(!this.isActive())return 0;let t=0;for(let[i,a]of this.phases)0!==a.length&&(null==e||e===i)&&(t+=Math.max(...a.map(e=>e.isComplete?0:e.delay+e.duration-(e.elapsed??0))));return t}destroy(){this.stop(),this.controllers.clear()}},aQ=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(aQ||{}),aq=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function aJ(e){return null==e||!isNaN(e)&&e>=0&&e<=2}var a0=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new aX(1.5*this.defaultDuration),this.debug=x.create(!0,"animation"),this.events=new s.bk,this.rafAvailable="undefined"!=typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){let t=this.batch;try{t.checkOverlappingId(e.id)}catch(e){this.failsafeOnError(e);return}let{id:i}=e;null==i&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);let a=this.isSkipped()||"none"===e.phase;a&&this.debug("AnimationManager - skipping animation");let{delay:s,duration:r}=e;if(!aJ(s))throw Error(`Animation delay of ${s} is unsupported (${i})`);if(!aJ(r))throw Error(`Animation duration of ${r} is unsupported (${i})`);let n=new aK({...e,id:i,skip:a,autoplay:!!this.isPlaying&&e.autoplay,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(n,this.defaultDuration))return this.batch.addAnimation(n),n}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(e){return this.batch.getRemainingTime(e)}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=(0,s.zk)().requestAnimationFrame(t=>{e(t).catch(e=>s.Vy.error(e))})}forceTimeJump(e,t){return!1}requestAnimation(){let e;if(!this.rafAvailable||!this.batch.isActive()||null!==this.requestId)return;let t=async i=>{let a=()=>{let t=i-(e??i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:t}),this.interactionManager.pushState(2);try{this.batch.progress(t)}catch(e){this.failsafeOnError(e)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:t})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(a):await this.chartUpdateMutex.acquire(a),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){s.Vy.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new aX(1.5*this.defaultDuration),!0===e&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},a1=class extends iC{seriesEvent(e){this.listeners.dispatch(e,{type:e})}seriesKeyNavZoom(e,t){this.listeners.dispatch("series-keynav-zoom",{type:"series-keynav-zoom",delta:e,widgetEvent:t})}legendItemClick(e,t,i,a,s){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",legendType:e,series:t,itemId:i,enabled:a,legendItemName:s})}legendItemDoubleClick(e,t,i,a,s,r){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",legendType:e,series:t,itemId:i,enabled:a,legendItemName:r,numVisibleItems:s})}},a2=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},a4=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","toggle-series-visibility","toggle-other-series"]}},a3=class{constructor(){this.items=new a2,this.lists=new a4}},a5=class extends iC{constructor(){super(),this.builtins=new a3,this.hiddenActions=new Set,this.setVisible("zoom-to-cursor",!1),this.setVisible("pan-to-cursor",!1)}static check(e,t){return t.showOn==e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,a){let{widgetEvent:s}=t;if(s.sourceEvent.defaultPrevented)return;let r={type:"context-setup",showOn:e,x:a?.x??t.canvasX,y:a?.y??t.canvasY,context:i,widgetEvent:s};this.listeners.dispatch("context-setup",r),r.type="context-complete",this.listeners.dispatch("context-complete",r)}isVisible(e){return!this.hiddenActions.has(e)}setVisible(e,t){t?this.hiddenActions.delete(e):this.hiddenActions.add(e)}},a9=class extends iC{constructor(){super(...arguments),this.highlightStates=new iK}updateHighlight(e,t){let{activeHighlight:i}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||null!=e&&null!=t&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}};function a6(e,t){if(null==e||0===t.length)return[!1,!1];let i=e.valueOf(),a=t[0],s=t[t.length-1];if("string"==typeof a)return[i===a,i===s];let r=a.valueOf(),n=s.valueOf();return r>n&&([r,n]=[n,r]),[i===r,i===n]}function a8(e,t,i,a,s){let{xValue:r,yValue:n}=e,[o,l]=a6(n,s),[h,d]=a6(r,a);return{xKey:t,yKey:i,xValue:r,yValue:n,first:h,last:d,min:o,max:l}}function a7(e,[t,i],a){let r=(0,s.S3)(0,e-1,e=>{let i=a(e)?.[1]??NaN;return!Number.isFinite(i)||i>t})??0,n=(0,s.I5)(0,e-1,e=>{let t=a(e)?.[0]??NaN;return!Number.isFinite(t)||t<i})??e-1;return[r,n=Math.min(n+1,e)]}function se(e,t,i){if(i){let{x:e,y:t,width:a,height:s}=i;return{canvasX:e+a/2,canvasY:t+s/2}}let a=t.yBar?.upperPoint??t.midPoint??e.datumMidPoint?.(t);if(a){let{x:t,y:i}=to.toCanvasPoint(e.contentGroup,a.x,a.y);return{canvasX:Math.round(t),canvasY:Math.round(i)}}}function st(e,t,i,a,s){let r=-1,n=0,o=0,l=!1;for(;n<a&&r<=t-e;){r+=1;let a=i+o;if(l||(o*=-1),o>=0&&(o+=1),l&&o<0&&(o-=1),a<e||a>t){l=!0;continue}s(a)&&(n+=1)}return n}var si=class{constructor(e,t,i){this.domManager=t,this.tooltip=i,this.stateTracker=new iK,this.suppressState=new iK(!1),this.appliedState=null,this.destroyFns=[],this.destroyFns.push(i.setup(e,t),t.addListener("hidden",()=>this.tooltip.hide()))}destroy(){this.destroyFns.forEach(e=>e())}updateTooltip(e,t,i,a){i??(i=this.stateTracker.get(e)?.content),this.stateTracker.set(e,{meta:t,content:i,pagination:a}),this.applyStates()}removeTooltip(e){this.stateTracker.delete(e),this.applyStates()}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}applyStates(){let e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):void 0;if(this.suppressState.stateValue()||t?.meta==null||t?.content==null){this.appliedState=null,this.tooltip.hide();return}let i=this.domManager.getBoundingClientRect(),a="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():i;if(this.appliedState?.content===t?.content){let e=this.tooltip.isVisible();this.tooltip.show(a,i,t?.meta,null,void 0,e)}else this.tooltip.show(a,i,t?.meta,t?.content,t?.pagination);this.appliedState=t}static makeTooltipMeta(e,t,i,a){let{canvasX:s,canvasY:r}=e,n=t.properties.tooltip,{placement:o,defaultPlacement:l,anchorTo:h,defaultAnchorTo:d,xOffset:u,yOffset:c}=n.position,p=se(t,i,a);return{canvasX:s,canvasY:r,nodeCanvasX:p?.canvasX??s,nodeCanvasY:p?.canvasY??r,enableInteraction:n.interaction?.enabled??!1,showArrow:n.showArrow,position:{placement:o,defaultPlacement:l,anchorTo:h,defaultAnchorTo:d,xOffset:u,yOffset:c}}}isEnteringInteractiveTooltip(e){let{tooltip:t}=this,i=e.relatedTarget;return t.interactive&&t.enabled&&t.isVisible()&&t.contains(i)}};function sa(e,t,i){let{offsetX:a,offsetY:s,clientX:r,clientY:n,currentX:o,currentY:l,sourceEvent:h}=i;return{type:t,device:e,offsetX:a,offsetY:s,clientX:r,clientY:n,currentX:o,currentY:l,sourceEvent:h}}function ss(e,t){return e*e+t*t>=9}var sr=class{constructor(e){this.destroyFns=[],this.listeners=new iw,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.destroyFns.push(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.destroyFns.forEach(e=>e()),this.listeners.destroy()}addListener(e,t){return this.listeners.addListener(e,t)}dispatch(e){this.listeners.dispatch(e.type,e)}onTouchStart(e){let{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=i}onTouchMove(e){let{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=t,this.touch.clientY=i}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.dispatch(e)}onDblClick(e){this.dispatch({device:"mouse",...e})}onDragStart(e){this.dragStartEvent=e}onDragMove(e){var t,i;null!=this.dragStartEvent&&(t=e.originDeltaX,t*t+(i=e.originDeltaY)*i>=9)&&(this.dispatch(this.dragStartEvent),this.dispatch({...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.dispatch(e)}onDragEnd(e){if(this.isDragging){this.dispatch(e),this.isDragging=!1;return}if("mouse"===e.device){let t=sa("mouse","click",e);this.dispatch(t)}else if("touchend"===e.sourceEvent.type){var t,i;if(t=this.touch.distanceTravelledX,t*t+(i=this.touch.distanceTravelledY)*i>=9)return;let a=sa("touch","click",e);this.dispatch(a);let s=Date.now();if(void 0!==this.lastClick&&s-this.lastClick.time<=505&&function(e,t){let i=e.clientX-t.clientX,a=e.clientY-t.clientY;return i*i+a*a<900}(this.lastClick,e)){let t=sa(e.device,"dblclick",e);this.dispatch(t),this.lastClick=void 0}else this.lastClick={time:s,clientX:e.clientX,clientY:e.clientY}}}},sn=class extends i7{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},so=class{constructor(e){this.seriesWidget=new sn(e.getParent("series-area")),this.chartWidget=new sn(e.getParent("canvas-proxy")),this.containerWidget=new sn(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),this.seriesDragInterpreter=new sr(this.seriesWidget)}destroy(){this.seriesDragInterpreter.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function sl(e,t){let[i,a]=sh(t);return(0,s.qE)(i,e,a)}function sh(e){if(0===e.length)return[];let t=[1/0,-1/0];for(let i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function sd(e){let[t,i]=sh(e);return i-t}var su=class e extends ef{constructor(e=[],t=[]){super(),this.domain=e,this.range=t,this.defaultClamp=!1}static is(t){return t instanceof e}normalizeDomains(...e){return sp(...e)}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1,t=1){let{domain:i}=this,a=this.getPixelRange();if(0===i.length)return a;let s=Math.abs(i[1].valueOf()-i[0].valueOf())/e+1;return 0!==t&&(s=Math.min(s,Math.floor(a))),a/Math.max(1,s)}convert(e,t){let{domain:i}=this;if(!i||i.length<2)return NaN;let a=t?.clamp??this.defaultClamp,s=Number(this.transform(i[0])),r=Number(this.transform(i[1])),n=Number(this.transform(e)),{range:o}=this,[l,h]=o;if(a){let[e,t]=sh([s,r]);if(n<e)return l;if(n>t)return h}return s===r?(l+h)/2:n===s?l:n===r?h:l+(n-s)/(r-s)*(h-l)}invert(e,t){let i,[a,s]=this.domain.map(e=>this.transform(e)),{range:r}=this,[n,o]=r;return i=n===o?this.toDomain((Number(a)+Number(s))/2):this.toDomain(Number(a)+(e-n)/(o-n)*(Number(s)-Number(a))),this.transformInvert(i)}getPixelRange(){let[e,t]=this.range;return Math.abs(t-e)}};su.defaultTickCount=5;var sc=su;function sp(...e){let t,i,a=1/0,s=-1/0;for(let r of e)for(let e of r){let r=e.valueOf();r<a&&(a=r,t=e),r>s&&(s=r,i=e)}return null!=t&&null!=i?{domain:[t,i],animatable:!0}:{domain:[],animatable:!1}}var sg={};o(sg,{TimeInterval:()=>sm,day:()=>sb,friday:()=>sE,hour:()=>sL,millisecond:()=>sx,minute:()=>sD,monday:()=>sC,month:()=>sf,saturday:()=>sO,second:()=>sv,sunday:()=>sw,thursday:()=>sT,tuesday:()=>sk,utcDay:()=>sR,utcHour:()=>sF,utcMinute:()=>sP,utcMonth:()=>sz,utcYear:()=>sj,wednesday:()=>sN,year:()=>sy});var sm=class e{constructor(e,t,i,a,s,r=1,n){this.unit=e,this.milliseconds=t,this.hierarchy=i,this._encode=a,this._decode=s,this.step=r,this._rangeCallback=n}static extent(e,t,i){if(e.getTime()>t.getTime()&&([e,t]=[t,e],null!=i&&(i=[1-i[1],1-i[0]])),null!=i){let a=t.getTime()-e.getTime(),s=e.getTime();e=new Date(s+i[0]*a),t=new Date(s+i[1]*a)}return[e,t]}getOffset(e,t){return Math.floor(this._encode(new Date(e)))%t}floor(e){let t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){let t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}rangeIndices(t,i,{extend:a=!1,visibleRange:s=[0,1],limit:r}){[t,i]=e.extent(t,i,s);let n=this._encode(a?this.floor(t):this.ceil(t)),o=this._encode(a?this.ceil(i):this.floor(i));return null!=r&&o-n>r&&(o=n+r),[n,o]}range(e,t,i={}){let a;a=e.getTime()>t.getTime()?this._rangeCallback?.(t,e):this._rangeCallback?.(e,t);let[s,r]=this.rangeIndices(e,t,i),n=[];for(let e=s;e<=r;e++){let t=this._decode(e);n.push(t)}return a?.(),n}previous(e){return this._decode(this._encode(this.ceil(e))-1)}next(e){return this._decode(this._encode(this.floor(e))+1)}rangeCount(e,t,i={}){let[a,s]=this.rangeIndices(e,t,i);return s-a}every(t,i){let a;if(1===t&&i?.snapTo!=null)return this;let{unit:r,milliseconds:n,hierarchy:o,step:l}=this,h=0,d=t;d!==(t=Math.max(1,Math.round(t)))&&s.Vy.warnOnce(`interval step of [${d}] rounded to [${t}].`);let{snapTo:u="start"}=i??{};if("string"==typeof u){let e=h;a=(i,a)=>(h=this.getOffset("start"===u?i:a,t),()=>h=e)}else"number"==typeof u?h=this.getOffset(new Date(u),t):u instanceof Date&&(h=this.getOffset(u,t));return new e(r,n*t,o,e=>Math.floor((this._encode(e)-h)/t),e=>this._decode(e*t+h),l*t,a)}},sy=new sm("year",(365+1/4-.01+1/400)*864e5,void 0,function(e){return e.getFullYear()},function(e){let t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t}),sf=new sm("month",sy.milliseconds/12,sy,function(e){return 12*e.getFullYear()+e.getMonth()},function(e){let t=Math.floor(e/12);return new Date(t,e-12*t,1)}),sb=new sm("day",864e5,sf,function(e){let t=6e4*e.getTimezoneOffset();return Math.floor((e.getTime()-t)/864e5)},function(e){let t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t}),sx=new sm("millisecond",1,sb,function(e){return e.getTime()},function(e){return new Date(e)}),sM=6e4*new Date().getTimezoneOffset(),sv=new sm("second",1e3,sb,function(e){return Math.floor((e.getTime()-sM)/1e3)},function(e){return new Date(sM+1e3*e)}),sS=6e4*new Date().getTimezoneOffset(),sD=new sm("minute",6e4,sb,function(e){return Math.floor((e.getTime()-sS)/6e4)},function(e){return new Date(sS+6e4*e)}),sI=6e4*new Date().getTimezoneOffset(),sL=new sm("hour",36e5,sb,function(e){return Math.floor((e.getTime()-sI)/36e5)},function(e){return new Date(sI+36e5*e)});function sA(e){let t=(7+e-4)%7;return new sm("day",6048e5,sf,function(e){let i=6e4*e.getTimezoneOffset();return Math.floor((e.getTime()-i)/6048e5-t/7)},function(e){let i=new Date(1970,0,1);return i.setDate(i.getDate()+7*e+t),i},7)}var sw=sA(0),sC=sA(1),sk=sA(2),sN=sA(3),sT=sA(4),sE=sA(5),sO=sA(6),sj=new sm("year",sy.milliseconds,void 0,function(e){return e.getUTCFullYear()},function(e){let t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}),sz=new sm("month",sf.milliseconds,sj,function(e){return 12*e.getUTCFullYear()+e.getUTCMonth()},function(e){let t=Math.floor(e/12);return new Date(Date.UTC(t,e-12*t,1))}),sR=new sm("day",864e5,sz,function(e){return Math.floor(e.getTime()/864e5)},function(e){let t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}),sP=new sm("minute",6e4,sR,function(e){return Math.floor(e.getTime()/6e4)},function(e){return new Date(6e4*e)}),sF=new sm("hour",36e5,sR,function(e){return Math.floor(e.getTime()/36e5)},function(e){return new Date(36e5*e)}),sB={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function sG(e,t=new Date(e.getFullYear(),0,1)){let i=e.getTimezoneOffset()-t.getTimezoneOffset();return Math.floor((e.getTime()-t.getTime()+6e4*i)/(36e5*24))}function sV(e,t){let i=new Date(e.getFullYear(),0,1).getDay(),a=new Date(e.getFullYear(),0,(t-i+7)%7+1);return a<=e?Math.floor(sG(e,a)/7)+1:0}var sY={a:e=>sB.shortDays[e.getDay()],A:e=>sB.days[e.getDay()],b:e=>sB.shortMonths[e.getMonth()],B:e=>sB.months[e.getMonth()],c:"%x, %X",d:(e,t)=>s_(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>s_(1e3*e.getMilliseconds(),6,t??"0"),H:(e,t)=>s_(e.getHours(),2,t??"0"),I:(e,t)=>{let i=e.getHours()%12;return 0===i?"12":s_(i,2,t??"0")},j:(e,t)=>s_(sG(e)+1,3,t??"0"),m:(e,t)=>s_(e.getMonth()+1,2,t??"0"),M:(e,t)=>s_(e.getMinutes(),2,t??"0"),L:(e,t)=>s_(e.getMilliseconds(),3,t??"0"),p:e=>12>e.getHours()?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>s_(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>s_(sV(e,0),2,t??"0"),V:(e,t)=>s_(function e(t,i=t.getFullYear()){let a=new Date(i,0,1).getDay(),s=new Date(i,0,(4-a+7)%7-3+1);return s<=t?Math.floor(sG(t,s)/7)+1:e(t,i-1)}(e),2,t??"0"),w:(e,t)=>s_(e.getDay(),2,t??"0"),W:(e,t)=>s_(sV(e,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>s_(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>s_(e.getFullYear(),4,t??"0"),Z:e=>(function(e){let t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${s_(Math.floor(i/60),2,"0")}${s_(Math.floor(i%60),2,"0")}`})(e),"%":()=>"%"},sU={_:" ",0:"0","-":""};function s_(e,t,i){let a=String(Math.floor(e));return a.length>=t?a:`${i.repeat(t-a.length)}${a}`}function s$(e){let t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){let a=i>0?e.substring(0,i):e;t.push(a)}if(i<0)break;let a=sU[e[i+1]];null!=a&&i++;let s=e[i+1],r=sY[s];if("function"==typeof r)t.push([r,a]);else if("string"==typeof r){let e=s$(r);t.push([e,a])}else t.push(`${a??""}${s}`);e=e.substring(i+2)}return e=>{let i="number"==typeof e?new Date(e):e;return t.map(e=>"string"==typeof e?e:e[0](i,e[1])).join("")}}function sW(e){return e instanceof Date?e.getTime():e}function sH(e,t,i){let a=s$(sZ(e,t,i));return e=>a(e)}function sZ(e,t,i=0){let a=1/0;for(let t=1;t<e.length;t++)a=Math.min(a,Math.abs(e[t].valueOf()-e[t-1].valueOf()));let[s,r]=0===t.length?[0,0]:sh([t[0].valueOf(),t[t.length-1].valueOf()]),n=new Date(s).getFullYear(),o=new Date(r).getFullYear();return function(e,t,i){let a=sW(i[0]),s=Math.abs(sW(i.at(-1))-a),r=[["hour",216e5,12096e5,3,"%I %p"],["hour",6e4,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",6e4,216e5,3,"%p"]," ",["day",864e5,6048e5,4,"%a"],["month",6048e5*(0!==s),314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",t||7===e?0:31536e6,1/0,7,"%Y"]].filter(t=>{if("string"==typeof t)return!0;let[i,a,r,n]=t;return n>=e&&a<=s&&s<r}).reduce((e,t)=>("string"==typeof t?e.result.push(t):e.used.has(t[0])||(e.result.push(t),e.used.add(t[0])),e),{result:[],used:new Set}).result,n=r.findIndex(e=>"string"!=typeof e),o=r.findLastIndex(e=>"string"!=typeof e);return r.slice(n,o+1).map(e=>"string"==typeof e?e:e[4]).join("").replaceAll(/\s+/g," ").trim()}(Math.max((isFinite(a)?function(e,t){if(e<1e3)return 0;if(e<6e4)return 1;if(e<36e5)return 2;if(e<864e5)return 3;if(e<6048e5)return 4;else if(e<24192e5||e<26784e5&&function(e){let t=new Date(e[0]).getMonth();for(let i=1;i<e.length;i++){let a=new Date(e[i]).getMonth();if(t===a)return!0;t=a}return!1}(t))return 5;else if(e<31536e6)return 6;return 7}(a,e):function(e){if(sv.floor(e)<e)return 0;if(sD.floor(e)<e)return 1;if(sL.floor(e)<e)return 2;if(sb.floor(e)<e)return 3;if(sf.floor(e)<e)return sw.floor(e)<e?4:5;else if(sy.floor(e)<e)return 6;return 7}(e[0]))-i,0),o-n>0,e)}var sK=class e extends ef{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof e}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=(0,s.qE)(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this.invalid=!0,this._paddingInner=(0,s.qE)(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this.invalid=!0,this._paddingOuter=(0,s.qE)(0,e,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&s.Vy.warnOnce("Expected update to not invalidate scale"))}convert(e,t){this.refresh();let i=this.findIndex(e);return null==i||i<0||i>=this.bands.length?NaN:this.ordinalRange(i)}invertNearestIndex(e){this.refresh();let t=this.bands.length;if(0===t)return -1;let i=0,a=t-1,s=1/0,r=0;for(;i<=a;){let t=(a+i)/2|0,n=this.ordinalRange(t),o=Math.abs(n-e);if(0===o)return t;o<s&&(s=o,r=t),n<e?i=t+1:a=t-1}return r}update(){let e,[t,i]=this.range,{_paddingInner:a}=this,{_paddingOuter:s,round:r,bands:n}=this,o=n.length;if(0===o)return;let l=i-t;1===o?(a=0,e=l*(1-2*s)):e=l/Math.max(1,o-a+2*s);let h=r?Math.floor(e):e,d=t+(l-h*(o-a))/2,u=h*(1-a);r&&(d=Math.round(d),u=Math.round(u)),this._step=h,this._inset=d,this._bandwidth=u,this._rawBandwidth=e*(1-a)}ordinalRange(e){let{_inset:t,_step:i,range:a}=this,r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return(0,s.qE)(r,t+i*e,n)}};l([eb],sK.prototype,"range",2),l([eb],sK.prototype,"round",2);var sX=sK,sQ=class e extends sX{static is(t){return t instanceof e}toDomain(e){return new Date(e)}convert(e,t){let i,{domain:a,bands:r}=this;if(a.length<=0)return NaN;let n=this.ordinalRange(0),o=this.ordinalRange(r.length-1),l=t?.interpolate??!1,h=a[0].valueOf()>a[a.length-1].valueOf();if(!l){let i=super.convert(e,t);return h?o-(i-n):i}if(0===r.length)return n;let d=e.valueOf();i=Math.min(Math.max(i=h?((0,s.S3)(0,a.length-1,e=>a[e].valueOf()<=d)??a.length)-1:(0,s.I5)(0,a.length-1,e=>a[e].valueOf()<=d)??0,0),a.length-2);let u=a[i].valueOf(),c=a[i+1].valueOf();return(i+(d-u)/(c-u))/(a.length-1)*(o-n)+n}invert(e,t=!1){let i;this.refresh();let{domain:a,bands:r}=this,n=a[0].valueOf()>a[a.length-1].valueOf();return i=t?this.invertNearestIndex(e-this.bandwidth/2):(0,s.S3)(0,r.length-1,t=>this.ordinalRange(t)>=e)??0,r[n?r.length-1-i:i]}tickFormatter({domain:e,ticks:t,specifier:i},a){return null!=i?s$(i):sH(t,e,a)}},sq={bottomCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}},center:function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}},clone:function(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}},collides:function(e,t){let i=sJ(e),a=sJ(t);return i.x1<=a.x2&&i.x2>=a.x1&&i.y1<=a.y2&&i.y2>=a.y1},end:function(e){return{x:e.x2,y:e.y2}},from:function(e,t,i,a){if("number"==typeof e)return{x1:e,y1:t,x2:i,y2:a};if("width"in e)return sJ({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${a}]`)},height:function(e){return Math.abs(e.y2-e.y1)},round:function(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}},start:function(e){return{x:e.x1,y:e.y1}},topCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(e){return Math.abs(e.x2-e.x1)}};function sJ(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function s0(e,t,i){var a,s;return[(a=i.min,e+(t-e)/(i.max-a)*(0-a)),(s=i.min,e+(t-e)/(i.max-s)*(1-s))]}function s1(e,t,i,a,r,n){if(i<=r&&n<=a)return i;let o=r-i,l=n-a,h=Math.abs(o)<Math.abs(l)?o:l;return(0,s.qE)(e,i+h,t)}var s2=["rangeX","rangeY","ratioX","ratioY","autoScaledAxes"],s4=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},s3=e=>(0,s.W$)((t,{options:i})=>!(sc.is(e?.scale)||sQ.is(e?.scale))||null==t||null==i.end||t<=i.end,"to be less than end"),s5=class extends iC{constructor(e,t){super(),this.fireChartEvent=e,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new iK(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new s4,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.destroyFns.push(t.addListener("layout:complete",()=>{let{pendingMemento:e}=this,t=!this.didLayoutAxes;this.didLayoutAxes=!0,e?this.restoreMemento(e.version,e.mementoVersion,e.memento):t&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(null==e)return!0;if(!(0,s.Gv)(e))return!1;for(let t of Object.keys(e))if(!s2.includes(t))return!1;let i=this.getPrimaryAxis("x"),a=this.getPrimaryAxis("y"),r={rangeX:{start:(0,s.Uo)((0,s.or)(s.ai,s.p6),s3(i)),end:(0,s.or)(s.ai,s.p6)},rangeY:{start:(0,s.Uo)((0,s.or)(s.ai,s.p6),s3(a)),end:(0,s.or)(s.ai,s.p6)},ratioX:{start:(0,s.Uo)(s.CG,(0,s.Xe)("end")),end:s.CG},ratioY:{start:(0,s.Uo)(s.CG,(0,s.Xe)("end")),end:s.CG},autoScaledAxes:(0,s.jk)((0,s.KC)("y"))},{invalid:n}=(0,s.tf)(e,r);return!(n.length>0)||(t.push(...n.map(String)),!1)}restoreMemento(e,t,i){let{independentAxes:a}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:i};return}this.pendingMemento=void 0;let s=this.getDefinedZoom();if(i?.rangeX?s.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?s.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:s.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let e=i?.autoScaledAxes?.includes("y");i?.rangeY?(s.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1},e??(e=!1)):i?.ratioY?(s.y={min:i.ratioY.start??0,max:i.ratioY.end??1},e??(e=!1)):(s.y={min:0,max:1},e??(e=!0)),s.autoScaleYAxis=e}if(this.lastRestoredState=s,!0!==a)return void this.updateZoom("zoom-manager",s);for(let e of[this.getPrimaryAxis("x"),this.getPrimaryAxis("y")])e&&this.updateAxisZoom("zoom-manager",e.id,s[e.direction])}updateAxes(e){this.axes=e;let t=new Map(e.map(e=>[e.id,this.axisZoomManagers.get(e.id)]));for(let i of(this.axisZoomManagers.clear(),e))this.axisZoomManagers.set(i.id,t.get(i.id)??new s9(i));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t?.x&&(t.x.min<0||t.x.max>1)&&(s.Vy.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t?.y&&(t.y.min<0||t.y.max>1)&&(s.Vy.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),0===this.axisZoomManagers.size){let i=this.state.stateId();("initial"===i||i===e)&&this.state.set(e,t);return}this.state.set(e,t);let i=t?.autoScaleYAxis;null!=i&&(this.autoScaleYAxis.manuallyAdjusted=!i),this.axisZoomManagers.forEach(i=>{i.updateZoom(e,t?.[i.getDirection()])}),this.applyChanges(e)}updateAxisZoom(e,t,i){this.axisZoomManagers.get(t)?.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){this.autoScaleYAxis.manuallyAdjusted=!1;let t=this.getRestoredZoom();this.updateZoom(e,{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1},autoScaleYAxis:t?.autoScaleYAxis??!0})}resetAxisZoom(e,t){let i=this.axisZoomManagers.get(t),a=i?.getDirection();if(null==a)return;let s=this.getRestoredZoom();if("y"===a){let e=s?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!e}for(let t of this.axes)t.direction===a&&this.updateAxisZoom(e,t.id,s?.[a]??{min:0,max:1})}setAxisManuallyAdjusted(e,t){"y"===this.axisZoomManagers.get(t)?.getDirection()&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){let a=this.getPrimaryAxis(t);a&&this.updateAxisZoom(e,a.id,i)}panToBBox(e,t,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;let a=this.getZoom();if(void 0===a||!a.x&&!a.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return s.Vy.warnOnce("cannot pan to target BBox - chart too small?"),!1;let r=function(e,t,i){var a,r,n,o,l,h,d,u,c,p,g,m,y,f;let{x:b={min:0,max:1},y:x={min:0,max:1}}=t,M=sq.from(i),v=sq.from(e),S=function(e,t,i){let[a,s]=s0(e.x1,e.x2,t),[r,n]=s0(e.y1,e.y2,i);return{x1:a,x2:s,y1:r,y2:n}}(v,b,x),D=s1(S.x1,S.x2,v.x1,v.x2,M.x1,M.x2),I=s1(S.y1,S.y2,v.y1,v.y2,M.y1,M.y2),L={x:{min:(a=v.x1,r=b.min,n=v.x2,r+(D-a)/(n-a)*(b.max-r)),max:(o=v.x1,l=b.min,h=v.x2,d=b.max,l+(D+e.width-o)/(h-o)*(d-l))},y:{min:(u=v.y1,c=x.min,p=v.y2,c+(I-u)/(p-u)*(x.max-c)),max:(g=v.y1,m=x.min,y=v.y2,f=x.max,m+(I+e.height-g)/(y-g)*(f-m))}},A=L.x.max-L.x.min,w=L.y.max-L.y.min;return L.x.min=(0,s.qE)(0,L.x.min,1-A),L.x.max=L.x.min+A,L.y.min=(0,s.qE)(0,L.y.min,1-w),L.y.max=L.y.min+w,L}(t,a,i);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",r.x),this.updatePrimaryAxisZoom(e,"y",r.y)):this.updateZoom(e,r),!0}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,e=>Number(e)-i)}extendWith(e,t,i){let a=this.getPrimaryAxis(t);if(!a)return;let s=this.getDomainExtents(a);if(!s)return;let[,r]=s,n=i(r),o=this.rangeToRatio({start:n,end:r},t);o&&this.updateZoom(e,{[t]:o})}updateWith(e,t,i){let a=this.getPrimaryAxis(t);if(!a)return;let s=this.getDomainExtents(a);if(!s)return;let[r,n]=s;[r,n]=i(r,n);let o=this.rangeToRatio({start:r,end:n},t);o&&this.updateZoom(e,{[t]:o})}getZoom(){let e,t;if(this.axisZoomManagers.forEach(i=>{"x"===i.getDirection()?e??(e=i.getZoom()):"y"===i.getDirection()&&(t??(t=i.getZoom()))}),e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){let e={};for(let[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){return this.getPrimaryAxis(e)?.id}isVisibleItemsCountAtLeast(e,t){let i=this.getPrimaryAxis("x"),a=this.getPrimaryAxis("y"),s=new Set,r=0,n=[e.x.min,e.x.max],o=[e.y.min,e.y.max];for(let e of i?.boundSeries??[]){s.add(e.id);let i=t-(r??0);if((r+=e.getVisibleItems(n,o,i))>=t)return!0}for(let e of a?.boundSeries??[]){if(s.has(e.id))continue;let i=t-(r??0);if((r+=e.getVisibleItems(n,o,i))>=t)return!0}return 0===s.size}getMementoRanges(){let e,t=this.getDefinedZoom();return this.autoScaleYAxis.enabled&&(e=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(t.x,"x"),rangeY:this.getRangeDirection(t.y,"y"),ratioX:{start:t.x.min,end:t.x.max},ratioY:{start:t.y.min,end:t.y.max},autoScaledAxes:e}}autoScaleYZoom(e,t=!0){let i;if(!this.isZoomEnabled())return;let{independentAxes:a,autoScaleYAxis:s}=this,r=this.getZoom();if(r?.x==null||!s.enabled||s.manuallyAdjusted)return;let{padding:n}=s;if(null!=(i=r.x?.min===0&&r.x?.max===1?{min:0,max:1}:a?this.primaryAxisZoom("y",r.x,{padding:n}):this.combinedAxisZoom("y",r.x,{padding:n}))){if(a){let e=this.getPrimaryAxis("y"),t=null==e?void 0:this.axisZoomManagers.get(e.id);t?.updateZoom("zoom-manager",i)}else for(let e of this.axisZoomManagers.values())"y"===e.getDirection()&&e.updateZoom("zoom-manager",i);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),e=>e.applyChanges()).includes(!0))return;let t={};for(let[e,i]of this.axisZoomManagers.entries())t[e]=i.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:t,callerId:e}),this.fireChartEvent({type:"zoom",...this.getMementoRanges()})}getRangeDirection(e,t){let i,a,s=this.getPrimaryAxis(t);if(!s||!sc.is(s.scale)&&!sQ.is(s.scale))return;let r=this.getDomainPixelExtents(s);if(!r)return;let[n,o]=r;return n<=o?(i=s.scale.invert(0),a=s.scale.invert(n+(o-n)*e.max)):(i=s.scale.invert(n-(n-o)*e.min),a=s.scale.invert(0)),{start:i,end:a}}rangeToRatio(e,t){let i=this.getPrimaryAxis(t);if(!i)return;let a=this.getDomainPixelExtents(i);if(!a)return;let[r,n]=a,o=null==e.start?r:i.scale.convert?.(e.start),l=null==e.end?n:i.scale.convert?.(e.end);if(!(0,s.Bf)(o)||!(0,s.Bf)(l))return;let[h,d]=[Math.min(r,n),Math.max(r,n)];if(o<h||o>d)return void s.Vy.warnOnce(`Invalid range start [${e.start}], expecting a value between [${i.scale.invert?.(r)}] and [${i.scale.invert?.(n)}], ignoring.`);if(l<h||l>d)return void s.Vy.warnOnce(`Invalid range end [${e.end}], expecting a value between [${i.scale.invert?.(r)}] and [${i.scale.invert?.(n)}], ignoring.`);let u=n-r;return{min:Math.abs(((o=Math.min(d,Math.max(h,o)))-r)/u),max:Math.abs(((l=Math.min(d,Math.max(h,l)))-r)/u)}}getPrimaryAxis(e){return this.axes?.find(t=>t.direction===e)}getDomainExtents(e){let{domain:t}=e.scale,i=t.at(0),a=t.at(-1);if(null!=i&&null!=a)return[i,a]}getDomainPixelExtents(e){let{domain:t}=e.scale,i=e.scale.convert?.(t.at(0)),a=e.scale.convert?.(t.at(-1));if((0,s.Bf)(i)&&(0,s.Bf)(a))return[i,a]}getDefinedZoom(){let e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}zoomBounds(e,t,i,a){let r=e.scale,n=r.range;r.range=[0,1];let o=t.scale,l=o.range;o.range=[0,1];let h=1,d=!1,u=0,c=!1;for(let e of t.boundSeries){let{connectsToYAxis:t}=e;for(let a of e.getRange("y",[i.min,i.max])){let e=o.convert(a);Number.isFinite(e)&&(e<h&&(h=e,d=!t||a<0),e>u&&(u=e,c=!t||a>0))}}if((0,s.Bf)(t.min)&&(h=0),(0,s.Bf)(t.max)&&(u=1),r.range=n,o.range=l,h>=u)return;let p=Math.min((u-h)*(1+((d?a:0)+(c?a:0))),1);if(!(p<=0)){if(d&&c){let e=(u+h)/2;h=e-p/2,u=e+p/2}else!d&&c?u=h+p:d&&!c&&(h=u-p);return h<0?(u+=-h,h=0):u>1&&(h-=u-1,u=1),{min:h,max:u}}}primaryAxisZoom(e,t,{padding:i=0}={}){let a=this.getPrimaryAxis("x"===e?"y":"x"),s=this.getPrimaryAxis(e);if(null!=a&&null!=s)return this.zoomBounds(a,s,t,i)}combinedAxisZoom(e,t,{padding:i=0}={}){let a="x"===e?"y":"x",s=new Map;for(let e of this.axes)if(e.direction===a)for(let t of e.boundSeries)s.set(t,e);let r=1,n=0;for(let a of this.axes)if(a.direction===e)for(let e of a.boundSeries){let o=s.get(e);if(null==o)continue;let l=this.zoomBounds(o,a,t,i);if(null==l)return;r=Math.min(r,l.min),n=Math.max(n,l.max)}if(r<1e-6&&(r=0),n>.999999&&(n=1),!(r>n))return{min:r,max:n}}},s9=class{constructor(e){this.axis=e;let[t=0,i=1]=e.visibleRange;this.state=new iK({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return tI(this.state.stateValue())}hasChanges(){let e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){let e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}};function s6(e,t,i,a,s){let r=e.x+e.width>t&&e.x<t+a,n=e.y+e.height>i&&e.y<i+s;return r&&n}function s8(e){return null!=e&&"object"==typeof e.point&&"object"==typeof e.label}var s7={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function re(e,t=0){let i=[];for(let a=0;a<e.length;a++){let s=e[a],{point:{x:r,y:n},label:{text:o}}=s,{width:l,height:h}=s.label;if(l+=t,h+=t,i.some(e=>s6(e,r,n,l,h)))return!0;i.push({index:a,text:o,x:r,y:n,width:l,height:h,datum:s})}return!1}var rt=class{constructor(){this.labelData=new Map}updateLabels(e,t,i=y.zero){let a={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},s=new Set(e.map(e=>e.id));for(let e of this.labelData.keys())s.has(e)||this.labelData.delete(e);for(let t of e){let e=t.getLabelData();e.every(s8)&&this.labelData.set(t.id,e)}let r=function(e,t,i=5){let a=new Map,s=[],r=new Map([...e.entries()].map(([e,t])=>[e,t.toSorted((e,t)=>t.point.size-e.point.size)])),n=[...r.values()].flat();for(let[e,o]of r.entries()){let r=[];if(o[0]?.label){for(let e=0,a=o.length;e<a;e++){let a=o[e],{point:l,label:h,anchor:d}=a,{text:u,width:c,height:p}=h,g=.5*l.size,m=0,y=0;if(g>0&&null!=a.placement){let e=s7[a.placement];m=(.5*c+g+i)*e.x,y=(.5*p+g+i)*e.y}let f=l.x-.5*c+m-((d?.x??.5)-.5)*l.size,b=l.y-.5*p+y-((d?.y??.5)-.5)*l.size;if(!(!t||f+c<t.x+t.width&&f>t.x&&b>t.y&&b+p<t.y+t.height)||n.some(e=>(function(e,t,i,a,s,r){if(0===e.size)return!1;let n=e.x,o=e.y;null!=t&&(n-=(t.x-.5)*e.size,o-=(t.y-.5)*e.size);let l=n;n<i?l=i:n>i+s&&(l=i+s);let h=o;o<a?h=a:o>a+r&&(h=a+r);let d=n-l,u=o-h;return Math.sqrt(d*d+u*u)<=.5*e.size})(e.point,e.anchor,f,b,c,p))||s.some(e=>s6(e,f,b,c,p)))continue;let x={index:e,text:u,x:f,y:b,width:c,height:p,datum:a};r.push(x),s.push(x)}a.set(e,r)}}return a}(this.labelData,a,5);for(let t of e)t.updatePlacedLabelData?.(r.get(t.id)??[])}},ri=class extends iC{constructor(){super(...arguments),this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:i,legendItemName:a})=>({visible:e,seriesId:t,itemId:i,legendItemName:a}))}guardMemento(e){return null==e||(0,s.cy)(e)}restoreMemento(e,t,i){i?.forEach(e=>{let{seriesId:t,data:i}=this.getRestoredData(e)??{};t&&i&&this.updateData(t,i)}),this.update()}getRestoredData(e){let{seriesId:t,itemId:i,legendItemName:a,visible:s}=e;if(t){let e=(this.legendDataMap.get(t)??[]).map(e=>{let a=e.seriesId===t&&(!i||e.itemId===i);return a&&e.isFixed&&this.warnFixed(e.seriesId,e.itemId),!e.isFixed&&a?{...e,enabled:s}:e});return{seriesId:t,data:e}}if(null!=i||null!=a)for(let e of this.getData()){if(null!=i&&e.itemId!==i||null!=a&&e.legendItemName!==a)continue;if(e.isFixed)return void this.warnFixed(e.seriesId,i);let t=(this.legendDataMap.get(e.seriesId)??[]).map(e=>e.itemId===i||e.legendItemName===a?{...e,enabled:s}:e);return{seriesId:e.seriesId,data:t}}}warnFixed(e,t){s.Vy.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:e??this.getData()})}updateData(e,t=[]){this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,a){if(a)return void this.getData().forEach(t=>{let i=(this.legendDataMap.get(t.seriesId)??[]).map(t=>t.legendItemName===a?{...t,enabled:e}:t);this.updateData(t.seriesId,i)});let s=this.getData(t),r=1===s.length,n=s.map(t=>null==i&&r||t.itemId===i?{...t,enabled:e}:t);this.updateData(t,n)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((e,[t,i])=>e.concat(i),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(e=>e.itemId===t)}getSeriesEnabled(e){let t=this.getData(e);if(t.length>0)return t.some(e=>e.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){return this.getDatum({seriesId:e,itemId:t})?.enabled??!0}},ra=class{constructor(){this.groups={}}registerSeries({internalId:e,seriesGrouping:t,visible:i,type:a}){var s;t&&((s=this.groups)[a]??(s[a]={}),this.groups[a][e]={grouping:t,visible:i})}updateSeries({internalId:e,seriesGrouping:t,visible:i,type:a}){if(!t)return;let s=this.groups[a]?.[e];s&&(s.grouping=t,s.visible=i)}deregisterSeries({internalId:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&0===Object.keys(this.groups[t]).length&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){if(!t)return{visibleGroupCount:+!!i,visibleSameStackCount:+!!i,index:0};let a=new Set,s=new Set;for(let i of Object.values(this.groups[e]??{}))i.visible&&(a.add(i.grouping.groupIndex),i.grouping.groupIndex===t.groupIndex&&s.add(i.grouping.stackIndex));let r=Array.from(a);return r.sort((e,t)=>e-t),{visibleGroupCount:r.length,visibleSameStackCount:s.size,index:r.indexOf(t.groupIndex)}}},rs=class{constructor(e){this.updateCallback=e,this.events=new s.bk}addListener(e,t){return this.events.on(e,t)}removeListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(e){this.events.emit("update-complete",{type:"update-complete",apiUpdate:e})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:e}){this.events.emit("process-data",{type:"process-data",series:e})}},rr=class{constructor(e,t){this.callbackCache=new aC,this.chartEventManager=new a1,this.highlightManager=new a9,this.layoutManager=new im,this.localeManager=new am,this.seriesStateManager=new ra,this.stateManager=new iA,this.seriesLabelLayoutManager=new rt,this.destroyFns=[],this.contextModules=[];let{scene:i,root:a,syncManager:s,container:r,fireEvent:n,updateCallback:o,updateMutex:l,styleContainer:h,chartType:u,domMode:c}=t;this.chartService=e,this.syncManager=s,this.domManager=new i2(this.chartService,r,h,c),this.widgets=new so(this.domManager);let p=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);for(let t of(this.scene=i??new aL({canvasElement:p}),this.scene.setRoot(a),this.destroyFns.push(this.scene.on("scene-changed",()=>{this.updateService.update(7)})),this.axisManager=new aT(a),this.legendManager=new ri,this.annotationManager=new ak(e.annotationRoot,n),this.chartTypeOriginator=new iM(e),this.interactionManager=new aq,this.contextMenuRegistry=new a5,this.updateService=new rs(o),this.proxyInteractionService=new ad(this.localeManager,this.domManager),this.fontManager=new aj(this.domManager,this.updateService),this.historyManager=new iI(this.chartEventManager),this.animationManager=new a0(this.interactionManager,l),this.dataService=new aO(this.animationManager),this.tooltipManager=new si(this.localeManager,this.domManager,e.tooltip),this.zoomManager=new s5(n,this.layoutManager),d.byType("context"))){if(!t.chartTypes.includes(u))continue;let e=t.moduleFactory(this);this.contextModules.push(e),this[t.contextKey]=e}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.fontManager.destroy(),this.highlightManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach(e=>e.destroy()),this.destroyFns.forEach(e=>e())}},rn=class extends eC{constructor(){super(...arguments),this.range="tooltip"}};l([ew],rn.prototype,"range",2);var ro=class e{constructor(){this.domain=new Set}static is(t){return t instanceof e}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},rl=class e{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof e}static extendDomain(e,t=[1/0,-1/0]){for(let i of e)"number"==typeof i&&(t[0]>i&&(t[0]=i),t[1]<i&&(t[1]=i));return t}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}},rh=class{constructor(e){let t=e.reduce((e,t)=>Math.max(e,t.length),0),i=1<<32-Math.clz32(t);t===i/2&&(i>>>=1),this.maxLevelSize=i;let a=new Float64Array((2*i-1)*2).fill(NaN);for(let t of e)for(let e=0;e<t.length;e+=1){let s=Number(t[e]),r=i+e-1,n=(2*r|0)+0,o=(2*r|0)+1,l=a[n],h=a[o];(!Number.isFinite(l)||s<l)&&(a[n]=s),(!Number.isFinite(h)||s>h)&&(a[o]=s)}for(let e=i/2|0;e>=1;e=e/2|0){let t=e-1|0,i=t+e|0;for(let s=0;s<e;s+=1){let e=t+s,r=i+2*s,n=r+1,o=a[(2*r|0)+0],l=a[(2*n|0)+0];a[(2*e|0)+0]=!Number.isFinite(l)||o<l?o:l;let h=a[(2*r|0)+1],d=a[(2*n|0)+1];a[(2*e|0)+1]=!Number.isFinite(d)||h>d?h:d}}this.buffer=a}computeRangeInto(e,t,i,a,s,r,n){let o=s+r-1;if(o<t||s>=i)return n;if(s>=t&&o<i){let t=e[(2*a|0)+0],i=e[(2*a|0)+1];Number.isFinite(t)&&(n[0]=Math.min(n[0],t)),Number.isFinite(i)&&(n[1]=Math.max(n[1],i))}else r>1&&(a=2*a|0,r=r/2|0,this.computeRangeInto(e,t,i,a+1|0,s,r,n),this.computeRangeInto(e,t,i,a+2|0,s+r,r,n));return n}rangeBetween(e,t){if(e>t)return[NaN,NaN];let{maxLevelSize:i,buffer:a}=this,s=[1/0,-1/0];return this.computeRangeInto(a,e,t,0,0,i,s),s}get range(){let{buffer:e}=this;return[e[0],e[1]]}},rd=Symbol("domain-ranges");function ru(e){let t=e?.map(Number);return t?.every(Number.isFinite)?t:[]}function rc(e,t){return t?.get(e.id)??0}function rp(e,t){let i=[];for(let a=0;a<e;a+=1)i[a]=t;return i}function rg(e,t,i){let a=[];for(let s of e){let e=s.get(t)?.[i];if(null==e)return;a.push(e)}return a}function rm(e){let t,i=[],a=0,s=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;t=s.exec(e);){if(t.index!==a)return;a=t.index+t[0].length;let e=t[1].trim();if(e.startsWith("."))i.push(e.slice(1).trim());else if(e.startsWith("[")){let t=e.slice(1,-1).trim();t.startsWith("'")?i.push(t.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):t.startsWith('"')?i.push(t.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):i.push(t)}else i.push(e)}if(a===e.length)return i}var ry=class{constructor(e,t="standalone",i=!1){this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=x.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(e,t,i,a){for(let s of e)a.has(s)||a.set(s,rp(t.length,!1)),a.get(s)[i]=!0};let a=!0;for(let t of e.props){if("key"===t.type&&!a)throw Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&a&&(a=!1)}let s=({matchGroupIds:e=[]})=>{for(let t of e)if(this.values.every(e=>e.groupId!==t))throw Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${t}).`)},r=new Set,n=new Set;for(let t of e.props){let e="key"===t.type?r:n;switch(function(e){return"scopes"in e&&Array.isArray(e.scopes)}(t)&&t.scopes?.forEach(t=>e.add(t)),t.type){case"key":this.keys.push({...t,index:this.keys.length,missing:new Map});break;case"value":if(null==t.property)throw Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(t)}`);this.values.push({...t,index:this.values.length,missing:new Map});break;case"aggregate":s(t),this.aggregates.push({...t,index:this.aggregates.length});break;case"group-value-processor":s(t),this.groupProcessors.push({...t,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...t,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...t,index:this.reducers.length});break;case"processor":this.processors.push({...t,index:this.processors.length})}}if(this.opts.groupByKeys||null!=this.opts.groupByFn){let e=new Set(n.values());if(r.forEach(t=>e.delete(t)),e.size>0)throw Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...e.values()]}`)}}resolveProcessedDataDefById(e,t){let i=this.scopeCache.get(e.id)?.get(t);if(!i)throw Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){let a=this.resolveProcessedDataIndexById(e,t),s=i.keys[a];if(null==s)throw Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return s.get(e.id)}hasColumnById(e,t){return this.scopeCache.get(e.id)?.get(t)!=null}resolveColumnById(e,t,i){let a=this.resolveProcessedDataIndexById(e,t),s=i.columns?.[a];if(null==s)throw Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return s}*forEachDatum(e,t,i){let a=t.columnScopes.findIndex(t=>t.has(e.id));for(let e of i.datumIndices[a]??[])yield t.columns[a][e]}*forEachGroupDatum(e,t){let i=t.columnScopes.findIndex(t=>t.has(e.id)),a={groupIndex:0,columnIndex:i},s=[];for(let e of t.groups){a.group=e;let t=0;for(let r of e.datumIndices[i]??s)a.datumIndex=r,a.valueIndex=t++,yield a;a.groupIndex++}}*forEachGroupDatumTuple(e,t){let i={columnIndex:t.columnScopes.findIndex(t=>t.has(e.id)),datumIndexes:[void 0,void 0,void 0]};for(let a of this.forEachGroupDatum(e,t))i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=a.group,i.nextGroupIndex=a.groupIndex,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=a.datumIndex,null!=i.group&&null!=i.datumIndexes[1]&&(yield i);i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=void 0,i.nextGroupIndex=void 0,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=void 0,null!=i.group&&null!=i.datumIndexes[1]&&(yield i)}getDomain(e,t,i,a){let s=this.getDomainsByType(i??"value",a);return s?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainBetweenRange(e,t,[i,a],s){let r=t.map(t=>this.resolveProcessedDataIndexById(e,t)),n=r.join(":"),o=s[rd],l=o.get(n);return null==l&&(l=new rh(r.map(e=>s.columns[e])),o.set(n,l)),l.rangeBetween(i,a)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){let{opts:{groupByKeys:t,groupByFn:i},aggregates:a,groupProcessors:r,reducers:n,processors:o,propertyProcessors:l}=this,h=performance.now();if(t&&0===this.keys.length)return;let d=this.extractData(e);t?d=this.groupData(d):i&&(d=this.groupData(d,i(d))),r.length>0&&"grouped"===d.type&&this.postProcessGroups(d),a.length>0&&"ungrouped"===d.type?this.aggregateUngroupedData(d):a.length>0&&"grouped"===d.type&&this.aggregateGroupedData(d),l.length>0&&this.postProcessProperties(d),n.length>0&&this.reduceData(d),o.length>0&&this.postProcessData(d),this.warnDataMissingProperties(e);let u=performance.now();return d.time=u-h,this.debug.check()&&function(e){let t=(e,t)=>{t.length>0&&(s.Vy.log(`DataModel.processData() - ${e}`),s.Vy.table(t))};s.Vy.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[])}(d),this.processScopeCache(),d}warnDataMissingProperties(e){if(0!==e.size)for(let t of(0,s.nl)(this.keys,this.values))for(let[i,a]of t.missing){if(a<(e.get(i)?.length??1/0))continue;let r=null==i?"":` for ${i}`;s.Vy.warnOnce(`the key '${t.property}' was not found in any data element${r}.`)}}processScopeCache(){for(let e of(this.scopeCache.clear(),(0,s.nl)(this.keys,this.values,this.aggregates)))if(e.idsMap)for(let[t,i]of e.idsMap)for(let a of i)if(this.scopeCache.has(t))if(this.scopeCache.get(t)?.has(a))throw Error("duplicate definition ids on the same scope are not allowed.");else this.scopeCache.get(t).set(a,e);else this.scopeCache.set(t,new Map([[a,e]]))}valueGroupIdxLookup({matchGroupIds:e}){let t=[];for(let[i,a]of this.values.entries())(!e||a.groupId&&e.includes(a.groupId))&&t.push(i);return t}valueIdxLookup(e,t){let i=null==e||0===e.length,a="string"==typeof t?t:t.id,s=t=>{if(t.idsMap){for(let[i,s]of t.idsMap)if(e?.includes(i)&&s.has(a))return!0}return!1},r=this.values.reduce((t,r,n)=>((null==r.scopes||i&&!r.scopes.length||r.scopes.some(t=>e?.includes(t)))&&(r.property===a||r.id===a||s(r))&&t.push(n),t),[]);if(0===r.length)throw Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return r}extractData(e){let{dataDomain:t,processValue:i,allScopesHaveSameDefs:a}=this.initDataDomainProcessor(),{keys:s,values:r}=this,{invalidData:n,invalidKeys:o,allKeyMappings:l}=this.extractKeys(s,e,i),{columns:h,columnScopes:d,partialValidDataCount:u,maxDataLength:c}=this.extractValues(n,r,e,o,i),p=e=>{let i=t.get(e),a=i.getDomain();return rl.is(i)&&a[0]>a[1]?[]:a};return{type:"ungrouped",input:{count:c},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...l.values()],columns:h,columnScopes:d,invalidKeys:o,invalidData:n,domain:{keys:s.map(p),values:r.map(p)},defs:{allScopesHaveSameDefs:a,keys:s,values:r},partialValidDataCount:u,time:0,[rd]:new Map}}extractKeys(e,t,i){let a,s,r=new Map,n=new Map,o=new Map,l=(e,t)=>{let i=s.get(e);a.set(t,a.get(i)),r.has(i)&&(r.set(t,r.get(i)),n.set(t,n.get(i)))};for(let h of e){let{invalidValue:e,scopes:d}=h;for(let u of(a=new Map,s=new Map,o.set(h,a),d??[])){let o,d,c=t.get(u)??[];if(s.has(c)){l(c,u);continue}let p=[];a.set(u,p),s.set(c,u);for(let t=0;t<c.length;t++){if(null==c[t]||"object"!=typeof c[t])continue;let a=i(h,c[t],t,u);if(a.valid){p.push(a.value);continue}p.push(e),o??(o=rp(c.length,!1)),d??(d=rp(c.length,!1)),o[t]=!0,d[t]=!0}o&&d&&(r.set(u,o),n.set(u,d))}}return{invalidData:n,invalidKeys:r,allKeyMappings:o}}extractValues(e,t,i,a,r){let n=0,o=[],l=[],h=0;for(let d of t){let{invalidValue:t}=d;if(new Set(d.scopes.map(e=>i.get(e))).size>1)throw Error(`AG Charts - more than one data source for: ${JSON.stringify(d)}`);let u=new Set(d.scopes),c=(0,s.$1)(d.scopes),p=i.get(c),g=[];for(let i=0;i<p.length;i++){if(null==p[i]||"object"!=typeof p[i])continue;let s=p[i],o=a.get(c)?.[i],l=r(d,s,i,d.scopes),h=l.value;(o||!l.valid)&&this.markScopeDatumInvalid(d.scopes,p,i,e),o?h=t:l.valid||(n+=1,h=t),g[i]=h}o.push(g),l.push(u),h=Math.max(h,g.length)}return{columns:o,columnScopes:l,partialValidDataCount:n,maxDataLength:h}}groupData(e,t){var i;let a=new Map,{keys:r,columns:n,columnScopes:o,invalidKeys:l,invalidData:h}=e,d=e.scopes,u=new Set;for(let e of d){let c=n.map((e,t)=>t).filter(t=>!u.has(t)&&o[t].has(e));if(0===c.length)continue;for(let e of c)u.add(e);let p=new Set;for(let e of c)for(let t of o[e])p.add(t);let g=r.map(t=>t.get(e)).filter(e=>null!=e),m=n[(0,s.$1)(c)],y=h?.get(e),f=l?.get(e);for(let r=0;r<m.length;r++){if(f?.[r]===!0)continue;let n=g.map(e=>e[r]);if(null==n||0===n.length)throw Error("AG Charts - no keys found for scope: "+e);let o=t?.(n)??n,l=o.map(e=>(0,s.Gv)(e)?JSON.stringify(e):e).join("-"),h=a.get(l)??{keys:o,datumIndices:[],validScopes:d};if(a.has(l)||a.set(l,h),y?.[r]===!0)for(let e of(h.validScopes===d&&(h.validScopes=new Set(d.values())),p))h.validScopes.delete(e);for(let e of c)(i=h.datumIndices)[e]??(i[e]=[]),h.datumIndices[e].push(r)}}let c=[],p=[];for(let{keys:e,datumIndices:t,validScopes:i}of a.values())c.push(e),p.push({datumIndices:t,keys:e,aggregation:[],validScopes:i});return{...e,type:"grouped",domain:{...e.domain,groups:c},groups:p}}aggregateUngroupedData(e){let t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;let{keys:i,columns:a,dataSources:r}=e,n=(0,s.$1)(r.keys()),o=r.get(n);e.aggregation=o?.map((e,s)=>{let r=[];for(let[e,o]of this.aggregates.entries()){let l=this.valueGroupIdxLookup(o),h=o.groupAggregateFunction?.()??[1/0,-1/0],d=l.map(e=>a[e][s]),u=rg(i,n,s),c=null!=u?o.aggregateFunction(d,u):void 0;c&&(h=o.groupAggregateFunction?.(c,h)??rl.extendDomain(c,h));let p=o.finalFunction?.(h)??h;r[e]=p,rl.extendDomain(p,t[e])}return r})}aggregateGroupedData(e){let t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;let{columns:i}=e;for(let[a,s]of this.aggregates.entries()){let r=this.valueGroupIdxLookup(s);for(let n of e.groups){n.aggregation??(n.aggregation=[]);let e=n.keys,o=s.groupAggregateFunction?.()??[1/0,-1/0],l=Math.max(...r.map(e=>n.datumIndices[e]?.length??0));for(let t=0;t<l;t++){let a=r.map(e=>i[e][n.datumIndices[e]?.[t]]),l=s.aggregateFunction(a,e);l&&(o=s.groupAggregateFunction?.(l,o)??rl.extendDomain(l,o))}let h=s.finalFunction?.(o)??o;n.aggregation[a]=h,rl.extendDomain(h,t[a])}}}postProcessGroups(e){let{groupProcessors:t}=this,{columnScopes:i,columns:a,invalidData:r}=e;for(let n of t){let t=this.valueGroupIdxLookup(n),o=n.adjust()();for(let i of e.groups)o(a,t,i);for(let n of t){let t="category"===this.values[n].valueType,o=a[n],l=(0,s.$1)(i[n]),h=r?.get(l),d=t?new ro:new rl;for(let e=0;e<o.length;e+=1)h?.[e]!==!0&&d.extend(o[e]);e.domain.values[n]=d.getDomain()}}}postProcessProperties(e){for(let{adjust:t,property:i,scopes:a}of this.propertyProcessors)for(let s of this.valueIdxLookup(a,i))t()(e,s)}reduceData(e){e.reduced??(e.reduced={});let{dataSources:t,keys:i}=e;for(let a of this.reducers){let r=a.reducer(),n=a.initialValue;if("grouped"===e.type)for(let t of e.groups)n=r(n,t.keys);else{let e=(0,s.$1)(t.keys()),a=i.map(t=>t.get(e)).filter(e=>null!=e),o=a.map(()=>void 0),l=t.get(e);for(let e=0;e<l.length;e+=1){for(let t=0;t<o.length;t++)o[t]=a[t]?.[e];n=r(n,o)}}e.reduced[a.property]=n}}postProcessData(e){for(let t of(e.reduced??(e.reduced={}),this.processors))e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(){let{keys:e,values:t}=this,i=new Set;for(let e of t)if(e.scopes)for(let t of e.scopes)i.add(t);let a=new Map,r=new Map,n=!0,o=()=>{for(let r of(0,s.nl)(e,t))"category"===r.valueType?a.set(r,new ro):(a.set(r,new rl),n&&(n=(r.scopes??[]).length===i.size))};o();let l=this.buildAccessors((0,s.nl)(e,t)),h={value:void 0,missing:!1,valid:!1};return{dataDomain:a,processValue:(e,t,i,n)=>{let d,u;if(l.has(e.property)){try{u=l.get(e.property)(t)}catch{}d=null!=u}else u=(d=e.property in t)?t[e.property]:e.missingValue;null!=e.forceValue&&(u=d&&(0,s.cI)(u)?-1*e.forceValue:e.forceValue,d=!0),h.missing=!d;let c="missingValue"in e;if(!d&&!c)if("string"==typeof n){let t=e.missing.get(n)??0;e.missing.set(n,t+1)}else for(let t of n){let i=e.missing.get(t)??0;e.missing.set(t,i+1)}if(a.has(e)||o(),d&&e.validation?.(u,t,i)===!1){if(h.valid=!1,!("invalidValue"in e))return"integrated"!==this.mode&&s.Vy.warnOnce(`invalid value of type [${typeof u}] for [${e.scopes} / ${e.id}] ignored:`,`[${u}]`),h.value=void 0,h;u=e.invalidValue}else h.valid=!0;if(e.processor){let t=r.get(e);null==t&&(t=e.processor(),r.set(e,t)),u=t(u,i)}return a.get(e)?.extend(u),h.value=u,h},initDataDomain:o,scopes:i,allScopesHaveSameDefs:n}}buildAccessors(e){let t=new Map;if(this.suppressFieldDotNotation)return t;for(let i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;let e=rm(i.property);if(null==e){s.Vy.warnOnce("Invalid property path [%s]",i.property);continue}let a=function(e){return t=>{let i=t;for(let t of e)i=i[t];return i}}(e);t.set(i.property,a)}return t}},rf=class e{constructor(e,t){this.mode=e,this.suppressFieldDotNotation=t,this.debug=x.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,t,i){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");return new Promise((a,s)=>{this.requested.push({id:e,opts:i,data:t,resolve:a,reject:s})})}execute(e){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);let i=this.mergeRequested(t);this.debug("DataController.execute() - merged",i),this.debug.check()&&((0,s.zk)().processedData=[]);let a=[];for(let{data:r,ids:n,opts:o,resolves:l,rejects:h}of i){let i,d,u=e?.find(e=>r===e.data&&(0,s.r1)(n,e.ids)&&function(e,t){let{props:i,...a}=e,{props:r,...n}=t;return O(a,n)&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){let{type:a,idsMap:r,scopes:n,data:o,...l}=e[i],{type:h,idsMap:d,scopes:u,data:c,...p}=t[i];if(a!==h||n&&u&&!(0,s.r1)(n,u)||o&&c&&o!==c||!O(l,p)||!function(e,t){if(null==e||null==t)return e===t;if(e.size!==t.size)return!1;for(let[i,a]of e){let e=t.get(i);if(null==e||!function(e,t){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}(a,e))return!1}return!0}(r,d))return!1}return!0}(i,r)}(o,e.opts));if(null==u)try{i=new ry(o,this.mode,this.suppressFieldDotNotation);let e=new Map(t.map(e=>[e.id,e.data]));d=i.processData(e)}catch(e){h.forEach(t=>t(e));continue}else({dataModel:i,processedData:d}=u);a.push({opts:o,data:r,ids:n,dataModel:i,processedData:d}),this.debug.check()&&(0,s.zk)("processedData").push(d),d?.partialValidDataCount===0?l.forEach(e=>e({dataModel:i,processedData:d})):d?this.splitResult(i,d,n,l):h.forEach(e=>e(Error("AG Charts - no processed data generated")))}return a}validateRequests(e){let t=[];for(let[i,a]of e.entries())i>0&&a.data.length!==e[0].data.length&&!1===a.opts.groupByData&&!1===a.opts.groupByKeys?a.reject(Error("all series[].data arrays must be of the same length and have matching keys.")):t.push(a);return t}mergeRequested(t){let i=[];for(let a of t){let t=i.find(e.groupMatch(a));t?t.push(a):i.push([a])}return i.map(e.mergeRequests)}splitResult(e,t,i,a){for(let s=0;s<i.length;s++)(0,a[s])({dataModel:e,processedData:t})}static groupMatch({data:e,opts:t}){function i(e){return e.filter(e=>"key"===e.type).map(e=>e.property).join(";")}let{groupByData:a,groupByKeys:s=!1,groupByFn:r,props:n}=t,o=i(n);return([t])=>(!1===a||t.data===e)&&(t.opts.groupByKeys??!1)===s&&t.opts.groupByFn===r&&i(t.opts.props)===o}static mergeRequests(t){let i=new Set(["key","group-value-processor"]);return t.reduce((t,{id:a,data:s,resolve:r,reject:n,opts:{props:o,...l}})=>{for(let h of(t.ids.push(a),t.rejects.push(n),t.resolves.push(r),t.data??(t.data=s),t.opts??(t.opts={...l,props:[]}),o)){let r={...h,scopes:[a],data:s};e.createIdsMap(a,r);let n=t.opts.props.find(t=>t.type===r.type&&(i.has(t.type)||t.data===r.data)&&e.deepEqual(t,r));if(!n){t.opts.props.push(r);continue}n.scopes??(n.scopes=[]),n.scopes.push(...r.scopes??[]),("key"===n.type||"value"===n.type)&&r.idsMap?.size&&e.mergeIdsMap(r.idsMap,n.idsMap)}return t},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,t){for(let[i,a]of e){let e=t.get(i);if(null==e)t.set(i,new Set(a));else for(let t of a)e.add(t)}}static createIdsMap(e,t){null!=t.id&&(t.idsMap??(t.idsMap=new Map),t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){let a,s;if(t.constructor!==i.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!==i.length)return!1;for(a=s-1;a>=0;a--)if(!e.deepEqual(t[a],i[a]))return!1;return!0}let r=Object.keys(t);if((s=r.length)!==Object.keys(i).length)return!1;for(a=s-1;a>=0;a--){let s=r[a];if(!e.skipKeys.has(s)&&(!Object.hasOwn(i,s)||!e.deepEqual(t[s],i[s])))return!1}return!0}return!1}};rf.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var rb=new class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){let i=this.axesMap.get(e);if(i)return i(t);throw Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},rx=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function rM(e){return rx.find(t=>"series"===t.type&&t.identifier===e)?.chartTypes}var rv=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:i,themeTemplate:a}){this.legendMap.set(e,{optionsKey:t,moduleFactory:i}),this.themeTemplates.set(t,a)}create(e,t){let i=this.legendMap.get(e)?.moduleFactory;if(i)return i(t);throw Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,i])=>(e[t]=i.optionsKey,e),{})}},rS=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return"cartesian"===this.get(e)}isPolar(e){return"polar"===this.get(e)}isHierarchy(e){return"hierarchy"===this.get(e)}isTopology(e){return"topology"===this.get(e)}isFlowProportion(e){return"flow-proportion"===this.get(e)}isStandalone(e){return"standalone"===this.get(e)}isGauge(e){return"gauge"===this.get(e)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get flowProportionTypes(){return this.seriesTypes.filter(e=>this.isFlowProportion(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}get gaugeTypes(){return this.seriesTypes.filter(e=>this.isGauge(e))}},rD=class extends Map{set(e,t){return super.set(e,z(t,this.get(e)))}},rI=new rS,rL=new rS,rA=new rD,rw=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:i,tooltipDefaults:a,defaultAxes:s,themeTemplate:r,solo:n,stackable:o,groupable:l,stackedByDefault:h,hidden:d}){this.setThemeTemplate(e,r),this.seriesMap.set(e,{moduleFactory:i,tooltipDefaults:a,defaultAxes:s,solo:n,stackable:o,groupable:l,stackedByDefault:h}),rI.set(e,t),d||rL.set(e,t)}create(e,t){let i=this.seriesMap.get(e)?.moduleFactory;if(i)return i(t);throw Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e){let t=this.seriesMap.get(e)?.defaultAxes;return null==t?null:{axes:tI(t)}}setThemeTemplate(e,t){let i=this.themeTemplates.get(e);this.themeTemplates.set(e,z(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}getTooltipDefauls(e){return this.seriesMap.get(e)?.tooltipDefaults}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},rC=class e extends iC{constructor(e){super(),this.chart=e}subscribe(t=e.DEFAULT_GROUP){let i=this.get(t);return i||(i={members:new Set},e.chartsGroups.set(t,i)),i.members.add(this.chart),this}unsubscribe(t=e.DEFAULT_GROUP){let i=this.get(t);return i?.members.delete(this.chart),delete i?.domains?.x?.sources?.[this.chart.id],delete i?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(t=e.DEFAULT_GROUP){return this.get(t)}getGroupMembers(t=e.DEFAULT_GROUP){let i=this.get(t);return i?Array.from(i.members):[]}getGroupSiblings(t=e.DEFAULT_GROUP){return this.getGroupMembers(t).filter(e=>e!==this.chart)}getGroupSyncMode(t=e.DEFAULT_GROUP){return this.getGroupMembers(t).some(e=>e.series.length>1)?"multi-series":"single-series"}get(t){return e.chartsGroups.get(t)}};rC.chartsGroups=new Map,rC.DEFAULT_GROUP=Symbol("sync-group-default");var rk=class extends eC{constructor(){super(...arguments),this.enabled=!1}};l([ew],rk.prototype,"enabled",2),l([ew],rk.prototype,"tabIndex",2);var rN={};o(rN,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>rT,fromToMotion:()=>rE,staticFromToMotion:()=>rO});var rT={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function rE(e,t,i,a,s,r,n){let{fromFn:o,toFn:l,applyFn:h=(e,t)=>e.setProperties(t)}=s,{nodes:d,selections:u}=aZ(a),c=(a,s)=>{let d,u=0,c=0;for(let p of s){let g=a[u]===p,m={last:c>=s.length-1,lastLive:u>=a.length-1,prev:s[c-1],prevFromProps:d,prevLive:a[u-1],next:s[c+1],nextLive:a[u+ +!!g]},y=`${e}_${t}_${p.id}`;i.stopByAnimationId(y);let f="unknown";g?r&&n&&(f=function(e,t,i,a){let s=i(e,t);return a.added.has(s)?"added":a.removed.has(s)?"removed":null==e.previousDatum&&null!=e.datum?"added":null!=e.previousDatum&&null==e.datum?"removed":"updated"}(p,p.datum,r,n)):f="removed",p.transitionOut="removed"===f;let{phase:b,start:x,finish:M,delay:v,duration:S,...D}=o(p,p.datum,f,m),{phase:I,start:L,finish:A,delay:w,duration:C,...k}=l(p,p.datum,f,m),N=null==M;i.animate({id:y,groupId:e,phase:b??I??"update",duration:S??C,delay:v??w,from:D,to:k,ease:aB,collapsable:N,onPlay:()=>{h(p,{...x,...L,...D},"start")},onUpdate(e){h(p,e,"update")},onStop:()=>{h(p,{...x,...L,...D,...k,...M,...A},"end")}}),g&&u++,c++,d=D}},p=0;for(let a of u){let s=a.nodes();c(s.filter(e=>!a.isGarbage(e)),s),i.animate({id:`${e}_${t}_selection_${p}`,groupId:e,phase:"end",from:0,to:1,ease:aB,onStop(){a.cleanup()}}),p++}c(d,d)}function rO(e,t,i,a,s,r,n){let{nodes:o,selections:l}=aZ(a),{start:h,finish:d,phase:u}=n;i.animate({id:`${e}_${t}`,groupId:e,phase:u??"update",from:s,to:r,ease:aB,onPlay:()=>{if(h){for(let e of o)e.setProperties(h);for(let e of l)for(let t of e.nodes())t.setProperties(h)}},onUpdate(e){for(let t of o)t.setProperties(e);for(let t of l)for(let i of t.nodes())i.setProperties(e)},onStop:()=>{for(let e of o)e.setProperties({...r,...d});for(let e of l){for(let t of e.nodes())t.setProperties({...r,...d});e.cleanup()}}})}var rj={};function rz(e,t){let{nodes:i,selections:a}=aZ(e);for(let e of a){for(let i of e.nodes()){let e=t(i,i.datum);i.setProperties(e)}e.cleanup()}for(let e of i){let i=t(e,e.datum);e.setProperties(i)}}o(rj,{resetMotion:()=>rz});var rR=class e{constructor(e,t,i=!0){this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=x.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(ee,t)?()=>new t:t}static select(t,i,a=!0){return new e(t,i,a)}static selectAll(e,t){let i=[],a=e=>{for(let s of(t(e)&&i.push(e),e.children()))a(s)};return a(e),i}static selectByClass(t,...i){return e.selectAll(t,e=>i.some(t=>e instanceof t))}static selectByTag(t,i){return e.selectAll(t,e=>e.tag===i)}createNode(e,t,i){let a=this.nodeFactory(e);return a.datum=e,t?.(a),null==i?this._nodes.push(a):this._nodes.splice(i,0,a),this.parentNode.appendChild(a),a}update(e,t,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),i){let a=new Map(e.map((e,t)=>[i(e),[e,t]]));for(let[e,t]of this._nodesMap.entries())if(a.has(t)){let[i]=a.get(t);e.datum=i,this.garbageBin.delete(e),a.delete(t)}else this.garbageBin.add(e);for(let[e,[i,s]]of a.entries())this._nodesMap.set(this.createNode(i,t,s),e)}else{let i=Math.max(e.length,this.data.length);for(let a=0;a<i;a++)a>=e.length?this.garbageBin.add(this._nodes[a]):a>=this._nodes.length?this.createNode(e[a],t):(this._nodes[a].datum=e[a],this.garbageBin.delete(this._nodes[a]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}each(e){for(let t of this._nodes.entries())e(t[1],t[1].datum,t[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){let t=this._nodes[e];yield{node:t,datum:t.datum,index:e}}}select(t){return e.selectAll(this.parentNode,t)}selectByClass(t){return e.selectByClass(this.parentNode,t)}selectByTag(t){return e.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}},rP=class extends e8{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new y(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t)}distanceSquared(e,t){let{x1:i,y1:a,x2:s,y2:r}=this;return eV(e,t,i,a,s,r,1/0)}render(e){let{ctx:t,devicePixelRatio:i}=e,{x1:a,y1:s,x2:r,y2:n}=this;if(a===r){let{strokeWidth:e}=this,t=Math.round(a*i)/i+Math.trunc(e*i)%2/(2*i);a=t,r=t}else if(s===n){let{strokeWidth:e}=this,t=Math.round(s*i)/i+Math.trunc(e*i)%2/(2*i);s=t,n=t}t.beginPath(),t.moveTo(a,s),t.lineTo(r,n),this.fillStroke(t),this.fillShadow?.markClean(),super.render(e)}toSVG(){if(!this.visible)return;let e=(0,s.FJ)("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};rP.className="Line",rP.defaultStyles={...e8.defaultStyles,fill:void 0,strokeWidth:1},l([Z()],rP.prototype,"x1",2),l([Z()],rP.prototype,"y1",2),l([Z()],rP.prototype,"x2",2),l([Z()],rP.prototype,"y2",2);var rF="color: green",rB="color: grey";function rG(){return k(()=>{})}function rV(e,t){let i=T(t);if(0===i.length)return;let a=E(e);for(let e of i)e in a&&(t[e]=a[e])}var rY=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},rU=class e extends rY{constructor(e,t,i){super(),this.defaultState=e,this.states=t,this.enterEach=i,this.debug=x.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,rF)}transition(t,i){if(!this.transitionChild(t,i)||this.state===e.child||this.state===e.parent)return;let a=this.state,s=this.states[this.state],r=s[t],n=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(r))r=r.find(e=>{if(!e.guard)return!0;let t=e.guard(i);return t||this.debug(`${n} (guarded)`,e.target,rB),t});else if("object"==typeof r&&!(r instanceof e)&&r.guard&&!r.guard(i))return void this.debug(`${n} (guarded)`,r.target,rB);if(!r)return void this.debug(`${n} ${this.state}`,rB);let o=this.getDestinationState(r),l=o===this.state?void 0:s.onExit;this.debug(`${n} ${o}`,rF),this.state=o,"function"==typeof r?r(i):"object"!=typeof r||r instanceof e||r.action?.(i),l?.(),this.enterEach?.(a,o),o!==a&&o!==e.child&&o!==e.parent&&this.states[o].onEnter?.(a,i)}transitionAsync(e,t){setTimeout(()=>{this.transition(e,t)},0)}is(t){return this.state===e.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){return this.state!==e.child||!this.childState||(rV(this,this.childState),this.childState.transition(t,i),!this.childState.is(e.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,rF),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1))}getDestinationState(t){let i=this.state;return"string"==typeof t?i=t:t instanceof e?(this.childState=t,this.childState.parent=this,i=e.child):"object"==typeof t&&(t.target instanceof e?(this.childState=t.target,this.childState.parent=this,i=e.child):null!=t.target&&(i=t.target)),i}};rU.child="__child",rU.parent="__parent";var r_=class extends rY{constructor(...e){for(let t of(super(),this.stateMachines=e,e))t.parent=this}transition(e,t){for(let i of this.stateMachines)rV(this,i),i.transition(e,t)}transitionAsync(e,t){for(let i of this.stateMachines)rV(this,i),i.transitionAsync(e,t)}},r$=class{constructor(){this.moduleMap=new Map}*modules(){for(let e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){let t=(0,s.Kg)(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get((0,s.Kg)(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has((0,s.Kg)(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,i)=>e(t.moduleInstance,i))}destroy(){for(let e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}};function rW(e){return"string"==typeof e?sg[e]:e}function rH(e){return rW(e).unit}function rZ(e){return rW(e).hierarchy}function rK(e){return rW(e).milliseconds}function rX(e,t,i,a){return rW(e).range(t,i,a)}var rQ=class e extends sQ{constructor(){super(...arguments),this.type="unit-time",this._domain=[],this._bands=void 0}static is(t){return t instanceof e}set domain(e){e!==this._domain&&(this._domain=e,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(e){this._interval!==e&&(this._interval=e,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1])),this._bands}normalizeDomains(...e){return sp(...e)}convert(e,t){let{domain:i,interval:a}=this;if(i.length<2)return NaN;if(null!=a){let t=e.valueOf(),[s,r]=this.calculateBandRange(i,a),n=Math.min(s.valueOf(),r.valueOf()),o=Math.max(s.valueOf(),r.valueOf());if(t<n||t>=o+rK(a))return NaN}return super.convert(e,t)}calculateBandRange(e,t){var i,a;return[(i=e[0],rW(t).floor(i)),(a=e[1],rW(t).floor(a))]}calculateBands(e,t,i=!1){if(e===this.domain&&0===t[0]&&1===t[1]&&!i&&null!=this._bands)return this._bands;if(e.length<2)return[];let{interval:a}=this;if(null==a)return[];let[s,r]=this.calculateBandRange(e,a);return rX(a,s,r,{visibleRange:t,extend:i})}ticks({interval:e},t=this.domain,i=[0,1],a=!1){let r,n,o,l,h,d;if(t.length<2)return;let u=this.calculateBands(t,i,a),c=this.interval?rK(this.interval):1/0;if(null==e)return{ticks:u,count:void 0};let p=Math.min(t[0].valueOf(),t[1].valueOf()),g=Math.max(t[0].valueOf(),t[1].valueOf()),m=[];e instanceof sm?(r=e.range(t[0],t[1],{extend:!0,visibleRange:i}),n=0,o=r.length-1):(r=u,n=(0,s.I5)(0,u.length-1,e=>u[e].valueOf()<=p)??0,o=(0,s.I5)(0,u.length-1,e=>u[e].valueOf()<=g)??u.length-1);for(let e=n;e<=o;e++){let t=r[e].valueOf(),i=(0,s.I5)(0,u.length-1,e=>u[e].valueOf()<=t),a=null!=i&&i!=l?u[i]:void 0;l=i,null!=a&&t-a.getTime()<=c&&m.push(a)}if(this.interval){let e=this.calculateBandRange([new Date(p),new Date(g)],this.interval);h=e[0].valueOf(),d=e[1].valueOf()}else h=p,d=g;let y=(0,s.S3)(0,m.length-1,e=>m[e].valueOf()>=h)??0,f=(0,s.I5)(0,m.length-1,e=>m[e].valueOf()<=d)??m.length-1;return a&&(y=Math.max(y-1,0),f=Math.min(f+1,m.length-1)),{ticks:m.slice(y,f+1),count:m.length}}findIndex(e){let{bands:t}=this,i=e.valueOf();return(0,s.I5)(0,t.length-1,e=>t[e].valueOf()<=i)}datumFormatter(e){let t=this.tickFormatter(e,1);return e=>{let i=this.findIndex(e);return null!=i?t(this.bands[i]):t(e)}}};function rq(e,t){return e.valueOf()-t.valueOf()}function rJ(e){let t=e.slice().sort(rq);return null==r0(t)?function(e){let t=NaN,i=[];for(let a of e){let e=a.valueOf();t!==e&&i.push(a),t=e}return i}(t):t}function r0(e){if(0===e.length)return 1;let t=Number(e[e.length-1])>Number(e[0])?1:-1,i=-1/0*t;for(let a of e){let e=a.valueOf();if(Math.sign(e-i)!==t)return;i=e}return t}rQ.defaultTickCount=12;var r1=(e,t,i)=>({duration:t*i,timeInterval:e,step:i}),r2=[r1(sv,1e3,1),r1(sv,1e3,5),r1(sv,1e3,15),r1(sv,1e3,30),r1(sD,6e4,1),r1(sD,6e4,5),r1(sD,6e4,15),r1(sD,6e4,30),r1(sL,36e5,1),r1(sL,36e5,3),r1(sL,36e5,6),r1(sL,36e5,12),r1(sb,864e5,1),r1(sb,864e5,2),r1(sw,6048e5,1),r1(sw,6048e5,2),r1(sw,6048e5,3),r1(sf,2592e6,1),r1(sf,2592e6,2),r1(sf,2592e6,3),r1(sf,2592e6,4),r1(sf,2592e6,6),r1(sy,31536e6,1)],r4=[1,2,5,10];function r3(e,t){return Math.abs(Math.round(e)-e)<t}function r5(e,t,i){return Math.abs(t-e)>=i?Math.abs(t-e)/i+1:1}function r9(e,t,i,a,s,r){if(e===t)return{ticks:[e],count:1};if(i<2)return{ticks:[e,t],count:2};let n=ne(e,t,i,a,s);if(!Number.isFinite(n))return{ticks:[],count:0};let o=e,l=t;if(r3(o/n,1e-12)||(o=Math.ceil(o/n)*n),r3(l/n,1e-12)||(l=Math.floor(l/n)*n),null!=r){let i=l-o,a=t-e;r=[(e+a*r[0]-o)/i,(e+a*r[1]-o)/i]}let{ticks:h}=na(o,l,n,r);return{ticks:h,count:r5(e,t,n)}}var r6=Math.floor(2*sw.milliseconds/sf.milliseconds*10)/10;function r8({timeInterval:e,step:t}){return e.milliseconds*t<=(e.hierarchy?.milliseconds??1/0)*r6}function r7(e,t,i,a,s,{weekStart:r,primaryOnly:n=!1,targetInterval:o}){if(i<=0)return;let l=o??Math.abs(t-e)/Math.max(i,1),h=r2.findLast(e=>(!n||r8(e))&&l>e.duration),d=r2.find(e=>(!n||r8(e))&&l<=e.duration);if(null==h){let r=Math.max(ne(e,t,i,a,s),1);return sx.every(r)}if(null==d){let r=null==o?ne(e/31536e6,t/31536e6,i,a,s):1;return sy.every(r)}let{timeInterval:u,step:c}=l-h.duration<d.duration-l?h:d;return u===sw?r?.every(c)??sb.every(7*c):u.every(c)}function ne(e,t,i,a=0,r=1/0){if(e===t)return(0,s.qE)(1,a,r);if(i<1)return NaN;let n=Math.abs(t-e),o=10**Math.floor(Math.log10(n/i)),l=NaN,h=1/0,d=!1;for(let e of r4){let t=Math.ceil(n/(e*o)),s=t>=a&&t<=r;if(d&&!s)continue;let u=Math.abs(t-i);(h>u||d!==s)&&(d||(d=s),h=u,l=e)}return l*o}function nt(e){for(let t=e.length-1;t>=0;t-=1)if("0"!==e[t])return t+1;return 0}function ni(e,t){let i=(0,s.sA)(t??",f");(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(e=>{if(!Number.isFinite(e))return 0;let[t,a]=e.toExponential((i.type?6:12)-1).split(/[.e]/g);return+("1"!==t&&"-1"!==t)+nt(a)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(e=>{if(!Number.isFinite(e)||0===e)return 0;let t=Math.floor(Math.log10(Math.abs(e))),a=i.type?6:12;return Math.max(0,nt(e.toExponential(a-1).split(/[.e]/g)[1])-t)}))));let a=(0,s.OR)(i);return e=>a(Number(e))}function na(e,t,i,a){let r,n;if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0};if(e===t)return{ticks:[e],count:1};let o=10**(0,s.o3)(i),l=Math.min(e,t),h=Math.max(e,t);if(null!=a&&(0!==a[0]||1!==a[1])){let i=t-e,s=e+i*a[0],o=t-i*(1-a[1]);r=Math.min(s,o),n=Math.max(s,o)}else r=l,n=h;r=Math.floor(r*o)/o,n=Math.ceil(n*o)/o;let d=[];for(let e=0;;e+=1){let t=Math.round((l+i*e)*o)/o;if(t>h)break;t>=r&&t<=n&&d.push(t)}return{ticks:d,count:r5(l,h,i)}}function ns(e,t){return e>=t&&(s.Vy.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function nr(e,t){let i=Math.abs(t-e),a=10**Math.floor(Math.log10(i)),s=1/0,r=[e,t];for(let n of r4){let o=n*a,l=Math.floor(e/o)*o,h=Math.ceil(t/o)*o,d=1-i/Math.abs(h-l);s>d&&(s=d,r=[l,h])}return r}function nn(e,t,i,a,r,n){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};n=Math.max(n,e/(r+1)),i??(i=n),a??(a=e),i>a&&(i===n?i=a:a=i);let o=Math.max(1,Math.floor(e/(t*i))),l=Math.min(o,Math.ceil(e/(t*a))),h=(0,s.qE)(l,Math.floor(r/t),o);return{minTickCount:l,maxTickCount:o,tickCount:h}}var no=class e extends sc{constructor(){super([],[0,1]),this.type="time"}static is(t){return t instanceof e}toDomain(e){return new Date(e)}convert(e,t){return e instanceof Date||(e=new Date(e)),super.convert(e,t)}invert(e){return new Date(super.invert(e))}niceDomain(e,t=this.domain){if(t.length<2)return[];let[i,a]=t,s=this.getPixelRange();for(let t=0;t<4;t++){let[t,r]=function(e,t,i,a){let s,{interval:r}=i,n=Math.min(sW(e),sW(t)),o=Math.max(sW(e),sW(t));if(r instanceof sm)s=r;else if("string"==typeof r)s=r;else{let e;"number"==typeof r&&ns(e=(o-n)/Math.max(r,1),a)&&(e=void 0),e??(e=i.tickCount??sc.defaultTickCount),s=r7(n,o,e,i.minTickCount,i.maxTickCount,{weekStart:sw})}if(null==s)return[e,t];let l=rX(s,new Date(n),new Date(o),{extend:!0});if(null==l||l.length<2)return[e,t];let h=l[0],d=l[l.length-1];return e<=t?[h,d]:[d,h]}(i,a,e,s);if(sW(i)===sW(t)&&sW(a)===sW(r))break;i=t,a=r}return[i,a]}ticks(e,t=this.domain,i=[0,1],a=!1){let{nice:s,interval:r,tickCount:n=sc.defaultTickCount,minTickCount:o,maxTickCount:l}=e;if(t.length<2)return;let h=t.map(sW),d=h[0],u=h[h.length-1];return null!=r?{ticks:nh({start:d,stop:u,interval:r,availableRange:this.getPixelRange(),visibleRange:i,extend:a})??nl({start:d,stop:u,tickCount:n,minTickCount:o,maxTickCount:l,visibleRange:i,extend:a}),count:void 0}:s&&2===n?{ticks:t,count:void 0}:s&&1===n?{ticks:t.slice(0,1),count:void 0}:{ticks:nl({start:d,stop:u,tickCount:n,minTickCount:o,maxTickCount:l,visibleRange:i,extend:a}),count:void 0}}_tickFormatter({domain:e,ticks:t,specifier:i},a){return null!=i?s$(i):sH(t,e,a)}tickFormatter(e){return this._tickFormatter(e)}datumFormatter(e){return this._tickFormatter(e,1)}};function nl({start:e,stop:t,tickCount:i,minTickCount:a,maxTickCount:s,visibleRange:r,extend:n}){let o=r7(e,t,i,a,s,{weekStart:sw});return o?o.range(new Date(e),new Date(t),{visibleRange:r,extend:n}):[]}function nh({start:e,stop:t,interval:i,availableRange:a,visibleRange:s,extend:r}){if(!i)return[];if(i instanceof sm||"string"==typeof i){let n=rX(i,new Date(e),new Date(t),{visibleRange:s,extend:r});if(ns(n.length,a))return;return n}let n=Math.abs(i);if(ns(Math.abs(t-e)/n,a))return;let o=r2.findLast(e=>n%e.duration==0);if(o)return o.timeInterval.every(n/(o.duration/o.step)).range(new Date(e),new Date(t),{visibleRange:s,extend:r});let l=new Date(Math.min(e,t)),h=new Date(Math.max(e,t)),d=[];for(;l<=h;)d.push(l),(l=new Date(l)).setMilliseconds(l.getMilliseconds()+n);return d}var nd=class e extends sQ{constructor(){super(...arguments),this.type="ordinal-time",this._domain=[],this.isReversed=!1}static is(t){return t instanceof e}set domain(e){e!==this._domain&&(this.invalid=!0,this._domain=e,this._bands=void 0,this.isReversed=e.length>0&&e[0]>e[e.length-1],this.sortedTimestamps=void 0,this.precomputedSteps=void 0)}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(...e){let t=e.filter(e=>e.length>0);if(0===t.length)return{domain:[],animatable:!1};if(1===t.length){let e=t[0],i=r0(e);return -1===i?e=e.slice().reverse():null==i&&(e=rJ(e.slice())),{domain:e,animatable:!0}}return{domain:rJ(t.flat()),animatable:!0}}ticks({interval:e,maxTickCount:t},i=this.domain,a=[0,1],s=!1){if(!i.length)return;this.refresh();let{isReversed:r}=this;if(null==e)return{ticks:nu(i,t,r,a,s),count:void 0};let n=i[0].valueOf(),o=i[i.length-1].valueOf(),[l,h]=this.range,d=nh({start:n,stop:o,interval:e,availableRange:Math.abs(h-l),visibleRange:a,extend:s})??nu(i,t,r,a,s),u=-1;return{ticks:d=d.filter(e=>{let t=this.findInterval(e.valueOf()),i=t===u;return u=t,!i}),count:void 0}}getSortedTimestamps(){let{sortedTimestamps:e}=this;return null==e&&(e??(e=this.bands.map(sW)),this.sortedTimestamps=e),e}getPrecomputedSteps(){let{domain:e}=this,{precomputedSteps:t}=this,i=e.length<1e4?e.length:Math.ceil(e.length/16);if(null!=t||i<=1)return t;let a=this.getSortedTimestamps();t=new Int32Array(i);let s=a[0],r=a[a.length-1]-s,n=a.length-1;for(let e=0;e<t.length;e+=1)t[e]=this.findIntervalInRange(s+e/i*r,0,n);this.precomputedSteps=t}findIntervalInRange(e,t,i){let a=this.getSortedTimestamps();for(;t<=i;){let s=(t+i)/2|0;if(a[s]===e)return s;a[s]<e?t=s+1:i=s-1}return t}findInterval(e){let t,i,a=this.getPrecomputedSteps();if(null==a)t=0,i=this.domain.length-1;else{let s=this.getSortedTimestamps(),r=s[0],n=Math.min((e-r)/(s[s.length-1]-r)*a.length|0,a.length-1|0);t=a[n],i=n<a.length-2?a[n+1]:s.length-1}return this.findIntervalInRange(e,t,i)}datumFormatter(e){return this.tickFormatter(e)}findIndex(e){let t=this.getSortedTimestamps(),i=Number(e);if(!(i<t[0]))return this.findInterval(i)}};function nu(e,t,i,a,s){let r=[],n=Math.ceil(e.length/t),o=Math.floor(n/2),l=Math.floor(a[0]*e.length),h=Math.ceil(a[1]*e.length);s&&(l>n&&(l-=n),h<e.length-n&&(h+=n));for(let t=l;t<h;t+=1){let a=i?e.length-1-t:t;(n<=0||(a+o)%n==0)&&r.push(e[t])}return r}var nc=class extends e8{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.restoreOwnStyles()}computeBBox(){return new y(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){let{ctx:t}=e,{x1:i,y1:a,x2:s,y2:r}=this;i=this.align(i),a=this.align(a),s=this.align(s),r=this.align(r);let{fill:n,horizontal:o}=this,{globalAlpha:l}=t;null!=n&&(this.applyFillAndAlpha(t),t.beginPath(),t.moveTo(i,a),t.lineTo(s,a),t.lineTo(s,r),t.lineTo(i,r),t.closePath(),t.fill(),t.globalAlpha=l);let{stroke:h,strokeWidth:d,startLine:u,endLine:c}=this;if((u||c)&&h&&d){let{lineDash:e,lineDashOffset:n,lineCap:h,lineJoin:p}=this;this.applyStrokeAndAlpha(t),t.lineWidth=d,e&&t.setLineDash([...e]),n&&(t.lineDashOffset=n),h&&(t.lineCap=h),p&&(t.lineJoin=p),t.beginPath(),u&&(t.moveTo(i,a),o?t.lineTo(i,r):t.lineTo(s,a)),c&&(t.moveTo(s,r),o?t.lineTo(s,a):t.lineTo(i,r)),t.stroke(),t.globalAlpha=l}this.fillShadow?.markClean(),super.render(e)}};function np(e){return(0,s.Bf)(e)||(0,s.vd)(e)||null!=e&&Object.hasOwn(e,"valueOf")&&(0,s.Bf)(e.valueOf())}function ng(e){return null!=e&&Object.hasOwn(e,"toString")&&(0,s.Kg)(e.toString())&&Object.hasOwn(e,"id")?e.id:e}function nm(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function ny(e,t){if(null==e)return!1;let i=sc.is(t)||sQ.is(t),a=e=>null!=e&&(!i||np(e))&&!isNaN(t.convert(e));if(!(0,s.cy)(e))return a(e);{let[t,i]=e;return a(t)&&a(i)}}nc.className="Range",nc.defaultStyles={...e8.defaultStyles,strokeWidth:1},l([Z()],nc.prototype,"x1",2),l([Z()],nc.prototype,"y1",2),l([Z()],nc.prototype,"x2",2),l([Z()],nc.prototype,"y2",2),l([Z()],nc.prototype,"startLine",2),l([Z()],nc.prototype,"endLine",2),l([Z()],nc.prototype,"horizontal",2);var nf={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},nb={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},nx={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},nM={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},nv=class extends eC{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};l([ew],nv.prototype,"enabled",2),l([ew],nv.prototype,"text",2),l([ew],nv.prototype,"fontStyle",2),l([ew],nv.prototype,"fontWeight",2),l([ew],nv.prototype,"fontSize",2),l([ew],nv.prototype,"fontFamily",2),l([ew],nv.prototype,"padding",2),l([ew],nv.prototype,"color",2),l([ew],nv.prototype,"position",2),l([ew],nv.prototype,"rotation",2),l([ew],nv.prototype,"parallel",2);var nS=class extends eC{constructor(){super(),this.id=(0,s.sX)(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new nv,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new tu({name:this.id}),this.lineGroup=new tu({name:this.id}),this.labelGroup=new tu({name:this.id}),this.crossLineRange=new nc,this.crossLineLabel=new ih,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(e){let{enabled:t,type:i,data:a,scale:s}=this;if(!s||!t||!e||!ny(nm(this),s)||null==a){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();let r="range"===i;r!==this._isRange&&(r?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=r}calculateLayout(e,t){let i,a,s,r;if(this.data=void 0,!e)return;let{type:n,range:o,value:l,scale:h,clippedRange:d,strokeWidth:u=0}=this;if(!h)return;let c=h.bandwidth??0,p=h.step??0,g=(t?-1:1)*(h instanceof sX?(p-c)/2:0);if("line"===n){let e=c/2;i=h.convert(l)+e,a=NaN,s=h.convert(l,{clamp:!0})+e,r=NaN}else{if(!o)return;let[e,t]=o,n=e?.valueOf()===t?.valueOf()&&nd.is(h)?c/2+g:0;i=h.convert(e)+n,a=h.convert(t)+c,s=h.convert(e,{clamp:!0})+n-g,r=h.convert(t,{clamp:!0})+c+g}s=sl(s,d),r=sl(r,d);let m=(i===s||a===r||s!==r)&&Math.abs(r-s)>0;if(m&&s>r&&([s,r]=[r,s],[i,a]=[a,i]),i-g>=s&&(i-=g),a+g<=r&&(a+=g),this.startLine=u>0&&i>=s&&i<=s+g,this.endLine=u>0&&a>=r-c-g&&a<=r,("range"!==n||m||this.startLine||this.endLine)&&(this.data=[s,r],!1===this.label.enabled||!this.label.text))return}updateNodes(){let e,{position:t,data:[i,a]=[0,0],gridLength:s}=this,r=Number.isFinite(a)?a-i:0;switch(t){case"top":case"bottom":e=new y(i,"top"===t?0:-s,r,s);break;case"left":case"right":e=new y("left"===t?0:-s,i,s,r)}this.updateRangeNode(e);let{label:n}=this;!1!==n.enabled&&n.text&&(this.updateLabel(),this.positionLabel(e))}updateRangeNode(e){let{type:t,position:i,crossLineRange:a,startLine:s,endLine:r,fill:n,fillOpacity:o,stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:u}=this;a.x1=e.x,a.x2=e.x+e.width,a.y1=e.y,a.y2=e.y+e.height,a.horizontal="top"===i||"bottom"===i,a.startLine=s,a.endLine=r,a.fill="range"===t?n:void 0,a.fillOpacity=o??1,a.stroke=l,a.strokeWidth=h??1,a.strokeOpacity=d??1,a.lineDash=u}updateLabel(){let{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}get anchor(){let e="left"===this.position||"right"===this.position,t="range"===this.type,{position:i=this.defaultLabelPosition}=this.label;return t?(e?nx:nM)[i]:(e?nf:nb)[i]}positionLabel(e){let{crossLineLabel:t,label:i,anchor:a}=this;t.rotation=eo(i.rotation??0),t.textBaseline="middle",t.textAlign="center";let s=t.getBBox();if(!s)return;let{width:r,height:n}=s,o=i.padding+r/2,l=i.padding+n/2,h=e.x+e.width*(a.rangeH+1)/2-o*a.labelH,d=e.y+e.height*(a.rangeV+1)/2-l*a.labelV;t.x=h,t.y=d,t.rotationCenterX=h,t.rotationCenterY=d}computeLabelSize(){let{label:e}=this;if(!1===e.enabled||!e.text)return;let t=new ih;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text,t.rotation=eo(e.rotation??0),t.textBaseline="middle",t.textAlign="center";let i=t.getBBox();if(!i)return;let{width:a,height:s}=i;return{width:a,height:s}}calculatePadding(e){let{label:t,anchor:i}=this,a=this.computeLabelSize();if(!a)return;let{width:s,height:r}=a,n=t.padding+s,o=t.padding+r,l="left"===this.position||"right"===this.position;l&&(-1===i.rangeH&&1===i.labelH?e.left=Math.max(e.left??0,n):1===i.rangeH&&-1===i.labelH&&(e.right=Math.max(e.right??0,n))),l||(-1===i.rangeV&&1===i.labelV?e.top=Math.max(e.top??0,o):1===i.rangeV&&-1===i.labelV&&(e.bottom=Math.max(e.bottom??0,o)))}};nS.className="CrossLine",l([ew],nS.prototype,"enabled",2),l([ew],nS.prototype,"type",2),l([ew],nS.prototype,"range",2),l([ew],nS.prototype,"value",2),l([ew],nS.prototype,"defaultColorRange",2),l([ew],nS.prototype,"fill",2),l([ew],nS.prototype,"fillOpacity",2),l([ew],nS.prototype,"stroke",2),l([ew],nS.prototype,"strokeWidth",2),l([ew],nS.prototype,"strokeOpacity",2),l([ew],nS.prototype,"lineDash",2),l([ew],nS.prototype,"label",2);var nD=class extends eC{constructor(){super(...arguments),this.enabled=!0}getFont(){return ia.toFontString(this)}};function nI(e,t,i,a,s){let r=t>0&&t<=Math.PI,n=i>0&&i<=Math.PI;if(e){if(!t&&!i)return"center";else if(a*(r||n?-1:1)==-1)return"end"}else if(a*s==-1)return"end";return"start"}function nL(e,t){if(null!=e){if("string"==typeof e)return e;else if((0,s.Qd)(e)&&null!=t)return e[rH(t)]}}l([ew],nD.prototype,"enabled",2),l([ew],nD.prototype,"color",2),l([ew],nD.prototype,"fontStyle",2),l([ew],nD.prototype,"fontWeight",2),l([ew],nD.prototype,"fontSize",2),l([ew],nD.prototype,"fontFamily",2),l([ew],nD.prototype,"formatter",2);var nA=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};l([ew],nA.prototype,"enabled",2),l([ew],nA.prototype,"width",2),l([ew],nA.prototype,"style",2);var nw=class extends eC{};l([ew],nw.prototype,"step",2),l([ew],nw.prototype,"values",2),l([ew],nw.prototype,"minSpacing",2),l([ew],nw.prototype,"maxSpacing",2);var nC=class extends eC{constructor(){super(...arguments),this.enabled=!0,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}getFont(){return ia.toFontString(this)}};l([ew],nC.prototype,"enabled",2),l([ew],nC.prototype,"fontStyle",2),l([ew],nC.prototype,"fontWeight",2),l([ew],nC.prototype,"fontSize",2),l([ew],nC.prototype,"fontFamily",2),l([ew],nC.prototype,"spacing",2),l([ew],nC.prototype,"minSpacing",2),l([ew],nC.prototype,"color",2),l([ew],nC.prototype,"rotation",2),l([ew],nC.prototype,"avoidCollisions",2),l([ew],nC.prototype,"mirrored",2),l([ew],nC.prototype,"parallel",2),l([ew],nC.prototype,"itemStyler",2),l([ew],nC.prototype,"formatter",2),l([ew],nC.prototype,"format",2);var nk=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};l([ew],nk.prototype,"enabled",2),l([ew],nk.prototype,"width",2),l([ew],nk.prototype,"stroke",2);var nN=class extends eC{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};l([ew],nN.prototype,"enabled",2),l([ew],nN.prototype,"width",2),l([ew],nN.prototype,"size",2),l([ew],nN.prototype,"stroke",2);var nT=class extends eC{constructor(){super(...arguments),this.caption=new iu,this.enabled=!1,this.spacing=iu.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};l([ew],nT.prototype,"enabled",2),l([ew],nT.prototype,"text",2),l([ew],nT.prototype,"spacing",2),l([ew],nT.prototype,"fontStyle",2),l([ew],nT.prototype,"fontWeight",2),l([ew],nT.prototype,"fontSize",2),l([ew],nT.prototype,"fontFamily",2),l([ew],nT.prototype,"color",2),l([ew],nT.prototype,"wrapping",2),l([ew],nT.prototype,"formatter",2);var nE=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(nE||{});function nO(e){let[t,i]=sh(e.range),a=Math.floor(t),s=Math.ceil(i);return{min:a,max:s,visible:a!==s}}var nj=2*Math.PI,nz=nj/2;function nR(e){let{min:t,max:i}=e,a=e=>e<t||e>i;return{tick:{fromFn(e,t,i){let{x1:s,x2:r,y1:n,y2:o}=e,l=e.opacity;return("added"===i||a(t.offset))&&({x1:s,x2:r,y1:n,y2:o}=t,l=0),{x1:s,x2:r,y1:n,y2:o,opacity:l,phase:rT[i]}},toFn(e,t,i){let{x1:a,x2:s,y1:r,y2:n}=t,o=1;return"removed"===i&&(o=0),{x1:a,x2:s,y1:r,y2:n,opacity:o}},applyFn(e,t){e.setProperties(t),e.visible=!a(e.y)}},line:{fromFn(e,t){let{x1:i,x2:a,y1:s,y2:r}=e.previousDatum??t;return{x1:i,x2:a,y1:s,y2:r,phase:rT.updated}},toFn(e,t){let{x1:i,x2:a,y1:s,y2:r}=t;return{x1:i,x2:a,y1:s,y2:r}}},label:{fromFn(e,t,i){let s=e.previousDatum??t,{x:r,y:n,rotationCenterX:o,rotationCenterY:l,rotation:h}=s,d=e.opacity;return"removed"===i||a(s.y)?h=t.rotation:("added"===i||a(e.datum.y))&&({x:r,y:n,rotationCenterX:o,rotationCenterY:l,rotation:h}=t,d=0),{x:r,y:n,rotationCenterX:o,rotationCenterY:l,rotation:h,opacity:d,phase:rT[i]}},toFn(e,t,i){let{x:a,y:s,rotationCenterX:r,rotationCenterY:n}=t,o=0,l=1;if("added"===i)o=t.rotation;else if("removed"===i)l=0,o=t.rotation;else{var h,d;h=e.previousDatum?.rotation??t.rotation,o=Math.abs((d=t.rotation)-h)<nz?d:h>d?d+nj:d-nj}return{x:a,y:s,rotationCenterX:r,rotationCenterY:n,rotation:o,opacity:l,finish:{rotation:t.rotation}}}},group:{fromFn(e,t){let{translationX:i,translationY:a}=e;return{translationX:i,translationY:a,phase:rT.updated}},toFn(e,t){let{translationX:i,translationY:a}=t;return{translationX:i,translationY:a}}}}}function nP(){return(e,t)=>({translationX:t.translationX,translationY:t.translationY})}function nF(){return(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})}function nB(){return(e,t)=>{let{x1:i,x2:a,y1:s,y2:r}=t;return{x1:i,x2:a,y1:s,y2:r}}}var nG={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},nV={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},nY=/%[-_0]?L/,nU=/%[-_0]?S/,n_=/%[-_0]?M/,n$=/%[-_0]?[HI]/,nW=/^%[-_0]?[de]$/,nH=/^%[-_0]?[Bbm]$/,nZ=/^%[-_0]?[Yy]$/,nK=class extends tn(rP){},nX=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(nX||{}),nQ=class e{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=(0,s.sX)(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new nw,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new tu({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new tm({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new tm({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new tu({name:`${this.id}-Labels`,zIndex:9}),this.gridGroup=new tg({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new tu({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new tm({name:`${this.id}-CrossLines-Range`,zIndex:4}),this.crossLineLineGroup=new tm({name:`${this.id}-CrossLines-Line`,zIndex:8}),this.crossLineLabelGroup=new tm({name:`${this.id}-CrossLines-Label`,zIndex:13}),this.tickLabelGroupSelection=rR.select(this.tickLabelGroup,ih,!1),this._crossLines=[],this.line=new nk,this.tick=new nN,this.gridLine=new nA,this.label=this.createLabel(),this.defaultTickMinSpacing=e.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.labelFormatter=void 0,this.datumFormatter=void 0,this.scaleFormatterParams=void 0,this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new nT,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.animatable=!0,this._cachedUnzoomedInputDomain=void 0,this._cachedUnzoomedRangeExtent=NaN,this._cachedUnzoomedTickCount=0,this.moduleMap=new r$,this.range=this.scale.range.slice(),this.crossLines.forEach(e=>this.initCrossLine(e))}get type(){return this.constructor.type??""}get labelNodes(){return this.tickLabelGroupSelection.nodes()}set crossLines(e){let{CrossLineConstructor:t}=this.constructor;this._crossLines.forEach(e=>this.detachCrossLine(e)),this._crossLines=e.map(e=>{let i=new t;return i.set(e),i}),this._crossLines.forEach(e=>{this.attachCrossLine(e),this.initCrossLine(e)})}get crossLines(){return this._crossLines}resetAnimation(e){}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineRangeGroup.removeChild(e.rangeGroup),this.crossLineLineGroup.removeChild(e.lineGroup),this.crossLineLabelGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}updateScale(){let{range:e,visibleRange:t,scale:i}=this,a=(e[1]-e[0])/(t[1]-t[0]),s=a*t[0],r=e[0]-s;i.range=[r,r+a],this.crossLines.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(e){e.gridNode.removeChild(this.gridGroup),e.axisNode.removeChild(this.axisGroup),e.labelNode.removeChild(this.labelGroup),e.crossLineRangeNode.removeChild(this.crossLineRangeGroup),e.crossLineLineNode.removeChild(this.crossLineLineGroup),e.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(e){this.labelGroup.append(e)}inRange(e,t=0){let[i,a]=sh(this.range);return e>=i-t&&e<=a+t}getRangeOverflow(e){let{range:t,visibleRange:i}=this,a=(t[1]-t[0])/(i[1]-i[0]),[s,r]=sh([t[0]-a*i[0],t[0]-a*i[0]+a]);return e<s?e-s:e>r?e-r:0}defaultDatumFormatter(e,t){return at(e,t+1)}defaultLabelFormatter(e,t){return at(e,t)}onGridLengthChange(e,t){t^e&&this.onGridVisibilityChange(),this.crossLines.forEach(e=>this.initCrossLine(e))}onGridVisibilityChange(){}createLabel(){return new nC}update(){this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(e,t,i=this.label){let a,s={color:i.color,spacing:i.spacing,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight};i.itemStyler&&(a=this.callWithContext(i.itemStyler,{...e,...s}));let{color:r,fontFamily:n,fontSize:o,fontStyle:l,fontWeight:h,spacing:d}=z(a,t,s);return{fill:r,fontFamily:n,fontSize:o,fontStyle:l,fontWeight:h,spacing:d}}getTickSize(e=this.tick){return e.enabled?e.size:0}processData(){let{includeInvisibleDomains:e,boundSeries:t,direction:i}=this,a=(e?t:t.filter(e=>e.isEnabled())).map(e=>e.getDomain(i));this.setDomains(...a)}setDomains(...e){let t,i;e.length>0?{domain:t,animatable:i}=this.scale.normalizeDomains(...e):(t=[],i=!0),this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=i}calculateLayout(e,t){let i,a,r,{scale:n,label:o,visibleRange:l,nice:h}=this;this.chartPadding=t,this.updateScale();let d=sd(this.range),u=this.dataDomain.domain;if(0===l[0]&&1===l[1])i=void 0,a=void 0;else if(this._cachedUnzoomedInputDomain===u&&this._cachedUnzoomedRangeExtent===d)i=this.scale.domain,a=this._cachedUnzoomedTickCount;else{let e=this.calculateTickLayout(u,2*!h,[0,1]);i=e.niceDomain,a=e.rawTickCount??0}r=h?+(null!=i):2;let{niceDomain:c,ticks:p,rawTickCount:g=0,tickDomain:m,fractionDigits:y,bbox:f}=this.calculateTickLayout(i??u,r,l,e);a??(a=g);let b=0!==g&&0!==a?{zoomed:g,unzoomed:a}:void 0,x=rQ.is(n)?n.interval:void 0;this.scale.domain=c,this._cachedUnzoomedInputDomain=u,this._cachedUnzoomedRangeExtent=d,this._cachedUnzoomedTickCount=a;let M=nL(null==x?o.format:function(e,t){let i;if(!(0,s.Qd)(e))return e;let a=rH(t),{millisecond:r,second:n,minute:o,hour:l,day:h,month:d,year:u}=e,c=nV[a],p=nG[a];if(c>=nV.year&&!nZ.test(u)||c>=nV.month&&!nH.test(d)||c>=nV.day&&!nW.test(h))return p;switch(a){case"year":return u;case"month":return`${d} ${u}`;case"day":return`${d} ${h} ${u}`;case"hour":i=l;break;case"minute":i=o;break;case"second":i=n;break;case"millisecond":i=r;break;default:return p}return c>=nV.hour&&!n$.test(i)||c>=nV.minute&&!n_.test(i)||c>=nV.second&&!nU.test(i)||c>=nV.millisecond&&!nY.test(i)?p:`${i} ${d} ${h} ${u}`}(o.format,x),x);return this.labelFormatter=n.tickFormatter({domain:m,specifier:M,ticks:p,fractionDigits:y})??(e=>this.defaultLabelFormatter(e,y)),this.datumFormatter=n.datumFormatter({domain:m,specifier:M,ticks:p,fractionDigits:y})??(e=>this.defaultDatumFormatter(e,y)),this.scaleFormatterParams={domain:m,ticks:p,fractionDigits:y},this.layout.label={fractionDigits:y,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:b,bbox:f}}updateCrossLines(){let e=this.isAnySeriesActive();this.crossLines.forEach(t=>{t.update(e)})}updatePosition(){let{crossLineRangeGroup:e,crossLineLineGroup:t,crossLineLabelGroup:i,gridGroup:a,translation:s}=this,r=Math.floor(s.x),n=Math.floor(s.y);a.setProperties({translationX:r,translationY:n}),e.setProperties({translationX:r,translationY:n}),t.setProperties({translationX:r,translationY:n}),i.setProperties({translationX:r,translationY:n})}formatTick(e,t,i,a,s,r){let n,{labelFormatter:o,label:{formatter:l}}=this;if(l){let r=this.getFormatterBoundSeries(),o=s?rH(s):void 0,h=s?rW(s).step:void 0;n=this.callWithContext(l,{value:e,index:t,domain:i,fractionDigits:a,unit:o,step:h,boundSeries:r})}else r?n=r(e):o&&(n=o(e));return String(n??e)}formatDatum(e){let t,{label:{formatter:i},datumFormatter:a=this.labelFormatter}=this;if(i){let{domain:a}=this.scale,s=this.getFormatterBoundSeries();t=this.callWithContext(i,{value:e,index:NaN,domain:a,boundSeries:s})}else a?t=this.callWithContext(a,e):(0,s.cy)(e)&&(t=e.filter(Boolean).join(" - "));return String(t??e)}getScaleValueFormatter(e){let t,{scaleFormatterParams:i}=this;try{null!=e&&null!=i&&(t=this.scale.tickFormatter({...i,specifier:e}))}catch{s.Vy.warnOnce(`the format string ${e} is invalid, ignoring.`)}return t??(t=e=>this.formatDatum(e)),t}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,t,i,a){this.tickLineGroup.setClipRect(new y(e,t,i,a))}clipGrid(e,t,i,a){this.gridGroup.setClipRect(new y(e,t,i,a))}getFormatterBoundSeries(){let{direction:e}=this,t=[];for(let i of this.boundSeries){let a=i.getKeys(e),s=i.getNames(e);for(let e=0;e<a.length;e++)t.push({key:a[e],name:s[e]})}return t}getTitleFormatterParams(e){let{direction:t}=this;return{domain:e,direction:t,boundSeries:this.getFormatterBoundSeries(),defaultValue:this.title?.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){let{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:sc.is(e)||sQ.is(e),getCanvasBounds:()=>to.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((e,t)=>(t.getKeyProperties(this.direction).forEach(t=>e.add(t)),e),new Set),seriesIds:()=>this.boundSeries.map(e=>e.id),scaleValueFormatter:e=>this.getScaleValueFormatter(e),scaleInvert:t=>e.invert(t,!0),scaleInvertNearest:t=>e.invert(t,!0),attachLabel:e=>this.attachLabel(e),inRange:(e,t)=>this.inRange(e,t),getRangeOverflow:e=>this.getRangeOverflow(e)}}isReversed(){return this.reverse}callWithContext(e,...t){let{callbackCache:i,chartService:a}=this.moduleCtx;return i.call(this,a,e,...t)}};nQ.defaultTickMinSpacing=50,nQ.CrossLineConstructor=nS,l([ew],nQ.prototype,"nice",2),l([ew],nQ.prototype,"reverse",2),l([ew],nQ.prototype,"keys",2),l([ew],nQ.prototype,"interval",2),l([ew],nQ.prototype,"title",2),l([k((e,t,i)=>e.onGridLengthChange(t,i))],nQ.prototype,"gridLength",2);var nq=nQ;function nJ(){let e=new Map;return t=>{let i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var n0=class{constructor(e){this.axis=e}estimateTickCount(e,t,i){let{scale:a,range:s,defaultTickMinSpacing:r}=this.axis,n=rQ.is(a)?rQ.defaultTickCount:sc.defaultTickCount;return nn(sd(s),sd(e),t,i,n,r)}filterTicks(e,t){let{minSpacing:i,maxSpacing:a}=this.axis.interval,s=null!=i||null!=a?Math.ceil(e.length/t):2,r=e.length%s?-1:0;return e.filter((e,t)=>(t+r)%s==0)}generateTicks({domain:e,primaryTickCount:t,visibleRange:i,niceMode:a,parallelFlipRotation:s,regularFlipRotation:r,labelX:n,sideFlag:o,removeOverflowLabels:l,removeOverflowThreshold:h=0}){var d;let{scale:u,label:c,primaryLabel:p,interval:{minSpacing:g,maxSpacing:m}}=this.axis,{parallel:f,fontFamily:b,fontSize:x,fontStyle:M,fontWeight:v}=c,S=void 0!==t,{defaultRotation:D,configuredRotation:I,parallelFlipFlag:L,regularFlipFlag:A}=function(e,t,i=0,a=0){let s=ec(e),r=!s&&a>=0&&a<=Math.PI?-1:1,n=!s&&i>=0&&i<=Math.PI?-1:1,o=0;return t?o=r*Math.PI/2:-1===n&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:r,regularFlipFlag:n}}(c.rotation,f,r,s),{maxTickCount:w}=this.estimateTickCount(i,g,m),C=!(sc.is(u)||sQ.is(u))||isNaN(w)?10:w,k=nI(f,I,0,o,A),N=(d=null==p,f&&!I?o*L==-1?d?"hanging":"top":"bottom":"middle"),T=ia.toFontString({fontFamily:b,fontSize:x,fontStyle:M,fontWeight:v}),E=it.getMeasurer({font:T}),O={fontFamily:b,fontSize:x,fontStyle:M,fontWeight:v,textBaseline:N,textAlign:k},j=c.enabled&&c.avoidCollisions,z=I+D,R=new te,P=e=>{te.updateTransformMatrix(R,1,1,z+e,0,0)},F=({ticks:e},t)=>{P(t);let i=[];for(let{tickLabel:t,translationY:a}of e){if(!t)continue;let{x:e,y:s}=R.transformBBox(new y(n,a,0,0)),{width:r,height:o}=E.measureLines(t);i.push({point:{x:e,y:s},label:{text:t,width:r,height:o}})}return i},B=(t,i)=>{let{niceDomain:a,ticks:s,rawTicks:r,timeInterval:o}=t;if(null==o)return[];P(i);let l=function(e){if(e.length<2)return 1/0;let t=0,i=e[0].translationY;for(let a=1;a<e.length;a++){let s=e[a].translationY;t=Math.max(t,Math.abs(s-i)),i=s}return t}(s),{width:h,height:d}=function(e,t,i,a,s,r,n){let o={domain:a,ticks:s,fractionDigits:0,specifier:nL(t.format,r)??("string"==typeof t.format?t.format:void 0)},l=e.tickFormatter(o),h=r?rZ(r):void 0,d=nL(i?.format,h),u=d?e.tickFormatter({...o,specifier:d}):l,c=new Date(a[0]),p=new Date(a[a.length-1]),g=h?.range(new Date(a[0]),new Date(a[a.length-1]),{extend:!0}),m=0,y=0;if(null!=l){let e,t;for(let i of(null!=g&&g.length>1?(e=g[0],t=g[1]):(e=c,t=p),rX(r,e,t,{limit:50}))){let e=l(i),{width:t,height:a}=n.measureLines(e);m=Math.max(m,t),y=Math.max(y,a)}}if(null!=u&&null!=g)for(let e of g){let t=u(e),{width:i,height:a}=n.measureLines(t);m=Math.max(m,i),y=Math.max(y,a)}return{width:Math.ceil(m),height:Math.ceil(y)}}(u,c,p,a??e,r,o,E);return function({width:e,height:t,spacing:i},a,s){let r=[];for(let n of[0,i]){let{x:i,y:o}=s.transformBBox(new y(a,n,0,0));r.push({point:{x:i,y:o},label:{text:void 0,width:e,height:t}})}return r}({width:h,height:d,spacing:l},n,R)},G=(e,t)=>{var i,a;if(!j)return!1;let s=(i=c.minSpacing,a=0!==I||0!==t,null!=i?i:10*!a);return re(B(e,t),s)||re(F(e,t),s)},V={tickDomain:[],ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0,niceDomain:void 0},Y=0,U=0,_=!0,$=!1;for(;!$&&_&&Y<=C;){for(let s of(U=0,this.getTickStrategies({domain:e,niceMode:a,secondaryAxis:S,index:Y})))({tickData:V,index:Y,autoRotation:U,terminate:$}=s({index:Y,tickData:V,textProps:O,terminate:$,primaryTickCount:t,visibleRange:i,labelsOverlap:()=>G(V,U)}));_=G(V,U)}k=nI(f,I,U,o,A);let W=I+U;if(l&&V.ticks.length>2){let e=F(V,U),t=V.ticks.at(-1),a=e.at(-1);if(null!=t&&null!=a&&t.translationY+a.label.width/2>this.axis.range[1]+h){t.tickLabel=void 0;let e=V.ticks[0];0===e.translationY&&0===i[0]&&1===i[1]&&(e.tickLabel=void 0)}}return{tickData:V,rotation:W,textBaseline:N,textAlign:k}}getTickStrategies({domain:e,niceMode:t,index:i,secondaryAxis:a}){let s,{scale:r,label:n,interval:o}=this.axis,{minSpacing:l}=o,h=sc.is(r)||sQ.is(r),d=n.enabled&&n.avoidCollisions,u=!0===n.autoRotate&&void 0===n.rotation,c=[];return s=o.values?3:a?1:!h&&0!==i&&d?2:0,c.push(({index:i,tickData:a,primaryTickCount:r,visibleRange:n,terminate:o})=>this.createTickData(e,t,n,r,s,i,a,o)),h||null==l||c.push(({index:i,tickData:a,primaryTickCount:s,visibleRange:r,terminate:n})=>this.createTickData(e,t,r,s,2,i,a,n)),d&&u&&c.push(({index:e,tickData:t,labelsOverlap:i,terminate:a})=>({index:e,tickData:t,autoRotation:i()?ec(n.autoRotateAngle):0,terminate:a})),c}ticksEqual(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]?.valueOf()!==t[i]?.valueOf())return!1;return!0}createTickData(e,t,i,a,s,r,n,o){let{scale:l,interval:h}=this.axis,{step:d,values:u,minSpacing:c,maxSpacing:p}=h,{maxTickCount:g,minTickCount:m,tickCount:y}=this.estimateTickCount(i,c,p),f=sc.is(l)||sQ.is(l),b=!f||isNaN(g)?10:g,x=e=>f?Math.max(y-e,m):g,M=n.rawTicks,v=null==d&&null==u&&x(r)>m&&(f||2===s),S={domain:e,niceMode:t,visibleRange:i,primaryTickCount:a,tickGenerationType:s,previousTicks:M,minTickCount:m,maxTickCount:g,tickCount:0};if(S.tickCount=x(r),n=this.getTicks(S),v&&this.ticksEqual(n.rawTicks,M)){let e=r,t=b;for(;e<=t;)S.tickCount=x(r=(e+t)/2|0),n=this.getTicks(S),this.ticksEqual(n.rawTicks,M)?e=r+1:t=r-1}return r+=1,o||(o=null!=d||null!=u),{tickData:n,index:r,autoRotation:0,terminate:o}}getTimeIntervalTicks(e,t,i){let a,r=rZ(i);if(null==r)return;let{scale:n,reverse:o}=this.axis;if(!no.is(n)&&!sQ.is(n))return;o&&(e=[1-e[1],1-e[0]]);let l=Math.min(n.domain[0].valueOf(),n.domain[n.domain.length-1].valueOf()),h=Math.max(n.domain[0].valueOf(),n.domain[n.domain.length-1].valueOf()),[d,u]=sm.extent(new Date(l),new Date(h),e);(d=r.floor(d)).valueOf()>=l&&(d=r.previous(d)),(u=r.ceil(u)).valueOf()<=h&&(u=r.next(u));let c=r.range(d,u),p=rK(i),g=rQ.is(n)&&null!=n.interval&&rK(n.interval)<p,m=new Set;if(no.is(n)||rQ.is(n)){a=[];let e={...t,interval:i},r=!rQ.is(n)||g;for(let t=0;t<c.length-1;t+=1){let i=c[t],o=c[t+1],d=t===c.length-2,u=o.valueOf()-i.valueOf(),g=[Math.max((l-i.valueOf())/u,0),Math.min((h-i.valueOf())/u,1)],y=r?this.timeScaleTicks(e,[i,o],g,!0):n.ticks(e,[i,o],g,!0)?.ticks??[];if((0,s.nm)(y,e=>e.valueOf()<i.valueOf()),d||(0,s.xA)(y,e=>r?e.valueOf()+p>o.valueOf():e.valueOf()>=o.valueOf()),0===y.length)continue;let f=rq(y[0],i);(r?0===f:f<=p)&&m.add(a.length),a.push(...y)}}else if(nd.is(n)){a=n.ticks(t,void 0,e,!0)?.ticks??[];let i=0;for(let e=0;e<a.length;e++){let t=a[e],s=!1;for(;i<c.length&&0>=rq(c[i],t);)s=!0,i++;s&&m.add(e)}}else a=[];return(0===m.size||1===m.size&&m.has(0))&&(m=void 0),{ticks:a,tickCount:void 0,primaryTicksIndices:m,interpolate:g}}timeScaleTicks(e,t,i,a){let{interval:s}=e;if(null==s)return t;let r=t[0].valueOf(),n=t[1].valueOf();if("number"!=typeof s)return rW(s).every(1,{snapTo:t[0]}).range(t[0],t[1],{visibleRange:i,extend:a});let o=[];for(let e=r;e<=n;e+=s){let t=new Date(e);o.push(t)}return o}getTicks({domain:e,niceMode:t,visibleRange:i,tickGenerationType:a,previousTicks:r,tickCount:n,minTickCount:o,maxTickCount:l,primaryTickCount:h}){let d,u,c,p,g,{axis:m}=this,{label:y,primaryLabel:f,range:b,scale:x,interval:M}=m,v=nJ(),S={nice:0===t,interval:M.step,tickCount:n,minTickCount:o,maxTickCount:l},D={...S,nice:0===t||1===t};1===a&&null!=h&&sc.is(x)&&(d=function(e,t,i,a,r){let[n,o]=sh(t.map(Number)),l=Math.floor(i.unzoomed);if(l<=1){let[t,i]=function(e,t){let i=e,a=t,s=0;do{[i,a]=nr(i,a);let{ticks:e}=r9(i,a,5);if(e.length%2==1)return[i,a];i-=1,a+=1}while(s++<10);return[e,t]}(n,o),{ticks:s}=r9(t,i,5*Math.pow(2,-Math.ceil(Math.log2(r[1]-r[0]))),void 0,void 0,r),l=[e.toDomain(t),e.toDomain(i)];return a&&l.reverse(),{domain:l,ticks:s}}if(n===o){let e=Math.min(Math.pow(10,Math.floor(Math.log10(n))),1),t=l-1;n-=e*Math.floor(t/2),o=n+e*t}let h=n,d=o,u=function(e,t,i){var a=(t-e)/(i-1);let s=Math.pow(10,Math.floor(Math.log10(a))),r=a/s;return r>0&&r<=1?s:r>1&&r<=2?2*s:r>2&&r<=5?5*s:r>5&&r<=10?10*s:a}(h=function(e,t,i){let a=Math.pow(10,Math.floor(Math.log10(Math.abs(t-(e=Math.floor(e)))/(i-1))));return Math.floor(e/a)*a}(h,d,l),d,l);d=h+(l-1)*u;let c=Math.floor(h/u)*u,p=Math.floor(d/u)*u;c<=n&&p>=o&&(h=c,d=p);let g=[e.toDomain(h),e.toDomain(d)];return a&&g.reverse(),{domain:g,ticks:function(e,t,i){let a=Math.pow(10,(0,s.o3)(t)),r=[];for(let s=0;s<i;s++){let i=e+t*s;r.push(Math.round(i*a)/a)}return r}(h,u*((i.unzoomed-1)/(i.zoomed-1)),Math.floor(i.zoomed))}}(x,e,h,m.reverse,i));let I=0===t?d?.domain??x.niceDomain(S,e):e,L=I,A=!1,w=x.domain;switch(x.domain=I,a){case 3:if(L=M.values,c=(u=M.values).length,A=rQ.is(x),sc.is(x)){let[e,t]=sh(I.map(Number));u=u.filter(i=>Number(i)>=e&&Number(i)<=t).sort((e,t)=>Number(e)-Number(t))}break;case 1:if(d)u=d.ticks,c=d.ticks.length;else{let e=x.ticks(D,I,i);u=e?.ticks??[],c=e?.count}break;case 2:u=this.filterTicks(r,n),c=void 0;break;default:{I.length>0&&null==D.interval&&(rQ.is(x)||null!=f&&(no.is(x)||nd.is(x)))&&(p=r7(Math.min(I[0].valueOf(),I[I.length-1].valueOf()),Math.max(I[0].valueOf(),I[I.length-1].valueOf()),n,o,l,{weekStart:null==f?sw:void 0,primaryOnly:rQ.is(x)}));let e=rQ.is(x)?x.interval:void 0;null!=e&&null!=p&&rK(e)>rK(p)&&(p=e);let t=p?this.getTimeIntervalTicks(i,D,p):void 0;if(t)({ticks:u,tickCount:c,primaryTicksIndices:g,interpolate:A}=t);else{let e=rQ.is(x)&&null!=p?{...D,interval:D.interval??p}:D,t=x.ticks(e,I,i);u=t?.ticks??[],c=t?.count}}}let C=u.reduce((e,t)=>Math.max(e,"number"==typeof t?(0,s.o3)(t):0),0),k={domain:L,ticks:u,fractionDigits:C,specifier:nL(y.format,p)??("string"==typeof y.format?y.format:void 0)},N=x.tickFormatter(k),T=nL(f?.format,p?rZ(p):void 0),E=T?x.tickFormatter({...k,specifier:T}):N,O=(x.bandwidth??0)/2,j=[];for(let e=0;e<u.length;e++){let t=u[e],i=x.convert(t,{interpolate:A})+O,a=g?.has(e)??!1;if(b.length>0&&!m.inRange(i,.001))continue;let s=a&&f?.enabled===!0?E:N,r=y.enabled?m.formatTick(t,e,I,C,p,s):"";j.push({tick:t,tickId:v(r),tickLabel:r,translationY:Math.floor(i),primary:a})}return x.domain=w,{tickDomain:L,rawTicks:u,rawTickCount:c,fractionDigits:C,timeInterval:p,ticks:j,niceDomain:I}}},n1=class extends nC{constructor(){super(...arguments),this.autoRotateAngle=335}};l([ew],n1.prototype,"autoRotate",2),l([ew],n1.prototype,"autoRotateAngle",2);var n2=class e extends nq{constructor(e,t){let i;super(e,t),this.headingLabelGroup=this.axisGroup.appendChild(new tg({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new tg({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new rP({zIndex:1})),this.tickLineGroupSelection=rR.select(this.tickLineGroup,rP,!1),this.gridLineGroupSelection=rR.select(this.gridLineGroup,rP,!1),this.tempText=new ih({debugDirty:!1}),this.tempCaption=new iu,this.tickGenerator=new n0(this),this.generatedTicks=void 0,this.animationManager=e.animationManager,this.animationState=new rU("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node),this.destroyFns.push(e.layoutManager.addListener("layout:complete",e=>{let t=[e.chart.width,e.chart.height];null==i||(0,s.r1)(t,i)||this.animationState.transition("resize"),i=t}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof e}get primaryLabel(){}get primaryTick(){}get horizontal(){return"top"===this.position||"bottom"===this.position}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new n1}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(e,t){return this.updateDirection(),super.calculateLayout(e,t)}layoutCrossLines(){let e=this.isAnySeriesActive();this.crossLines.forEach(t=>{t.calculateLayout?.(e,this.reverse)})}calculateTickLayout(e,t,i,a){let s=this.label.getSideFlag(),r=this.horizontal?-.5*Math.PI:0,n=ea(r),o=ea(r-Math.PI/2),l=s*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(2===t&&!1===this.label.enabled&&!1===this.tick.enabled&&!1===this.gridLine.enabled){let{bbox:t,spacing:i}=this.tickBBox(e,[],[]);return this.generatedTicks={ticks:[],tickLines:[],gridLines:[],labels:[],spacing:i},{ticks:[],rawTickCount:0,tickDomain:e,niceDomain:e,fractionDigits:0,timeInterval:void 0,bbox:t}}let h=this.horizontal&&sc.is(this.scale),d=this.tickGenerator.generateTicks({domain:e,niceMode:t,visibleRange:i,primaryTickCount:a,parallelFlipRotation:n,regularFlipRotation:o,labelX:l,sideFlag:s,removeOverflowLabels:h,removeOverflowThreshold:this.chartPadding?.right}),{tickData:u}=d,{ticks:c,tickDomain:p,rawTicks:g,rawTickCount:m,fractionDigits:y,timeInterval:f,niceDomain:b=e}=u,x=c.map(e=>this.getTickLabelProps(e,d)),{position:M,horizontal:v,gridPadding:S,gridLength:D}=this,I="bottom"===M||"right"===M?-1:1,L=I*D-S,{gridLine:A}=this,w=c.map(({tickId:e,translationY:t},i)=>{let[a,s,r,n]=v?[t,S,t,L]:[S,t,L,t],{style:o,width:l}=A,{stroke:h,lineDash:d}=o[i%o.length]??{};return{tickId:e,offset:t,x1:a,y1:s,x2:r,y2:n,stroke:h,strokeWidth:l,lineDash:d}}),{tick:C,primaryTick:k}=this,N=c.map(({primary:e,tickId:t,translationY:i})=>{let a=e&&k?.enabled?k:C,s=-I*this.getTickSize(a),[r,n,o,l]=v?[i,0,i,s]:[0,i,s,i],{stroke:h,width:d}=a;return{tickId:t,offset:i,x1:r,y1:n,x2:o,y2:l,stroke:h,strokeWidth:d,lineDash:void 0}}),{bbox:T,spacing:E}=this.tickBBox(p,c,x);return this.generatedTicks={ticks:c,gridLines:w,tickLines:N,labels:x,spacing:E},{ticks:g,rawTickCount:m,tickDomain:p,niceDomain:b,fractionDigits:y,timeInterval:f,bbox:T}}update(){this.updateDirection();let e=Array.from(this.tickLabelGroupSelection.nodes(),e=>e.datum.tickId);super.update(),this.tickLineGroup.visible=this.tick.enabled||(this.primaryTick?.enabled??!1),this.tickLabelGroup.visible=this.label.enabled||(this.primaryTick?.enabled??!1);let{generatedTicks:t}=this;if(this.updateTitle(this.scale.domain,t?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),this.generatedTicks){let{ticks:t}=this.generatedTicks;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{let i=t.map(e=>e.tickId),a=(0,s.E3)(e,i);this.animationState.transition("update",a)}}let{enabled:i,stroke:a,width:r}=this.line;this.lineNode.setProperties({stroke:a,strokeWidth:i?r:0}),this.updateTickLines(),this.updateGridLines()}getAxisTransform(){return{translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){super.updatePosition();let e=this.getAxisTransform();this.tickLineGroup.datum=e,this.tickLabelGroup.datum=e,this.lineNodeGroup.datum=e,this.headingLabelGroup.datum=e}getAxisLineCoordinates(){let{horizontal:e}=this,[t,i]=sh(this.range);return e?{x1:t,x2:i,y1:0,y2:0}:{x1:0,x2:0,y1:t,y2:i}}getTickLineBBox(e){let{position:t,primaryTick:i}=this,a=Math.max(this.getTickSize(),i?.enabled?this.getTickSize(i):0),{translationY:s}=e;switch(t){case"top":return new y(s,-a,s,a);case"bottom":return new y(s,0,s,a);case"left":return new y(-a,s,a,s);case"right":return new y(0,s,a,s)}}lineNodeBBox(){let{position:e,seriesAreaPadding:t}=this,{y1:i,y2:a}=this.getAxisLineCoordinates(),s=a-i;switch(e){case"top":return new y(i,-t,s,t);case"bottom":return new y(i,0,s,t);case"left":return new y(-t,i,t,s);case"right":return new y(0,i,t,s)}}titleBBox(e,t){let{tempCaption:i}=this;return i.node.setProperties(this.titleProps(i,e,t)),i.node.getBBox()}tickBBox(e,t,i){let{tick:a,primaryTick:r,label:n,primaryLabel:o,title:l,position:h,horizontal:d,seriesAreaPadding:u}=this,c=[];if(c.push(this.lineNodeBBox()),a.enabled||r?.enabled)for(let e of t)c.push(this.getTickLineBBox(e));let{tempText:p}=this;if(n.enabled)for(let e of i){if(!e.visible)continue;p.setProperties(e);let t=p.getBBox();t&&c.push(t)}if(o?.enabled&&null!=o.format&&"bottom"===h){let{fontSize:e,format:t}=o,i=((0,s.Qd)(t)?Object.values(t):[t]).reduce((e,t)=>Math.max(e,(0,s.lt)(t)),0),n=this.getTickSize(r??a)+o.spacing+u,l=i*ia.getLineHeight(e)+2;c.push(new y(0,n,1,l))}let g=0;if(l.enabled){let t=y.merge(c);g=d?t.height:t.width,c.push(this.titleBBox(e,g))}return{bbox:y.merge(c),spacing:g}}titleProps(e,t,i){let a,s,r,n,{title:o}=this;if(!o.enabled)return e.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};e.enabled=!0,e.color=o.color,e.fontFamily=o.fontFamily,e.fontSize=o.fontSize,e.fontStyle=o.fontStyle,e.fontWeight=o.fontWeight,e.wrapping=o.wrapping;let l=(o.spacing??0)+i,{range:h}=this,d=(h[0]+h[1])/2;switch(this.position){case"top":a=d,s=-l,r=0,n="bottom";break;case"bottom":a=d,s=l,r=0,n="top";break;case"left":a=-l,s=d,r=-.5*Math.PI,n="bottom";break;case"right":a=l,s=d,r=.5*Math.PI,n="bottom"}let{formatter:u=e=>e.defaultValue}=o,c=this.callWithContext(u,this.getTitleFormatterParams(t));return e.text=c,{visible:!0,text:c,textBaseline:n,x:a,y:s,rotationCenterX:a,rotationCenterY:s,rotation:r}}getTickLabelProps(e,t){let{horizontal:i,primaryLabel:a,primaryTick:s,seriesAreaPadding:r,scale:n}=this,{tickId:o,tickLabel:l="",translationY:h,primary:d}=e,u=d&&a?.enabled?a:this.label,c=d&&s?.enabled?s:this.tick,{rotation:p,textBaseline:g,textAlign:m}=t,{range:y}=n,f=this.label.getSideFlag()*(this.getTickSize(c)+u.spacing+r),b=""!==l,x=i?h:f,M=i?-f:h;return{...this.getLabelStyles({value:l},void 0,u),tickId:o,rotation:p,text:l,textAlign:m,textBaseline:g,visible:b,x,y:M,rotationCenterX:x,rotationCenterY:M,range:y}}updateSelections(){if(!this.generatedTicks)return;let e=this.getAxisLineCoordinates(),{tickLines:t,gridLines:i,labels:a}=this.generatedTicks,s=e=>e.tickId;this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLine.enabled?i:[],void 0,s),this.tickLineGroupSelection.update(t,void 0,s),this.tickLabelGroupSelection.update(a,void 0,s)}updateGridLines(){this.gridLineGroupSelection.each((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash})}updateTickLines(){this.tickLineGroupSelection.each((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash})}updateTitle(e,t){let{caption:i}=this.title,a=this.titleProps(i,e,t);i.node.visible=a.visible,i.node.text=a.text,i.node.textBaseline=a.textBaseline,i.node.datum=a}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((e,t)=>{e.fill=t.fill,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=t.textAlign??"center"})}animateReadyUpdate(e){let{animationManager:t}=this.moduleCtx,i=nR(nO(this));rE(this.id,"axis-group",t,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],i.group),rE(this.id,"line",t,[this.lineNode],i.line),rE(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(e,t)=>t.tickId,e),rE(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,(e,t)=>t.tickId,e),rE(this.id,"title",t,[this.title.caption.node],i.label,(e,t)=>t.tickId,e)}resetSelectionNodes(){rz([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],nP()),rz([this.gridLineGroupSelection,this.tickLineGroupSelection],nB()),rz([this.tickLabelGroupSelection],nF()),rz([this.title.caption.node],nF()),rz([this.lineNode],nB())}};l([ew],n2.prototype,"thickness",2),l([ew],n2.prototype,"position",2);var n4=n2,n3=["top","right","bottom","left"],n5=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function n9(e){let{series:t}=e;return t?.[0]?.type??"line"}function n6(e){let t=n9(e);return rI.isCartesian(t)||"cartesian"===rM(t)?.find(e=>"cartesian"===e)}function n8(e){let t=n9(e);return rI.isPolar(t)||"polar"===rM(t)?.find(e=>"polar"===e)}function n7(e){let t=n9(e);return rI.isHierarchy(t)||"hierarchy"===rM(t)?.find(e=>"hierarchy"===e)}function oe(e){let t=n9(e);return rI.isTopology(t)||"topology"===rM(t)?.find(e=>"topology"===e)}function ot(e){let t=n9(e);return rI.isFlowProportion(t)||"flow-proportion"===rM(t)?.find(e=>"flow-proportion"===e)}function oi(e){let t=n9(e);return rI.isStandalone(t)||"standalone"===rM(t)?.find(e=>"standalone"===e)}function oa(e){let t=n9(e);return rI.isGauge(t)||"gauge"===rM(t)?.find(e=>"gauge"===e)}var os=class extends r${applyOptions(e){for(let t of this.moduleMap.values())t.module.optionsKey in e&&eN(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(let{module:e,moduleInstance:t}of this.moduleMap.values())"legend"===e.type&&(yield{legendType:e.identifier,legend:t})}},or="ag-charts-overlay",on="ag-charts-dark-overlay",oo=class extends eC{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return e.t(this.text??this.defaultMessageId)}getElement(e,t,i){if(this.content?.remove(),this.focusBox=i,this.renderer){let e=this.renderer();if(e instanceof HTMLElement)this.content=e;else{let t=(0,s.n)("div");t.innerHTML=e;let{firstElementChild:i}=t;i instanceof HTMLElement&&1===t.childElementCount?this.content=i:this.content=t}}else{let i=(0,s.n)("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});i.innerText=this.getText(t),this.content=i,e?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(e=()=>this.content?.remove(),t){if(this.content){if(t){let{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};l([ew],oo.prototype,"enabled",2),l([ew],oo.prototype,"text",2),l([ew],oo.prototype,"renderer",2);var ol=class extends eC{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new oo("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new oo("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new oo("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new oo("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(let t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==t.focusBox)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};l([ew],ol.prototype,"darkTheme",2),l([ew],ol.prototype,"loading",2),l([ew],ol.prototype,"noData",2),l([ew],ol.prototype,"noVisibleSeries",2),l([ew],ol.prototype,"unsupportedBrowser",2);var oh=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(oh||{}),od=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(od||{});function ou(e,t,i,a){if(e2(e))return{type:"gradient",gradient:e.gradient??t.gradient,colorStops:e.colorStops??t.colorStops,bounds:e.bounds??t.bounds,rotation:e.rotation??t.rotation,reverse:e.reverse??t.reverse};if(e3(e)){let t=e.pattern??i.pattern,a=e.strokeWidth;return"backward-slanted-lines"===t||"forward-slanted-lines"===t||"horizontal-lines"===t||"vertical-lines"===t?a??(a=i.strokeWidth):a??(a=0),{type:"pattern",pattern:t,width:e.width??e.height??i.width,height:e.height??e.width??i.height,path:e.path,padding:e.padding??i.padding,fill:e.fill??i.fill,fillOpacity:e.fillOpacity??i.fillOpacity,backgroundFill:e.backgroundFill??i.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??i.backgroundFillOpacity,stroke:e.stroke??i.stroke,strokeOpacity:e.strokeOpacity??i.strokeOpacity,strokeWidth:a,rotation:e.rotation??i.rotation,scale:e.scale??i.scale}}return e5(e)?{type:"image",url:e.url,width:e.width,height:e.height,backgroundFill:e.backgroundFill??a.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??a.backgroundFillOpacity,rotation:e.rotation??a.rotation,repeat:e.repeat??a.repeat,fit:e.fit??a.fit}:e}function oc(e,t,i,a){return e2(e?.fill)||e3(e?.fill)||e5(e?.fill)?{...e,fill:ou(e.fill,t,i,a)}:e}function op(e,t,i,a){null!=i&&e2(t)&&null!=t.bounds&&"item"!==t.bounds?e.fillBBox=i[t.bounds]:e.fillBBox=void 0,e.fillParams=a}function og(e,t,i,a,s){e.fill=i?.fill??t.fill,op(e,i?.fill??t.fill,a,s),e.fillOpacity=i?.fillOpacity??t.fillOpacity??1,e.stroke=i?.stroke??t.stroke,e.strokeOpacity=i?.strokeOpacity??t.strokeOpacity??1,e.strokeWidth=i?.strokeWidth??t.strokeWidth??0,e.lineDash=i?.lineDash??t.lineDash,e.lineDashOffset=i?.lineDashOffset??t.lineDashOffset??0}var om=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(om||{}),oy=class{constructor(e,t,i,a){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=a.id}preventDefault(){this.defaultPrevented=!0}},of=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},ob=class extends tV{constructor(e){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=oy,this.internalId=(0,s.sX)(this),this.contentGroup=new tg({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new tg({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new tg({name:`${this.internalId}-annotation`}),this.labelGroup=new tg({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new r$,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new iw,this._pickNodeCache=new ie;let{moduleCtx:t,pickModes:i,directionKeys:a={},directionNames:r={},canHaveAxes:n=!1,usesPlacedLabels:o=!1}=e;this.ctx=t,this.directionKeys=a,this.directionNames=r,this.canHaveAxes=n,this.usesPlacedLabels=o,this.highlightGroup=new tg({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new tu({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new tu({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem(e,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){let{internalId:i,type:a,visible:s}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:a,visible:s,seriesGrouping:t}),this.fireEvent(new of(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),i?.appendChild(this.annotationGroup)}detachSeries(e,t,i){e?.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),i?.removeChild(this.annotationGroup)}setSeriesIndex(e){return e!==this._declarationOrder&&(this._declarationOrder=e,this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e,!0)}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}removeEventListener(e,t){return super.removeEventListener(e,t)}hasEventListener(e){return super.hasEventListener(e)}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}updatedDomains(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){let i=this.resolveKeyDirection(e),a=t?.[i],s=[];if(!a)return s;let r=(...e)=>{for(let t of e)Array.isArray(t)?r(...t):"object"==typeof t?r(...Object.values(t)):s.push(t)};return r(...a.map(e=>this.properties[e])),s}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){let t=this.getSeriesDomain(e),i=this.moduleMap.mapModules(t=>t.getDomain(e)).flat();return 0!==i.length?t.concat(i):t}getRange(e,t){return this.getSeriesRange(e,t)}getVisibleItems(e,t,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){let{dimOpacity:e=1,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||1===e)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return e}}getStrokeWidth(e){let{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===t)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){let e=this.ctx.highlightManager?.getActiveHighlight()?.series;return null==e?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNodes(e,t,i=!1){let{pickModes:a,pickModeAxis:s,visible:r,contentGroup:n}=this;if(!r||!n.visible||"highlight"===t&&!this.properties.highlight.enabled||"highlight-tooltip"===t&&!this.properties.highlight.enabled)return;let o=1/0;if("tooltip"===t||"highlight-tooltip"===t){let{tooltip:e}=this.properties;o="number"==typeof e.range?e.range:1/0,i||(i="exact"===e.range)}else if("event"===t||"context-menu"===t){let{nodeClickRange:e}=this.properties;o="number"==typeof e?e:1/0,i||(i="exact"===e)}let l=a.filter(e=>!i||0===e),{x:h,y:d}=e,u=JSON.stringify({x:h,y:d,maxDistance:o,selectedPickModes:l});if(this._pickNodeCache.has(u))return this._pickNodeCache.get(u);for(let t of l){let i;switch(t){case 0:{let t=this.pickNodesExactShape(e);i=0===t.length?void 0:{datums:t,distance:0};break}case 1:{let t=this.pickNodeClosestDatum(e),a=t?.distance===0?this.pickNodesExactShape(e):void 0;i=null!=a&&0!==a.length?{datums:a,distance:0}:t?{datums:[t.datum],distance:t.distance}:void 0;break}case 2:{let t=null!=s?this.pickNodeMainAxisFirst(e,"main-category"===s):void 0;i=null!=t?{datums:[t.datum],distance:t.distance}:void 0}}if(i&&i.distance<=o)return this._pickNodeCache.set(u,{pickMode:t,datums:i.datums,distance:i.distance})}return this._pickNodeCache.set(u,void 0)}pickNodesExactShape(e){let t=[];for(let i of this.contentGroup.pickNodes(e.x,e.y)){let e=i.closestDatum();null!=e&&!0!==e.missing&&t.push(e)}return t}pickNodeClosestDatum(e){throw Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){let i=g(e.x,e.y,t),a=i.nearest?.closestDatum();if(null!=a&&!0!==a.missing)return{datum:a,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireNodeClickEvent(e,t){let i=new this.NodeEvent("seriesNodeClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(e,t){let i=new this.NodeEvent("seriesNodeDoubleClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){let{visible:i=!0,itemId:a,legendItemName:s}=t??{};this.toggleSeriesItem(i,e,a,s)}onLegendItemClick(e){let{enabled:t,itemId:i,series:a,legendType:s}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,n="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,o=void 0!=r&&r===e.legendItemName;(a.id===this.id||o||void 0!=n)&&this.toggleSeriesItem(t,s,i,r,e)}onLegendItemDoubleClick(e){let{enabled:t,itemId:i,series:a,numVisibleItems:s,legendType:r}=e,n="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=void 0!=n&&n===e.legendItemName;a.id===this.id||l||void 0!=o?this.toggleSeriesItem(!0,r,i,n,e):t&&1===s?this.toggleSeriesItem(!0,r,void 0,n):this.toggleSeriesItem(!1,r,void 0,n)}toggleSeriesItem(e,t,i,a,s){let r=this.id;(e||"category"!==t)&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();let n={type:"seriesVisibilityChange",seriesId:r,itemId:i,legendItemName:s?.legendItemName??a,visible:e};this.fireEvent(n),this.ctx.legendManager.toggleItem(e,r,i,a)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(e,t,i=at){return e.formatter?this.cachedCallWithContext(e.formatter,{seriesId:this.id,...t})??this.callWithContext(i,t.value):this.callWithContext(i,t.value)}getMarkerStyle(e,t,i,a=!1,s=e.size??0,r){let{itemStyler:n,fillGradientDefaults:o,fillPatternDefaults:l,fillImageDefaults:h}=e,d=oc(z({size:s},r,e.getStyle()),o,l,h);return n&&i&&(d=oc(z(this.cachedCallWithContext(n,{seriesId:this.id,...d,...i,highlighted:a,datum:t}),d),o,l,h)),d}updateMarkerStyle(e,t,i,a,s,r,n,o,{applyTranslation:l=!0,selected:h=!0}={}){let d=this.getMarkerStyle(e,i,s,r,a?.size,n),{shape:u,size:c}=d,p=this.visible&&c>0&&a&&!isNaN(a.x)&&!isNaN(a.y);if(og(t,d,void 0,o),l?t.setProperties({visible:p,shape:u,size:c,x:a?.x,y:a?.y,scalingCenterX:a?.x,scalingCenterY:a?.y}):t.setProperties({visible:p,shape:u,size:c}),h||(t.fillOpacity*=.25,t.strokeOpacity*=.125),"function"==typeof e.shape&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();let e=t.getBBox();if(void 0!==a&&e.isFinite()){let t=e.computeCenter(),[i,s]=["x","y"].map(e=>(d.strokeWidth??0)+Math.abs(t[e]-a[e]));a.focusSize=Math.max(e.width+i,e.height+s)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){let{width:t,height:i}=e??{width:NaN,height:NaN},a=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,s=null!=tS(this.nodeDataDependencies,a);return s&&(this._nodeDataDependencies=a,this.markNodeDataDirty()),s}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){let{datumCallbackCache:i}=this,a=i.get(e);if(null!=a)return a;try{let a=t();return i.set(e,a),a}catch(e){s.Vy.error(String(e))}}cachedCallWithContext(e,...t){return this.ctx.callbackCache.call(this.properties,this.ctx.chartService,e,...t)}callWithContext(e,...t){return aw(this.properties,this.ctx.chartService,e,t)}formatTooltipWithContext(e,t,i){return e.formatTooltip(this.properties,this.ctx.chartService,t,i)}};l([tW({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],ob.prototype,"seriesGrouping",2);var ox=class extends e8{constructor(){super(...arguments),this.path=new eX,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}onChangeDetection(e){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(e))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return(this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t))?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(e){return e.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=e.devicePixelRatio,this.updatePathIfDirty(),super.preRender(e,this.path.commands.length)}render(e){let{ctx:t}=e;if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(t);else{t.save();let e=this.strokeWidth/2;this._clipPath??(this._clipPath=new eX),this._clipPath.clear(),this._clipPath.rect(-e,-e,this._clipX+e,this._clipY+e+e),t.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t),t.restore()}this.fillShadow?.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;let e=(0,s.FJ)("path");e.setAttribute("d",this.svgPathData());let t=this.applySvgFillAttributes(e,[]);return this.applySvgStrokeAttributes(e),{elements:[e],defs:t}}};ox.className="Path",l([Z()],ox.prototype,"clip",2),l([Z()],ox.prototype,"clipX",1),l([Z()],ox.prototype,"clipY",1);var oM=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=(0,s.n)("div"),this.svg=(0,s.FJ)("svg"),this.outerPath=(0,s.FJ)("path"),this.innerPath=(0,s.FJ)("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=(0,s.n)("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",e=>this.onSwap(e))}clear(){}update(e,t,i){if(null!=t)if(e instanceof ox){let i=e.svgPathData((i,a)=>{let{x:s,y:r}=to.toCanvasPoint(e,i,a);return{x:s-=t.x??0,y:r-=t.y??0}});this.outerPath.setAttribute("d",i),this.innerPath.setAttribute("d",i),this.show(this.svg)}else{let a;if(i){let i=Math.max(e.x-t.x,0),s=Math.max(e.y-t.y,0);a=new y(i,s,Math.min(e.x+e.width-t.x,t.width)-i,Math.min(e.y+e.height-t.y,t.height)-s)}else a=new y(e.x-t.x,e.y-t.y,e.width,e.height);ty(this.div,a),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;let t=this.element.parentElement;t?.style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${e}`])}isFocusVisible(e=!1){if(!e&&!this.hasBeenActivated)return!1;let t=this.element.parentElement;return null!=t&&"1"===(0,s.zk)().getComputedStyle(t).opacity}},ov=class{constructor(e,t,i){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=e=>((0,s.EM)(e.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",e)),this.onFocus=e=>((0,s.EM)(e.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",e)),(0,s.Bq)(this.label1,"id",(0,s.wW)()),(0,s.Bq)(this.label2,"id",(0,s.wW)()),(0,s.EM)(this.label1,"display","none"),(0,s.EM)(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),(0,s.Bq)(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(e){let t=(0,s.n)("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(let e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),"swap"===e&&t(this.activeAnnouncer)}dispatch(e,t){"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),this.listeners[e].forEach(e=>e(t))}swap(e){let t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],(0,s.Wp)(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),(0,s.Wp)(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},oS={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function oD(){return(e,t)=>{let i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");s.Vy.warnOnce(i)}}function oI(e,t){let i=oD(),a=t?.default;return C((t,s,r)=>(r!==a&&i(s.toString(),e),r))}function oL(e,t){let i=oD();return C((a,s,r)=>(r!==a[e]&&(i(s.toString(),`Use [${e}] instead.`),Y(a,e,t?t(r):r)),I),(t,a)=>(i(a.toString(),`Use [${e}] instead.`),G(t,e)))}function oA(e,t,i,a){let{top:s,right:r,bottom:n,left:o,width:l,height:h}=a;return null!=o?null!=l?r=i.width-o+l:null!=r&&(l=i.width-o-r):null!=r&&null!=l&&(o=i.width-r-l),null!=s?null!=h?n=i.height-s-h:null!=n&&(h=i.height-n-s):null!=n&&null!=h&&(s=i.height-n-h),null==l?null==h?(l=e,h=t):l=Math.ceil(e*h/t):null==h&&(h=Math.ceil(t*l/e)),null==o&&(o=null==r?Math.floor((i.width-l)/2):i.width-r-l),null==s&&(s=null==n?Math.floor((i.height-h)/2):i.height-h-n),{x:o,y:s,width:l,height:h}}var ow=class extends iw{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),null==this.animationFrameHandle&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;let{x1:e,y1:t,t0:i}=this,a=Date.now();this.t0=a;let s=0|Math.ceil((a-i)/1),{x:r,y:n,vx:o,vy:l}=this;for(let i=0;i<s;i+=1){let i=-(200*(r-e)+12*o)/.1,a=-(200*(n-t)+12*l)/.1;o+=.001*i,l+=.001*a,r+=.001*o,n+=.001*l}.5>Math.hypot(r-e,n-t)?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=r,this.y=n,this.vx=o,this.vy=l,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},oC=null;function ok(e){return""===e?"":(oC??(oC=(0,s.n)("div")),oC.textContent=String(e),oC.innerHTML.replace(/\n/g,"<br>"))}function oN(e,t){let{path:i,size:a}=e,{x:s,y:r}=e;i.clear();let n=!1;for(let[e,o]of t){let t=s+(e-.5)*a,l=r+(o-.5)*a;n?i.lineTo(t,l):i.moveTo(t,l),n=!0}i.closePath()}var oT={circle({path:e,x:t,y:i,size:a}){e.arc(t,i,a/2,0,2*Math.PI),e.closePath()},cross(e){oN(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){oN(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:e,x:t,y:i,size:a}){let s=a/4;i+=s/2,e.arc(t-s,i-s,s,eo(130),eo(330)),e.arc(t+s,i-s,s,eo(220),eo(50)),e.lineTo(t,i+s),e.closePath()},pin({path:e,x:t,y:i,size:a}){e.moveTo(t+-.34375*a,i+-.15625*a),e.cubicCurveTo(t+-.34375*a,i+-.348509*a,t+-.192259*a,i+-.5*a,t+0*a,i+-.5*a),e.cubicCurveTo(t+.19225899999999996*a,i+-.5*a,t+.34375*a,i+-.348509*a,t+.34375*a,i+-.15625*a),e.cubicCurveTo(t+.34375*a,i+-.006176000000000015*a,t+.284625*a,i+.10018099999999996*a,t+.21646100000000001*a,i+.19539300000000004*a),e.cubicCurveTo(t+.199009*a,i+.219769*a,t+.18127099999999996*a,i+.243104*a,t+.16378499999999996*a,i+.26610500000000004*a),e.cubicCurveTo(t+.11189300000000002*a,i+.33436699999999997*a,t+.06222799999999995*a,i+.399699*a,t+.028896000000000033*a,i+.48064799999999996*a),e.cubicCurveTo(t+.024074999999999958*a,i+.49235799999999996*a,t+.01266299999999998*a,i+.5*a,t+0*a,i+.5*a),e.cubicCurveTo(t+-.01266299999999998*a,i+.5*a,t+-.024075000000000013*a,i+.49235799999999996*a,t+-.028895999999999977*a,i+.48064799999999996*a),e.cubicCurveTo(t+-.01266299999999998*a,i+.5*a,t+-.024075000000000013*a,i+.49235799999999996*a,t+-.028895999999999977*a,i+.48064799999999996*a),e.cubicCurveTo(t+-.062228000000000006*a,i+.399699*a,t+-.11189300000000002*a,i+.33436699999999997*a,t+-.16378500000000001*a,i+.26610500000000004*a),e.cubicCurveTo(t+-.18127100000000002*a,i+.243104*a,t+-.199009*a,i+.219769*a,t+-.21646100000000001*a,i+.19539300000000004*a),e.cubicCurveTo(t+-.284625*a,i+.10018099999999996*a,t+-.34375*a,i+-.006176000000000015*a,t+-.34375*a,i+-.15625*a),e.closePath()},plus(e){oN(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:e,x:t,y:i,size:a,pixelRatio:s}){let r=a/2;e.moveTo(eQ(s,t-r),eQ(s,i-r)),e.lineTo(eQ(s,t+r),eQ(s,i-r)),e.lineTo(eQ(s,t+r),eQ(s,i+r)),e.lineTo(eQ(s,t-r),eQ(s,i+r)),e.closePath()},star({path:e,x:t,y:i,size:a}){let s=a/2,r=s/2,n=Math.PI/2;for(let a=0;a<10;a++){let o=a%2==0?s:r,l=a*Math.PI/5-n,h=t+Math.cos(l)*o,d=i+Math.sin(l)*o;e.lineTo(h,d)}e.closePath()},triangle(e){oN(e,[[.5,0],[1,.87],[0,.87]])}},oE=class extends ox{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}updatePath(){let{path:e,shape:t,x:i,y:a,size:s}=this,r=this.layerManager?.canvas?.pixelRatio??1,n=oO.anchor(t),o={path:e,x:i-(n.x-.5)*s,y:a-(n.y-.5)*s,size:s,pixelRatio:r};e.clear(),"string"==typeof t?oT[t](o):"function"==typeof t&&t(o)}computeBBox(){let{x:e,y:t,size:i}=this,a=oO.anchor(this.shape);return new y(e-i*a.x,t-i*a.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};l([Z({equals:H})],oE.prototype,"shape",2),l([Z()],oE.prototype,"x",2),l([Z()],oE.prototype,"y",2),l([Z({convertor:Math.abs})],oE.prototype,"size",2);var oO=class extends ts(tr(tn(oE))){static anchor(e){return"pin"===e?{x:.5,y:1}:"function"==typeof e&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),e?.shape!=null&&(this.shape=e.shape)}};function oj(e,t,i=5/3*t){let a=new tu,s=Math.min(e.marker.strokeWidth??1,2),r=Math.min(e.line?.strokeWidth??0,2),n=Math.max(!1===e.marker.enabled?0:t,null==e.line?0:i),o=Math.max(!1===e.marker.enabled?0:t,r);if(null!=e.line){let{stroke:t,strokeOpacity:i,lineDash:s}=e.line,l=new rP;l.x1=0,l.y1=o/2,l.x2=n,l.y2=o/2,l.stroke=t,l.strokeOpacity=i,l.strokeWidth=r,l.lineDash=s,a.append(l)}if(!1!==e.marker.enabled){let{shape:i,fill:r,fillOpacity:l,stroke:h,strokeOpacity:d,lineDash:u,lineDashOffset:c}=e.marker,p=new oO;p.shape=i??"square",p.size=t,p.fill=r,p.fillOpacity=l??1,p.stroke=h,p.strokeOpacity=d??1,p.strokeWidth=s,p.lineDash=u,p.lineDashOffset=c??0;let g=oO.anchor(i),m=n/2+(g.x-.5)*t,y=o/2+(g.y-.5)*t,f=t/(t+s);p.x=m,p.y=y,p.scalingCenterX=m,p.scalingCenterY=y,p.scalingX=f,p.scalingY=f,a.append(p)}return tu.toSVG(a,n,o)}var oz="ag-charts-tooltip",oR="ag-charts-tooltip--dark";function oP(e){let t=[],i=new Map;for(let a of e)if("structured"===a.type){let{heading:e}=a,s=null!=e?i.get(e):void 0,r={type:"structured",heading:e,items:[a]};null==s?(i.set(e,r),t.push(r)):s.items.push(a)}else t.push(a);return t}function oF(e){let t=oP(e),i=[];return t.forEach(e=>{if("raw"===e.type)return"";null!=e.heading&&i.push(e.heading),e.items.forEach(e=>{null!=e.title&&i.push(e.title),e.data?.forEach(e=>{i.push(e.label??e.fallbackLabel,e.value)})})}),i.join("; ")}function oB(e,t,i){let a="";null==e?a+=`<span class="${oz}-label">${ok(t)}</span>`:a+=`<span class="${oz}-label">${ok(e)}</span> <span class="${oz}-value">${ok(t)}</span>`;let s=[`${oz}-row`];return i&&s.push(`${oz}-row--inline`),a=`<div class="${s.join(" ")}">${a}</div>`}function oG(e,t){if(null==e||1===t.length)return;let i=e?.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return`<div class="${oz}-footer">${i}</div>`}function oV(e,t,i,a){let s,r,n,o=1===t.items.length?t.items[0]:void 0;switch(i){case"compact":s=!0,r=o?.title;break;case"single":s=null!=o&&(null==t.heading||null==o.title)&&o.data?.length===1&&null==o.data[0].label&&null!=o.data[0].value,n=t.heading??o?.title;break;case"shared":s=!1}let l="";if(s&&null!=o?(null!=r&&(l+=oB(void 0,r,!1)),o.data?.forEach(e=>{l+=oB(e.label??n,e.value,!1),l+=" "})):(null!=t.heading&&(l+=`<span class="${oz}-heading">${ok(t.heading)}</span>`,l+=" "),t.items.forEach(e=>{l+=function(e){let t="";if(e.data?.length&&e.data.every(e=>null==e.value||""===e.value))return t;let i=null==e.title&&e.data?.length===1,a=null==e.symbol?void 0:oj(e.symbol,12);return null!=a&&(null!=e.title||e.data?.length)&&(t+=`<span class="${oz}-symbol">${a}</span>`),null!=e.title&&(t+=`<span class="${oz}-title">${ok(e.title)}</span>`,t+=" "),e.data?.forEach(e=>{t+=oB(e.label??e.fallbackLabel,e.value,i),t+=" "}),t}(e)})),0===l.length)return;let h="compact"!==i&&null!=a?oG(e,a):void 0;return h+null&&(l+=h),l=`<div class="${oz}-content">${l.trimEnd()}</div>`}function oY(e,t,i,a){let s=oP(t);if(0!==s.length)if(1===s.length&&"structured"===s[0].type)return oV(e,s[0],i,a);else{let t=s.map(t=>"structured"===t.type?oV(e,t,i):t.rawHtmlString);return null!=a&&t.push(function(e,t){let i=null==t?void 0:oG(e,t);return null==i?"":`<div class="${oz}-content">${i}</div>`}(e,a)??""),t.join("")}}var oU={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},o_={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},o$={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},oW={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},oH=class extends eC{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}get defaultAnchorTo(){let{type:e,_seriesOverrideType:t}=this,i=e??t??"pointer";return"node"===i||"pointer"===i?i:"chart"}get defaultPlacement(){let{type:e,_seriesOverrideType:t}=this,i=e??t??"pointer";return"node"===i||"pointer"===i?"top":i}};l([ew,oI("Use `anchorTo` and/or `placement` options instead.")],oH.prototype,"type",2),l([ew],oH.prototype,"_seriesOverrideType",2),l([ew],oH.prototype,"xOffset",2),l([ew],oH.prototype,"yOffset",2),l([ew],oH.prototype,"anchorTo",2),l([ew],oH.prototype,"placement",2);var oZ=class extends eC{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new oH,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new ow,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new iZ,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in(0,s.zk)().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",oz),this.element.setAttribute("popover","manual"),this.element.className=oz,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,e=>{this._elementSize=e,this.updateTooltipPosition()})),this.localeManager=e,()=>{t.removeChild("tooltip-container",oz),this.destroyFns.forEach(e=>e()),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){return this.element?.contains(e)??!1}updateTooltipPosition(){let e,t,{element:i,_elementSize:a,positionParams:r}=this;if(null==i||null==a||null==r)return;let{canvasRect:n,relativeRect:o,meta:l}=r,{x:h,y:d}=this.springAnimation,u=l.position?.placement??this.position.placement??l.position?.defaultPlacement??this.position.defaultPlacement;Array.isArray(u)||(u=[u]);let c=l.position?.anchorTo??this.position.anchorTo??l.position?.defaultAnchorTo??this.position.defaultAnchorTo,p=l.position?.xOffset??0,g=l.position?.yOffset??0,m=o.x,y=o.y,f=o.width-a.width-1+m,b=o.height-a.height+y,x=0,M=!1;do{e=u[x],x+=1;let i=this.getTooltipBounds({elementSize:a,placement:e,anchorTo:c,canvasX:h,canvasY:d,yOffset:g,xOffset:p,canvasRect:n});t=oA(a.width,a.height,o,i),M=!1,1&oW[e]&&(M||(M=t.x<m||t.x>f)),2&oW[e]&&(M||(M=t.y<y||t.y>b))}while(x<u.length&&M);let v=(0,s.qE)(m,t.x,f),S=(0,s.qE)(y,t.y,b);M||(M=v!==t.x||S!==t.y);let D="chart"!==c&&!M&&!p&&!g,I=l.showArrow??this.showArrow??D;this.arrowPosition=I?o$[e]:void 0,this.updateClassModifiers(),i.style.translate=`${v}px ${S}px`}show(e,t,i,a,s,r=!1){let{element:n}=this;if(null!=n&&null!=a&&0!==a.length){let e=oY(this.localeManager,a,this.mode,this.pagination?s:void 0);if(null==e)return void this.toggle(!1);n.innerHTML=e}else if(null==n||""===n.innerHTML)return void this.toggle(!1);let o={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};switch(this.positionParams={canvasRect:t,relativeRect:o,meta:i},i.position?.anchorTo??this.position.anchorTo??i.position?.defaultAnchorTo??this.position.defaultAnchorTo){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,n.style.pointerEvents="auto",n.removeAttribute("aria-hidden"),n.tabIndex=-1):(this.enableInteraction=!1,n.style.pointerEvents="none",n.setAttribute("aria-hidden","true"),n.removeAttribute("tabindex")),n.style.setProperty("--top",`${t.top}px`),n.style.setProperty("--left",`${t.left}px`),this.updateClassModifiers(),this.toggle(!0,r)}hide(){this.toggle(!1)}toggle(e,t=!1){let{delay:i}=this;e&&i>0&&!t?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){this.element?.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():this.springAnimation.reset())}updateClassModifiers(){if(!this.element?.isConnected)return;let{classList:e}=this.element,t=(t,i)=>e.toggle(`${oz}--${t}`,i);for(let i of(t("no-interaction",!this.enableInteraction),t("arrow-top",1===this.arrowPosition),t("arrow-right",3===this.arrowPosition),t("arrow-bottom",2===this.arrowPosition),t("arrow-left",0===this.arrowPosition),t("compact","compact"===this.mode),e.toggle(oR,this.darkTheme),this.wrapTypes))e.toggle(`${oz}--wrap-${i}`,i===this.wrapping)}getTooltipBounds(e){let{elementSize:t,anchorTo:i,placement:a,canvasX:s,canvasY:r,yOffset:n,xOffset:o,canvasRect:l}=e,{width:h,height:d}=t,u={width:h,height:d};if("node"===i||"pointer"===i){let e=oU[a],t=o_[a];return u.top=r+n+d*(t-1)/2+8*t,u.left=s+o+h*(e-1)/2+8*e,u}switch(a){case"top":u.top=n,u.left=l.width/2-h/2+o;break;case"right":u.top=l.height/2-d/2+n,u.left=l.width-h/2+o;break;case"left":u.top=l.height/2-d/2+n,u.left=o;break;case"bottom":u.top=l.height-d+n,u.left=l.width/2-h/2+o;break;case"top-left":u.top=n,u.left=o;break;case"top-right":u.top=n,u.left=l.width-h+o;break;case"bottom-right":u.top=l.height-d+n,u.left=l.width-h+o;break;case"bottom-left":u.top=l.height-d+n,u.left=o}return u}};function oK(e,t){return e.series===t.series&&O(e.datumIndex,t.datumIndex)}l([ew],oZ.prototype,"enabled",2),l([ew],oZ.prototype,"mode",2),l([ew],oZ.prototype,"showArrow",2),l([ew],oZ.prototype,"delay",2),l([ew],oZ.prototype,"range",2),l([ew],oZ.prototype,"wrapping",2),l([ew],oZ.prototype,"position",2),l([ew],oZ.prototype,"pagination",2),l([ew],oZ.prototype,"darkTheme",2),l([ew],oZ.prototype,"bounds",2);var oX=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=null!=t?e.findIndex(e=>oK(e,t)):-1;return -1===i&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){let{candidates:e,active:t}=this,i=null==t?-1:e.findIndex(e=>oK(e,t));if(-1===i)return;let a=i+1;return a>=e.length&&(a=0),this.active=e[a],{current:this.active,index:a,length:this.candidates.length}}},oQ=class extends iC{constructor(e){super(),this.chart=e,this.id=(0,s.sX)(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=tZ((e,t)=>(0,s.zk)().requestAnimationFrame(e),()=>{if(this.tooltip.lastHover||this.highlight.pendingHoverEvent){if(5>=this.chart.getUpdateType())return void this.hoverScheduler.schedule();this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new oX;let t=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new ov(t,i,"img"),this.swapChain.addListener("blur",e=>this.onBlur(e)),this.swapChain.addListener("focus",()=>this.onFocus()),"normal"===e.ctx.domManager.mode&&(this.focusIndicator=new oM(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==e.mode&&void 0));let{seriesDragInterpreter:a,seriesWidget:r,containerWidget:n}=e.ctx.widgets;r.setTabIndex(-1),this.destroyFns.push(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),r.addListener("focus",()=>this.swapChain.focus()),r.addListener("mousemove",e=>this.onHover(e)),r.addListener("wheel",e=>this.onWheel(e)),r.addListener("mouseleave",e=>this.onLeave(e)),r.addListener("keydown",e=>this.onKeyDown(e)),r.addListener("contextmenu",(e,t)=>this.onContextMenu(e,t)),a.addListener("drag-move",e=>this.onDragMove(e)),a.addListener("click",e=>this.onClick(e,r)),a.addListener("dblclick",e=>this.onClick(e,r)),n.addListener("contextmenu",(e,t)=>this.onContextMenu(e,t)),n.addListener("click",(e,t)=>this.onClick(e,t)),n.addListener("dblclick",(e,t)=>this.onClick(e,t)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.domManager.addListener("resize",()=>this.clearAll()),e.ctx.highlightManager.addListener("highlight-change",e=>this.changeHighlightDatum(e)),e.ctx.layoutManager.addListener("layout:complete",e=>this.layoutComplete(e)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),e.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}get bbox(){return(this.seriesRect??y.zero).clone()}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return!("touch"!==e.device||"click"===e.type||"hover"===this.chart.ctx.chartService.touch.dragAction||"drag"===this.chart.ctx.chartService.touch.dragAction&&this.isState(9))}dataChanged(){var e;(e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear(),this.clearHighlight()}preSceneRender(){null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&this.handleSeriesFocus(0,0,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((e,t)=>{let i=e.properties.focusPriority??1/0,a=t.properties.focusPriority??1/0;return(i===a&&([i,a]=[e._declarationOrder,t._declarationOrder]),i<a)?-1:+(i>a)}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.paddedRect),"normal"===this.chart.ctx.domManager.mode&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){let i,a,{sourceEvent:s}=e;if(s.currentTarget!=t.getElement())return;if(s.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){let{currentX:t,currentY:i}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:t,canvasY:i},void 0)}return}if(this.focusIndicator?.isFocusVisible())(i=this.chart.ctx.highlightManager.getActiveHighlight())&&this.seriesRect&&i.midPoint&&(a=to.toCanvasPoint(i.series.contentGroup,i.midPoint.x,i.midPoint.y));else if(this.isState(36)){let t=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");t&&(this.chart.ctx.highlightManager.updateHighlight(this.id),i=t.matches[0].datum)}let r=i?.series;this.clearAll();let n=e.currentX+t.cssLeft(),o=e.currentY+t.cssTop();r&&i?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:e,canvasX:n,canvasY:o},{pickedSeries:r,pickedNode:i},a):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:e,canvasX:n,canvasY:o},void 0,a)}onLeave(e){if(!this.isState(41))return;let t=e.sourceEvent.relatedTarget;t?.className!=="ag-charts-text-input__textarea"&&(this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),"keyboard"!==this.hoverDevice&&this.clearAll()))}onWheel(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e))}onHover(e){this.isState(41)&&this.onHoverLikeEvent(e)}onHoverLikeEvent(e){if(!this.isIgnoredTouch(e)&&(("touch"===e.device||"drag-move"!==e.type)&&(this.tooltip.lastHover=e),"touch"===e.device&&"hover"===this.chart.ctx.chartService.touch.dragAction&&e.sourceEvent.preventDefault(),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.isState(32))){let{currentX:t,currentY:i}=e,a=this.pickNodes({x:t,y:i},"event")?.matches,s=a?.[0];s?.series.hasEventListener("seriesNodeClick")||s?.series.hasEventListener("seriesNodeDoubleClick")||null!=a&&a.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(e,t){if(t===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),"touch"===e.device&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;if(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e),!this.isState(32))return;if(t==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(e)){this.update(5),e.sourceEvent.preventDefault();return}let i={type:"click"===e.type?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(i)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){this.isState(34)&&(this.hoverDevice="pointer",this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(e)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;let t=function(e){for(let[t,{activatesFocusIndicator:i=!0,bindings:a}]of(0,s.jO)(oS))if(function(e,t){for(let i of t)if("code"in i){if(i.code===e.code)return!0}else if(i.key===e.key&&(void 0===i.shift||i.shift===e.shiftKey)&&(void 0===i.ctrlOrMeta||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0;return!1}(e,a))return{name:t,activatesFocusIndicator:i}}(e.sourceEvent);switch(t?.activatesFocusIndicator===!1&&this.focusIndicator?.overrideFocusVisible("keyboard"===this.previousInputDevice),t?.name){case"redo":return this.chart.ctx.chartEventManager.seriesEvent("series-redo");case"undo":return this.chart.ctx.chartEventManager.seriesEvent("series-undo");case"zoomin":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(1,e);case"zoomout":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(-1,e);case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.chartEventManager.seriesEvent("series-focus-change"))}onSubmit(e){if(!this.isState(34))return;let{series:t,datum:i}=this.focus,a=e.sourceEvent;void 0!==t&&void 0!==i?t.fireNodeClickEvent(a,i):this.chart.fireEvent({type:"click",event:a}),a.preventDefault()}checkSeriesNodeClick(e){var t;let i=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(null==i||0===i.matches.length)return;let a=this.chart.tooltip.pagination?this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current)?.current:void 0,{series:s,datum:r}=a??i.matches[0],n=null==a?i.distance:0;if("click"===e.type){let i=s.fireNodeClickEvent(e.sourceEvent,r)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(null!=i){e.sourceEvent.preventDefault();let{currentX:a,currentY:s}=e,r=a+(this.hoverRect?.x??0),n=s+(this.hoverRect?.y??0);(t=this.highlight).pendingHoverEvent??(t.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(i.current,r,n,{index:i.index,length:i.length})}return!0}return"dblclick"===e.type&&(e.preventZoomDblClick=0===n,s.fireNodeDoubleClickEvent(e.sourceEvent,r),!0)}handleFocus(e,t){let i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?this.handleSeriesFocus(e,t):this.focusIndicator?.update(i.rect,this.seriesRect,!1)}handleSeriesFocus(e,t,i=!1){if("hierarchy"===this.chart.chartType||"gauge"===this.chart.chartType)return void this.handleSoloSeriesFocus(e,t,i);let{focus:a}=this,r=a.sortedSeries.filter(e=>e.visible&&e.focusable);if(0===r.length)return;let n=a.datumIndex-t,o=a.seriesIndex-e;a.seriesIndex=(0,s.qE)(0,a.seriesIndex,r.length-1),a.series=r[a.seriesIndex];let l=this.focus.datumIndex,h=this.focus.seriesIndex;this.updatePickedFocus(l,t,n,h,e,o,i)}handleSoloSeriesFocus(e,t,i){this.focus.series=this.focus.sortedSeries[0];let a=this.focus.datumIndex,s=this.focus.seriesIndex,r=this.focus.datumIndex-t,n=this.focus.seriesIndex-e;this.updatePickedFocus(a,t,r,s,e,n,i)}updatePickedFocus(e,t,i,a,s,r,n){let{focus:o,hoverRect:l,seriesRect:h}=this;if(void 0===o.series||void 0===l)return;let d=o?.series?.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:a,otherIndexDelta:s,seriesRect:h});if(!d)return;let{datum:u}=d;if(void 0!==d.otherIndex&&(o.seriesIndex=d.otherIndex),o.datumIndex=d.datumIndex,o.datum=u,this.focusIndicator?.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator?.isFocusVisible()){let e=function({bounds:e}){return e instanceof y?e:null!=e?to.toCanvas(e):y.NaN}(d),{x:t,y:i}=e.computeCenter();if(!l.containsPoint(t,i)&&this.chart.ctx.zoomManager.panToBBox(this.id,l,e))return;let{x1:a,x2:s,y1:r,y2:n}=sq.from(e),o=l.containsPoint(a,r),h=l.containsPoint(s,r),u=l.containsPoint(a,n),c=l.containsPoint(s,n);if(!(o||h||u||c)){let t=sq.from(l);d.movedBounds=e.clone(),a<t.x1&&s<t.x1?(d.movedBounds.x=t.x1-2,d.movedBounds.width=4):a>t.x2&&s>t.x2&&(d.movedBounds.x=t.x2-2,d.movedBounds.width=4),r<t.y1&&n<t.y1?(d.movedBounds.y=t.y1-2,d.movedBounds.height=4):r>t.y2&&n>t.y2&&(d.movedBounds.y=t.y2-2,d.movedBounds.height=4)}}this.focusIndicator?.update(d.movedBounds??d.bounds,this.seriesRect,d.clipFocusBox);let c=function(e,t,i){let{x:a,y:s}=function(e,t,i){let a=se(e,i.datum,i.movedBounds);if(null!=a)return{x:a.canvasX,y:a.canvasY};let s=i.bounds;if(null!=s){if(s instanceof y){let{x:e,y:i}=s.computeCenter();return{x:t.x+e,y:t.y+i}}return to.toCanvas(s).computeCenter()}}(e,t,i)??{};if(void 0!==a&&void 0!==s)return{type:"keyboard",canvasX:a,canvasY:s}}(o.series,l,d);if(void 0!==c&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;let e=this.chart.getTooltipContent(o.series,u.datumIndex,u),a=si.makeTooltipMeta(c,o.series,u,d.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,u),o.series.tooltipEnabled??this.chart.tooltip.enabled?this.chart.ctx.tooltipManager.updateTooltip(this.id,a,e):this.chart.ctx.tooltipManager.removeTooltip(this.id),n||(0===t&&0===s||i!==d.datumIndex||r!==(d.otherIndex??o.seriesIndex))&&this.swapChain.update(this.getDatumAriaText(u,e))}}getDatumAriaText(e,t){let i=null==t?"":oF(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;let t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;let{currentX:i,currentY:a}=t,s=t.currentX+(this.hoverRect?.x??0),r=t.currentY+(this.hoverRect?.y??0);if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,r))return void this.clearHighlight();let{range:n}=this.chart.highlight,o=this.pickNodes({x:i,y:a},"tooltip"===n?"highlight-tooltip":"highlight");if(!o||0===o.matches.length)return void this.chart.ctx.highlightManager.updateHighlight(this.id);let{current:l}=this.tooltipCandidates,h=null==l?void 0:o.matches.find(e=>oK(e,l)),d=h?.datum??o.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,d),this.hoverDevice="pointer"}handleHoverTooltip(e,t){let{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;let{currentX:a,currentY:s}=e,r=a+(this.hoverRect?.x??0),n=s+(this.hoverRect?.y??0),o=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(r,n)){"pointer"==this.hoverDevice&&this.clearTooltip();return}if(o&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(o,"canvas-overlay",oz))return;let l=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(!l||0===l.matches.length){"pointer"==this.hoverDevice&&this.clearTooltip();return}if(this.hoverDevice="pointer",0===l.distance){let{current:e,index:t,length:a}=this.tooltipCandidates.update(l.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(e,r,n,{index:t,length:a})}else this.showTooltip(l.matches[0],r,n)}showTooltip({series:e,datum:t,datumIndex:i},a,s,r){let n=this.chart.getTooltipContent(e,i,t);if((e.tooltipEnabled??this.chart.tooltip.enabled)&&null!=n){let i=si.makeTooltipMeta({type:"pointermove",canvasX:a,canvasY:s},e,t,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,i,n,r)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}changeHighlightDatum(e){let t=new Set,{series:i,datum:a}=e.currentHighlight??{},{series:s,datum:r}=e.previousHighlight??{};s&&t.add(s),i&&t.add(i),s?.properties.cursor&&r&&this.chart.ctx.domManager.updateCursor(s.id),i?.properties.cursor&&i?.properties.cursor!=="default"&&a&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),null==i||null==s?this.update(5):this.update(5,{seriesToUpdate:t})}pickNodes(e,t,i){let a;for(let s of[...this.series].reverse()){if(!s.visible||!s.contentGroup.visible)continue;let r=s.pickNodes(e,t,i);if(null==r||0===r.datums.length)continue;let{datums:n,distance:o}=r;if(0!==r.datums.length){if(0===o)for(let e of(a?.distance!==0&&(a={matches:[],distance:0}),n)){let{datumIndex:t}=e;a.matches.push({series:s,datum:e,datumIndex:t})}else if(null==a||a.distance>o){let[e]=n,{datumIndex:t}=e;a={matches:[{series:s,datum:e,datumIndex:t}],distance:o}}}}return a}},oq=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){let{internalId:t,type:i,contentGroup:a,seriesGrouping:s}=e,{groupIndex:r=t}=s??{},n=this.series.get(t);if(null!=n)throw Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(n)}`);0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let o=this.groups.get(i);null==o&&(o=new Map,this.groups.set(i,o));let l=this.lookupIdx(r),h=o.get(l);return null==h&&(h={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new tu({name:`${e.contentGroup.name??i}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},o.set(l,h)),this.series.set(t,{layerState:h,seriesConfig:e}),h.seriesIds.push(t),h.group.appendChild(a),h.group}changeGroup(e){let{internalId:t,seriesGrouping:i,type:a,contentGroup:s,oldGrouping:r}=e,{groupIndex:n=t}=i??{};this.groups.get(a)?.get(n)?.seriesIds.includes(t)||(this.series.has(t)&&this.releaseGroup({internalId:t,seriesGrouping:r,type:a,contentGroup:s}),this.requestGroup(e))}releaseGroup(e){let{internalId:t,contentGroup:i,type:a}=e;if(!this.series.has(t))throw Error(`AG Charts - series doesn't have an allocated layer: ${t}`);let s=this.series.get(t)?.layerState;s&&(s.seriesIds=s.seriesIds.filter(e=>e!==t),s.group.removeChild(i)),s?.seriesIds.length===0?(this.seriesRoot.removeChild(s.group),this.groups.get(s.type)?.delete(s.id),this.groups.get(a)?.delete(t)):null!=s&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds)),this.series.delete(t)}updateLayerCompositing(){this.groups.forEach(e=>{e.forEach(e=>{let t,{group:i,seriesIds:a}=e;if(0===a.length)t=!1;else if(a.length>1)t=!0;else{let e=this.series.get(a[0]);t=e?.seriesConfig.renderToOffscreenCanvas()===!0}i.renderToOffscreenCanvas=t,i.zIndex=this.getLowestSeriesZIndex(a)})})}lookupIdx(e){return"normal"===this.mode?e:"string"!=typeof e||(e=Number(e.split("-").at(-1)))?Math.floor(30*(0,s.qE)(0,e/this.expectedSeriesCount,1)):0}destroy(){this.groups.forEach(e=>{e.forEach(e=>{this.seriesRoot.removeChild(e.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){return e.reduce((e,t)=>{let i=this.series.get(t),a=i?.seriesConfig.contentGroup.zIndex;return null==e||null==a?a:0>=th(e,a)?e:a},void 0)??1}},oJ=class extends eC{constructor(){super(...arguments),this.dragAction="drag"}};l([ew],oJ.prototype,"dragAction",2);var o0=class{constructor(e,t,i,a,s){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=a,this.animationManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",e=>this.onUpdateComplete(e)),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(e=>e())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(e){(e.apiUpdate||this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow(e)}onZoomChange(){this.dirtyZoom=!0}updateWindow(e){let t;if(!this.dataService.isLazy())return;let i=this.getValidAxis(),a=!0;if(i){let s=this.zoomManager.getAxisZoom(i.id);t=this.getAxisWindow(i,s),a=this.shouldRefresh(e,i,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,a&&this.dataService.load({windowStart:t?.min,windowEnd:t?.max})}getValidAxis(){return this.chart.axes.find(e=>"time"===e.type)}shouldRefresh(e,t,i){if(e.apiUpdate||this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let a=this.lastAxisZooms.get(t.id);return(!a||i.min!==a.min||i.max!==a.max)&&(this.lastAxisZooms.set(t.id,i),!0)}getAxisWindow(e,t){let{domain:i}=e.scale;if(!t||0===i.length||isNaN(Number(i[0])))return;let a=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+a*t.min),max:new Date(Number(i[0])+a*t.max)}}},o1=/^((?!chrome|android).)*safari/i,o2=/Version\/(\d+(\.\d+)?)/,o4=/Chrome/,o3=/Chrome\/(\d+)/,o5=/Edg/,o9=/OPR/,o6=new Set(["map-shape-background","map-line-background"]),o8=class{constructor(e,t,i,a,s,r,n){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutManager=a,this.localeManager=s,this.animationManager=r,this.domManager=n,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(or),this.destroyFns.push(this.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)))}destroy(){this.destroyFns.forEach(e=>e()),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){let t=this.dataService.isLoading(),i=this.chartLike.series.some(e=>e.hasData),a=this.chartLike.series.some(e=>e.visible&&!o6.has(e.type));this.overlays.darkTheme?this.overlayElem.classList.add(on):this.overlayElem.classList.remove(on),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;let r=!t&&!i,n=i&&!a,o=this.overlays.unsupportedBrowser.enabled&&function(){let{userAgent:e}=(0,s.zk)("navigator");if(o1.test(e)){let t=o2.exec(e);if(null==t)return!1;let i=parseFloat(t[1]),a=Math.floor(i)>16;return a||s.Vy.warnOnce(`Unsupported Safari version: ${i}; ${e}`),!a}if(o4.test(e)&&!o5.test(e)&&!o9.test(e)){let t=o3.exec(e);if(null==t)return!1;let i=parseInt(t[1],10),a=i>126;return a||s.Vy.warnOnce(`Unsupported Chrome version: ${i}; ${e}`),!a}return!1}();t?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),n?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),o?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser),(0,s.Bq)(this.overlayElem,"aria-hidden",!(t||r||n||o))}showOverlay(e,t){if(!e.enabled)return;let i=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText="\xa0"},this.animationManager)}},o7=x.create(!0,"opts"),le=class extends eC{constructor(){super(...arguments),this.padding=new tY(0)}};l([ew],le.prototype,"clip",2),l([ew],le.prototype,"padding",2);var lt=class e extends tV{constructor(e,t){var i;super(),this.id=(0,s.sX)(this),this.seriesRoot=new tg({name:`${this.id}-series-root`,zIndex:5}),this.annotationRoot=new tg({name:`${this.id}-annotation-root`,zIndex:9}),this.titleGroup=new tu({name:"titles",zIndex:13}),this.debug=x.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new s.iN,this.padding=new tY(20),this.seriesArea=new le,this.keyboard=new rk,this.touch=new oJ,this.mode="standalone",this.chartCaptions=new ib,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new os,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new s.iN,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new tG,this.updateRequestors={},this.performUpdateTrigger=tZ((e,t=0)=>{0===t?queueMicrotask(e):setTimeout(e,t)},({count:e})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(e)}catch(e){s.Vy.error("update error",e)}}).catch(e=>s.Vy.errorOnce(e))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=e=>{this.fireEvent(e)},this.onSeriesNodeDoubleClick=e=>{this.fireEvent(e)},this.onSeriesVisibilityChange=e=>{this.fireEvent(e)},this.seriesGroupingChanged=e=>{if(!(e instanceof of))return;let{series:t,seriesGrouping:i,oldGrouping:a}=e;t.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:t.internalId,type:t.type,contentGroup:t.contentGroup,renderToOffscreenCanvas:()=>t.renderToOffscreenCanvas(),seriesGrouping:i,oldGrouping:a})},this.chartOptions=e;let a=t?.scene,r=t?.container??e.processedOptions.container??void 0,n=t?.styleContainer??e.specialOverrides.styleContainer;a&&(this._firstAutoSize=!1,this._lastAutoSize=[a.width,a.height,a.pixelRatio]);let o=new tu({name:"root"});o.visible=!1,o.append(this.seriesRoot),o.append(this.annotationRoot),o.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new oZ,this.seriesLayerManager=new oq(this.seriesRoot),this.mode=e.userOptions.mode??this.mode,this.styleNonce=e.processedOptions.styleNonce;let l=this.ctx=new rr(this,{chartType:this.getChartType(),scene:a,root:o,container:r,styleContainer:n,domMode:e.optionMetadata.domMode,syncManager:new rC(this),fireEvent:e=>this.fireEvent(e),updateCallback:(e,t)=>this.update(e,t),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new ol,(i=this.overlays.loading).renderer??(i.renderer=()=>(function(e,t){let{animationDuration:i}=aW.add,a=(0,s.n)("div",`${or}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i*t}ms linear 50ms both`}),r=(0,s.n)("span",{width:"45px",height:"40px",backgroundImage:"linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)",backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),n=(0,s.n)("p",{marginTop:"1em"});n.innerText=e;let o=(0,s.n)("div",`${or}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=(0,s.n)("style");return l.innerText="@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } } @keyframes ag-charts-loading-matrix { 0% { background-position: 0% 0%, 50% 0%, 100% 0%; } 100% { background-position: 0% 100%, 50% 100%, 100% 100%; } }",a.replaceChildren(l,r,n,o),a})(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new o0(this,l.dataService,l.updateService,l.zoomManager,l.animationManager),new o8(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new rn,this.container=r;let h=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new oQ(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,e=>{e.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(e)}),l.layoutManager.addListener("layout:complete",e=>this.chartCaptions.positionAbsoluteCaptions(e)),l.dataService.addListener("data-load",e=>{this.data=e.data}),this.title.registerInteraction(h,"beforebegin"),this.subtitle.registerInteraction(h,"beforebegin"),this.footnote.registerInteraction(h,"afterend"),t7.addWindowEvent("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(7)}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>l.domManager.setDataBoolean("animating",!1)),l.zoomManager.addListener("zoom-change",()=>{this.series.forEach(e=>e.animationState?.transition("updateData"));let e="initial"!==this.chartAnimationPhase;this.update(4,{forceNodeDataRefresh:!0,skipAnimations:e})})),this.parentResize(l.domManager.containerSize)}static getInstance(t){return e.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,t){this.ctx.scene.download(e,t)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(e){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(e)}initSeriesAreaDependencies(){let{ctx:e,tooltip:t,highlight:i,overlays:a,seriesRoot:s,mode:r}=this,n=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(e,t,i)=>this.getTooltipContent(e,t,i),chartType:n,ctx:e,tooltip:t,highlight:i,overlays:a,seriesRoot:s,mode:r}}getModuleContext(){return this.ctx}getTooltipContent(e,t,i){let a=!1!==e.properties.tooltip.enabled?e.getTooltipContent(t,i):void 0,s=null==a?[]:[a];if("shared"!==this.tooltip.mode||1===this.series.length)return s;let r=e.getCategoryValue(t);return null==r?s:this.series.flatMap(t=>{if(t===e)return s;if(!t.isEnabled()||!1===t.properties.tooltip.enabled)return[];let i=t.datumIndexForCategoryValue(r),a=null==i?void 0:t.getTooltipContent(i,void 0);return null==a?[]:[a]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(e=>e.enabled&&e.text).map(e=>e.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){for(let e of(this.chartAnimationPhase="initial",this.series))e.resetAnimation(this.chartAnimationPhase);for(let e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(e){let t;if(this.destroyed)return;let i=e?.keepTransferableResources;return this.performUpdateType=8,this._destroyFns.forEach(e=>e()),this.processors.forEach(e=>e.destroy()),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),t={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(e=>e.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),t}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await e(this)}finally{!this.destroyed&&this._pendingFactoryUpdatesCount--}}).catch(e=>s.Vy.errorOnce(e)))}clearCallbackCache(){for(let e of(this.ctx.callbackCache.invalidateCache(),this.series))e.resetDatumCallbackCache()}update(e=0,t){if(this.destroyed)return;let{forceNodeDataRefresh:i=!1,skipAnimations:a,seriesToUpdate:s=this.series,newAnimationBatch:r,apiUpdate:n=!1}=t??{};for(let e of(this.apiUpdate=n,this.ctx.widgets.seriesWidget.setDragTouchEnabled("none"!==this.touch.dragAction),i&&this.series.forEach(e=>e.markNodeDataDirty()),s))this.seriesToUpdate.add(e);if(a&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.debug.check()){let t=Error().stack??"<unknown>";t=t.replace(/\([^)]*/g,""),this.updateRequestors[t]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(t?.backOffMs))}async performUpdate(e){let{performUpdateType:t,extraDebugStats:i,_performUpdateSplits:a,ctx:s}=this,r=[...this.seriesToUpdate];this.clearCallbackCache(),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=t,0===this.updateShortcutCount&&t<7&&(s.animationManager.startBatch(this._performUpdateSkipAnimations),s.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",aE[t]);let n=performance.now();a.start??(a.start=n);let o=e=>{a[e]??(a[e]=0),a[e]+=performance.now()-n,n=performance.now()};switch(t){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),o("⬇️");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),o("\uD83C\uDFED");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),o("⛰️");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),o("⌖");case 5:if(this.checkUpdateShortcut(5))break;await this.updateSeries(r),o("\uD83E\uDD14"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing();case 6:if(this.checkUpdateShortcut(6))break;s.updateService.dispatchPreSceneRender(),o("↖");case 7:if(this.checkUpdateShortcut(7))break;for(let e of(s.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,s.scene.render({debugSplitTimes:a,extraDebugStats:i,seriesRect:this.seriesRect}),this.extraDebugStats={},Object.keys(a)))delete a[e];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,s.animationManager.endBatch()}this.destroyed||(s.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();let l=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((l-a.start)*100)/100,count:e,performUpdateType:aE[t]})}updateThemeClassName(){let e="ag-charts-theme-",t=[`${e}default`,`${e}default-dark`],i=t[0],a=!1,{theme:s}=this.chartOptions.processedOptions;for(;"string"!=typeof s&&null!=s;)s=s.baseTheme;"string"==typeof s&&(i=s.replace("ag-",e),a=s.includes("-dark")),t.includes(i)||(i=a?t[1]:t[0]),this.ctx.domManager.setThemeClass(i)}updateDOM(){this.updateThemeClassName();let{enabled:e,tabIndex:t}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?t??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return!!this.destroyed||(this.updateShortcutCount>3?(s.Vy.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){null!=this.width&&null!=this.height||!this._lastAutoSize&&(await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update."))}onAxisChange(e,t){(null!=t||0!==e.length)&&this.ctx.axisManager.updateAxes(t??[],e)}onSeriesChange(e,t){let i=t?.filter(t=>!e.includes(t))??[];for(let a of(this.destroySeries(i),this.seriesLayerManager?.setSeriesCount(e.length),e)){if(t?.includes(a))continue;let e=this.seriesLayerManager.requestGroup(a);a.attachSeries(e,this.seriesRoot,this.annotationRoot);let i=this;a.chart={get mode(){return i.mode},get isMiniChart(){return!1},get seriesRect(){return i.seriesRect}},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(e)}destroySeries(e){e?.forEach(e=>{e.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),e.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),e.removeEventListener("groupingChanged",this.seriesGroupingChanged),e.destroy(),this.seriesLayerManager.releaseGroup(e),e.detachSeries(void 0,this.seriesRoot,this.annotationRoot),e.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(let e of this.axes)e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)}assignAxesToSeries(){let e=(0,s.$z)(this.axes,e=>e.direction);for(let t of this.series)for(let i of t.directions){let a=e[i];if(!a)return void s.Vy.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);let r=t.getKeys(i),n=a.find(e=>!e.keys.length||r.some(t=>e.keys.includes(t)));if(!n)return void s.Vy.warnOnce(`no matching axis for direction [${i}] and keys [${r}]; check series and axes configuration.`);t.axes[i]=n}}parentResize(e){if(null==e||null!=this.width&&null!=this.height)return;let{width:t,height:i}=e,{pixelRatio:a}=e;if(t=Math.floor(t),i=Math.floor(i),0===t&&0===i)return;let[s=0,r=0,n=1]=this._lastAutoSize??[];(s!==t||r!==i||n!==a)&&(this._lastAutoSize=[t,i,a],this.resize("SizeMonitor",{}))}resize(e,t){let{scene:i,animationManager:a}=this.ctx,{inWidth:r,inHeight:n,inMinWidth:o,inMinHeight:l,inOverrideDevicePixelRatio:h}=t;this.ctx.domManager.setSizeOptions(o??this.minWidth,l??this.minHeight,r??this.width,n??this.height);let d=r??this.width??this._lastAutoSize?.[0],u=n??this.height??this._lastAutoSize?.[1],c=h??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${e}`,{width:d,height:u,pixelRatio:c,stack:Error().stack}),null!=d&&null!=u&&(0,s.Bf)(d)&&(0,s.Bf)(u)&&i.resize(d,u,c)){a.reset();let e=!0;(null==this.width||null==this.height)&&this._firstAutoSize&&(e=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:e}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(e=>e.setChartData(this.data));let e=this.modulesManager.mapModules(e=>e.updateData?.(this.data));await Promise.all(e)}async processData(){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let e=new rf(this.mode,this.suppressFieldDotNotation),t=this.series.map(t=>t.processData(e)),i=this.modulesManager.mapModules(t=>t.processData?.(e));this._cachedData=e.execute(this._cachedData),await Promise.all([...t,...i]),this.updateLegends()}async processDomains(){for(let e of this.axes)e.processData();for(let e of this.series)e.updatedDomains()}updateLegends(e){for(let{legend:t,legendType:i}of this.modulesManager.legends())"category"===i?this.setCategoryLegendData(e):this.setLegendData(i,t)}setCategoryLegendData(e){var t;let{ctx:{legendManager:i,stateManager:a}}=this;e&&this.series.forEach(t=>{let i=e.find(e=>e.seriesId===t.id);t.onLegendInitialState("category",i)});let r=this.series.flatMap(e=>{let t=e.getLegendData("category");return i.updateData(e.id,t),t});if(e)return void a.setStateAndRestore(i,e);if("integrated"!==this.mode){let e={},i=new Map(this.series.map(e=>[e.id,e.type]));for(let{seriesId:a,symbol:{marker:n},label:o}of r.filter(e=>!e.hideInLegend)){if(null==n.fill)continue;let r=i.get(a),l=e[r]??(e[r]={});l[t=o.text]??(l[t]=n.fill),l[o.text]!==n.fill&&s.Vy.warnOnce(`legend item '${o.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}i.update()}setLegendData(e,t){t.data=this.series.filter(e=>e.properties.showInLegend).flatMap(t=>t.getLegendData(e))}async processLayout(){let e=this.animationRect,{width:t,height:i}=this.ctx.scene,a=this.ctx.layoutManager.createContext(t,i);await this.performLayout(a),e&&!this.animationRect?.equals(e)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){let{seriesRect:t}=this;await Promise.all(e.map(e=>e.update({seriesRect:t}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(e=>e.visible&&e.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(e=1e4,t=!1){let i=performance.now();for(;(this._pendingFactoryUpdatesCount>0||8!==this.performUpdateType||8!==this.runningUpdateType||this.ctx.scene.waitingForUpdate())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(8!==this.performUpdateType||8!==this.runningUpdateType)&&await this._performUpdateNotify.await(),performance.now()-i>e){let i=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(t)throw Error(i);s.Vy.warnOnce(i)}tx()&&await (0,s.v7)(),this.ctx.scene.waitingForUpdate()&&await (0,s.v7)(50)}}filterMiniChartSeries(e){return e?.filter(e=>!1!==e.showInMiniChart)}applyOptions(e){let t=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(null==t||0===Object.keys(t).length)return;let i=this.firstApply?{}:this.chartOptions.processedOptions,a=e.processedOptions;o7("Chart.applyOptions() - applying delta",t);let s=this.applyModules(a);t.listeners&&this.registerListeners(this,t.listeners),tw(this,t,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"]});let r=!1,n="no-op";null!=t.series&&(n=this.applySeries(this,t.series,i?.series),r=!0),"replaced"===n&&this.resetAnimations(),this.applyAxes(this,a,i,n,[])&&(r=!0),t.data&&(this.data=t.data),t.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,t.legend.listeners),t.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=t.locale?.localeText),this.chartOptions=e;let o=this.modulesManager.getModule("navigator"),l=this.modulesManager.getModule("zoom");o?.enabled||l?.enabled||this.ctx.zoomManager.updateZoom("chart");let h=o?.miniChart,d=a.navigator?.miniChart?.series??a.series;h?.enabled===!0&&null!=d?this.applyMiniChartOptions(h,d,a,i):h?.enabled===!1&&(h.series=[],h.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),r||(r=this.shouldForceNodeDataRefresh(t,n));let u=4*!(r||s);this.maybeResetAnimations(n),this.shouldClearLegendData(a,i,n)&&this.ctx.legendManager.clearData(),this.applyInitialState(a),o7("Chart.applyOptions() - update type",aE[u],{seriesStatus:n,forceNodeDataRefresh:r}),this.update(u,{apiUpdate:!0,forceNodeDataRefresh:r,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(e){let{annotationManager:t,chartTypeOriginator:i,historyManager:a,stateManager:s,zoomManager:r}=this.ctx,{initialState:n}=e;if("annotations"in e&&e.annotations?.enabled&&n?.annotations!=null){let e=n.annotations.map(e=>{let i=t.getAnnotationTypeStyles(e.type);return z(e,i)});s.setState(t,e)}n?.chartType!=null&&s.setState(i,n.chartType),(e.navigator?.enabled||e.zoom?.enabled)&&n?.zoom!=null&&s.setState(r,n.zoom),n?.legend!=null&&this.updateLegends(n.legend),null!=n&&a.clear()}maybeResetAnimations(e){if("standalone"===this.mode)switch(e){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(e,t){let i=!!e.data||"data-change"===t||"replaced"===t,a=Object.values(rv.getKeys()).some(t=>null!=e[t]),s=null!=e.title&&null!=e.subtitle;return i||a||s}shouldClearLegendData(e,t,i){let a="replaced"===i||"series-grouping-change"===i||"updated"===i&&(e.series?.length!==t.series?.length||!e.series?.every((e,i)=>e.type===t.series?.[i].type)),s=null!=t.legend&&null==e.legend;return a||s}applyMiniChartOptions(e,t,i,a){let s=a?.navigator?.miniChart?.series??a?.series,r=this.applySeries(e,this.filterMiniChartSeries(t),this.filterMiniChartSeries(s));for(let t of(this.applyAxes(e,i,a,r,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]),e.series))t.properties.id=void 0;let n=e.axes,o=n.find(e=>"x"===e.direction);for(let e of n)e.nice=!1,e.gridLine.enabled=!1,e.label.enabled=e===o,e.tick.enabled=!1,e.interactionEnabled=!1;if(null!=o){let e=i.navigator?.miniChart,t=e?.label,a=e?.label?.interval;if(o.line.enabled=!1,o.label.set(B(t,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),o.tick.set(B(a,["enabled","width","size","color","interval","step"])),"grouped-category"===o.type){o.label.enabled=!1,o.label.rotation=0;let{depthOptions:e}=o;if(0===e.length)e.set([{label:{enabled:!0}}]);else for(let t=1;t<e.length;t++)e[t].label.enabled=!1}else("time"===o.type||"unit-time"===o.type||"ordinal-time"===o.type)&&(o.parentLevel.enabled=!1);let s=a?.step;null!=s&&(o.interval.step=s)}}applyModules(e){let{type:t}=this.constructor,i=!1;for(let a of d.byType("root","legend")){let s=null!=e[a.optionsKey]&&a.chartTypes.includes(t);s!==this.modulesManager.isEnabled(a)&&(s?(this.modulesManager.addModule(a,e=>e.moduleFactory(this.getModuleContext())),"legend"===a.type&&this.modulesManager.getModule(a)?.attachLegend(this.ctx.scene),this[a.optionsKey]=this.modulesManager.getModule(a)):(this.modulesManager.removeModule(a),delete this[a.optionsKey]),i=!0)}return i}initSeriesDeclarationOrder(e){for(let t=0;t<e.length;t++)e[t].setSeriesIndex(t)}applySeries(e,t,i){if(!t)return"no-change";let a=function(e,t,i){let a=(e,t,i)=>{let a=[e];for(let e of n5)e in t&&null!=t[e]&&a.push(`${e}=${t[e]}`);return i?.seriesGrouping&&a.push(`seriesGrouping.groupId=${i?.seriesGrouping.groupId}`),a.join(";")},s=new Map,r=0;for(let t of e){let e=a(t.type,t.properties,i?.[r]);s.has(e)||s.set(e,[]),s.get(e)?.push([t,r++])}let n=new Map;for(let e of(r=0,t)){let t=a(e.type,e,e);n.has(t)||n.set(t,[]),n.get(t)?.push([e,r++])}if(![...s.keys()].some(e=>n.has(e)))return{status:"no-overlap",oldKeys:s.keys(),newKeys:n.keys()};let o=[];for(let[e,t]of n.entries())for(let[a,r]of t){let t=s.get(e);if(null==t||t.length<1){o.push({opts:a,targetIdx:r,idx:r,status:"add"}),s.delete(e);continue}let[n,l]=t.shift(),h=tS(i?.[l]??{},a??{}),{groupIndex:d,stackIndex:u}=h?.seriesGrouping??{};null!=d||null!=u?o.push({opts:a,series:n,diff:h,targetIdx:r,idx:l,status:"series-grouping"}):h?o.push({opts:a,series:n,diff:h,targetIdx:r,idx:l,status:"update"}):o.push({opts:a,series:n,targetIdx:r,idx:l,status:"no-op"}),0===t.length&&s.delete(e)}for(let e of s.values())for(let[t,i]of e)o.push({series:t,idx:i,targetIdx:-1,status:"remove"});return{status:"overlap",changes:o}}(e.series,t,i);if("no-overlap"===a.status){o7(`Chart.applySeries() - creating new series instances, status: ${a.status}`,a);let i=t.map(e=>this.createSeries(e));return this.initSeriesDeclarationOrder(i),e.series=i,"replaced"}o7("Chart.applySeries() - matchResult",a);let s=[],r=!1,n=!1,o=!1;for(let e of a.changes.toSorted((e,t)=>e.targetIdx-t.targetIdx))switch(n||(n="series-grouping"===e.status),r||(r=e.diff?.data!=null),o||(o="no-op"!==e.status),e.status){case"add":{let t=this.createSeries(e.opts);s.push(t),o7("Chart.applySeries() - created new series",t);break}case"remove":o7(`Chart.applySeries() - removing series at previous idx ${e.idx}`,e.series);break;case"no-op":s.push(e.series),o7(`Chart.applySeries() - no change to series at previous idx ${e.idx}`,e.series);break;default:{let{series:t,diff:i,idx:a}=e;o7(`Chart.applySeries() - applying series diff previous idx ${a}`,i,t),this.applySeriesValues(t,i),t.markNodeDataDirty(),s.push(t)}}return(this.initSeriesDeclarationOrder(s),o7("Chart.applySeries() - final series instances",s),e.series=s,n)?"series-grouping-change":r?"data-change":o?"updated":"no-op"}applyAxes(e,t,i,a,s=[]){if(!("axes"in t)||!t.axes)return!1;s=["axes[].type",...s];let r=t.axes.map(e=>"time"===e.type&&null!=e.unit?{...e,type:"unit-time"}:e);return"replaced"!==a&&e.axes.length===r.length&&e.axes.every((e,t)=>e.type===r[t].type)&&n6(i)?e.axes.forEach((e,t)=>{let a=tS(i.axes?.[t]??{},r[t]);o7(`Chart.applyAxes() - applying axis diff idx ${t}`,a),tw(e,a,{path:`axes[${t}]`,skip:s})}):(o7(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${a}`),e.axes=this.createAxis(r,s)),!0}createSeries(e){let t=rw.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(t,e),this.applySeriesValues(t,e),t}applySeriesOptionModules(e,t){let i=e.createModuleContext(),a=e.getModuleMap();for(let s of d.byType("series-option"))s.optionsKey in t&&s.seriesTypes.includes(e.type)&&a.addModule(s,e=>e.moduleFactory(i))}applySeriesValues(e,t){let i=e.getModuleMap(),{type:a,data:s,listeners:r,seriesGrouping:n,showInMiniChart:o,...l}=t;for(let e of rx)if("series-option"===e.type&&e.optionsKey in l){let t=i.getModule(e.optionsKey);if(t){let i=l[e.optionsKey];delete l[e.optionsKey],t.properties.set(i)}}null!=l.visible&&(e.visible=l.visible),e.properties.set(l),"data"in t&&e.setOptionsData(s),r&&this.registerListeners(e,r,{nodeClick:"seriesNodeClick",nodeDoubleClick:"seriesNodeDoubleClick"}),"seriesGrouping"in t&&(null==n?e.seriesGrouping=void 0:e.seriesGrouping={...e.seriesGrouping,...n})}createAxis(e,t){let i=[],a=this.getModuleContext();for(let s=0;s<e.length;s++){let r=e[s],n=rb.create(r.type,a);this.applyAxisModules(n,r),tw(n,r,{path:`axes[${s}]`,skip:t}),i.push(n)}return!function(e){let t=[],i=[],a=[...n3];for(let a of e)if(a instanceof n4){var s;"string"==typeof(s=a.position)&&n3.includes(s)?i.push(a.position):t.push(a)}for(let e of t){let t;do t=a.pop();while(t&&i.includes(t));if(null==t)break;e.position=t}}(i),i}applyAxisModules(e,t){let i=e.createModuleContext(),a=e.getModuleMap();for(let s of d.byType("axis-option")){let r=null!=t[s.optionsKey];r!==a.isEnabled(s)&&(r?(a.addModule(s,e=>e.moduleFactory(i)),e[s.optionsKey]=a.getModule(s)):(a.removeModule(s),delete e[s.optionsKey]))}}registerListeners(e,t,i){for(let[a,r]of(e.clearEventListeners(),(0,s.jO)(t)))if((0,s.Tn)(r)){let t=i?.[a];null==t?e.addEventListener(a,r):e.addEventListener(t,e=>{e?.type===t?r(new Proxy(e,{get:(e,t,i)=>"type"===t?a:Reflect.get(e,t,i)})):r(e)})}}};lt.chartsInstances=new WeakMap,l([tW({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),lt.chartsInstances.set(e,this))},oldValue(e){lt.chartsInstances.delete(e)}})],lt.prototype,"container",2),l([tW({newValue(e){this.resize("width option",{inWidth:e})}})],lt.prototype,"width",2),l([tW({newValue(e){this.resize("height option",{inHeight:e})}})],lt.prototype,"height",2),l([tW({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],lt.prototype,"minWidth",2),l([tW({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],lt.prototype,"minHeight",2),l([tW({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],lt.prototype,"overrideDevicePixelRatio",2),l([ew],lt.prototype,"padding",2),l([ew],lt.prototype,"seriesArea",2),l([ew],lt.prototype,"keyboard",2),l([ew],lt.prototype,"touch",2),l([ew],lt.prototype,"mode",2),l([ew],lt.prototype,"styleNonce",2),l([tU("chartCaptions.title")],lt.prototype,"title",2),l([tU("chartCaptions.subtitle")],lt.prototype,"subtitle",2),l([tU("chartCaptions.footnote")],lt.prototype,"footnote",2),l([ew],lt.prototype,"suppressFieldDotNotation",2),l([ew],lt.prototype,"loadGoogleFonts",2),l([tW({changeValue(e,t){this.onAxisChange(e,t)}})],lt.prototype,"axes",2),l([tW({changeValue(e,t){this.onSeriesChange(e,t)}})],lt.prototype,"series",2);var li=lt,la=x.create(!0,"opts"),ls="AG Charts - Chart was destroyed, cannot perform request.",lr=class{constructor(e,t,i){this.factoryApi=t,this.licenseManager=i,this.chart=e}async update(e){if(!this.chart)throw Error(ls);return la.group("AgChartInstance.update()",async()=>{this.factoryApi.update(e,this),await this.chart?.waitForUpdate()})}async updateDelta(e){if(!this.chart)throw Error(ls);return la.group("AgChartInstance.updateDelta()",async()=>{this.factoryApi.updateUserDelta(this,e),await this.chart?.waitForUpdate()})}getOptions(){if(!this.chart)throw Error(ls);let e=tI(this.chart.getOptions());for(let t of Object.keys(e))t.startsWith("_")&&delete e[t];return e}waitForUpdate(){if(!this.chart)throw Error(ls);return this.chart.waitForUpdate()}async download(e){if(!this.chart)throw Error(ls);let t=await this.prepareResizedChart(this,this.chart,e);try{t.chart?.download(e?.fileName,e?.fileFormat)}finally{t.destroy()}}async __toSVG(e){if(!this.chart)throw Error(ls);let t=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...e});try{return t?.chart?.toSVG()}finally{t?.destroy()}}async getImageDataURL(e){if(!this.chart)throw Error(ls);let t=await this.prepareResizedChart(this,this.chart,e);try{return t.chart.getCanvasDataURL(e?.fileFormat)}finally{t.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){let{chart:t}=this;if(!t)return;let i=this.getEnabledOriginators();if(!i.includes(t.ctx.legendManager))return void await this.setStateOriginators(e,i);await this.setStateOriginators(e,i.filter(e=>e!==t.ctx.zoomManager)),await this.setStateOriginators(e,[t.ctx.zoomManager])}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(e,t,i={}){let a=i.width??t.width??t.ctx.scene.canvas.width,s=i.height??t.height??t.ctx.scene.canvas.height,r=e.getState(),n=d.hasEnterpriseModules(),o={...t.chartOptions.processedOverrides,container:document.createElement("div"),width:a,height:s};null!=i.width&&null!=i.height&&(o.overrideDevicePixelRatio=1);let l=t.getOptions();n&&(o.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(o.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));let h={...t.chartOptions.specialOverrides},u={...t.chartOptions.optionMetadata},c=this.factoryApi.create(l,o,h,u);await c.setState(r),c.chart?.ctx.zoomManager.updateZoom("chartProxy",t.ctx.zoomManager.getZoom()),c.chart?.ctx.legendManager.clearData(),c.chart?.ctx.legendManager.update(t.ctx.legendManager.getData()),t.series.forEach((e,t)=>{c.chart.series[t].visible=e.visible});let p=[];for(let e of t.modulesManager.legends())p.push(e.legend.pagination?.currentPage??0);for(let e of c.chart.modulesManager.legends()){let t=p.shift()??0;e.legend.pagination&&e.legend.pagination.setPage(t)}return c.chart?.update(0,{forceNodeDataRefresh:!0}),await c.waitForUpdate(),c}getEnabledOriginators(){if(!this.chart)return[];let{chartOptions:{processedOptions:e,optionMetadata:t},ctx:{annotationManager:i,chartTypeOriginator:a,zoomManager:s,legendManager:r}}=this.chart,n=[];return"annotations"in e&&e.annotations?.enabled&&n.push(i),"price-volume"===t.presetType&&n.push(a),(e.navigator?.enabled||e.zoom?.enabled)&&n.push(s),"legend"in this.chart&&n.push(r),n}async setStateOriginators(e,t){this.factoryApi.caretaker.restore(e,...t),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart?.waitForUpdate()}};lr.chartInstances=new WeakMap,l([tW({oldValue(e){e.destroyed||(e.publicApi=void 0),lr.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,lr.chartInstances.set(e,this))}})],lr.prototype,"chart",2);var ln=class extends h{constructor(e){super(),this.ctx=e,this.localeText=void 0}};l([k(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),ew],ln.prototype,"localeText",2),l([k(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),ew],ln.prototype,"getLocaleText",2);var lo={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new ln(e)};function ll(e,t,i){if(null==i||0===i[0]&&1===i[1])return{ticks:e,count:e.length};let a=(0,s.qE)(0,Math.floor(i[0]*e.length),e.length),r=(0,s.qE)(0,Math.ceil(i[1]*e.length),e.length),n=t?e.length-r:a,o=t?e.length-a:r;return{ticks:e.slice(n,o),count:e.length}}var lh=class e extends sX{constructor(){super(...arguments),this.type="band",this.index=void 0,this._domain=[]}static is(t){return t instanceof e}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index=void 0)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(...e){let t,i=new Set,a=!0;for(let s of e)i.has(s)||(i.add(s),null==t?t=ld(s):(a&&(a=function(e,t){let i=-1;for(let a of e){let e=t.indexOf(a);if(-1===e)i=1/0;else{if(e<=i)return!1;i=e}}return!0}(s,t)),t=ld([...t,...s])));return t??(t=[]),{domain:t,animatable:a}}toDomain(e){}invert(e,t=!1){this.refresh();let i=t?this.bandwidth/2:0,a=this.invertNearestIndex(Math.max(0,e-i));return t||e===this.ordinalRange(a)?this.domain[a]:void 0}ticks(e,t=this.domain,i){return ll(t,!1,i)}findIndex(e){let{index:t}=this;if(null==t){let{domain:e}=this;t=new Map;for(let i=0;i<e.length;i++)t.set(sW(e[i]),i);this.index=t}return t.get(sW(e))}};function ld(e){let t,i=new Set;for(let a of e){let s=sW(a),r=i.size;i.add(s),i.size!==r?t?.push(a):t??(t=e.slice(0,i.size))}return t??e}var lu=class e extends n4{constructor(e,t=new lh){super(e,t),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0,this.nice=!1}static is(t){return t instanceof e}normaliseDataDomain(e){return{domain:e,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:e,paddingOuter:t}=this;if(!(0,s.Bf)(e)||!(0,s.Bf)(t)){let i=this.reduceBandScalePadding();e??(e=i.inner),t??(t=i.outer)}this.scale.paddingInner=e??0,this.scale.paddingOuter=t??0}reduceBandScalePadding(){return this.boundSeries.reduce((e,t)=>{let i=t.getBandScalePadding?.();return i&&(e.inner>i.inner&&(e.inner=i.inner),e.outer<i.outer&&(e.outer=i.outer)),e},{inner:1/0,outer:-1/0})}};lu.className="CategoryAxis",lu.type="category",l([ew],lu.prototype,"groupPaddingInner",2),l([ew],lu.prototype,"paddingInner",2),l([ew],lu.prototype,"paddingOuter",2);var lc=lu,lp=class e extends lh{static is(t){return t instanceof e}normalizeDomains(...e){let{domain:t}=super.normalizeDomains(...e);return{domain:t,animatable:!1}}findIndex(e){return super.findIndex(e)??this.getMatchIndex(e)}getMatchIndex(e){let t=JSON.stringify(e),i=this._domain.find(e=>JSON.stringify(e)===t);if(null!=i)return super.findIndex(i)}};function lg(e){if(0===e.length)return null;let t=1/0,i=-1/0;for(let a of e){let e=a instanceof Date?a.getTime():a;"number"==typeof e&&(e<t&&(t=e),e>i&&(i=e))}let a=[t,i];return a.every(isFinite)?a:null}function lm(e,t,i){let a=!1;return e.length>2&&(e=lg(e)??[NaN,NaN]),null!=t&&(a||(a=t>e[0]),e=[t,e[1]]),null!=i&&(a||(a=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:a}}var ly=new WeakMap;function lf(e,t){let i=JSON.stringify(e,null,0);return ly.has(t)||ly.set(t,new Map),ly.get(t)?.has(i)||ly.get(t)?.set(i,t(e)),ly.get(t)?.get(i)}function lb(e,t){let i=new Map,a=(...e)=>e.map(e=>"object"==typeof e||"symbol"==typeof e?e:(i.has(e)||i.set(e,{v:e}),i.get(e))),s={},r=new WeakMap;return(...i)=>{let n=0===i.length?[s]:a(...i),o=r;for(let e of n.slice(0,-1))o.has(e)||o.set(e,new WeakMap),o=o.get(e);let l=n.at(-1),h=o.get(l);return h?t?.("hit",e,i):(h=e(...i),o.set(l,h),t?.("miss",e,i)),h}}function lx(e,t=[0,0]){for(let i of e)"number"==typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function lM(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>lx(e)}}function lv(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:e=>lx(e),groupAggregateFunction:(e,t=[0,0])=>(t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t)}}function lS(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,t=[0,0])=>(t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t)}}function lD(e,t){return{id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:e=>lx(e),groupAggregateFunction:(e,t=[0,0,-1])=>(t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t[2]++,t),finalFunction:(e=[0,0,0])=>{let t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}}}function lI(e,t,i){let a={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(e,i=[])=>{let a=i[1]-i[0];return t.aggregateFunction(e).map(e=>e/a)}};return t.groupAggregateFunction&&(a.groupAggregateFunction=t.groupAggregateFunction),a}function lL(e){return()=>{let t=0;return i=>(0,s.Bf)(i)?t+=e?Math.max(0,i):i:i}}function lA(){return()=>{let e=0;return t=>{if(!(0,s.Bf)(t))return t;let i=e;return e+=t,i}}}function lw(e){return null!=e&&np(e)}function lC(e){return null!=e}function lk(e){switch(e){case"number":case"log":case"ordinal-time":case"unit-time":case"time":case"color":return lw;default:return lC}}function lN(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function lT(e,t,i={}){return{property:e,type:"key",valueType:lN(t),validation:lk(t),...i}}function lE(e,t,i={}){return{property:e,type:"value",valueType:lN(t),validation:lk(t),...i}}function lO(e,t={}){return{property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...t}}var lj=function(e){return e};function lz(...e){let t=e.filter(e=>null!=e);return 0===t.length?()=>lj:1===t.length?t[0]:()=>{let e=t.map(e=>e());return(t,i)=>e.reduce((e,t)=>t(e,i),t)}}function lR(e,t={}){let{min:i=-1/0,max:a=1/0,processor:r,...n}=t;return{type:"value",property:e,valueType:"range",validation:lw,processor:lz(r,()=>e=>(0,s.Bf)(e)?(0,s.qE)(i,e,a):e),...n}}function lP(e,t,i={}){let{onlyPositive:a,processor:s,...r}=i;return{...lE(e,t,r),processor:lz(s,lL(a))}}function lF(e,t,i={}){return{...lE(e,t,i),processor:lA()}}function lB(e,t,i,a,s){return[lE(e,s,a),lq(a.groupId,t,i,a.separateNegative),...null!=a.rangeId?[{id:a.rangeId,matchGroupIds:[a.groupId],type:"aggregate",aggregateFunction:e=>rl.extendDomain(e)}]:[]]}function lG(e,t,i){return[lE(e,t,i),l0(i.groupId)]}var lV={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,i)=>{let a="number"==typeof i[0]?i[0]:Number(i[0]),s=Math.abs(a-e);return(e=a,!isNaN(s)&&s>0&&s<t)?s:t}}},lY={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return(t=-1/0,i)=>{let a="number"==typeof i[0]?i[0]:Number(i[0]),s=Math.abs(a-e);return(e=a,!isNaN(s)&&s>0&&s>t)?s:t}}},lU={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e?.slice().sort((e,t)=>{for(let i=0;i<e.length;i++){let a=e[i]-t[i];if(0!==a)return a}return 0})};function l_({normaliseTo:e}){let t=(t,i)=>{if(0===i)return null;let a=(t??0)*e/i;return a>=0?Math.min(e,a):Math.max(-e,a)};return()=>()=>(e,i,a)=>{let s=function(e,t,i){let a=[0,0];for(let s of t){let t=e[s];for(let e of i.datumIndices[s]??[]){let i=t[e];if(null==i)continue;let s="number"==typeof i?i:Math.max(...i.map(e=>e??0)),r=s<0?0:1;0===r?a[r]=Math.min(a[r],s):a[r]=Math.max(a[r],s)}}return Math.max(Math.abs(a[0]),a[1])}(e,i,a);for(let r of i)for(let i of a.datumIndices[r]??[]){let a=e[r],n=a[i];if(null==n){a[i]=void 0;continue}a[i]="number"==typeof n?t(n,s):n.map(e=>t(e,s))}}}function l$(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:lf({normaliseTo:t},l_)}}function lW({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:a}){let s=e[1]-e[0],r=(i,a,r)=>{let n=e[0]+(i-a)/r*s;return 0===r?t:n>=e[1]?e[1]:n<e[0]?e[0]:n};return()=>(t,s)=>{let[n,o]=t.domain.values[s];null!=i&&(n=i),null!=a&&(o=a);let l=o-n;t.domain.values[s]=[e[0],e[1]];let h=t.columns[s];for(let e=0;e<h.length;e+=1)h[e]=r(h[e],n,l)}}function lH(e,t,i,a,s){return{type:"property-value-processor",property:e,adjust:lf({normaliseTo:t,rangeMin:a,rangeMax:s,zeroDomain:i},lW)}}function lZ(e,t,i,a){let s=3;if("category"===t.valueType)return i.length<e&&(s&=-2),s;let r=a[0]?.valueOf();for(let e=1;0!==s&&e<a.length;e++){let t=a[e]?.valueOf();(!Number.isFinite(t)||r>t)&&(s&=-3),Number.isFinite(t)&&r===t&&(s&=-2),r=t}return s}function lK(e){return{type:"processor",property:"animationValidation",calculate(t){let{keys:i,values:a}=t.defs,{input:{count:s},domain:{keys:r,values:n},keys:o,columns:l}=t,h=3;if(0!==s){for(let e=0;0!==h&&e<i.length;e++)for(let t of i[e].scopes)h&=lZ(s,i[e],r[e],o[e].get(t));for(let t=0;0!==h&&t<a.length;t++){let i=a[t];e?.includes(i.id)&&(h&=lZ(s,i,n[t],l[t]))}}return{uniqueKeys:(1&h)!=0,orderedKeys:(2&h)!=0}}}}function lX({mode:e,separateNegative:t}){return()=>()=>(i,a,r)=>{let n=[0,0];for(let o of a)for(let a of r.datumIndices[o]??[]){let r=i[o],l=r[a],h=(0,s.cI)(l)&&t?0:1;(0,s.Bf)(l)&&("normal"===e&&(n[h]+=l),r[a]=n[h],"trailing"===e&&(n[h]+=l))}}}function lQ({mode:e,sum:t}){return()=>{let i=[],a=!0;return()=>(r,n,o)=>{let l=0;for(let h of n){let n=r[h];for(let r of o.datumIndices[h]??[]){let o=n[r],d=a&&"current"===t?0:i[h];i[h]=o;let u="current"===t?o:d;if(!(0,s.Bf)(o)||!(0,s.Bf)(d)){n[r]=l;continue}"normal"===e&&(l+=u),n[r]=l,"trailing"===e&&(l+=u)}}a=!1}}}function lq(e,t,i,a=!1){let s;return{type:"group-value-processor",matchGroupIds:[e],adjust:t.startsWith("window")?lf({mode:t.endsWith("-trailing")?"trailing":"normal",sum:i},lQ):lf({mode:t,separateNegative:a},lX)}}function lJ(){return()=>(e,t,i)=>{let a=new Float64Array(t.length),s=0;for(let r of t){let t=e[r];for(let e of i.datumIndices[r]??[]){let i=t[e];a[s]=Number.isFinite(i)?i:NaN,s+=1,t[e]=a.subarray(0,s)}}}}function l0(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:lJ}}function l1(e){return e.id??e.property}function l2(e,t,i,a,s){for(let{previousIndex:r,nextIndex:n}of i){let i=e[r],o=t[n];if(i[a]!==o[s])return!1}return!0}function l4(e,t,i=!0){return{type:"processor",property:"diff",calculate(a,s){let r=new Map,n=new Map,o=new Map,l=new Map,h=t.keys,d=a.keys,u=t.columns,c=a.columns,p=function(e,t,i){let a=new Map,s=t.defs.values;for(let t=0;t<s.length;t+=1){let i=s[t];if(i.scopes?.includes(e)===!1)continue;let r=l1(i);if(a.has(r))return;a.set(r,t)}let r=[],n=i.defs.values;for(let t=0;t<n.length;t+=1){let i=n[t];if(i.scopes?.includes(e)===!1)continue;let s=l1(i),o=a.get(s);if(null==o)return;a.delete(s),r.push({previousIndex:o,nextIndex:t})}if(0===a.size)return r}(e,t,a);if(null==p)return s;let g=Math.max(t.input.count,a.input.count);for(let s=0;s<g;s++){let g=s<t.input.count,m=s<a.input.count,y=g?rg(h,e,s):void 0,f=null!=y?l3(y):"",b=m?rg(d,e,s):void 0,x=null!=b?l3(b):"";if(m&&g&&f===x){l2(u,c,p,s,s)||o.set(x,s);continue}let M=l.get(x);null!=M?((i||!l2(u,c,p,M,s))&&(o.set(x,s),r.set(x,s)),l.delete(x)):m&&n.set(x,s);let v=n.get(f);null!=v?((i||!l2(u,c,p,v,s))&&(o.set(f,s),r.set(f,s)),n.delete(f)):g&&(o.delete(f),l.set(f,s))}let m={changed:n.size>0||o.size>0||l.size>0,added:new Set(n.keys()),updated:new Set(o.keys()),removed:new Set(l.keys()),moved:new Set(r.keys())};return{...s,[e]:m}}}}function l3(e,...t){let i;return("string"==typeof(i=(0,s.cy)(e)?e.map(e=>ng(e)).join("___"):ng(e))||"number"==typeof i||"boolean"==typeof i||i instanceof Date)&&t.length>0&&(i+=`___${t.join("___")}`),i}var l5=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},l9=class e{constructor(e="",t,i){this.label=e,this.parent=t,this.refId=i,this.position=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=t?t.depth+1:0}insertTick(t,i){let a=this;for(let s=0;s<t.length;s++){let r=t[s],n=s!==t.length-1,{children:o}=a,l=o.find(e=>e.label===r);if(l&&n)a=l;else{let t=new e(r,a,i);t.index=o.length,o.push(t),n&&(a=t)}}}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((e,t)=>t!==this.index)??[]}},l6=class{constructor(){this.dimensions=new l5,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.position,e.depth),this.nodes.push(e)}scaling(e,t){let i=1;if(e>0){let{left:t,right:a}=this.dimensions;a!==t&&(i=e/(a-t))}return t&&(i*=-1),i}},l8=class extends eC{constructor(){super(...arguments),this.enabled=!0}};l([ew],l8.prototype,"enabled",2),l([ew],l8.prototype,"avoidCollisions",2),l([ew],l8.prototype,"color",2),l([ew],l8.prototype,"spacing",2),l([ew],l8.prototype,"rotation",2),l([ew],l8.prototype,"fontStyle",2),l([ew],l8.prototype,"fontWeight",2),l([ew],l8.prototype,"fontSize",2),l([ew],l8.prototype,"fontFamily",2);var l7=class extends eC{constructor(){super(...arguments),this.enabled=!0}};l([ew],l7.prototype,"enabled",2),l([ew],l7.prototype,"width",2),l([ew],l7.prototype,"stroke",2);var he=class extends eC{constructor(){super(...arguments),this.label=new l8,this.tick=new l7}};l([ew],he.prototype,"label",2),l([ew],he.prototype,"tick",2);var ht=class extends lc{constructor(e){super(e,new lp),this.tickScale=new lp,this.depthOptions=new ek(he),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;let{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:a,bandwidth:s}=this.scale,r=Math.abs(t[1]-t[0])-i,n=this.tickTreeLayout.scaling(r,t[0]>t[1]),o=a+s/2,l=0;for(let t of e){let e=t.position*n;l>e&&(l=e),t.screen=e+o}for(let t of e)t.screen-=l}getDepthOptionsMap(e){let t=[],{depthOptions:i,label:a}=this,s=this.horizontal?0:-90;for(let r=0;r<e;r++)t.push(i[r]?.label.enabled??a.enabled?{enabled:!0,spacing:i[r]?.label.spacing??a.spacing,rotation:i[r]?.label.rotation??(r?s:a.rotation),avoidCollisions:i[r]?.label.avoidCollisions??a.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>e.setProperties(t))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){if(this.updateDirection(),this.updateScale(),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:y.zero,spacing:0,separatorLayout:[],tickLabelLayout:[]};let{step:e}=this.scale,{title:t,label:i,range:a,depthOptions:r,horizontal:n}=this,{depth:o,nodes:l}=this.tickTreeLayout,h=Math.ceil(i.fontSize/e),d=n?-i.getSideFlag():i.getSideFlag(),u=[],c=new Map,p=new ih,g=this.getDepthOptionsMap(o),m=d*g[0].spacing,f=(e,t)=>{let l=o-e.depth;if(!g[l]?.enabled||t%h!=0||!(0,s.r4)(e.screen,a))return!1;let d=this.formatTick(e.label,t-1,this.scale.domain),u=this.getLabelStyles({value:d,depth:l},r[l]?.label);return p.setProperties({...u,text:d,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",lineHeight:ia.getLineHeight(u.fontSize),x:n?e.screen:m,y:n?m:e.screen,rotation:0}),!0},b={};l.forEach((e,t)=>{let i=o-e.depth;if(!f(e,t)||!p.getBBox())return;c.set(t,p.getBBox()),p.rotation=ec(g[i]?.rotation);let{width:a,height:s}=p.getBBox(),r=n?s:a;b[i]??(b[i]=0),b[i]<r&&(b[i]=r)});let x=nJ(),M=new Map,v=e=>{if(0===e)return 0;let t=b[0];for(let i=1;i<=e;i++)t+=g[i].spacing,i!==e&&(t+=b[i]);return t};l.forEach((t,a)=>{if(0===a)return;let s=f(t,a),r=!t.children.length,l=o-t.depth;if(t.parent){let e=r?t.position:t.position-(t.leafCount-1)/2;if(!M.has(e)){let t=this.depthOptions[l]?.tick,i=b[0];for(let e=0;e<=l;e++)i+=g[e].spacing,0!==e&&(i+=b[e]);M.set(e,{tickSize:i,tickStroke:t?.stroke,tickWidth:t?.enabled!==!1?t?.width:0})}}if(!s)return;let h=ec(g[l].rotation),{width:m,height:y}=c.get(a),S=v(l);if(p.textAlign="end",p.textBaseline="middle",p.rotation=h,n?(p.x+=m/2,p.y+=(S+eu(m/2,y/2,h))*d,p.rotationCenterX=t.screen,p.rotationCenterY=p.y):(p.x+=S*d+eu((g[l].spacing*d+m)/2,i.mirrored?m:0,h),p.rotationCenterX=p.x-m/2,p.rotationCenterY=t.screen),g[l].avoidCollisions){let{width:i,height:s}=p.getBBox();if((n?i:s)>(r?e:t.leafCount*e))return void c.delete(a)}let{text:D=""}=p;u.push({text:D,visible:!0,range:this.scale.range,tickId:x(D),fill:p.fill,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,fontWeight:p.fontWeight,rotation:p.rotation,rotationCenterX:p.rotationCenterX,rotationCenterY:p.rotationCenterY,textAlign:p.textAlign,textBaseline:p.textBaseline,x:p.x,y:p.y}),c.set(a,to.toCanvas(p))});let{enabled:S,stroke:D,width:I}=this.line;this.lineNode.datum=n?{x1:a[0],x2:a[1],y1:0,y2:0}:{x1:0,x2:0,y1:a[0],y2:a[1]},this.lineNode.setProperties({stroke:D,strokeWidth:S?I:0});let L=[...M.values()];L.push(L[0]);let A=[this.lineNodeBBox(),y.merge(c.values()),new y(0,0,L[0].tickSize*d,0)],w=0;if(t.enabled){let e=y.merge(A);w=n?e.height:e.width,A.push(this.titleBBox(this.scale.domain,w))}return{bbox:y.merge(A),spacing:w,separatorLayout:L,tickLabelLayout:u}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();let{tickScale:e,tick:t,gridLine:i,gridLength:a}=this,{separatorLayout:s,spacing:r}=this.computedLayout,{position:n,horizontal:o,gridPadding:l}=this,h="bottom"===n||"right"===n?-1:1,d=h*a-l,u=e.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).ticks.map((t,i)=>({tickId:l3(t,i),offset:Math.round(e.convert(t))}));this.gridLineGroupSelection.update(i.enabled&&a?u.map(({tickId:e,offset:t},a)=>{let[s,r,n,h]=o?[t,t,l,d]:[l,d,t,t],{style:u,width:c}=i,{stroke:p,lineDash:g}=u[a%u.length]??{};return{tickId:e,offset:t,x1:s,y1:n,x2:r,y2:h,stroke:p,strokeWidth:c,lineDash:g}}):[]),this.tickLineGroupSelection.update(t.enabled?u.map(({tickId:e,offset:i},a)=>{let{tickSize:r=this.getTickSize(),tickStroke:n=t.stroke,tickWidth:l=t.width}=s[a]??{},d=-h*r,[u,c,p,g]=o?[i,i,0,d]:[0,d,i,i];return{tickId:e,offset:i,x1:u,y1:p,x2:c,y2:g,stroke:n,strokeWidth:l,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(this.scale.domain,r),this.resetSelectionNodes()}calculateLayout(){let{separatorLayout:e,tickLabelLayout:t,spacing:i,bbox:a}=this.computeLayout();return this.computedLayout={separatorLayout:e,tickLabelLayout:t,spacing:i},{bbox:a,niceDomain:this.scale.domain}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){let{direction:e}=this,t=this.boundSeries.filter(e=>e.visible).flatMap(t=>t.getDomain(e));this.dataDomain={domain:lg(t)??this.filterDuplicateArrays(t),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();let i=this.dataDomain.domain.map(e=>(0,s.$r)((0,s.Gv)(e)&&"value"in e?e.value:e));this.tickTreeLayout=function(e){let t=new l6,i=function(e){let t=e.reduce((e,t)=>e<t.length?t.length:e,0),i=new l9;for(let a=0;a<e.length;a++){let s=e[a];for(;s.length<t;)s.push("");i.insertTick(s,a)}return i}(e);return!function e(t){let{children:i}=t;if(i.length){let[a]=i;for(let t of i)e(t),a=function(e,t){let i=e.getLeftSibling();if(i){let n=e,o=e,l=i,h=o.getLeftmostSibling(),d=o.mod,u=n.mod,c=l.mod,p=h.mod;for(;l.nextRight()&&o.nextLeft();){l=l.nextRight(),o=o.nextLeft(),h=h.nextLeft(),(n=n.nextRight()).ancestor=e;let i=l.prelim+c-(o.prelim+d)+1;if(i>0){var a,s,r=(a=l,s=t,e.getSiblings().indexOf(a.ancestor)>=0?a.ancestor:s);let n=i/(e.index-r.index);e.change-=n,e.shift+=i,r.change+=n,e.prelim+=i,e.mod+=i,d+=i,u+=i}c+=l.mod,d+=o.mod,p+=h.mod,u+=n.mod}l.nextRight()&&!n.nextRight()?n.mod+=c-u:(o.nextLeft()&&!h.nextLeft()&&(h.mod+=d-p),t=e)}return t}(t,a);!function({children:e}){let t=0,i=0;for(let a=e.length-1;a>=0;a--){let s=e[a];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}(t);let s=(i[0].prelim+i.at(-1).prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+1,t.mod=t.prelim-s):t.prelim=s}else{let e=t.getLeftSibling();t.prelim=e?e.prelim+1:0}}(i),!function e(t,i,a){for(let s of(t.position=t.prelim+i,a.insertNode(t),t.children))e(s,i+t.mod,a)}(i,-i.prelim,t),!function e(t){let{children:i}=t,a=0;for(let t of i)e(t),t.children.length?a+=t.leafCount:a++;t.leafCount=a,i.length?(t.subtreeLeft=i[0].subtreeLeft,t.subtreeRight=i[i.length-1].subtreeRight,t.position=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.position,t.subtreeRight=t.position)}(i),t}(i);let a=[];for(let e of this.tickTreeLayout.nodes)e.leafCount||null==e.refId||a.push(this.dataDomain.domain[e.refId]);this.scale.domain=(0,s.EG)(this.dataDomain.domain,a),this.tickScale.domain=i.concat([[""]])}filterDuplicateArrays(e){let t=new Set;return e.filter(e=>{let i=(0,s.cy)(e)?JSON.stringify(e):e;return!t.has(i)&&(t.add(i),!0)})}};ht.className="GroupedCategoryAxis",ht.type="grouped-category",l([ew],ht.prototype,"depthOptions",2);var hi={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},ha=(e,t)=>Math.log(t)/Math.log(e);function hs(e,t,i){let a=Math.min(...t),s=hi[e]??ha;return a>=0?s(e,i):-s(e,-i)}var hr={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},hn=(e,t)=>e**t;function ho(e,t,i){let a=Math.min(...t),s=hr[e]??hn;return a>=0?s(e,i):-s(e,-i)}var hl=class e extends sc{constructor(e=[1,10],t=[0,1]){super(e,t),this.type="log",this.defaultClamp=!0,this.base=10,this.log=e=>hs(this.base,this.domain,e),this.pow=e=>ho(this.base,this.domain,e)}static is(t){return t instanceof e}toDomain(e){return e}transform(e){let[t,i]=sh(this.domain);return t>=0!=i>=0?NaN:t>=0?Math.log(e):-Math.log(-e)}transformInvert(e){let[t,i]=sh(this.domain);return t>=0!=i>=0?NaN:t>=0?Math.exp(e):-Math.exp(-e)}niceDomain(e,t=this.domain){if(t.length<2)return[];let{base:i}=this,[a,s]=t,r=a>s?Math.ceil:Math.floor,n=a>s?Math.floor:Math.ceil;return[ho(i,t,r(hs(i,t,a))),ho(i,t,n(hs(i,t,s)))]}ticks({interval:e,tickCount:t=sc.defaultTickCount},i=this.domain,a){if(!i||i.length<2||t<1)return;let r=this.base,[n,o]=i,l=Math.min(n,o),h=Math.max(n,o),d=this.log(l),u=this.log(h);if(e){let t=Math.min(Math.abs(e),Math.abs(u-d)),{ticks:i,count:s}=na(d,u,t,a),r=i.map(this.pow).filter(e=>e>=l&&e<=h);if(!ns(r.length,this.getPixelRange()))return{ticks:r,count:s}}if(!(0,s.Fq)(r)||u-d>=t){let e=Math.min(u-d,t),{ticks:i,count:s}=r9(d,u,e,void 0,void 0,a);return{ticks:i.map(this.pow),count:s}}let c=[],p=l>0;d=Math.floor(d)-1,u=Math.round(u)+1;let g=sd(this.range)/t,m=1/0;for(let e=d;e<=u;e++){let t=this.convert(this.pow(e+1));for(let i=1;i<r;i++){let a=p?i:r-i+1,s=this.pow(e)*a,n=this.convert(s),o=Math.abs(m-n),d=Math.abs(n-t),u=o>=g&&d>=g;s>=l&&s<=h&&(1===i||u||0===c.length)&&(c.push(s),m=n)}}return ll(c,p,a)}tickFormatter({specifier:e}){return null!=e?(0,s.OR)(e):String}datumFormatter(e){return this.tickFormatter(e)}},hh=class e extends sc{constructor(){super([0,1],[0,1]),this.type="number"}static is(t){return t instanceof e}static getTickStep(e,t,i){let{interval:a,tickCount:s=sc.defaultTickCount,minTickCount:r,maxTickCount:n}=i;return a??ne(e,t,s,r,n)}toDomain(e){return e}ticks({interval:e,tickCount:t=sc.defaultTickCount,minTickCount:i,maxTickCount:a},s=this.domain,r){if(!s||s.length<2||t<1||!s.every(isFinite))return{ticks:[],count:0};let[n,o]=s;if(e){let t=Math.abs(e);if(!ns((o-n)/t,this.getPixelRange()))return na(n,o,t,r)}return r9(n,o,t,i,a,r)}niceDomain(t,i=this.domain){if(i.length<2)return[];let{tickCount:a=sc.defaultTickCount}=t,[s,r]=i;if(1===a)[s,r]=nr(s,r);else if(a>1){let a=s>r?Math.ceil:Math.floor,n=s>r?Math.floor:Math.ceil;for(let o=0;o<4;o++){let o=s,l=r,h=e.getTickStep(s,r,t),[d,u]=i;if(s=a(d/h)*h,r=n(u/h)*h,s===o&&r===l)break}}return[s,r]}tickFormatter({ticks:e,fractionDigits:t,specifier:i}){return null!=i?ni(e,i):e=>at(e,t)}datumFormatter({ticks:e,fractionDigits:t,specifier:i}){return null!=i?ni(e,i):e=>at(e,t+1)}},hd=class extends n4{constructor(e,t=new hh){super(e,t)}normaliseDataDomain(e){let{min:t,max:i}=this,{extent:a,clipped:s}=lm(e,t,i);return{domain:a,clipped:s}}};hd.className="NumberAxis",hd.type="number",l([ew],hd.prototype,"min",2),l([ew],hd.prototype,"max",2);var hu=class extends hd{normaliseDataDomain(e){let{min:t,max:i}=this,{extent:a,clipped:r}=lm(e,t,i);return a[0]<0&&a[1]>0||e[0]<0&&e[1]>0?(s.Vy.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:r}):0===a[0]||0===a[1]||0===e[0]||0===e[1]?(s.Vy.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:r}):{domain:a,clipped:r}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new hl)}defaultDatumFormatter(e,t){return String(e)}defaultLabelFormatter(e,t){return String(e)}};hu.className="LogAxis",hu.type="log";var hc=class extends eC{constructor(){super(...arguments),this.enabled=!1,this.label=new nC,this.tick=new nN}};l([ew],hc.prototype,"enabled",2),l([ew],hc.prototype,"label",2),l([ew],hc.prototype,"tick",2);var hp=class extends n4{constructor(e){super(e,new no),this.parentLevel=new hc,this.min=void 0,this.max=void 0,this.groupPaddingInner=.1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(e){return hg(e,this.min,this.max)}};function hg(e,t,i){let a=!1;return"number"==typeof t&&(t=new Date(t)),"number"==typeof i&&(i=new Date(i)),e.length>2&&(e=lg(e)?.map(e=>new Date(e))??[]),t instanceof Date&&(a||(a=t>e[0]),e=[t,e[1]]),i instanceof Date&&(a||(a=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:a}}hp.className="TimeAxis",hp.type="time",l([ew],hp.prototype,"parentLevel",2),l([ew],hp.prototype,"min",2),l([ew],hp.prototype,"max",2),l([ew],hp.prototype,"groupPaddingInner",2),l([ew],hp.prototype,"paddingInner",2),l([ew],hp.prototype,"paddingOuter",2);var hm=class extends lc{constructor(e){super(e,new rQ),this.parentLevel=new hc,this.min=void 0,this.max=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}updateScale(){super.updateScale(),this.scale.interval=this.unit}normaliseDataDomain(e){return hg(e,this.min,this.max)}};hm.className="UnitTimeAxis",hm.type="unit-time",l([ew],hm.prototype,"parentLevel",2),l([ew],hm.prototype,"min",2),l([ew],hm.prototype,"max",2),l([ew],hm.prototype,"unit",2);var hy=(e,{x0:t,y0:i,x1:a,y1:s,cx:r,cy:n},o,l)=>{if(l&&e.moveTo(t,i),t!==a||i!==s){let l=Math.atan2(i-n,t-r),h=Math.atan2(s-n,a-r);e.arc(r,n,o,l,h)}else e.lineTo(t,i)},hf=(e,t,i,a,s)=>{let r=!1,n=!1,o=a-Math.sqrt(Math.max(s**2-i**2,0)),l=0,h=0,d=i-Math.sqrt(Math.max(s**2-a**2,0));return o>e?(r=!0,o=e,l=i-Math.sqrt(Math.max(s**2-(a-e)**2))):o<1e-6&&(o=0),d>t?(n=!0,h=a-Math.sqrt(Math.max(s**2-(i-t)**2)),d=t):d<1e-6&&(d=0),{leading0:o,leading1:l,trailing0:h,trailing1:d,leadingClipped:r,trailingClipped:n}},hb=(e,t,i,a,s,r,n)=>{let o,l,h,d,{topLeft:u,topRight:c,bottomRight:p,bottomLeft:g}=r,m=Math.max(u+g,c+p),f=Math.max(u+c,g+p);if(m<=0&&f<=0)return void(null==n?e.rect(t,i,a,s):e.rect(n.x,n.y,n.width,n.height));if(null==n&&u===c&&u===p&&u===g)return void e.roundRect(t,i,a,s,u);if(a<0&&(t+=a,a=Math.abs(a)),s<0&&(i+=s,s=Math.abs(s)),a<=0||s<=0)return;if(null==n)n=new y(t,i,a,s);else{let e=Math.max(t,n.x),r=Math.min(t+a,n.x+n.width),o=Math.max(i,n.y);n=new y(e,o,r-e,Math.min(i+s,n.y+n.height)-o)}let b=Math.max(m/s,f/a,1);b>1&&(u/=b,c/=b,p/=b,g/=b);let x=!0,M=!0,v=!0,S=!0;{let e=hf(n.height,n.width,Math.max(t+u-n.x,0),Math.max(i+u-n.y,0),u);e.leadingClipped&&(S=!1),e.trailingClipped&&(M=!1);let a=Math.max(n.x+e.leading1,n.x),s=Math.max(n.y+e.leading0,n.y),r=Math.max(n.x+e.trailing1,n.x),l=Math.max(n.y+e.trailing0,n.y);o={x0:a,y0:s,x1:r,y1:l,cx:t+u,cy:i+u}}if(M){let e=hf(n.width,n.height,Math.max(i+c-n.y,0),Math.max(n.x+n.width-(t+a-c),0),c);e.leadingClipped&&(x=!1),e.trailingClipped&&(v=!1);let s=Math.min(n.x+n.width-e.leading0,n.x+n.width),r=Math.max(n.y+e.leading1,n.y),o=Math.min(n.x+n.width-e.trailing0,n.x+n.width),h=Math.max(n.y+e.trailing1,n.y);l={x0:s,y0:r,x1:o,y1:h,cx:t+a-c,cy:i+c}}if(v){let e=hf(n.height,n.width,Math.max(n.x+n.width-(t+a-p),0),Math.max(n.y+n.height-(i+s-p),0),p);e.leadingClipped&&(M=!1),e.trailingClipped&&(S=!1);let r=Math.min(n.x+n.width-e.leading1,n.x+n.width),o=Math.min(n.y+n.height-e.leading0,n.y+n.height),l=Math.min(n.x+n.width-e.trailing1,n.x+n.width),d=Math.min(n.y+n.height-e.trailing0,n.y+n.height);h={x0:r,y0:o,x1:l,y1:d,cx:t+a-p,cy:i+s-p}}if(S){let e=hf(n.width,n.height,Math.max(n.y+n.height-(i+s-g),0),Math.max(t+g-n.x,0),g);e.leadingClipped&&(v=!1),e.trailingClipped&&(x=!1);let a=Math.max(n.x+e.leading0,n.x),r=Math.min(n.y+n.height-e.leading1,n.y+n.height),o=Math.max(n.x+e.trailing0,n.x),l=Math.min(n.y+n.height-e.trailing1,n.y+n.height);d={x0:a,y0:r,x1:o,y1:l,cx:t+g,cy:i+s-g}}let D=!1;x&&null!=o&&(hy(e,o,u,!D),D||(D=!0)),M&&null!=l&&(hy(e,l,c,!D),D||(D=!0)),v&&null!=h&&(hy(e,h,p,!D),D||(D=!0)),S&&null!=d&&hy(e,d,g,!D),e.closePath()},hx=class extends ox{constructor(){super(...arguments),this.borderPath=new eX,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=e8.defaultStyles.strokeWidth,this.effectiveStrokeWidth=e8.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){let{path:e,borderPath:t,crisp:i,topLeftCornerRadius:a,topRightCornerRadius:s,bottomRightCornerRadius:r,bottomLeftCornerRadius:n}=this,{x:o,y:l,width:h,height:d,strokeWidth:u,clipBBox:c}=this,p=1/(this.layerManager?.canvas.pixelRatio??1),g=1;if(e.clear(!0),t.clear(!0),i&&(h<=p&&(g*=h/p),d<=p&&(g*=d/p),h=this.align(o,h),d=this.align(l,d),o=this.align(o),l=this.align(l),c=null!=c?new y(this.align(c.x),this.align(c.y),this.align(c.x,c.width),this.align(c.y,c.height)):void 0),u)if(h<p){let e=o+p/2;t.moveTo(e,l),t.lineTo(e,l+d),u=p,this.borderClipPath=void 0}else if(d<p){let e=l+p/2;t.moveTo(o,e),t.lineTo(o+h,e),u=p,this.borderClipPath=void 0}else if(u<h&&u<d){let i=u/2;o+=i,l+=i,h-=u,d-=u;let p=c?.clone().shrink(i),g={topLeft:a>0?a-u:0,topRight:s>0?s-u:0,bottomRight:r>0?r-u:0,bottomLeft:n>0?n-u:0};this.borderClipPath=void 0,h>0&&d>0&&(null==p||p?.width>0&&p?.height>0)&&(hb(e,o,l,h,d,g,p),hb(t,o,l,h,d,g,p))}else this.borderClipPath=this.borderClipPath??new eX,this.borderClipPath.clear(!0),this.borderClipPath.rect(o,l,h,d),t.rect(o,l,h,d);else this.borderClipPath=void 0,hb(e,o,l,h,d,{topLeft:a,topRight:s,bottomRight:r,bottomLeft:n},c);if([a,s,r,n].every(e=>0===e)){let e=this.getBBox();this.hittester=e.containsPoint.bind(e),this.distanceSquared=(e,t)=>this.getBBox().distanceSquared(e,t)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=g}computeBBox(){let{x:e,y:t,width:i,height:a,clipBBox:s}=this;return s?.clone()??new y(e,t,i,a)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAndAlpha(e){super.applyFillAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(e){super.applyStrokeAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}renderStroke(e){let{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){let{globalAlpha:t}=e,{lineDash:a,lineDashOffset:s,lineCap:r,lineJoin:n,borderPath:o,borderClipPath:l}=this;l&&e.clip(l.getPath2D()),this.applyStrokeAndAlpha(e),e.lineWidth=i,a&&e.setLineDash(a),s&&(e.lineDashOffset=s),r&&(e.lineCap=r),n&&(e.lineJoin=n),e.stroke(o.getPath2D()),e.globalAlpha=t}}};hx.className="Rect",l([Z()],hx.prototype,"x",2),l([Z()],hx.prototype,"y",2),l([Z()],hx.prototype,"width",2),l([Z()],hx.prototype,"height",2),l([Z()],hx.prototype,"topLeftCornerRadius",2),l([Z()],hx.prototype,"topRightCornerRadius",2),l([Z()],hx.prototype,"bottomRightCornerRadius",2),l([Z()],hx.prototype,"bottomLeftCornerRadius",2),l([Z({equals:u.equals})],hx.prototype,"clipBBox",2),l([Z()],hx.prototype,"crisp",2);var hM=class extends h{constructor(e){super(),this.ctx=e,this.rectNode=new hx,this.textNode=new io,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",e=>this.onLayoutComplete(e)))}createNode(){return new tu({name:"background",zIndex:0})}onLayoutComplete(e){let{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};l([ew,t$("node","visible")],hM.prototype,"visible",2),l([ew,t$("rectNode","fill")],hM.prototype,"fill",2),l([ew],hM.prototype,"image",2),l([ew,t$("textNode")],hM.prototype,"text",2);var hv={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new hM(e)},hS=class extends eC{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};l([ew],hS.prototype,"color",2),l([ew],hS.prototype,"fontStyle",2),l([ew],hS.prototype,"fontWeight",2),l([ew],hS.prototype,"fontSize",2),l([ew],hS.prototype,"fontFamily",2);var hD=class extends eC{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};l([ew],hD.prototype,"size",2),l([ew],hD.prototype,"fill",2),l([ew],hD.prototype,"fillOpacity",2),l([ew],hD.prototype,"stroke",2),l([ew],hD.prototype,"strokeWidth",2),l([ew],hD.prototype,"strokeOpacity",2);var hI=class extends eC{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};l([tW({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],hI.prototype,"shape",2),l([ew],hI.prototype,"size",2),l([ew],hI.prototype,"padding",2);var hL=class extends eC{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=(0,s.sX)(this),this.marker=new hI(this),this.activeStyle=new hD,this.inactiveStyle=new hD,this.highlightStyle=new hD,this.label=new hS,this.group=new tg({name:"pagination"}),this.labelNode=new io,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new oO,this.previousButton=new oO,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){this._orientation=e,"horizontal"===e?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){let e=this.labelNode.getBBox();this.nextButton.translationX=e.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){let{currentPage:e,totalPages:t,labelNode:i,label:{color:a,fontStyle:s,fontWeight:r,fontSize:n,fontFamily:o}}=this;i.text=`${e+1} / ${t}`,i.fill=a,i.fontStyle=s,i.fontWeight=r,i.fontSize=n,i.fontFamily=o}updateMarkers(){let{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:a,activeStyle:s,inactiveStyle:r,highlightStyle:n,highlightActive:o}=this,l=(e,t)=>t?r:e===o?n:s;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",a))}updateMarker(e,t){let{shape:i,size:a}=this.marker;e.shape=i,e.size=a,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){let{currentPage:e,totalPages:t}=this,i=0===t;this.nextButtonDisabled=e===t-1||i,this.previousButtonDisabled=0===e||i}setPage(e){e=(0,s.qE)(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return({previous:this.previousButtonDisabled,next:this.nextButtonDisabled})[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),"next"!==t||this.nextButtonDisabled?"previous"!==t||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:to.toCanvas(this.previousButton),next:to.toCanvas(this.nextButton)}}};hL.className="Pagination",l([ew],hL.prototype,"marker",2),l([ew],hL.prototype,"activeStyle",2),l([ew],hL.prototype,"inactiveStyle",2),l([ew],hL.prototype,"highlightStyle",2),l([ew],hL.prototype,"label",2);var hA=class{constructor(e,t){this.dirty=!0,this.destroyFns=new iv,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=(0,s.n)("p"),this.itemDescription.style.display="none",this.itemDescription.id=(0,s.wW)(),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(e){if(!this.dirty)return;let{ctx:t,itemSelection:i,datumReader:a,itemListener:s}=e,r=t.localeManager,n=i.length;i.each((e,i,o)=>{e.proxyButton?.destroy(),e.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(r,a.getItemLabel(i),o,n),ariaChecked:!!e.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});let l=e.proxyButton;l.addListener("click",t=>s.onClick(t.sourceEvent,e.datum,l)),l.addListener("dblclick",t=>s.onDoubleClick(t.sourceEvent,e.datum)),l.addListener("mouseenter",t=>s.onHover(t.sourceEvent,e)),l.addListener("mouseleave",()=>s.onLeave()),l.addListener("contextmenu",t=>s.onContextClick(t,e)),l.addListener("blur",()=>s.onLeave()),l.addListener("focus",t=>s.onHover(t.sourceEvent,e)),l.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:i,interactive:a}){let s=to.toCanvas(t);this.itemList.setBounds(s);let r=Math.max(...e.nodes().map(e=>e.getBBox().height));e.each((e,t)=>{if(e.proxyButton){let t=e.pageIndex===i.currentPage,{x:n,y:o,height:l,width:h}=to.toCanvas(e),d=(r-l)/2,u={x:n-s.x,y:o-d-s.y,height:r,width:h},c=a&&t;e.proxyButton.setCursor("pointer"),e.proxyButton.setEnabled(c),e.proxyButton.setPointerEvents(c?void 0:"none"),e.proxyButton.setBounds(u)}})}updatePaginationProxyButtons(e,t){let{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){let{ctx:t,oldPages:a,newPages:s}=e,r=(a?.length??s.length)>1,n=s.length>1;r!==n&&(n?(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",t=>this.onPageButton(e,t,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0)),this.nextButton??(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",t=>this.onPageButton(e,t,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0))}let{prev:a,next:s}=i.computeCSSBounds();this.prevButton?.setBounds(a),this.nextButton?.setBounds(s),this.prevButton?.setEnabled(0!==i.currentPage),this.nextButton?.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton?.setCursor(i.getCursor("next")),this.prevButton?.setCursor(i.getCursor("previous"))}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,a,s)=>{let[r,n]=[t[a],e[a]];return r.id!==n.id})}onLocaleChanged(e,t,i){let a=t.length;t.each(({proxyButton:t},s,r)=>{let n=t?.getElement();if(null!=n){let t=i.getItemLabel(s);n.textContent=this.getItemAriaText(e,t,r,a)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,a){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:a})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function hw(e,t,i,a){let s={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:a,preventDefault:()=>s.defaultPrevented=!0}};return s}var hC=class extends tn(tu){constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new tu({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new io),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new oO({zIndex:1})),this.line=this.symbolsGroup.appendChild(new rP({zIndex:0}));let{label:e,line:t,symbolsGroup:i}=this;t.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),y.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){let e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){let{marker:e,line:t,length:i,isCustomMarker:a}=this,s=0,r=0;if(e.visible){let{size:t}=e,n=oO.anchor(e.shape);s=(n.x-.5)*t+i/2,r=(n.y-.5)*t,a?(e.x=0,e.y=0,e.translationX=s,e.translationY=r):(e.x=s,e.y=r,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){let t=super.preRender(e);return this.layout(),t}layoutLabel(){let{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};hC.className="MarkerLabel",l([t$("label")],hC.prototype,"text",2),l([t$("label")],hC.prototype,"fontStyle",2),l([t$("label")],hC.prototype,"fontWeight",2),l([t$("label")],hC.prototype,"fontSize",2),l([t$("label")],hC.prototype,"fontFamily",2),l([t$("label","fill")],hC.prototype,"color",2),l([k(e=>e.layoutLabel())],hC.prototype,"spacing",2),l([k(e=>e.layoutLabel())],hC.prototype,"length",2),l([Z()],hC.prototype,"isCustomMarker",2);var hk=class extends eC{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};l([ew],hk.prototype,"maxLength",2),l([ew],hk.prototype,"color",2),l([ew],hk.prototype,"fontStyle",2),l([ew],hk.prototype,"fontWeight",2),l([ew],hk.prototype,"fontSize",2),l([ew],hk.prototype,"fontFamily",2),l([ew],hk.prototype,"formatter",2);var hN=class extends eC{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};l([ew],hN.prototype,"shape",2),l([ew],hN.prototype,"size",2),l([ew],hN.prototype,"padding",2),l([ew],hN.prototype,"strokeWidth",2),l([ew],hN.prototype,"enabled",2);var hT=class extends eC{};l([ew],hT.prototype,"strokeWidth",2),l([ew],hT.prototype,"length",2);var hE=class extends eC{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new hN,this.label=new hk,this.line=new hT}};l([ew],hE.prototype,"maxWidth",2),l([ew],hE.prototype,"paddingX",2),l([ew],hE.prototype,"paddingY",2),l([ew],hE.prototype,"showSeriesStroke",2),l([ew],hE.prototype,"marker",2),l([ew],hE.prototype,"label",2),l([ew],hE.prototype,"line",2);var hO=class extends eC{};l([ew],hO.prototype,"legendItemClick",2),l([ew],hO.prototype,"legendItemDoubleClick",2);var hj={type:"gradient",bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1},hz={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:0,rotation:0,scale:1},hR={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8},hP=class extends eC{constructor(e){super(),this.ctx=e,this.id=(0,s.sX)(this),this.group=new tg({name:"legend",zIndex:14}),this.itemSelection=rR.select(this.group,hC),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new hE,this.listeners=new hO,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.pagination=new hL(t=>e.updateService.update(t),e=>this.updatePageNumber(e)),this.pagination.attachPagination(this.group);let{items:t}=e.contextMenuRegistry.builtins;t["toggle-series-visibility"].action=e=>this.contextToggleVisibility(e),t["toggle-other-series"].action=e=>this.contextToggleOtherSeries(e),this.destroyFns.push(e.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(()=>delete t["toggle-series-visibility"].action,()=>delete t["toggle-other-series"].action,e.layoutManager.registerElement(1,e=>this.positionLegend(e)),e.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new hA(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){O(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:e=[]}){this.enabled&&(this.data=e.filter(e=>!e.hideInLegend))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(e=>e()),this.itemSelection.clear(),this.domProxy.destroy()}getOrientation(){return this.orientation??"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){let{formatter:t}=this.item.label;if(t){let i=e.datum;return this.cachedCallWithContext(t,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...i&&{datum:i}})}return e.label.text}calcLayout(e,t){let{paddingX:i,paddingY:a,label:s,maxWidth:r,label:{maxLength:n=1/0,fontStyle:o,fontWeight:l,fontSize:h,fontFamily:d}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u);let c=[],p=ia.toFontString(s),g=r??.8*e,{markerWidth:m,anyLineEnabled:y}=this.calculateMarkerWidth();if(this.itemSelection.each((e,t)=>{e.fontStyle=o,e.fontWeight=l,e.fontSize=h,e.fontFamily=d;let i=this.updateMarkerLabel(e,t,m,y),a=t.itemId??t.id,s=(this.getItemLabel(t)??"<unknown>").replace(/\r?\n/g," ");e.text=this.truncate(s,n,g,i,p,a),c.push(e.getTextMeasureBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};let f=this.size,b=this.oldSize;f[0]=e,f[1]=t,(f[0]!==b[0]||f[1]!==b[1])&&(b[0]=f[0],b[1]=f[1]);let{pages:x,maxPageHeight:M,maxPageWidth:v}=this.updatePagination(c,e,t),S=this.pages;this.pages=x,this.maxPageSize=[v-i,M-a];let D=this.pagination.currentPage,I=this.pages[D];return this.pages.length<1||!I?this.visible=!1:(this.visible=!0,this.updatePositions(D),this.update()),{oldPages:S}}isCustomMarker(e,t){return e&&void 0!==t&&"string"!=typeof t}calcSymbolsEnabled(e){let{showSeriesStroke:t,marker:i}=this.item,a=!!i.enabled||!t||(e.marker.enabled??!0),s=!!(e.line&&t),r=this.isCustomMarker(a,e.marker.shape);return{markerEnabled:a,lineEnabled:s,isCustomMarker:r}}calcSymbolsLengths(e,t,i){let a,{marker:s,line:r}=this.item,{shape:n}=e.marker;if(this.isCustomMarker(t,n)){let e=new oO;e.shape=n,e.updatePath();let t=e.getBBox();a=Math.max(t.width,t.height)}return{markerLength:t?s.size:0,lineLength:i?r.length??25:0,customMarkerSize:a}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each((i,a)=>{let{symbol:s}=a,{lineEnabled:r,markerEnabled:n}=this.calcSymbolsEnabled(s),{markerLength:o,lineLength:l,customMarkerSize:h=-1/0}=this.calcSymbolsLengths(s,n,r);e=Math.max(e,l,h,o),t||(t=r)}),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,a){let{marker:s,paddingX:r}=this.item,{symbol:n}=t,o=r,{markerEnabled:l,isCustomMarker:h}=this.calcSymbolsEnabled(n),d=s.padding;(l||a)&&(o+=d+i);let{marker:u,line:c}=e;return u.visible=l,u.visible&&(u.shape=s.shape??n.marker.shape??"square",u.size=s.size,og(u,this.getMarkerStyles(n))),c.visible=a,c.visible&&og(c,this.getLineStyles(n)),e.length=i,e.spacing=d,e.isCustomMarker=h,o}truncate(e,t,i,a,s,r){let n=!1;e.length>t&&(e=e.substring(0,t),n=!0);let o=it.getMeasurer({font:s}),l=id.truncateLine(e,o,i-a,n);return l.endsWith(ia.EllipsisChar)?this.truncatedItems.add(r):this.truncatedItems.delete(r),l}updatePagination(e,t,i){let a=this.getOrientation(),r=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=a,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:n,maxPageHeight:o,maxPageWidth:l,paginationBBox:h,paginationVertical:d}=this.calculatePagination(e,t,i),u=n.findIndex(e=>e.endIndex>=r);this.pagination.currentPage=(0,s.qE)(0,u,n.length-1);let{paddingX:c,paddingY:p}=this.item,g=o-p,m=0,y=-h.y-this.item.marker.size/2;d?y+=g+8:(m+=-h.x+(l-c)+8,y+=(g-h.height)/2),this.pagination.translationX=m,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers();let f=0;return this.itemSelection.each((e,t,i)=>{i>(n[f]?.endIndex??1/0)&&f++,e.pageIndex=f}),{maxPageHeight:o,maxPageWidth:l,pages:n}}calculatePagination(e,t,i){let{paddingX:a,paddingY:r}=this.item,n=this.getOrientation(),o=["left","right"].includes(this.position),l=this.pagination.getBBox(),h=new y(0,0,0,0),d=[],u=0,c=0,p=0,g=e=>e.width===l.width&&e.height===l.height,m=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(p++>10){s.Vy.warn("unable to find stable legend layout.");break}l=h;let g=t-(o?0:l.width),y=function({orientation:e,bboxes:t,maxHeight:i,maxWidth:a,itemPaddingY:s=0,itemPaddingX:r=0,forceResult:n=!1}){let o="horizontal"===e,l={max:o?a:i,fn:o?e=>e.width:e=>e.height,padding:o?r:s},h={max:o?i:a,fn:o?e=>e.height:e=>e.width,padding:o?s:r},d=0,u=[];for(;d<t.length;){let e=function(e,t,i,a,s){let r=function(e,t){let i=e.length,a=0;for(let s=0;s<i;s++)if((a+=t.fn(e[s])+t.padding)>t.max){if(i/s<2)return Math.ceil(i/2);return s}return i}(e,i);if(r<1){if(!s)return;r=1}let n=r;for(;n>=1;){let r=function(e,t,i,a,s,r){let n=[],o=0,l=0,h=[],d=[];for(let u=0;u<e.length;u++){let c=(u+i)%i;0===c&&(o+=l,l=0,h.length>0&&n.push(h),h=[]);let p=a.fn(e[u])+a.padding;d[c]=Math.max(d[c]??0,p);let g=o+(l=Math.max(l,s.fn(e[u])+s.padding)),m=!r||n.length>0;if(g>s.max&&m){h=[];break}if(d.reduce((e,t)=>e+t,0)>a.max&&!r){if(d.length<i)return d.length;return}h.push(u+t)}return h.length>0&&n.push(h),n.length>0?n:void 0}(e,t,n,i,a,s);if(null==r&&n<=1)return;if(null==r){n--;continue}if("number"==typeof r){if(r<=1)return;n=r<n&&r>1?r:n,n--;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}(t.slice(d),d,l,h,n);if(!e)return;d+=e.processedBBoxCount,u.push(e.pageIndices)}return function(e,t,i,a,s){let r=0,n=0;return{pages:e.map(e=>{"horizontal"===t&&(e=function(e){let t=[];for(let i of e[0])t.push([]);return e.forEach((e,i)=>{e.forEach((e,a)=>{t[a][i]=e})}),t}(e));let o=0,l=e.map(e=>{let t=e.map(e=>(o=Math.max(e,o),i[e])),r=0,n=0;return t.forEach(e=>{r+=e.height+a,n=Math.max(n,e.width+s)}),{indices:e,bboxes:t,columnHeight:Math.ceil(r),columnWidth:Math.ceil(n)}}),h=0,d=0;return l.forEach(e=>{h+=e.columnWidth,d=Math.max(d,e.columnHeight)}),r=Math.max(h,r),n=Math.max(d,n),{columns:l,startIndex:e[0][0],endIndex:o,pageWidth:h,pageHeight:d}}),maxPageWidth:r,maxPageHeight:n}}(u,e,t,s,r)}({orientation:n,bboxes:e,maxHeight:i-(o?l.height:0),maxWidth:g,itemPaddingY:r,itemPaddingX:a,forceResult:m});d=y?.pages??[],u=y?.maxPageWidth??0,c=y?.maxPageHeight??0;let f=d.length;if(this.pagination.visible=f>1,this.pagination.totalPages=f,this.pagination.update(),this.pagination.updateMarkers(),h=this.pagination.getBBox(),!this.pagination.visible)break}while(!g(h));return{maxPageWidth:u,maxPageHeight:c,pages:d,paginationBBox:h,paginationVertical:o}}updatePositions(e=0){let{item:{paddingY:t},itemSelection:i,pages:a}=this;if(a.length<1||!a[e])return;let{columns:s,startIndex:r,endIndex:n}=a[e],o=0,l=0,h=s.length,d=s[0].indices.length,u="horizontal"===this.getOrientation(),c=s[0].bboxes[0].height+t,p=[];i.each((e,t,i)=>{let a,g;if(i<r||i>n){e.visible=!1;return}let m=i-r;u?(a=m%h,g=Math.floor(m/h)):(a=Math.floor(m/d),g=m%d),e.visible=!0;let y=s[a];y&&(l=Math.floor(c*g),o=Math.floor(p[g]??0),p[g]=(p[g]??0)+y.columnWidth,e.translationX=o,e.translationY=l)})}updatePageNumber(e){let{itemSelection:t,group:i,pagination:a,pages:s,toggleSeries:r}=this,{startIndex:n,endIndex:o}=s[e];0===n?this.paginationTrackingIndex=0:e===s.length-1?this.paginationTrackingIndex=o:this.paginationTrackingIndex=Math.floor((n+o)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:a,interactive:r}),this.ctx.updateService.update(7)}update(){let{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){this.ctx.contextMenuRegistry.setVisible("toggle-series-visibility",this.toggleSeries),this.ctx.contextMenuRegistry.setVisible("toggle-other-series",this.toggleSeries)}getLineStyles(e){let{stroke:t,strokeOpacity:i=1,strokeWidth:a,lineDash:s}=e.line??{},r=Math.min(2,a??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??r,lineDash:s}}getMarkerStyles({marker:e}){let{fill:t,stroke:i,strokeOpacity:a=1,fillOpacity:s=1,strokeWidth:r,lineDash:n,lineDashOffset:o}=e,l=Math.min(2,r??1);return e3(t)&&(t.width=8,t.height=8,t.padding=1,t.strokeWidth=Math.min(2,t.strokeWidth??2)),e5(t)&&(t.fit="contain",t.width=void 0,t.height=void 0,t.repeat="no-repeat"),oc({fill:t,stroke:i,strokeOpacity:a,fillOpacity:s,strokeWidth:this.item.marker.strokeWidth??l,lineDash:n,lineDashOffset:o},hj,hz,hR)}computePagedBBox(){let e=tu.computeChildrenBBox(this.group.children());if(this.pages.length>1){let[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}return e}findNode(e){let{datum:t,proxyButton:i}=this.itemSelection.select(t=>t.datum?.itemId===e.itemId)[0]??{};if(void 0===t||void 0===i)throw Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){let{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){let{sourceEvent:i}=e,a=t.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&1>=this.getVisibleItemCount()?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;let s=this.ctx.chartService.series.length>1&&this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries!==!0;this.ctx.contextMenuRegistry.setVisible("toggle-other-series",s);let{offsetX:r,offsetY:n}=i,{x:o,y:l}=to.toCanvasPoint(t,r,n);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:e,canvasX:o,canvasY:l},{legendItem:a})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){let{listeners:{legendItemClick:a},ctx:{chartService:s,highlightManager:r},preventHidingAll:n,toggleSeries:o}=this;if(!t)return!1;let{legendType:l,seriesId:h,itemId:d,enabled:u}=t,c=s.series.find(e=>e.id===h);if(!c)return!1;let p=u,g=hw("click",d,c.id,e);return a?.(g.apiEvent),!!g.defaultPrevented||(o&&(p=!u,n&&!p&&2>this.getVisibleItemCount()&&(p=!0),i.setChecked(p),this.ctx.chartEventManager.legendItemClick(l,c,d,p,t.legendItemName)),p?r.updateHighlight(this.id,{series:c,itemId:d,datum:void 0,datumIndex:void 0}):r.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1}),!0)}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){let{listeners:{legendItemDoubleClick:i},ctx:{chartService:a},toggleSeries:s}=this;if(!t)return!1;let{legendType:r,id:n,itemId:o,seriesId:l}=t,h=a.series.find(e=>e.id===n);if(!h)return!1;let d=hw("dblclick",o,h.id,e);if(i?.(d.apiEvent),d.defaultPrevented)return!0;if(s){let e=a.series.flatMap(e=>e.getLegendData("category")),t=0,i=new Set;for(let a of e)a.enabled&&(t+=1,null!=a.legendItemName&&i.add(a.legendItemName));i.size>0&&(t=i.size);let s=e.find(e=>e.itemId===o&&e.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(r,h,o,s?.enabled??!1,t,s?.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=to.toCanvas(t).computeCenter():(e.preventDefault(),i=to.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){if(!this.enabled)throw Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);let i=t.datum,a=i?this.ctx.chartService.series.find(e=>e.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){let a=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,a,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&a?this.updateHighlight({series:a,itemId:i?.itemId,datum:void 0,datumIndex:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){let t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;let{layoutBox:t}=e,{x:i,y:a,width:s,height:r}=t,[n,o]=this.calculateLegendDimensions(t),{oldPages:l}=this.calcLayout(n,o),h=this.computePagedBBox(),d=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return r-h.height;default:return s-h.width}};if(this.visible){let e,n,o=this.spacing;switch(this.position){case"top":case"bottom":e=(s-h.width)/2,n=d(),t.shrink(h.height+o,this.position);break;default:e=d(),n=(r-h.height)/2,t.shrink(h.width+o,this.position)}this.group.translationX=Math.floor(i+e-h.x),this.group.translationY=Math.floor(a+n-h.y)}return l}positionLegendDOM(e){let{ctx:t,itemSelection:i,pagination:a,pages:s,toggleSeries:r,group:n,listeners:{legendItemClick:o,legendItemDoubleClick:l}}=this,h=this.visible&&this.enabled;this.domProxy.update({visible:h,interactive:r||null!=l||null!=o,ctx:t,itemSelection:i,group:n,pagination:a,oldPages:e,newPages:s,datumReader:this,itemListener:this})}calculateLegendDimensions(e){let t,i,{width:a,height:s}=e,r=a/s;switch(this.position){case"top":case"bottom":{let e=r<1?Math.min(.5,1/r*.2):.2;t=this.maxWidth?Math.min(this.maxWidth,a):a,i=this.maxHeight?Math.min(this.maxHeight,s):Math.round(s*e);break}default:{let e=r>1?Math.min(.5,.25*r):.25;t=this.maxWidth?Math.min(this.maxWidth,a):Math.round(a*e),i=this.maxHeight?Math.min(this.maxHeight,s):s}}return[t,i]}cachedCallWithContext(e,...t){let{callbackCache:i,chartService:a}=this.ctx;return i.call(this,a,e,...t)}};hP.className="Legend",l([ew],hP.prototype,"toggleSeries",2),l([ew],hP.prototype,"pagination",2),l([ew],hP.prototype,"item",2),l([ew],hP.prototype,"listeners",2),l([k((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;let{ctx:{legendManager:a,stateManager:s}}=e;!1===i&&!0===t&&s.restoreState(a)}),ew],hP.prototype,"enabled",2),l([ew],hP.prototype,"position",2),l([ew],hP.prototype,"maxWidth",2),l([ew],hP.prototype,"maxHeight",2),l([ew],hP.prototype,"reverseOrder",2),l([ew],hP.prototype,"orientation",2),l([ew],hP.prototype,"preventHidingAll",2),l([ew],hP.prototype,"spacing",2);var hF={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new hP(e),packageType:"community",removable:"standalone-only"},hB={};o(hB,{CARTESIAN_AXIS_TYPE:()=>hU,CARTESIAN_POSITION:()=>hY,FONT_SIZE:()=>hG,FONT_SIZE_RATIO:()=>hV,POLAR_AXIS_SHAPE:()=>h$,POLAR_AXIS_TYPE:()=>h_});var hG=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(hG||{}),hV=(e=>(e[e.SMALLEST=.6666666666666666]="SMALLEST",e[e.SMALLER=.8333333333333334]="SMALLER",e[e.SMALL=1]="SMALL",e[e.MEDIUM=1.0833333333333333]="MEDIUM",e[e.LARGE=1.1666666666666667]="LARGE",e[e.LARGEST=1.4166666666666667]="LARGEST",e))(hV||{}),hY=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(hY||{}),hU=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.UNIT_TIME="unit-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(hU||{}),h_=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(h_||{}),h$=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(h$||{}),hW={};o(hW,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>dn,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>dd,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>du,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>dc,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>dp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>dl,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>dh,DEFAULT_CAPTION_ALIGNMENT:()=>hQ,DEFAULT_CAPTION_LAYOUT_STYLE:()=>hX,DEFAULT_FIBONACCI_STROKES:()=>da,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>dr,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>di,DEFAULT_GRIDLINE_ENABLED:()=>db,DEFAULT_POLAR_SERIES_STROKE:()=>de,DEFAULT_SEPARATION_LINES_COLOUR:()=>hZ,DEFAULT_SHADOW_COLOUR:()=>hK,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>dt,DEFAULT_TEXTBOX_COLOR:()=>dy,DEFAULT_TEXTBOX_FILL:()=>dg,DEFAULT_TEXTBOX_STROKE:()=>dm,DEFAULT_TEXT_ANNOTATION_COLOR:()=>ds,DEFAULT_TOOLBAR_POSITION:()=>df,IS_DARK_THEME:()=>hH,PALETTE_ALT_DOWN_FILL:()=>h6,PALETTE_ALT_DOWN_STROKE:()=>h5,PALETTE_ALT_NEUTRAL_FILL:()=>h8,PALETTE_ALT_NEUTRAL_STROKE:()=>h7,PALETTE_ALT_UP_FILL:()=>h9,PALETTE_ALT_UP_STROKE:()=>h3,PALETTE_DOWN_FILL:()=>h1,PALETTE_DOWN_STROKE:()=>hJ,PALETTE_NEUTRAL_FILL:()=>h4,PALETTE_NEUTRAL_STROKE:()=>h2,PALETTE_UP_FILL:()=>h0,PALETTE_UP_STROKE:()=>hq});var hH=Symbol("is-dark-theme"),hZ=Symbol("default-separation-lines-colour"),hK=Symbol("default-shadow-colour"),hX=Symbol("default-caption-layout-style"),hQ=Symbol("default-caption-alignment"),hq=Symbol("palette-up-stroke"),hJ=Symbol("palette-down-stroke"),h0=Symbol("palette-up-fill"),h1=Symbol("palette-down-fill"),h2=Symbol("palette-neutral-stroke"),h4=Symbol("palette-neutral-fill"),h3=Symbol("palette-alt-up-stroke"),h5=Symbol("palette-alt-down-stroke"),h9=Symbol("palette-alt-up-fill"),h6=Symbol("palette-alt-down-fill"),h8=Symbol("palette-gray-fill"),h7=Symbol("palette-gray-stroke"),de=Symbol("default-polar-series-stroke"),dt=Symbol("default-sparkline-crosshair-stroke"),di=Symbol("default-financial-charts-annotation-stroke"),da=Symbol("default-hierarchy-strokes"),ds=Symbol("default-text-annotation-color"),dr=Symbol("default-financial-charts-annotation-background-fill"),dn=Symbol("default-annotation-handle-fill"),dl=Symbol("default-annotation-statistics-fill"),dh=Symbol("default-annotation-statistics-stroke"),dd=Symbol("default-annotation-statistics-color"),du=Symbol("default-annotation-statistics-divider-stroke"),dc=Symbol("default-annotation-statistics-fill"),dp=Symbol("default-annotation-statistics-stroke"),dg=Symbol("default-textbox-fill"),dm=Symbol("default-textbox-stroke"),dy=Symbol("default-textbox-color"),df=Symbol("default-toolbar-position"),db=Symbol("default-gridline-enabled"),dx=[{type:"number",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"left","bottom"]}}],dM={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},{$palette:"fillFallback"},{$palette:"fill"}]},dv={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},{$palette:"fillsFallback"},{$palette:"fills"}]},dS={$if:[{$isGradient:[{$palette:"fill"}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},dD={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]},{$isImage:[{$value:"$1"}]}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},dI={type:"pattern",pattern:"forward-slanted-lines",width:10,height:10,padding:2,fill:{$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isImage:[{$palette:"fill"}]}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:dS,strokeOpacity:1,strokeWidth:4,backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},dL={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0};function dA(e){return F(e,e=>{let t=ey.fromString(e);return[ey.darken(t,.15).toString(),e,ey.lighten(t,.15).toString()]})}function dw(e,t,i,a,s){let{addPhaseFn:r,updatePhaseFn:n,removePhaseFn:o}=s,l=(a,s,r)=>{i.animate({id:`${e}_${t}_${s.id}_${a}`,groupId:e,from:0,to:1,ease:aB,collapsable:!1,onUpdate(e,t){t&&"removed"!==a||(s.path.clear(!0),r(e,s),s.checkPathDirty())},onStop(){"added"===a&&(s.path.clear(!0),r(1,s),s.checkPathDirty())},phase:rT[a]})};for(let e of a)i.isSkipped()||(l("removed",e,o),l("updated",e,n)),l("added",e,r)}function dC({id:e},t,i,...a){for(let e of a)e.cleanup();rO(e,t,i,a,{opacity:0},{opacity:1},{phase:"trailing"})}function dk({id:e},t,i,...a){rO(e,t,i,a,{opacity:1},{opacity:0},{phase:"remove"})}function dN(e){return{opacity:1}}var dT=class extends eC{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(e){this.markDirty()}},dE=class extends dT{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};l([ew,Z()],dE.prototype,"enabled",2),l([ew,Z()],dE.prototype,"color",2),l([ew,Z()],dE.prototype,"xOffset",2),l([ew,Z()],dE.prototype,"yOffset",2),l([ew,Z()],dE.prototype,"blur",2);var dO=class extends eC{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};l([ew],dO.prototype,"fill",2),l([ew],dO.prototype,"fillOpacity",2),l([ew],dO.prototype,"stroke",2),l([ew],dO.prototype,"strokeWidth",2),l([ew],dO.prototype,"strokeOpacity",2),l([ew],dO.prototype,"lineDash",2),l([ew],dO.prototype,"lineDashOffset",2);var dj=class extends eC{};l([ew],dj.prototype,"strokeWidth",2),l([ew],dj.prototype,"dimOpacity",2),l([ew],dj.prototype,"enabled",2);var dz=class extends eC{constructor(){super(...arguments),this.color="black"}};l([ew],dz.prototype,"color",2);var dR=class extends eC{constructor(){super(...arguments),this.enabled=!0}};l([ew],dR.prototype,"enabled",2);var dP=class extends eC{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1}};l([ew],dP.prototype,"type",2),l([ew],dP.prototype,"colorStops",2),l([ew],dP.prototype,"bounds",2),l([ew],dP.prototype,"gradient",2),l([ew],dP.prototype,"rotation",2),l([ew],dP.prototype,"reverse",2);var dF=class extends eC{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};l([ew],dF.prototype,"type",2),l([ew],dF.prototype,"colorStops",2),l([ew],dF.prototype,"bounds",2),l([ew],dF.prototype,"gradient",2),l([ew],dF.prototype,"rotation",2),l([ew],dF.prototype,"scale",2),l([ew],dF.prototype,"reverse",2),l([ew],dF.prototype,"path",2),l([ew],dF.prototype,"pattern",2),l([ew],dF.prototype,"width",2),l([ew],dF.prototype,"height",2),l([ew],dF.prototype,"padding",2),l([ew],dF.prototype,"fill",2),l([ew],dF.prototype,"fillOpacity",2),l([ew],dF.prototype,"backgroundFill",2),l([ew],dF.prototype,"backgroundFillOpacity",2),l([ew],dF.prototype,"stroke",2),l([ew],dF.prototype,"strokeOpacity",2),l([ew],dF.prototype,"strokeWidth",2);var dB=class extends eC{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};l([ew],dB.prototype,"type",2),l([ew],dB.prototype,"url",2),l([ew],dB.prototype,"rotation",2),l([ew],dB.prototype,"scale",2),l([ew],dB.prototype,"backgroundFill",2),l([ew],dB.prototype,"backgroundFillOpacity",2),l([ew],dB.prototype,"repeat",2),l([ew],dB.prototype,"fit",2);var dG=class extends eC{constructor(){super(...arguments),this.item=new dO,this.series=new dj,this.text=new dz}};l([ew],dG.prototype,"item",2),l([ew],dG.prototype,"series",2),l([ew],dG.prototype,"text",2);var dV=class extends eC{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new dR,this.highlightStyle=new dG}handleUnknownProperties(e,t){"context"in t&&(this.context=t.context,e.delete("context"))}};l([ew],dV.prototype,"id",2),l([ew],dV.prototype,"visible",2),l([ew],dV.prototype,"focusPriority",2),l([ew],dV.prototype,"showInLegend",2),l([ew],dV.prototype,"cursor",2),l([ew],dV.prototype,"nodeClickRange",2),l([ew],dV.prototype,"highlight",2),l([ew],dV.prototype,"highlightStyle",2);var dY=class extends dT{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillGradientDefaults=new dP,this.fillPatternDefaults=new dF,this.fillImageDefaults=new dB,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){let{size:e,shape:t,fill:i,fillOpacity:a,stroke:s,strokeWidth:r,strokeOpacity:n,lineDash:o,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:a,stroke:s,strokeWidth:r,strokeOpacity:n,lineDash:o,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};l([ew,Z()],dY.prototype,"enabled",2),l([ew,Z({equals:H})],dY.prototype,"shape",2),l([ew,Z()],dY.prototype,"size",2),l([ew,Z({equals:O})],dY.prototype,"fill",2),l([ew],dY.prototype,"fillGradientDefaults",2),l([ew],dY.prototype,"fillPatternDefaults",2),l([ew],dY.prototype,"fillImageDefaults",2),l([ew,Z()],dY.prototype,"fillOpacity",2),l([ew,Z()],dY.prototype,"stroke",2),l([ew,Z()],dY.prototype,"strokeWidth",2),l([ew,Z()],dY.prototype,"strokeOpacity",2),l([ew],dY.prototype,"lineDash",2),l([ew],dY.prototype,"lineDashOffset",2),l([ew,Z({equals:H})],dY.prototype,"itemStyler",2);var dU=class extends eC{constructor(){super(...arguments),this.enabled=!1}};l([ew],dU.prototype,"enabled",2);var d_=class extends eC{constructor(){super(...arguments),this.interaction=new dU,this.position=new oH,this.range=void 0,this.class=void 0}formatTooltip(e,t,i,a){let s=null==this.renderer?void 0:aw(e,t,this.renderer,[a]);return"string"==typeof s?{type:"raw",rawHtmlString:s}:null!=s?{type:"structured",...i,...s}:{type:"structured",...i}}};l([ew],d_.prototype,"enabled",2),l([ew],d_.prototype,"showArrow",2),l([ew],d_.prototype,"renderer",2),l([ew],d_.prototype,"interaction",2),l([ew],d_.prototype,"position",2),l([ew],d_.prototype,"range",2),l([ew],d_.prototype,"class",2);var d$=class{constructor(e,t,i){this.root=new dZ(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){this.root.addElem({hitTester:e,value:t,distanceSquared:(t,i)=>e.distanceSquared(t,i)})}find(e,t){let i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},dW=class{constructor(e,t,i,a){this.nw=e,this.ne=t,this.sw=i,this.se=a}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},dH=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??y.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(void 0===this.subdivisions?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){for(let e of(this.subdivisions=this.makeSubdivisions(),this.elems))this.subdivisions.addElem(e);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){let{x:e,y:t,width:i,height:a}=this.boundary,{capacity:s}=this,r=this.maxdepth-1,n=i/2,o=a/2,l=new y(e,t,n,o),h=new y(e+n,t,n,o),d=new y(e,t+o,n,o),u=new y(e+n,t+o,n,o);return new dW(this.child(s,r,l),this.child(s,r,h),this.child(s,r,d),this.child(s,r,u))}},dZ=class e extends dH{addCondition(e){let{x:t,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(t,i)}findCondition(e,t,i){let{best:a}=i;return 0!==a.distanceSquared&&this.boundary.distanceSquared(e,t)<a.distanceSquared}findAction(e,t,i){let a=g(e,t,this.elems,i.best.distanceSquared);void 0!==a.nearest&&a.distanceSquared<i.best.distanceSquared&&(i.best=a)}child(t,i,a){return new e(t,i,a)}},dK=class extends ob{constructor({clipFocusBox:e,categoryKey:t,...i}){super(i),this.categoryKey=t,this.clipFocusBox=e??!0}getScaleInformation({xScale:e,yScale:t}){return{isContinuousX:sc.is(e),isContinuousY:sc.is(t),xScaleType:e?.type,yScaleType:t?.type}}getModulePropertyDefinitions(){let e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());let{dataModel:a,processedData:s}=await e.request(this.id,t??[],i);return this.dataModel=a,this.processedData=s,this.dispatch("data-processed",{dataModel:a,processedData:s}),{dataModel:a,processedData:s}}isProcessedDataAnimatable(){let e=this.processedData?.reduced?.animationValidation;if(!e)return!0;let{orderedKeys:t,uniqueKeys:i}=e;return t&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){let t=this.getNodeData();if(void 0===t||0===t.length)return;let i=this.computeFocusDatumIndex(e,t);if(void 0===i)return;let{clipFocusBox:a}=this,s=t[i],r={...e,datumIndex:i},n=this.computeFocusBounds(r);if(void 0!==n)return{bounds:n,clipFocusBox:a,datum:s,datumIndex:i}}isDatumEnabled(e,t){let{missing:i=!1,enabled:a=!0,focusable:s=!0}=e[t];return!i&&a&&s}computeFocusDatumIndex(e,t){let i,a=(e,i)=>{for(;e>=0&&!this.isDatumEnabled(t,e);)e+=i;return -1===e?void 0:e},r=(e,i)=>{for(;e<t.length&&!this.isDatumEnabled(t,e);)e+=i;return e===t.length?void 0:e},n=(0,s.qE)(0,e.datumIndex,t.length-1);return void 0!==(i=e.datumIndexDelta<0?a(n,e.datumIndexDelta):e.datumIndexDelta>0?r(n,e.datumIndexDelta):r(n,1)??a(n,-1))?i:0===e.datumIndexDelta?void 0:e.datumIndex-e.datumIndexDelta}keysOrValues(e){let t=this.dataModel.resolveProcessedDataIndexById(this,e);return this.processedData?.keys[t]?.get(this.id)??this.processedData?.columns[t]??[]}getCategoryKey(){return this.categoryKey}getCategoryValue(e){let{processedData:t,dataModel:i}=this,a=this.getCategoryKey();if(t&&i&&a)return t.invalidData?.get(this.id)?.[e]?void 0:this.keysOrValues(a)[e]}datumIndexForCategoryValue(e){let{processedData:t,dataModel:i}=this,a=this.getCategoryKey();if(!t||!i||!a)return;e=e.valueOf();let s=t.invalidData?.get(this.id),r=this.keysOrValues(a);for(let t=0;t<r.length;t+=1){if(s?.[t]===!0)continue;let i=r[t]?.valueOf();if(O(e,i))return t}}},dX={x:["xKey"],y:["yKey"]},dQ={x:["xName"],y:["yName"]},dq=class extends oy{constructor(e,t,i,a){super(e,t,i,a),this.xKey=a.properties.xKey,this.yKey=a.properties.yKey}},dJ=class extends dV{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};l([ew],dJ.prototype,"legendItemName",2),l([ew],dJ.prototype,"pickOutsideVisibleMinorAxis",2);var d0=class extends dK{constructor({pathsPerSeries:e=["path"],hasMarkers:t=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:a=[],datumSelectionGarbageCollection:s=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:n=!1,animationResetFns:o,directionKeys:l,directionNames:h,...d}){if(super({directionKeys:l,directionNames:h,canHaveAxes:!0,...d}),this.NodeEvent=dq,this.dataNodeGroup=this.contentGroup.appendChild(new tu({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new tu({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new tg({name:`${this.id}-series-labels`})),this.labelSelection=rR.select(this.labelGroup,io),this.highlightSelection=rR.select(this.highlightNode,()=>this.opts.hasMarkers?new oO:this.nodeFactory()),this.highlightLabelSelection=rR.select(this.highlightLabel,io),this.annotationSelections=new Set,this.debug=x.create(),!l||!h)throw Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,hasMarkers:t,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:a,directionKeys:l,directionNames:h,animationResetFns:o,animationAlwaysUpdateSelections:n,datumSelectionGarbageCollection:s,markerSelectionGarbageCollection:r},this.paths=e.map(e=>new ox({name:`${this.id}-${e}`})),this.datumSelection=rR.select(this.dataNodeGroup,()=>this.nodeFactory(),s),this.markerSelection=rR.select(this.markerGroup,oO,r),this.animationState=new rU("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:e=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(e):this.animateWaitingUpdateReady(e)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:e=>this.resetAllAnimation(e),reset:"empty"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths,t,i)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths,t,i)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(e,t,i){for(let t of e)this.contentGroup.appendChild(t)}detachPaths(e,t,i){for(let t of e)this.contentGroup.removeChild(t)}renderToOffscreenCanvas(){let e=this.getNodeData();return null!=e&&e.length>100}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e?this.animationState.transition("skip"):"disabled"===e&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:e}){let{visible:t,_contextNodeData:i}=this,a=this.ctx.highlightManager?.getActiveHighlight()?.series===this,s=this.checkResize(e),r=this.updateHighlightSelection(a);this.updateSelections(t),this.updateNodes(r,a,t);let n=this.getAnimationData(e,i);n&&(s&&this.animationState.transition("resize",n),this.animationState.transition("update",n))}updateSelections(e){var t;let i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((e||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();let e=this.isProcessedDataAnimatable();this._contextNodeData&&((t=this._contextNodeData).animationValid??(t.animationValid=e));let{dataModel:i,processedData:a}=this;void 0!==i&&void 0!==a&&this.dispatch("data-update",{dataModel:i,processedData:a})}this.updateSeriesSelections()}}updateSeriesSelections(e){let{datumSelection:t,labelSelection:i,markerSelection:a,paths:s}=this,r=this._contextNodeData;if(!r)return;let{nodeData:n,labelData:o,itemId:l}=r;this.updatePaths({seriesHighlighted:e,itemId:l,contextData:r,paths:s}),this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:n,markerSelection:a}))}getShapeFillBBox(){let{axes:e}=this,t=e.x,i=e.y,[a,s]=sh(t?.range??[0,1]),[r,n]=sh(i?.range??[0,1]),o=this.getSeriesDomain("x"),l=[t?.scale.convert(o.at(0)),t?.scale.convert(o.at(-1))],h=this.getSeriesDomain("y"),d=[i?.scale.convert(h.at(0)),i?.scale.convert(h.at(-1))],[u,c]=sh(l),[p,g]=sh(d);return{axis:new y(a,r,s-a,n-r),series:new y(u,p,c-u,g-p)}}updateNodes(e,t,i){let{highlightSelection:a,highlightLabelSelection:s,opts:{hasMarkers:r,hasHighlightedLabels:n}}=this,o=!this.ctx.animationManager.isSkipped(),l=this.visible&&null!=this._contextNodeData&&i;this.contentGroup.visible=o||l,this.highlightGroup.visible=(o||l)&&t;let h=this.getOpacity();r?(this.updateMarkerNodes({markerSelection:a,isHighlight:!0}),this.animationState.transition("highlightMarkers",a)):(this.updateDatumNodes({datumSelection:a,isHighlight:!0}),this.animationState.transition("highlight",a)),n&&this.updateLabelNodes({labelSelection:s});let{dataNodeGroup:d,markerGroup:u,datumSelection:c,labelSelection:p,markerSelection:g,paths:m,labelGroup:y}=this,{itemId:f}=this.contextNodeData??{};d.opacity=h,d.visible=o||l,y.visible=l,r&&(u.opacity=h,u.visible=l),y&&(y.opacity=h),this.updatePathNodes({seriesHighlighted:t,itemId:f,paths:m,opacity:h,visible:l,animationEnabled:o}),d.visible&&(this.updateDatumNodes({datumSelection:c,highlightedItems:e,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:p}),r&&this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(e,t){let i=e.filter(e=>e.datum===t.datum&&e.itemId===t.itemId);return 0===i.length?void 0:i}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){let t,i,{highlightSelection:a,highlightLabelSelection:s,_contextNodeData:r}=this;if(!r)return;let n=this.ctx.highlightManager?.getActiveHighlight(),o=e&&n?.datum?n:void 0;if(null!=o){let e=this.isLabelEnabled(),{labelData:a,nodeData:s}=r;i=this.getHighlightData(s,o),t=e?this.getHighlightLabelData(a,o):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:i,highlightSelection:a}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:t,highlightLabelSelection:s}),i}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:e}of this.datumSelection)!0!==e.datum.missing&&(yield e)}getQuadTree(){if(void 0===this.quadtree){let{width:e,height:t}=this.ctx.scene.canvas,i=new y(0,0,e,t);this.quadtree=new d$(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodesExactShape(e){let t=super.pickNodesExactShape(e);if(0!==t.length)return t;let{x:i,y:a}=e,{opts:{hasMarkers:s}}=this,{dataNodeGroup:r,markerGroup:n}=this,o=r.pickNodes(i,a).filter(e=>!0!==e.datum.missing);if(0===o.length&&s&&(o=n?.pickNodes(i,a).filter(e=>!0!==e.datum.missing)),0!==o.length)return o.map(e=>e.datum);for(let t of this.moduleMap.modules()){let{datum:i}=t.pickNodeExact(e)??{};if(null!=i&&i?.missing!==!0)return[i]}return[]}pickNodeClosestDatum(e){let t,{x:i,y:a}=e,{axes:s,_contextNodeData:r}=this;if(!r)return;let n=s.x,o=s.y,l={x:i,y:a},h=1/0;for(let e of r.nodeData){let{point:{x:i=NaN,y:a=NaN}={}}=e;if(isNaN(i)||isNaN(a)||!(n?.inRange(i)&&o?.inRange(a)))continue;let s=Math.max((l.x-i)**2+(l.y-a)**2,0);s<h&&(h=s,t=e)}for(let i of this.moduleMap.modules()){let a=i.pickNodeNearest(e);if(void 0!==a&&a.distanceSquared<h){h=a.distanceSquared,t=a.datum;break}}if(t){let e=Math.max(Math.sqrt(h)-(t.point?.size??0)/2,0);return{datum:t,distance:e}}}pickNodeMainAxisFirst(e,t){let i,{x:a,y:s}=e,{axes:r,_contextNodeData:n}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!n)return;let l=r.x,h=r.y,d=[l,h].filter(lc.is).map(e=>e.direction);if(t&&0===d.length)return;let[u="x"]=d,c=[a,s];"x"!==u&&c.reverse();let p=[1/0,1/0];for(let e of n.nodeData){let{x:t=NaN,y:a=NaN}=e.point??e.midPoint??{};if(isNaN(t)||isNaN(a)||!0===e.missing)continue;let s=[l?.inRange(t),h?.inRange(a)];if("x"!==u&&s.reverse(),!s[0]||!o&&!s[1])continue;let r=[t,a];"x"!==u&&r.reverse();let n=!0;for(let e=0;e<r.length;e++){let t=Math.abs(r[e]-c[e]);if(t>p[e]){n=!1;break}t<p[e]&&(p[e]=t,p.fill(1/0,e+1,p.length))}n&&(i=e)}if(i){let t=Math.max(p[0]**2+p[1]**2-(i.point?.size??0),0);for(let a of this.moduleMap.modules()){let s=a.pickNodeMainAxisFirst(e);if(void 0!==s&&s.distanceSquared<t){i=s.datum,t=s.distanceSquared;break}}return{datum:i,distance:Math.sqrt(t)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRange(e,t,i){let a=this.keysOrValues(e);return a7(i?.length??a.length,t,e=>{let t=i?.[e]??e;return this.xCoordinateRange(a[t],0,t)})}domainForVisibleRange(e,t,i,a,s,r){let{processedData:n,dataModel:o}=this,[l,h]=a,d=this.keysOrValues(i);if(s){let e=this.visibleRange(i,a,r);return o.getDomainBetweenRange(this,t,e,n)}let u=t.map(e=>this.keysOrValues(e)),c=1/0,p=-1/0;return(d.forEach((e,i)=>{let[a,s]=this.xCoordinateRange(e,0,i);if(!(s<l)&&!(a>h))for(let e=0;e<t.length;e++){let t=u[e][i];c=Math.min(c,t),p=Math.max(p,t)}}),c>p)?[NaN,NaN]:[c,p]}domainForClippedRange(e,t,i,a){let{processedData:r,dataModel:n,axes:o}=this,l=function(e){let t,i;if((e instanceof hd||e instanceof hp)&&({min:t,max:i}=e),null!=t||null!=i)return t??(t=-1/0),i??(i=1/0),[t,i]}(o["x"===e?"y":"x"]);if(!l)return t.flatMap(e=>n.getDomain(this,e,"value",r));let h=this.keysOrValues(i);if(a){let e=function(e,t,i){let a=t[0].valueOf(),r=t[1].valueOf(),n=(0,s.S3)(0,e-1,e=>{let t=i(e)?.valueOf();return!Number.isFinite(t)||t>=a}),o=(0,s.I5)(0,e-1,e=>{let t=i(e)?.valueOf();return!Number.isFinite(t)||t<=r});return null==n||null==o?[0,0]:[n,o=Math.min(o+1,e)]}(h.length,l,e=>h[e]);return n.getDomainBetweenRange(this,t,e,r)}let d=t.map(e=>this.keysOrValues(e)),u=l[0].valueOf(),c=l[1].valueOf(),p=[];return h.forEach((e,t)=>{let i=e.valueOf();if(i<u||i>c)return;let a=d.map(e=>e[t]);i>=u&&p.push(...a),i<=c&&p.push(...a)}),p}countVisibleItems(e,t,i,a,r){let{dataModel:n,processedData:o}=this;if(!n||!o)return 1/0;let l=this.keysOrValues(e),h=t.map(e=>n.resolveColumnById(this,e,o)),d=this.axes.x,u=this.axes.y,c=this.shouldFlipXY(),p=d.range,g=u.range,m=(e,t,i)=>e[0]+(i-t[0])/(t[1]-t[0])*(e[1]-e[0]),y=m(p,d.visibleRange,i[0]),f=m(p,d.visibleRange,i[1]),b=m(g,u.visibleRange,c?a[0]:a[1]),x=m(g,u.visibleRange,c?a[1]:a[0]),M=Math.round((i[0]+(i[1]-i[0])/2)*l.length);return st(0,l.length-1,M,r,e=>{let[t,i]=this.xCoordinateRange(l[e],0,e),[a,r]=this.yCoordinateRange(h.map(t=>t[e]),0,e);return!!(0,s.Bf)(t)&&!!(0,s.Bf)(i)&&!!(0,s.Bf)(a)&&!!(0,s.Bf)(r)&&(c&&([t,i,a,r]=[a,r,t,i]),t>=y&&i<=f&&a>=b&&r<=x)})}updateHighlightSelectionItem(e){let{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:a}=e,s=i??[];return t?this.updateMarkerSelection({nodeData:s,markerSelection:a}):this.updateDatumSelection({nodeData:s,datumSelection:a})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateMarkerSelection(e){return e.markerSelection}updateMarkerNodes(e){}updatePaths(e){e.paths.forEach(e=>e.visible=!1)}updatePathNodes(e){let{paths:t,opacity:i,visible:a}=e;for(let e of t)e.opacity=i,e.visible=a}resetPathAnimation(e){let{path:t}=this.opts?.animationResetFns??{};t&&e.paths.forEach(e=>{rz([e],t)})}resetDatumAnimation(e){let{datum:t}=this.opts?.animationResetFns??{};t&&rz([e.datumSelection],t)}resetLabelAnimation(e){let{label:t}=this.opts?.animationResetFns??{};t&&rz([e.labelSelection],t)}resetMarkerAnimation(e){let{marker:t}=this.opts?.animationResetFns??{};t&&this.opts.hasMarkers&&rz([e.markerSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),e.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){let{datum:t}=this.opts?.animationResetFns??{};t&&rz([e],t)}animateReadyHighlightMarkers(e){let{marker:t}=this.opts?.animationResetFns??{};t&&rz([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){let{_contextNodeData:i}=this;if(i)return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof hl){let{range:t,domain:i}=e;return{type:"log",convert:t=>e.convert(t),domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof sc){let{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof sX){let{domain:t}=e;return{type:"category",domain:t,inset:e.inset,step:e.step}}}calculateScaling(){let e={};for(let t of Object.values(ic)){let i=this.axes[t];if(!i)continue;let a=this.getScaling(i.scale);null!=a&&(e[t]=a)}return e}},d1=class extends eC{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};l([ew],d1.prototype,"type",2),l([ew],d1.prototype,"tension",2),l([ew],d1.prototype,"position",2);var d2=class extends dJ{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillGradientDefaults=new dP,this.fillPatternDefaults=new dF,this.fillImageDefaults=new dB,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new d1,this.shadow=new dE,this.marker=new dY,this.label=new nD,this.tooltip=new d_,this.connectMissingData=!1}};function d4(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function d3(e,t,i){let[a,s]=d4(e),r=s.x!==a.x?(i.x-t.x)/(s.x-a.x):0,n=s.y!==a.y?(i.y-t.y)/(s.y-a.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-a.x)*r,cp1y:i.y-(e.cp2y-a.y)*n,cp2x:i.x-(e.cp1x-a.x)*r,cp2y:i.y-(e.cp1y-a.y)*n,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-a.x)*r}}}function d5(e,t,i){let{moveTo:a}=e,[s,r]=function(e){let t=d4(e);return t[0].x>t[1].x&&t.reverse(),t}(e),{x:n,y:o}=s,{x:l,y:h}=r;if(i<n)return d3(e,s,s);if(t>l)return d3(e,r,r);switch(e.type){case"linear":{let e=o===h?void 0:(h-o)/(l-n),s=null==e?o:e*(t-n)+o,r=null==e?o:e*(i-n)+o;return{type:"linear",moveTo:a,x0:t,y0:s,x1:i,y1:r}}case"step":if(i<=e.stepX){let s=e.y0;return{type:"step",moveTo:a,x0:t,y0:s,x1:i,y1:s,stepX:i}}if(t>=e.stepX){let s=e.y1;return{type:"step",moveTo:a,x0:t,y0:s,x1:i,y1:s,stepX:t}}{let{y0:s,y1:r,stepX:n}=e;return{type:"step",moveTo:a,x0:t,y0:s,x1:i,y1:r,stepX:n}}case"cubic":{let s=eW(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t),[r,n]=eH(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,s),o=eW(n[0].x,n[1].x,n[2].x,n[3].x,i);return[n,r]=eH(n[0].x,n[0].y,n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y,o),{type:"cubic",moveTo:a,cp0x:n[0].x,cp0y:n[0].y,cp1x:n[1].x,cp1y:n[1].y,cp2x:n[2].x,cp2y:n[2].y,cp3x:n[3].x,cp3y:n[3].y}}}}l([ew],d2.prototype,"xKey",2),l([ew],d2.prototype,"xName",2),l([ew],d2.prototype,"yKey",2),l([ew],d2.prototype,"yName",2),l([ew],d2.prototype,"yFilterKey",2),l([ew],d2.prototype,"normalizedTo",2),l([ew],d2.prototype,"fill",2),l([ew],d2.prototype,"fillGradientDefaults",2),l([ew],d2.prototype,"fillPatternDefaults",2),l([ew],d2.prototype,"fillImageDefaults",2),l([ew],d2.prototype,"fillOpacity",2),l([ew],d2.prototype,"stroke",2),l([ew],d2.prototype,"strokeWidth",2),l([ew],d2.prototype,"strokeOpacity",2),l([ew],d2.prototype,"lineDash",2),l([ew],d2.prototype,"lineDashOffset",2),l([ew],d2.prototype,"interpolation",2),l([ew],d2.prototype,"shadow",2),l([ew],d2.prototype,"marker",2),l([ew],d2.prototype,"label",2),l([ew],d2.prototype,"tooltip",2),l([ew],d2.prototype,"connectMissingData",2);var d9={start:0,middle:.5,end:1};function d6(e,t){if("linear"===e.type){let{x0:i,y0:a,x1:s,y1:r}=e,n=(r-a)/(s-i)*(t-i)+a;return{leftCp1x:i,leftCp1y:a,leftCp2x:t,leftCp2y:n,stepX:t,stepY0:n,stepY1:n,rightCp1x:t,rightCp1y:n,rightCp2x:s,rightCp2y:r}}if("cubic"===e.type){let{cp0x:i,cp0y:a,cp1x:s,cp1y:r,cp2x:n,cp2y:o,cp3x:l,cp3y:h}=e,d=eW(i,s,n,l,t),[u,c]=eH(i,a,s,r,n,o,l,h,d),p=u[3].y;return{leftCp1x:u[1].x,leftCp1y:u[1].y,leftCp2x:u[2].x,leftCp2y:u[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:c[1].x,rightCp1y:c[1].y,rightCp2x:c[2].x,rightCp2y:c[2].y}}let{x0:i,y0:a,x1:s,y1:r,stepX:n}=e;return{leftCp1x:(i+n)/2,leftCp1y:a,leftCp2x:(i+n)/2,leftCp2y:a,stepX:n,stepY0:a,stepY1:r,rightCp1x:(n+s)/2,rightCp1y:r,rightCp2x:(n+s)/2,rightCp2y:r}}function d8(e,t,i,a,s,r,n){switch(t){case 0:n?e.moveTo(s,r):e.moveTo(i,a);break;case 1:n?e.lineTo(s,r):e.lineTo(i,a)}}function d7(e,t,i,a,s,r){r?e.lineTo(t,i):e.lineTo(a,s)}function ue(e,t,i,a,s,r,n,o,l,h){h?e.cubicCurveTo(r,n,a,s,t,i):e.cubicCurveTo(a,s,r,n,o,l)}function ut(e,t,i,a,s,r,n){n?(e.lineTo(r,s),e.lineTo(r,i),e.lineTo(t,i)):(e.lineTo(r,i),e.lineTo(r,s),e.lineTo(a,s))}function ui(e,t,i,a){let[s,r]=d4(t);switch(d8(e,i,s.x,s.y,r.x,r.y,a),t.type){case"linear":d7(e,t.x0,t.y0,t.x1,t.y1,a);break;case"cubic":ue(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,a);break;case"step":ut(e,t.x0,t.y0,t.x1,t.y1,t.stepX,a)}}function ua(e,t,i){var a,s,r,n;let[o,l]=d4(e),[h,d]=d4(t),u=(a=o.x,(h.x-a)*i+a),c=(s=o.y,(h.y-s)*i+s);return[{x:u,y:c},{x:(r=l.x,(d.x-r)*i+r),y:(n=l.y,(d.y-n)*i+n)}]}function us(e,t,i,a,s,r){var n,o,l,h,d,u,c,p,g,m,y,f,b,x,M,v;let[{x:S,y:D},{x:I,y:L}]=ua(t,i,a);if(d8(e,s,S,D,I,L,r),"cubic"===t.type&&"cubic"===i.type){let s=(n=t.cp1x,(i.cp1x-n)*a+n),d=(o=t.cp1y,(i.cp1y-o)*a+o);ue(e,S,D,s,d,(l=t.cp2x,(i.cp2x-l)*a+l),(h=t.cp2y,(i.cp2y-h)*a+h),I,L,r)}else if("step"===t.type&&"step"===i.type)ut(e,S,D,I,L,(d=t.stepX,(i.stepX-d)*a+d),r);else if("linear"===t.type&&"linear"===i.type)d7(e,S,D,I,L,r);else{let s;s="step"===t.type?t.stepX:"step"===i.type?i.stepX:(S+I)/2;let n=d6(t,s),o=d6(i,s),l=(u=n.leftCp1x,(o.leftCp1x-u)*a+u),h=(c=n.leftCp1y,(o.leftCp1y-c)*a+c),d=(p=n.leftCp2x,(o.leftCp2x-p)*a+p),A=(g=n.leftCp2y,(o.leftCp2y-g)*a+g),w=(m=n.stepX,(o.stepX-m)*a+m),C=(y=n.stepY0,(o.stepY0-y)*a+y),k=(f=n.stepY1,(o.stepY1-f)*a+f),N=(b=n.rightCp1x,(o.rightCp1x-b)*a+b),T=(x=n.rightCp1y,(o.rightCp1y-x)*a+x),E=(M=n.rightCp2x,(o.rightCp2x-M)*a+M),O=(v=n.rightCp2y,(o.rightCp2y-v)*a+v);r?(e.cubicCurveTo(E,O,N,T,w,k),e.lineTo(w,C),e.cubicCurveTo(d,A,l,h,S,D)):(e.cubicCurveTo(l,h,d,A,w,C),e.lineTo(w,k),e.cubicCurveTo(N,T,E,O,I,L))}}var ur=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(ur||{});function un(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"==typeof e)return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if("log"===t.type&&"number"==typeof e)return t.convert(e);if("category"!==t.type)return NaN;let i=t.domain.findIndex(t=>t===e);return(-1===i&&(i=t.domain.findIndex(t=>{var i;return null!=(i=e)&&null!=t&&"object"==typeof i&&"object"==typeof t&&("id"in i&&"id"in t?i.id===t.id:i.toString()===t.toString())})),i>=0)?t.inset+t.step*i:NaN}function uo(e){return ng(e).valueOf()}function ul({data:e},t){return e.map((e,i)=>({xValue0Index:t.indexOf(uo(e.xValue0)),xValue1Index:t.indexOf(uo(e.xValue1)),datumIndex:i}))}function uh(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;let a=d4(e),s=(a[1].x-a[0].x)/(i.xValue1Index-i.xValue0Index),r=a[0].x+(t-i.xValue0Index)*s;return d5(e,r,r+s)}function ud(e,t){let[i,a]=d4(e),s=un(0,t.scales.y);return d3(e,{x:i.x,y:s},{x:a.x,y:s})}function uu(e){let[t,i]=d4(e),{x:a,y:s}={x:(t.x+i.x)/2,y:(t.y+i.y)/2};switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:a,y0:s,x1:a,y1:s};case"step":return{type:"step",moveTo:e.moveTo,x0:a,y0:s,x1:a,y1:s,stepX:a};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:a,cp0y:s,cp1x:a,cp1y:s,cp2x:a,cp2y:s,cp3x:a,cp3y:s}}}function uc(e,t,i,a,s,r){let n,o;if(s.xValue0Index>=r.xValue1Index){let e=a.findLast(e=>e.xValue1Index<=r.xValue1Index)?.datumIndex,t=null!=e?i.data[e]:void 0;n=t?.xValue1,o=t?.yValue1}else if(s.xValue0Index<=r.xValue0Index){let e=a.find(e=>e.xValue0Index>=r.xValue0Index)?.datumIndex,t=null!=e?i.data[e]:void 0;n=t?.xValue0,o=t?.yValue0}if(null==n||null==o)switch(t){case 0:return ud(e,i);case 1:return uu(e)}let l={x:un(n,i.scales.x),y:un(o,i.scales.y)};return d3(e,l,l)}function up(e,t){if(null==t)return;let i=uo(e.xValue0),a=uo(e.xValue1);return t.find(e=>uo(e.xValue0)===i&&uo(e.xValue1)===a)?.span}function ug(e,t,i,a,s,r,n){let o=e.data[a.datumIndex],l=o.span,h=up(o,s);if(null!=h)n.removed.push({from:h,to:h}),n.moved.push({from:h,to:l}),n.added.push({from:l,to:l});else{let s=uc(l,t,e,i,a,r);n.added.push({from:s,to:l})}}function um(e,t,i,a,s,r,n){let o=e.data[a.datumIndex],l=o.span,h=up(o,s);if(null!=h)n.removed.push({from:l,to:l}),n.moved.push({from:l,to:h}),n.added.push({from:h,to:h});else{let s=uc(l,t,e,i,a,r);n.removed.push({from:l,to:s})}}function uy(e,t,i,a,s){let r=t[s.xValue0Index],n=i.data.find(e=>uo(e.xValue0)===r),o=t[s.xValue1Index],l=i.data.find(e=>uo(e.xValue1)===o);if(null==n||null==l)return;let[{x:h},{x:d}]=d4(e),u=un(n.xValue0,i.scales.x),c=un(n.yValue0,i.scales.y),p=un(l.xValue1,i.scales.x),g=un(l.yValue1,i.scales.y),m=a.data[s.datumIndex].span;return d5(m=d3(m,{x:u,y:c},{x:p,y:g}),h,d)}function uf(e,t,i){let{span:a}=t;switch(i){case 0:return up(t,e.zeroData)??ud(a,e);case 1:return uu(a)}}function ub(e,t,i){if(!function(e,t){let i=t.scales.x,a=e.scales.x;if(i?.type!=="category"||a?.type!=="category")return!0;let s=-1/0;for(let e of i.domain){let t=un(e,a);if(Number.isFinite(t))if(t<s)return!1;else s=t}return!0}(e,t))return;let a=function(e,t){let i=new Map;for(let{xValue0:t,xValue1:a}of e.data){let e=uo(t),s=uo(a);i.set(e,t).set(s,a)}let a=Array.from(i,([e,t])=>({axisValue:e,value:t}));a.sort((t,i)=>un(t.value,e.scales.x)-un(i.value,e.scales.x));let s=[];for(let{xValue0:e,xValue1:a}of t.data){let t=uo(e),r=uo(a);i.has(t)||(i.set(t,e),s.push({axisValue:t,value:e})),i.has(r)||(i.set(r,a),s.push({axisValue:r,value:a}))}s.sort((e,i)=>un(e.value,t.scales.x)-un(i.value,t.scales.x));let r=0;for(let e of s){for(let i=a.length-1;i>r;i-=1)if(un(e.value,t.scales.x)>un(a[i].value,t.scales.x)){r=i+1;break}a.splice(r,0,e),r+=1}if(!function(e,t){let i=-1/0;for(let a of e){let e=un(a.value,t.scales.x);if(Number.isFinite(e))if(e<i)return!1;else i=e}return!0}(a,t))return;let n=a.map(e=>e.axisValue),o=ul(t,n),l=ul(e,n);return{axisValues:n,oldDataAxisIndices:o,newDataAxisIndices:l}}(e,t);return null==a?function(e,t,i){let a=[],s=[];for(let e of t.data){let a=e.span,r=uf(t,e,i);s.push({from:a,to:r})}for(let t of e.data){let s=t.span,r=uf(e,t,i);a.push({from:r,to:s})}return{removed:s,moved:[],added:a}}(e,t,i):function(e,t,i,a){let s={removed:[],moved:[],added:[]},{axisValues:r,oldDataAxisIndices:n,newDataAxisIndices:o}=e,l={xValue0Index:Math.max(n.at(0)?.xValue0Index??-1/0,o.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(n.at(-1)?.xValue1Index??1/0,o.at(-1)?.xValue1Index??1/0)};for(let e=0;e<r.length-1;e+=1)!function(e,t,i,a,s,r,n,o,l){let h,d=s+1,u=n.find(e=>e.xValue0Index<=s&&e.xValue1Index>=d),c=r.find(e=>e.xValue0Index<=s&&e.xValue1Index>=d),p=t.zeroData,g=e.zeroData;if(null==u&&null!=c)return ug(e,i,r,c,p,o,l);if(null!=u&&null==c)return um(t,i,n,u,g,o,l);if(null==u||null==c)return;h=u.xValue0Index===c.xValue0Index&&u.xValue1Index===c.xValue1Index?0:u.xValue0Index<=c.xValue0Index&&u.xValue1Index>=c.xValue1Index?-1:+(u.xValue0Index>=c.xValue0Index&&u.xValue1Index<=c.xValue1Index);let m=uh(t.data[u.datumIndex].span,s,u),y=uh(e.data[c.datumIndex].span,s,c);if(1===h){let s=uy(m,a,t,e,c);null!=s?(l.removed.push({from:m,to:s}),l.moved.push({from:s,to:y}),l.added.push({from:y,to:y})):um(t,i,n,u,g,o,l)}else if(-1===h){let s=uy(y,a,e,t,u);null!=s?(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:s}),l.added.push({from:s,to:y})):ug(e,i,r,c,p,o,l)}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:y}),l.added.push({from:y,to:y})}(t,i,a,r,e,o,n,l,s);return s}(a,e,t,i)}function ux(e){return"continuous"===e.type||"log"===e.type}function uM(e){return"category"===e.type}function uv(e,t){return void 0===e||void 0===t?void 0!==e||void 0!==t:ux(e)&&ux(t)?e.type===t.type&&(0,s.r1)(e.domain,t.domain)&&(0,s.r1)(e.range,t.range):!!(uM(e)&&uM(t))&&e.inset===t.inset&&e.step===t.step&&(0,s.r1)(e.domain,t.domain)}function uS(e){return null!=e&&("category"===e.type?e.domain.every(e=>null!=e):e.domain.every(e=>Number.isFinite(e)||e instanceof Date)&&e.range.every(e=>Number.isFinite(e)))}function uD(e,t){let i,a=e.map(e=>e.point);switch(t.type){case"linear":i=function(e){let t=[],i=0,a=NaN,s=NaN;for(let{x:r,y:n}of e){if(i>0){let e=1===i;t.push({type:"linear",moveTo:e,x0:a,y0:s,x1:r,y1:n})}i+=1,a=r,s=n}return t}(a);break;case"smooth":i=function(e,t){let i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];let a=i.map((e,t)=>{let a=0===t?e:i[t-1],s=t===i.length-1?e:i[t+1],r=0===t||t===i.length-1;if(Math.sign(a.y-e.y)===Math.sign(s.y-e.y))return 0;if(!r){let t=Math.abs(a.y-s.y),i=Math.abs(e.y-a.y)/t,r=Math.abs(e.y-s.y)/t;if(i<=.05||1-i<=.05||r<=.05||1-r<=.05)return 0}return(s.y-a.y)/(s.x-a.x)});0===a[1]&&(a[0]*=2),0===a[a.length-2]&&(a[a.length-1]*=2);let s=[];for(let e=1;e<i.length;e+=1){let r=i[e-1],n=a[e-1],o=i[e],l=a[e],h=o.x-r.x,d=o.y-r.y,u=h*t/3,c=h*n*t/3,p=h*t/3,g=h*l*t/3;0===l&&Math.abs(c)>Math.abs(d)&&(u*=Math.abs(d/c),c=Math.sign(c)*Math.abs(d)),0===n&&Math.abs(g)>Math.abs(d)&&(p*=Math.abs(d/g),g=Math.sign(g)*Math.abs(d)),s.push({type:"cubic",moveTo:1===e,cp0x:r.x,cp0y:r.y,cp1x:r.x+u,cp1y:r.y+c,cp2x:o.x-p,cp2y:o.y-g,cp3x:o.x,cp3y:o.y})}return s}(a,t.tension);break;case"step":i=function(e,t){let i=[],a=0,s=NaN,r=NaN,n="number"==typeof t?t:d9[t];for(let{x:t,y:o}of e){if(a>0){let e=1===a,l=s+(t-s)*n;i.push({type:"step",moveTo:e,x0:s,y0:r,x1:t,y1:o,stepX:l})}a+=1,s=t,r=o}return i}(a,t.position)}return i.map((t,i)=>({span:t,xValue0:e[i].xDatum,yValue0:e[i].yDatum,xValue1:e[i+1].xDatum,yValue1:e[i+1].yDatum}))}function uI(e,t,i=.001){return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function uL({path:e},t){let i;for(let{span:a}of t){let[t,s]=d4(a);ui(e,a,null!=i&&uI(i,t)?1:0,!1),i=s}}function uA(e,t,i){let a;for(let s of i){let[i,r]=ua(s.from,s.to,e),n=null!=a&&uI(a,i)?1:0;us(t.path,s.from,s.to,e,n,!1),a=r}}function uw(e,t,i){let a=uC(e,i);return{status:e,path:{addPhaseFn:(e,i)=>uA(e,i,t.added),updatePhaseFn:(e,i)=>uA(e,i,t.moved),removePhaseFn:(e,i)=>uA(e,i,t.removed)},pathProperties:a}}function uC(e,t){let i="none"===t?"updated":e,a={fromFn:t=>{let a;return a="removed"===e?{finish:{visible:!1}}:"added"===e?{start:{visible:!0}}:{},{phase:rT[i],...a}},toFn:e=>({phase:rT[i]})};return"fade"===t?{fromFn:t=>({opacity:"added"===e?0:t.opacity,...a.fromFn(t)}),toFn:t=>({opacity:+("removed"!==e),...a.toFn(t)})}:a}function uk(e,t,i){if(e.scales.x?.type==="category"!=(t.scales.x?.type==="category")||!uS(e.scales.x)||!uS(t.scales.x)||null==e.strokeData||null==t.strokeData)return;let a="updated";t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added");let s=ub({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(null==s)return;let r=uw(a,s,"fade"),n=(i?.changed??!0)||!uv(e.scales.x,t.scales.x)||!uv(e.scales.y,t.scales.y)||"updated"!==a;return{status:a,stroke:r,hasMotion:n}}function uN({path:e},{spans:t,phantomSpans:i}){for(let a=0;a<t.length;a+=1){let{span:s}=t[a],r=i[a].span;ui(e,s,0,!1),ui(e,r,1,!0),e.closePath()}}function uT(e,{path:t},i,a){for(let s=0;s<i.length;s+=1){let r=i[s],n=a[s];us(t,r.from,r.to,e,0,!1),us(t,n.from,n.to,e,1,!0),t.closePath()}}function uE(e,t,i,a){let s=uC(e,a);return{status:e,path:{addPhaseFn:(e,a)=>uT(e,a,t.added,i.added),updatePhaseFn:(e,a)=>uT(e,a,t.moved,i.moved),removePhaseFn:(e,a)=>uT(e,a,t.removed,i.removed)},pathProperties:s}}function uO(e,t){if(e.scales.x?.type==="category"!=(t.scales.x?.type==="category")||!uS(e.scales.x)||!uS(t.scales.x))return;let i="updated";t.visible&&!e.visible?i="removed":!t.visible&&e.visible&&(i="added");let a=ub({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(null==a)return;let s=ub({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(null==s)return;let r=ub({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(null==r)return;let n="none",o=uE(i,a,s,n),l=uw(i,r,n);return{status:i,fill:o,stroke:l}}function uj({id:e},t,i,...a){rO(e,"markers",t,a,{opacity:0},{opacity:1},{phase:i?rT[i]:"trailing"}),a.forEach(e=>e.cleanup())}function uz({id:e},t,...i){rO(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(e=>e.cleanup())}function uR({id:e,nodeDataDependencies:t},i,...a){let r=t.seriesRectWidth;rE(e,"markers",i,a,{fromFn:(e,t)=>{let i=t.midPoint?.x??r,a=(0,s.qE)(0,a_(i/r),1);return isNaN(a)&&(a=0),{scalingX:0,scalingY:0,delay:a,duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function uP(e){return{opacity:1,scalingX:1,scalingY:1}}function uF(e,t){return{x:t.point?.x??NaN,y:t.point?.y??NaN,scalingCenterX:t.point?.x??NaN,scalingCenterY:t.point?.y??NaN}}function uB(e,{datumIndex:t}){let i=e.getNodeData();if(void 0===i)return;let a=i[t],{point:s}=a??{};if(null==a||null==s)return;let r=4+(s.focusSize??e.getFormattedMarkerStyle(a).size),n=r/2,o=a.point.x-n,l=a.point.y-n;return to.toCanvas(e.contentGroup,new y(o,l,r,r))}function uG({id:e,visible:t,nodeDataDependencies:i},a,...s){let{seriesRectWidth:r,seriesRectHeight:n}=i;rO(e,"path_properties",a,s,{clipX:0},{clipX:r},{phase:"initial",start:{clip:!0,clipY:n,visible:t},finish:{clip:!1,visible:t}})}function uV({id:e},t,i,a="add",...s){rO(e,t,i,s,{opacity:0},{opacity:1},{phase:a})}function uY(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function uU({nodeDataDependencies:e},t){let i=e=>isFinite(e)?e:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}var u_=class extends d0{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:uY({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:dN,marker:(e,t)=>({...uP(e),...uF(e,t)})},clipFocusBox:!1}),this.properties=new d2,this.connectsToYAxis=!0,this.backgroundGroup=new tu({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>100||this.contextNodeData.strokeData.spans.length>100)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e?.removeChild(this.backgroundGroup)}attachPaths([e,t]){this.backgroundGroup.appendChild(e),this.contentGroup.appendChild(t),t.zIndex=-1}detachPaths([e,t]){this.backgroundGroup.removeChild(e),this.contentGroup.removeChild(t)}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}setSeriesIndex(e){let t=this.isStacked();return(!!super.setSeriesIndex(e)||this._isStacked!==t)&&(this._isStacked=t,t?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1]),!0)}async processData(e){if(null==this.data)return;let{data:t,visible:i,seriesGrouping:{groupIndex:a=this.id,stackCount:r=1}={}}=this,{xKey:n,yKey:o,yFilterKey:l,connectMissingData:h,normalizedTo:d}=this.properties,u=!this.ctx.animationManager.isSkipped(),c=this.axes.x?.scale,p=this.axes.y?.scale,{xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:c,yScale:p}),y={value:`area-stack-${a}-yValue`,values:`area-stack-${a}-yValues`,stack:`area-stack-${a}-yValue-stack`,marker:`area-stack-${a}-yValues-marker`},f=[];(0,s.vM)(d)&&f.push(l$(Object.values(y),d)),u&&f.push(lK());let b={invalidValue:null};((0,s.vM)(d)||h)&&r>1&&(b.invalidValue=0),i||(b.forceValue=0),await this.requestDataModel(e,t,{props:[lT(n,g,{id:"xValue"}),lE(o,m,{id:"yValueRaw",...b}),...null!=l?[lE(l,m,{id:"yFilterRaw"})]:[],...lG(o,m,{id:"yValueStack",...b,groupId:y.stack}),lE(o,m,{id:"yValue",...b,groupId:y.value}),...lB(o,"window","current",{id:"yValueEnd",...b,groupId:y.values},m),...lB(o,"normal","current",{id:"yValueCumulative",...b,groupId:y.marker},m),...f],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}xCoordinateRange(e,t){let{marker:i}=this.properties,a=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[a-s,a+s]}yCoordinateRange(e,t){let{marker:i}=this.properties,a=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[a-s,a+s]}getSeriesDomain(e){let{processedData:t,dataModel:i,axes:a}=this;if(!t||!i)return[];let s=a.y;if("x"===e){let e=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",t);return e?.def.type==="key"&&"category"===e.def.valueType?a:ru(lg(a))}let r=this.domainForClippedRange("y",["yValueCumulative"],"xValue",!0);return s instanceof hu||s instanceof hp?ru(r):ru(Number.isFinite(r[1]-r[0])?[r[0]>0?0:r[0],r[1]<0?0:r[1]]:[])}getSeriesRange(e,t){let[i,a]=this.domainForVisibleRange("y",["yValueCumulative"],"xValue",t,!0);return[Math.min(i,0),Math.max(a,0)]}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValueCumulative"],e,t,i)}createNodeData(){let{axes:e,data:t,processedData:i,dataModel:a}=this,r=e.x,n=e.y;if(!r||!n||!t||!a||i?.type!=="grouped")return;let{yKey:o,xKey:l,yFilterKey:h,marker:d,label:u,fill:c,stroke:p,connectMissingData:g,interpolation:m}=this.properties,{scale:y}=r,{scale:f}=n,{isContinuousY:b}=this.getScaleInformation({xScale:y,yScale:f}),x=(y.bandwidth??0)/2,M=a.resolveKeysById(this,"xValue",i),v=a.resolveColumnById(this,"yValueEnd",i),S=a.resolveColumnById(this,"yValueRaw",i),D=a.resolveColumnById(this,"yValueCumulative",i),I=null!=h?a.resolveColumnById(this,"yFilterRaw",i):void 0,L=a.resolveColumnById(this,"yValueStack",i),A=(e,t,i)=>{let a;return((0,s.vM)(this.properties.normalizedTo)?b&&np(i):!isNaN(i))&&(a=t),{x:y.convert(e)+x,y:f.convert(a),size:d.size}},w=[],C=[],{visibleSameStackCount:k}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),N=!1,{dataSources:T}=i,E=T.get(this.id)??[];for(let{datumIndex:e}of a.forEachGroupDatum(this,i)){let t=M[e];if(null==t)return;let i=E[e],a=S[e],s=D[e],r=v[e],n=Number.isFinite(a),h=A(t,+s,a),g=null!=I?I[e]===a:void 0;if(!1===g&&(N=!0),n&&d&&C.push({series:this,itemId:o,datum:i,datumIndex:e,midPoint:{x:h.x,y:h.y},cumulativeValue:r,yValue:a,xValue:t,yKey:o,xKey:l,point:h,fill:d.fill??c,stroke:d.stroke??p,strokeWidth:d.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:g}),n&&u){let t=this.getLabelText(u,{value:a,datum:i,xKey:l,yKey:o,xName:this.properties.xName,yName:this.properties.yName});w.push({series:this,itemId:o,datum:i,datumIndex:e,x:h.x,y:h.y,labelText:t})}}let O=e=>e.flatMap(e=>Array.isArray(e)?uD(e,m):Array(e.skip).fill(null)),j=(e,t)=>({point:{x:y.convert(e)+x,y:f.convert(t)},xDatum:e,yDatum:t}),z=e=>{let t=[];for(let{datumIndexes:[s,r,n]}of a.forEachGroupDatumTuple(this,i)){let i=M[r],a=L[r],o=a[e],l=Number.isFinite(o);if(g&&!l)continue;let h=null!=s?L[s]:void 0,d=null!=n?L[n]:void 0,u=0,c=0;for(let t=0;t<=e;t+=1){let e=a[t];if(Number.isFinite(e)){let i=null==h||Number.isFinite(h[t]),a=null==d||Number.isFinite(d[t]);i&&(u+=e),a&&(c+=e)}}let p=t[t.length-1];if(g||u===c&&l){let e=j(i,g?o:Math.max(u,c));Array.isArray(p)?p.push(e):(null!=p&&(p.skip+=1),t.push([e]))}else if(!l&&Array.isArray(p)&&1===p.length)t[t.length-1]={skip:1};else{let e=j(i,u),a=j(i,c);Array.isArray(p)?p.push(e):null!=p&&(p.skip+=1),t.push(l?[a]:{skip:0})}}return O(t)},R=this.seriesGrouping?.stackIndex??0,P=()=>uD(Array.from(a.forEachGroupDatum(this,i),({datumIndex:e})=>{let t=M[e],i=L[e][R];if(!g||Number.isFinite(i))return j(t,0)}).filter(e=>null!=e),m),F=z(R),B=F.map(()=>null);for(let e=R-1;e>=-1;e-=1){let t;for(let i=0;i<B.length;i+=1)null==B[i]&&(t??(t=-1!==e?z(e):P()),B[i]=t[i])}return{itemId:o,fillData:{itemId:o,spans:F.map((e,t)=>e??B[t]),phantomSpans:B},strokeData:{itemId:o,spans:F.filter(e=>null!=e)},labelData:w,nodeData:C,scales:this.calculateScaling(),visible:this.visible,stackVisible:k>0,crossFiltering:N}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){let{opacity:t,visible:i,animationEnabled:a}=e,[s,r]=e.paths,n=this.contextNodeData?.crossFiltering===!0,o=this.getStrokeWidth(this.properties.strokeWidth);r.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity*(n?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i||a}),og(s,{fill:ou(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),stroke:void 0,fillOpacity:this.properties.fillOpacity*(n?.125:1)},void 0,this.getShapeFillBBox()),s.setProperties({lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:t,visible:i||a}),uU(this,r),uU(this,s)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(let i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(let t of e)t.path.clear(),t.markDirty("AreaSeries")}updateFillPath(e,t){let[i]=e;i.path.clear(),uN(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){let{spans:i}=t.strokeData,[,a]=e;a.path.clear(),uL(a,i),a.markDirty("AreaSeries")}updateMarkerSelection(e){let{nodeData:t,markerSelection:i}=e,a=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(a?t:[])}updateMarkerNodes(e){let{markerSelection:t,isHighlight:i}=e,{xKey:a,yKey:s,marker:r,fill:n,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d,highlightStyle:u}=this.properties,c=this.getSeriesDomain("x"),p=this.getSeriesDomain("y"),g=z(i&&u.item,r.getStyle(),{fill:n,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d}),m=this.getShapeFillBBox();t.each((e,t)=>{this.updateMarkerStyle(r,e,t.datum,t.point,a8(t,a,s,c,p),i,g,m,{selected:t.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(e){let{labelData:t,labelSelection:i}=e;return i.update(t)}updateLabelNodes(e){let{labelSelection:t}=e,{enabled:i,fontStyle:a,fontWeight:s,fontSize:r,fontFamily:n,color:o}=this.properties.label;t.each((e,t)=>{let{x:l,y:h,labelText:d}=t;d&&i&&this.visible?(e.fontStyle=a,e.fontWeight=s,e.fontSize=r,e.fontFamily=n,e.textAlign="center",e.textBaseline="bottom",e.text=d,e.x=l,e.y=h-10,e.fill=o,e.visible=!0):e.visible=!1})}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,axes:s,properties:r}=this,{xKey:n,xName:o,yKey:l,yName:h,tooltip:d,marker:u}=r,c=s.x,p=s.y;if(!i||!a||!c||!p)return;let g=a.dataSources.get(this.id)?.[e],m=i.resolveKeysById(this,"xValue",a)[e],y=i.resolveColumnById(this,"yValueRaw",a)[e],{xDomain:f,yDomain:b}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));if(null==m)return;let x=u.getStyle(),M=this.getMarkerStyle(u,g,a8({datum:g,xValue:m,yValue:y},n,l,f,b),!1,void 0,x);return this.formatTooltipWithContext(d,{heading:c.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:l,value:p.formatDatum(y)}]},{seriesId:t,datum:g,title:h,xKey:n,xName:o,yKey:l,yName:h,...M,...this.getModuleTooltipParams()})}legendItemSymbol(){let{fill:e,stroke:t,fillOpacity:i,strokeOpacity:a,strokeWidth:s,lineDash:r,marker:n,fillGradientDefaults:o,fillPatternDefaults:l,fillImageDefaults:h}=this.properties,d=!n.enabled||void 0===n.fill,u=d?ou(e,o,l,h):ou(n.fill,n.fillGradientDefaults,n.fillPatternDefaults,n.fillImageDefaults);return{marker:{...this.getMarkerStyle(n,void 0,void 0,!1,void 0,{fill:u,fillOpacity:d?i:n.fillOpacity}),enabled:n.enabled||s<=0},line:{stroke:t,strokeOpacity:a,strokeWidth:s,lineDash:r}}}getLegendData(e){if("category"!==e)return[];let{id:t,ctx:{legendManager:i},visible:a}=this,{yKey:s,yName:r,legendItemName:n,showInLegend:o}=this.properties;return[{legendType:e,id:t,itemId:s,seriesId:t,enabled:a&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:n??r??s},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!o}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:i,contextData:a,paths:s}=e,{animationManager:r}=this.ctx;this.updateAreaPaths(s,a),uG(this,r,...s),rz([t],uF),uR(this,r,t),dC(this,"labels",r,i)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){let{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:a,contextData:s,paths:r,previousContextData:n}=e,[o,l]=r;if(null==o&&null==l)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);let h=()=>{this.resetPathAnimation(e),this.updateAreaPaths(r,s)},d=()=>{t.skipCurrentBatch(),h()};if(null==s||null==n){h(),uj(this,t,"added",i),uV(this,"fill_path_properties",t,"add",o),uV(this,"stroke_path_properties",t,"add",l),dC(this,"labels",t,a);return}if(s.crossFiltering!==n.crossFiltering)return void d();let u=uO(s,n);if(void 0===u)return void d();"no-op"!==u.status&&(uj(this,t,void 0,i),rE(this.id,"fill_path_properties",t,[o],u.fill.pathProperties),dw(this.id,"fill_path_update",t,[o],u.fill.path),rE(this.id,"stroke_path_properties",t,[l],u.stroke.pathProperties),dw(this.id,"stroke_path_update",t,[l],u.stroke.path),dC(this,"labels",t,a),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(r,s)}))}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new tu}getFormattedMarkerStyle(e){let{xKey:t,yKey:i}=e,a=this.getSeriesDomain("x"),s=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e.datum,a8(e,t,i,a,s),!0)}computeFocusBounds(e){return uB(this,e)}};u_.className="AreaSeries",u_.type="area";var u$=(0,s.KC)("millisecond","second","minute","hour","day","month","year"),uW=(0,s.W$)(s.t$,"a valid number format string"),uH={enabled:s.zM,text:s.Yj,padding:s.ai,...s.LV},uZ=(0,s.W$)({enabled:s.zM,type:(0,s.mw)((0,s.KC)("line","range")),range:(0,s.Uo)((0,s.W$)((e,{options:t})=>"range"===t.type,"crossLine type to be 'range'"),(0,s.jk)(s.sw),(0,s.O9)(2,2)),value:(0,s.Uo)((0,s.W$)((e,{options:t})=>"line"===t.type,"crossLine type to be 'line'"),s.sw),label:uH,fill:s.Yj,fillOpacity:s.CG,...s.AF,...s.mL},"cross-line options"),uK={...uZ,label:{...uH,position:(0,s.KC)("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:s.ai}},uX={enabled:s.zM,rotation:s.ai,avoidCollisions:s.zM,minSpacing:s.Ly,spacing:s.Ly,formatter:s.E2,itemStyler:(0,s.YI)({...s.LV,spacing:s.ai}),...s.LV},uQ={autoRotate:s.zM,autoRotateAngle:s.ai,...uX},uq={format:uW,...uQ},uJ={format:(0,s.or)(s.Yj,s.Ik),...uQ},u0={enabled:s.zM,width:s.Ly,size:s.Ly,stroke:s.yW},u1={enabled:s.zM,label:uJ,tick:u0},u2={reverse:s.zM,gridLine:{enabled:s.zM,width:s.Ly,style:(0,s.J$)({stroke:(0,s.or)(s.yW,s.I_),lineDash:(0,s.jk)(s.Ly)},"a grid-line style object array")},interval:{values:(0,s.jk)(s.sw),minSpacing:s.Ly},label:uX,line:{enabled:s.zM,width:s.Ly,stroke:s.yW},tick:u0};u2.context=(0,s._L)(()=>!0),u2.layoutConstraints=(0,s._L)({stacked:(0,s.mw)(s.zM),align:(0,s.mw)((0,s.KC)("start","end")),unit:(0,s.mw)((0,s.KC)("percent","px")),width:(0,s.mw)(s.Ly)});var u4={...u2,keys:(0,s.jk)(s.Yj),crossLines:(0,s.J$)(uK,"a cross-line options array"),position:(0,s.KC)("top","right","bottom","left"),thickness:s.Ly,title:{enabled:s.zM,text:s.Yj,spacing:s.Ly,formatter:s.E2,...s.LV}};function u3(e){let t={enabled:s.zM,xOffset:s.ai,yOffset:s.ai,renderer:(0,s.R3)((0,s.or)(s.Yj,(0,s.fd)({text:s.Yj,color:s.yW,backgroundColor:s.yW,opacity:s.CG},"crosshair label renderer result object")))};return e&&(t.format=s.Yj),{enabled:s.zM,snap:s.zM,label:t,...s.AF,...s.mL}}function u5(e,t){return{min:(0,s.Uo)(e,(0,s.Xe)("max")),max:(0,s.Uo)(e,(0,s.MM)("min")),nice:s.zM,interval:{step:t?(0,s.or)(s.MX,u$,(0,s.hR)(sm)):s.MX,values:(0,s.jk)(e),minSpacing:(0,s.Uo)(s.Ly,(0,s.Xe)("maxSpacing")),maxSpacing:(0,s.Uo)(s.Ly,(0,s.MM)("minSpacing"))}}}u4.title._enabledFromTheme=(0,s._L)(s.zM);var u9=(0,s.or)((0,s.KC)("circle","cross","diamond","heart","plus","pin","square","star","triangle"),s.E2),u6=(0,s.KC)("never","always","hyphenate","on-space"),u8=(0,s.KC)("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),u7=(0,s.KC)("pointer","node","top","right","bottom","left","top-left","top-right","bottom-left","bottom-right"),ce=(0,s.or)(s.Ly,(0,s.KC)("exact","nearest")),ct=(0,s.KC)("pointer","start","middle","end"),ci={enabled:s.zM,text:s.Yj,textAlign:(0,s.KC)("left","center","right"),wrapping:(0,s.KC)("never","always","hyphenate","on-space"),spacing:s.Ly,maxWidth:s.Ly,maxHeight:s.Ly,...s.LV};ci.padding=(0,s._L)(s.Ly);var ca={enabled:s.zM,text:s.Yj,renderer:(0,s.R3)((0,s.or)(s.Yj,s.Sc))},cs=["defaults","download","zoom-to-cursor","pan-to-cursor","toggle-series-visibility","toggle-other-series","separator"],cr={type:(0,s.KC)("action","separator"),showOn:(0,s.KC)("always","series-area","series-node","legend-item"),label:(0,s.mw)(s.Yj),enabled:s.zM,action:s.E2,items:(e,t)=>cl(e,t)};cr.iconUrl=(0,s._L)(s.Yj);var cn=(0,s.fd)(cr),co=(0,s.W$)((e,t)=>{let i;return"string"==typeof e?cs.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null}).invalid.push(new s.yI(s.By.Invalid,`a context menu item string alias: ["${cs.join('", "')}"]`,e,t.path)):i=cn(e,t),i},`a context menu item object or string alias: [${cs.join(", ")}]`),cl=(0,s.jk)(co,"a menu items array",!1),ch=(0,s.J$)({label:(0,s.mw)(s.Yj),action:(0,s.mw)(s.E2)},"a context menu actions array"),cd={label:s.Yj,ariaLabel:s.Yj,tooltip:s.Yj,icon:(0,s.KC)("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},cu={width:s.Ly,height:s.Ly,minWidth:s.Ly,minHeight:s.Ly,suppressFieldDotNotation:s.zM,title:ci,subtitle:ci,footnote:ci,padding:{top:s.Ly,right:s.Ly,bottom:s.Ly,left:s.Ly},seriesArea:{clip:s.zM,padding:{top:s.Ly,right:s.Ly,bottom:s.Ly,left:s.Ly}},legend:{enabled:s.zM,position:(0,s.KC)("top","right","bottom","left"),orientation:(0,s.KC)("horizontal","vertical"),maxWidth:s.Ly,maxHeight:s.Ly,spacing:s.Ly,preventHidingAll:s.zM,reverseOrder:s.zM,toggleSeries:s.zM,item:{marker:{size:s.Ly,shape:u9,padding:s.Ly,strokeWidth:s.Ly},line:{length:s.Ly,strokeWidth:s.Ly},label:{maxLength:s.Ly,formatter:s.E2,...s.LV},maxWidth:s.Ly,paddingX:s.Ly,paddingY:s.Ly,showSeriesStroke:s.zM},pagination:{marker:{size:s.Ly,shape:u9,padding:s.Ly},activeStyle:{...s.Fu,...s.AF},inactiveStyle:{...s.Fu,...s.AF},highlightStyle:{...s.Fu,...s.AF},label:s.LV},listeners:{legendItemClick:s.E2,legendItemDoubleClick:s.E2}},gradientLegend:{enabled:s.zM,position:(0,s.KC)("top","right","bottom","left"),spacing:s.Ly,reverseOrder:s.zM,gradient:{preferredLength:s.Ly,thickness:s.Ly},scale:{label:{...s.LV,format:uW,formatter:s.E2},padding:s.Ly,interval:{step:s.ai,values:s.YO,minSpacing:(0,s.Uo)(s.Ly,(0,s.Xe)("maxSpacing")),maxSpacing:(0,s.Uo)(s.Ly,(0,s.MM)("minSpacing"))}}},listeners:{seriesNodeClick:s.E2,seriesNodeDoubleClick:s.E2,seriesVisibilityChange:s.E2,click:s.E2,doubleClick:s.E2,annotations:s.E2,zoom:s.E2},loadGoogleFonts:s.zM,highlight:{range:(0,s.KC)("tooltip","node")},overlays:{loading:ca,noData:ca,noVisibleSeries:ca,unsupportedBrowser:ca},tooltip:{enabled:s.zM,showArrow:s.zM,pagination:s.zM,delay:s.Ly,range:ce,wrapping:u6,mode:(0,s.KC)("single","shared","compact"),position:{type:u7,anchorTo:(0,s.KC)("pointer","node","chart"),placement:(0,s.or)(u8,(0,s.jk)(u8)),xOffset:s.ai,yOffset:s.ai}},animation:{enabled:s.zM,duration:s.Ly},contextMenu:{enabled:s.zM,items:cl,extraActions:ch,extraSeriesAreaActions:ch,extraNodeActions:ch,extraLegendItemActions:ch},dataSource:{getData:s.E2},keyboard:{enabled:s.zM,tabIndex:s.ai},touch:{dragAction:(0,s.KC)("none","drag","hover")},ranges:{enabled:s.zM,buttons:(0,s.J$)({...cd,value:(0,s.or)(s.ai,(0,s.Uo)((0,s.jk)((0,s.or)(s.ai,s.p6)),(0,s.O9)(2,2)),s.E2)},"range button options array")},locale:{localeText:s.Ik,getLocaleText:(0,s.R3)(s.Yj)},background:{visible:s.zM,fill:s.yW,image:{url:(0,s.mw)(s.Yj),top:s.ai,right:s.ai,bottom:s.ai,left:s.ai,width:s.Ly,height:s.Ly,opacity:s.CG}},styleNonce:s.Yj,sync:{enabled:s.zM,groupId:s.Yj,axes:(0,s.KC)("x","y","xy"),nodeInteraction:s.zM,zoom:s.zM},zoom:{enabled:s.zM,enableAxisDragging:s.zM,enableDoubleClickToReset:s.zM,enablePanning:s.zM,enableScrolling:s.zM,enableSelecting:s.zM,enableTwoFingerZoom:s.zM,keepAspectRatio:s.zM,anchorPointX:ct,anchorPointY:ct,axes:(0,s.KC)("x","y","xy"),deceleration:(0,s.or)((0,s.KC)("off","short","long"),s.CG),minVisibleItems:s.Ly,minVisibleItemsX:s.Ly,minVisibleItemsY:s.Ly,panKey:(0,s.KC)("alt","ctrl","meta","shift"),scrollingStep:s.CG,autoScaling:{enabled:s.zM,padding:s.CG},buttons:{enabled:s.zM,buttons:(0,s.J$)({...cd,value:(0,s.KC)("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:s.Yj},"zoom button options array"),visible:(0,s.KC)("always","zoomed","hover")}}};cu.dataSource.requestThrottle=(0,s._L)(s.Ly),cu.dataSource.updateThrottle=(0,s._L)(s.Ly),cu.dataSource.updateDuringInteraction=(0,s._L)(s.zM),cu.zoom.enableIndependentAxes=(0,s._L)(s.zM),cu.statusBar=(0,s._L)(s.sw),cu.foreground=(0,s._L)({visible:s.zM,text:s.Yj,image:{url:s.Yj,top:s.ai,right:s.ai,bottom:s.ai,left:s.ai,width:s.Ly,height:s.Ly,opacity:s.CG},...s.Fu}),cu.context=(0,s._L)(()=>!0),cu.overrideDevicePixelRatio=(0,s._L)(s.ai),cu.sync.domainMode=(0,s._L)((0,s.KC)("direction","position","key"));var cc={cursor:s.Yj,showInLegend:s.zM,nodeClickRange:ce,listeners:{nodeClick:s.E2,nodeDoubleClick:s.E2},highlightStyle:{item:{...s.Fu,...s.AF},series:{enabled:s.zM,dimOpacity:s.CG,strokeWidth:s.Ly}}},cp={...cc,id:s.Yj,visible:s.zM,data:s.YO};cp.context=(0,s._L)(()=>!0),cp.seriesGrouping=(0,s._L)(s.sw),cp.highlight=(0,s._L)({enabled:s.zM});var cg={enabled:s.zM,shape:u9,size:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,shape:u9,size:s.Ly}),...s.Fu,...s.AF,...s.mL},cm={enabled:s.zM,formatter:s.E2,...s.LV},cy={...cm,lineHeight:s.Ly,minimumFontSize:s.Ly,wrapping:u6,overflowStrategy:(0,s.KC)("ellipsis","hide")},cf={visible:s.zM,cap:{visible:s.zM,length:s.Ly,lengthRatio:s.CG,...s.AF,...s.mL},...s.AF,...s.mL},cb={...cf,xLowerKey:s.Yj,xUpperKey:s.Yj,yLowerKey:s.Yj,yUpperKey:s.Yj,xLowerName:s.Yj,xUpperName:s.Yj,yLowerName:s.Yj,yUpperName:s.Yj,itemStyler:(0,s.YI)({visible:s.zM,...s.AF,...s.mL,cap:{visible:s.zM,length:s.Ly,lengthRatio:s.CG,...s.AF,...s.mL}})},cx={enabled:s.zM,showArrow:s.zM,range:ce,renderer:(0,s.R3)((0,s.or)(s.Yj,(0,s.fd)({heading:s.Yj,title:s.Yj,data:(0,s.J$)({label:(0,s.mw)(s.Yj),value:(0,s.mw)(s.Yj)})},"tooltip renderer result object"))),position:{type:u7,anchorTo:(0,s.KC)("node","pointer","chart"),placement:(0,s.or)(u8,(0,s.jk)(u8)),xOffset:s.ai,yOffset:s.ai},interaction:{enabled:s.zM}};cx.position._seriesOverrideType=(0,s._L)(u7);var cM={enabled:s.zM,xOffset:s.ai,yOffset:s.ai,blur:s.Ly,color:s.yW},cv=(0,s.is)({linear:{},smooth:{tension:s.CG},step:{position:(0,s.KC)("start","middle","end")}},"interpolation line options"),cS={showInMiniChart:s.zM,connectMissingData:s.zM,interpolation:cv,label:cm,marker:cg,tooltip:cx,shadow:cM,...cc,...s.Fu,...s.AF,...s.mL},cD={...cS,...cp,type:(0,s.mw)((0,s.dY)("area")),xKey:(0,s.mw)(s.Yj),yKey:(0,s.mw)(s.Yj),xName:s.Yj,yName:s.Yj,stacked:s.zM,stackGroup:s.Yj,normalizedTo:s.ai},cI={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new u_(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{_seriesOverrideType:"node"}},fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:dI,fillImageDefaults:dL,stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:hK,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:dI},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},cL={type:"series",name:"area",chartType:"cartesian",options:cD,create:e=>new u_(e)};function cA(e,t){for(let i of t){let t=i.datum;void 0===t?s.Vy.error("undefined datum"):e.addValue(i,t)}}function cw(e,t){let{x:i,y:a}=t,{nearest:s,distanceSquared:r}=e.getQuadTree().find(i,a);if(void 0!==s)return{datum:s.value,distance:Math.sqrt(r)}}var cC=class extends dJ{constructor(){super(...arguments),this.direction="vertical"}};l([ew],cC.prototype,"direction",2);var ck=class extends d0{constructor(){super(...arguments),this.groupScale=new lh,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){let i=(0,s.Bf)(this.smallestDataInterval)?this.smallestDataInterval*("boolean"==typeof t?1:.5):0,a=lg(e)??[NaN,NaN];return"boolean"==typeof t?a[+!t]-=(t?1:-1)*i:(a[0]-=i,a[1]+=i),ru(a)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){let e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e,t){return sc.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval,t):e.scale.bandwidth}xCoordinateRange(e){let t=this.axes[this.getCategoryDirection()],i=t.scale,a=this.getBandwidth(t,0)??0,s=sc.is(i)?-.5*a:0,r=i.convert(e)+s;return[r,r+a]}yCoordinateRange(e){let t=this.axes[this.getBarDirection()].scale,i=e.map(e=>t.convert(e));if(1===i.length){let e=t.convert(0);return[Math.min(i[0],e),Math.max(i[0],e)]}return[Math.min(...i),Math.max(...i)]}updateGroupScale(e){let t=[],{groupScale:i}=this,a=this.getBandwidth(e),{index:s,visibleGroupCount:r}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let e=0;e<r;e++)t.push(String(e));return i.domain=t,i.range=[0,a??0],e instanceof ht?i.paddingInner=e.groupPaddingInner:e instanceof lc?(i.paddingInner=e.groupPaddingInner,i.round=0!==i.padding):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:s}}resolveKeyDirection(e){return"x"===this.getBarDirection()?"x"===e?"y":"x":e}initQuadTree(e){cA(e,this.datumNodesIter())}pickNodeClosestDatum(e){return cw(this,e)}},cN=class extends nD{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};l([ew],cN.prototype,"placement",2),l([ew],cN.prototype,"padding",2);var cT=class extends cC{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new dP,this.fillPatternDefaults=new dF,this.fillImageDefaults=new dB,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new dE,this.label=new cN,this.tooltip=new d_,this.sparklineMode=!1,this.fastDataProcessing=!1}};function cE(e,t,i,a){if(null!=t){let[e,i]=t;if(0!==e||1!==i)return!1}if(sc.is(e)){let t=e.calcBandwidth(a)-e.calcBandwidth(i);if(t>0&&t<1)return!1}return!0}l([ew],cT.prototype,"xKey",2),l([ew],cT.prototype,"xName",2),l([ew],cT.prototype,"yKey",2),l([ew],cT.prototype,"yName",2),l([ew],cT.prototype,"yFilterKey",2),l([ew],cT.prototype,"stackGroup",2),l([ew],cT.prototype,"normalizedTo",2),l([ew],cT.prototype,"fill",2),l([ew],cT.prototype,"fillGradientDefaults",2),l([ew],cT.prototype,"fillPatternDefaults",2),l([ew],cT.prototype,"fillImageDefaults",2),l([ew],cT.prototype,"fillOpacity",2),l([ew],cT.prototype,"stroke",2),l([ew],cT.prototype,"strokeWidth",2),l([ew],cT.prototype,"strokeOpacity",2),l([ew],cT.prototype,"lineDash",2),l([ew],cT.prototype,"lineDashOffset",2),l([ew],cT.prototype,"cornerRadius",2),l([ew],cT.prototype,"crisp",2),l([ew],cT.prototype,"itemStyler",2),l([ew],cT.prototype,"shadow",2),l([ew],cT.prototype,"label",2),l([ew],cT.prototype,"tooltip",2),l([ew],cT.prototype,"sparklineMode",2),l([ew],cT.prototype,"fastDataProcessing",2);var cO=e=>(0,s.cI)(e.yValue??0);function cj(e,t,i){let{startingX:a,startingY:s}=function(e,t){let i=t[e?"y":"x"],a=1/0,s=0;return i&&(e?s=i.scale.convert(sc.is(i.scale)?0:Math.max(...i.range)):a=i.scale.convert(sc.is(i.scale)?0:Math.min(...i.range))),{startingX:a,startingY:s}}(e,t);return{isVertical:e,calculate:(t,i)=>{let r,n=e?t.x:a,o=e?s:t.y,l=e?t.width:0,h=e?0:t.height,{opacity:d=1}=t;return i&&(isNaN(n)||isNaN(o))&&({x:n,y:o}=i,l=e?i.width:0,h=e?0:i.height,e&&!cO(i)?o+=i.height:!e&&cO(i)&&(n+=i.width)),r=null==t.clipBBox?void 0:cO(t)?e?new y(n,o-h,l,h):new y(n-l,o,l,h):new y(n,o,l,h),{x:n,y:o,width:l,height:h,clipBBox:r,opacity:d}},mode:i}}function cz(e,t){return{isVertical:e,calculate:t=>({x:e?t.x:t.x+t.width/2,y:e?t.y+t.height/2:t.y,width:e?t.width:0,height:e?0:t.height,clipBBox:t.clipBBox,opacity:t.opacity??1}),mode:t}}function cR(e){let t=e=>null==e||isNaN(e.x)||isNaN(e.y);return{toFn:(i,a,s)=>"removed"===s&&null==i.datum&&"fade"===e.mode?{...cP(i,a),opacity:0}:"removed"===s||t(a)?e.calculate(a,i.previousDatum):{x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity??1},fromFn:(i,a,s)=>{let r;"updated"===s&&t(a)?s="removed":"updated"===s&&t(i.previousDatum)&&(s="added"),r="added"===s&&null==i.previousDatum&&"fade"===e.mode?{...cP(i,a),opacity:0}:"unknown"===s||"added"===s?e.calculate(a,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1};let n=rT[s];return{...r,phase:n}},applyFn:(e,t,i)=>{e.setProperties(t),e.crisp="end"===i&&(e.datum?.crisp??!1)}}}function cP(e,{x:t,y:i,width:a,height:s,clipBBox:r,opacity:n=1}){return{x:t,y:i,width:a,height:s,clipBBox:r,opacity:n,crisp:e.datum?.crisp??!1}}function cF(e,t){if(void 0===t)return;let{x:i,y:a,width:s,height:r}=t;return to.toCanvas(e.contentGroup,new y(i,a,s,r))}function cB(e,t,i,a,s,r){let n=r?.reduced?.diff?.[e];if(n?.changed)return n;let o=function(e,t){if(!t)return!1;let i=e.scales,a=t.scales;return!(uv(i.x,a.x)&&uv(i.y,a.y))||!!cG(e)&&!!cG(t)&&!uv(e.groupScale,t.groupScale)}(a,s);return null==n&&r?.reduced?.diff!=null?(n={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},o?n.updated=new Set(Array.from(t,({datum:e})=>i(e))):n.added=new Set(Array.from(t,({datum:e})=>i(e)))):o&&(n={changed:!0,added:new Set,updated:new Set(Array.from(t,({datum:e})=>i(e))),removed:new Set,moved:new Set}),n}function cG(e){return"object"==typeof e&&null!==e&&"groupScale"in e}function cV(e,t,i){if(t.enabled&&i){let{x:a,y:s,text:r,textAlign:n,textBaseline:o}=i,{color:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c}=t;e.setProperties({visible:!0,x:a,y:s,text:r,fill:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c,textAlign:n,textBaseline:o})}else e.visible=!1}var cY={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function cU({isUpward:e,isVertical:t,placement:i,padding:a=0,rect:s}){let r=s.x+s.width/2,n=s.y+s.height/2,o="center",l="middle";if("inside-center"!==i){let h=(e?1:-1)*(t?-1:1),{direction:d,textAlignment:u}=cY[i],c=(d+1)*.5;t?(n=(e?s.y+s.height:s.y)+s.height*h*c+a*u*h,l=u===h?"top":"bottom"):(r=(e?s.x:s.x+s.width)+s.width*h*c+a*u*h,o=u===h?"left":"right")}return{x:r,y:n,textAlign:o,textBaseline:l}}var c_=class extends ck{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:cP,label:dN}}),this.properties=new cT,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(e){if(!this.data)return;let{xKey:t,yKey:i,yFilterKey:a,normalizedTo:r,fastDataProcessing:n}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:l}=this,h=this.seriesGrouping?.groupCount??0,d=(this.seriesGrouping?.stackCount??0)>=1||null!=r,u=!n||h>1||d,c=!this.ctx.animationManager.isSkipped(),p=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:m,xScaleType:y,yScaleType:f}=this.getScaleInformation({xScale:p,yScale:g}),b=`bar-stack-${o}-yValues`,x=`${b}-trailing`,M=this.visible?{}:{forceValue:0},v=[lT(t,y,{id:"xValue"}),lE(i,f,{id:"yValue-raw",invalidValue:null,...M})];this.crossFilteringEnabled()&&v.push(lE(a,f,{id:"yFilterValue",invalidValue:null,...M})),d&&v.push(...lB(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:b,separateNegative:!0,...M},f),...lB(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:x,separateNegative:!0,...M},f)),m&&v.push(lV,lY),(0,s.Bf)(r)&&v.push(l$([b,x],Math.abs(r))),c&&this.processedData&&v.push(l4(this.id,this.processedData)),(c||!u)&&v.push(lK());let{dataModel:S,processedData:D}=await this.requestDataModel(e,l,{props:v,groupByKeys:u,groupByData:!u});this.dataAggregationFilters=this.aggregateData(S,D),this.smallestDataInterval=D.reduced?.smallestKeyInterval,this.largestDataInterval=D.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){let{processedData:t,dataModel:i}=this;if(null==i||null==t)return[];if(e===this.getCategoryDirection()){let e=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",t);return e?.def.type==="key"&&"category"===e.def.valueType?a:this.padBandExtent(a)}let a=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",s=this.domainForClippedRange(e,[a],"xValue",!0),r=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;return(null!=r&&(s=[Math.min(s[0],r[0]),Math.max(s[1],r[1])]),this.getValueAxis()instanceof hu)?ru(s):ru(Number.isFinite(s[1]-s[0])?[Math.min(0,s[0]),Math.max(0,s[1])]:[])}getSeriesRange(e,t){let i=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",[a,s]=this.domainForVisibleRange("y",[i],"xValue",t,!0);return[Math.min(a,0),Math.max(s,0)]}getVisibleItems(e,t,i){let a=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[a],e,t,i)}aggregateData(e,t){}createNodeData(){let{dataModel:e,processedData:t,groupScale:i,dataAggregationFilters:a}=this,s=this.getCategoryAxis(),r=this.getValueAxis();if(!e||!t||!s||!r)return;let n=t.dataSources?.get(this.id);if(null==n)return;let o=s.scale,l=r.scale,{xKey:h,yKey:d,xName:u,yName:c,legendItemName:p,label:g}=this.properties,m=r.isReversed(),{barWidth:f,groupIndex:b}=this.updateGroupScale(s),x=i.convert(String(b)),M=sc.is(o)?-.5*f:0,v=e.resolveKeysById(this,"xValue",t),S=e.resolveColumnById(this,"yValue-raw",t),D=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",t):void 0,I=!this.ctx.animationManager.isSkipped(),L=e=>o.convert(v[e])+x+M,A=this.properties.crisp??cE(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval),w=l.convert(0),C=({datum:e,datumIndex:t,valueIndex:i,xValue:a,yValue:s,cumulativeValue:r,phantom:n,currY:o,prevY:u,x:c,width:p,isPositive:f,yRange:b,labelText:x,opacity:M,crossScale:v=1})=>{let S=f!==m,D=l.convert(o),I=l.convert(u),L=l.convert(b),C="x"===this.getBarDirection(),k=.5*p*(1-v),N={x:C?Math.min(D,I):c+k,y:C?c+k:Math.min(D,I),width:C?Math.abs(I-D):p*v,height:C?p*v:Math.abs(I-D)},T=new y(N.x,N.y,N.width,N.height),E={x:C?Math.min(w,L):c+k,y:C?c+k:Math.min(w,L),width:C?Math.abs(w-L):p*v,height:C?p*v:Math.abs(w-L)},O=this.shouldFlipXY()?N.height:N.width;return{series:this,itemId:n?l3(d,n):d,datum:e,datumIndex:t,valueIndex:i,cumulativeValue:r,phantom:n,xValue:a,yValue:s,yKey:d,xKey:h,capDefaults:{lengthRatioMultiplier:O,lengthMax:O},x:E.x,y:E.y,width:E.width,height:E.height,midPoint:{x:N.x+N.width/2,y:N.y+N.height/2},opacity:M,topLeftCornerRadius:C!==S,topRightCornerRadius:S,bottomRightCornerRadius:C===S,bottomLeftCornerRadius:!S,clipBBox:T,crisp:A,label:null!=x?{text:x,...cU({isUpward:S,isVertical:!C,placement:g.placement,padding:g.padding,rect:N})}:void 0,missing:null==s,focusable:!n}},k=[],N=[],T=[],E=(e,t,i,a,s,r,o,l)=>{let g=v[e];if(null==g)return;let m=S[e],y=null!=D?Number(D[e]):void 0,f=m>=0&&!Object.is(m,-0);if(!Number.isFinite(r)||null!=y&&!Number.isFinite(y))return;let b=null!=m?this.getLabelText(this.properties.label,{datum:n[e],value:y??m,xKey:h,yKey:d,xName:u,yName:c,legendItemName:p}):void 0,x=null!=y&&y>m,M=C({datum:n[e],datumIndex:e,valueIndex:t,xValue:g,yValue:y??m,cumulativeValue:y??r,phantom:!1,currY:null!=y?s+y:r,prevY:s,x:i,width:a,isPositive:f,yRange:Math.max(s+(y??-1/0),o),labelText:b,opacity:l,crossScale:x?.6:void 0});if(N.push(M),T.push(M),null!=y){let h=C({datum:n[e],datumIndex:e,valueIndex:t,xValue:g,yValue:y,cumulativeValue:y,phantom:!0,currY:r,prevY:s,x:i,width:a,isPositive:f,yRange:o,labelText:void 0,opacity:l,crossScale:void 0});k.push(h)}},[O,j]=o.range,z=j-O,R=a?.find(e=>e.maxRange>z);if("grouped"===t.type){let i=e.hasColumnById(this,"yValue-start"),a=i?e.resolveColumnById(this,"yValue-start",t):void 0,s=i?e.resolveColumnById(this,"yValue-end",t):void 0,r=i?e.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(let{datumIndex:n,valueIndex:o,group:{aggregation:l}}of e.forEachGroupDatum(this,t)){let e=L(n),t=S[n],h=t>=0&&!Object.is(t,-0),d=i?Number(a?.[n]):0,u=i?Number(s?.[n]):t,c=u;i&&(c=l[r][+!!h]),E(n,o,e,f,d,u,c,1)}}else if(null==R){let[e,i]=this.visibleRange("xValue",s.range);t.input.count<1e3&&(e=0,i=t.input.count);for(let t=e;t<i;t+=1){let e=L(t),i=Number(S[t]);E(t,0,e,f,0,i,i,1)}}else{let{indexData:e,indices:t}=R,[i,a]=this.visibleRange("xValue",s.range,t);for(let t=i;t<a;t+=1){let i=4*t,a=e[i+0],s=e[i+1],r=e[i+2],n=e[i+3];if(-1===a)continue;let o=L((a+s)/2|0),l=Math.abs(L(s)-L(a))+f,h=null!=v[n]?Number(S[n]):NaN,d=null!=v[r]?Number(S[r]):NaN;if(h>0){let e=d>=0?d/h:1;E(n,0,o,l,0,h,h,e)}if(d<0){let e=h<=0?h/d:1;E(r,1,o,l,0,d,d,e)}}}return{itemId:d,nodeData:k.length>0?[...k,...N]:N,labelData:T,scales:this.calculateScaling(),visible:this.visible||I,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new hx}getHighlightData(e,t){let i=e.find(e=>e.datum===t.datum&&!e.phantom);return null!=i?[i]:void 0}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,e=>this.getDatumId(e))}getItemBaseStyle(e){let{properties:t}=this,{cornerRadius:i,fillGradientDefaults:a,fillPatternDefaults:s,fillImageDefaults:r}=t,n=e?t.highlightStyle.item:void 0;return oc({fill:n?.fill??t.fill,fillOpacity:n?.fillOpacity??t.fillOpacity,stroke:n?.stroke??t.stroke,strokeWidth:n?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:n?.strokeOpacity??t.strokeOpacity,lineDash:n?.lineDash??t.lineDash??[],lineDashOffset:n?.lineDashOffset??t.lineDashOffset,cornerRadius:i},a,s,r)}getItemStyleOverrides(e,t,i,a,s,r){let{id:n,properties:o}=this,{xKey:l,yKey:h,itemStyler:d,fillGradientDefaults:u,fillPatternDefaults:c,fillImageDefaults:p}=o;if(null==d)return;let{xDomain:g,yDomain:m}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})),y=this.cachedDatumCallback(l3(e,r?"highlight":"node"),()=>this.callWithContext(d,{seriesId:n,...a8(t,l,h,g,m),datum:t,xValue:i,yValue:a,highlighted:r,...s}));return oc(y,u,c,p)}updateDatumNodes(e){let{shadow:t}=this.properties,i="x"===this.getCategoryDirection(),a=this.getItemBaseStyle(e.isHighlight),s=this.getShapeFillBBox();e.datumSelection.each((r,n)=>{let o=this.getItemStyleOverrides(String(n.datumIndex),n.datum,n.xValue,n.yValue,a,e.isHighlight);r.opacity=n.opacity??0,og(r,a,o,s);let l=o?.cornerRadius??a.cornerRadius;r.topLeftCornerRadius=n.topLeftCornerRadius?l:0,r.topRightCornerRadius=n.topRightCornerRadius?l:0,r.bottomRightCornerRadius=n.bottomRightCornerRadius?l:0,r.bottomLeftCornerRadius=n.bottomLeftCornerRadius?l:0,r.visible=i?(n.clipBBox?.width??n.width)>0:(n.clipBBox?.height??n.height)>0,r.crisp=n.crisp,r.fillShadow=t})}updateLabelSelection(e){let t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,e=>{e.pointerEvents=1})}updateLabelNodes(e){e.labelSelection.each((e,t)=>{cV(e,this.properties.label,t.label)})}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,properties:s}=this,{xKey:r,xName:n,yKey:o,yName:l,legendItemName:h,stackGroup:d,tooltip:u}=s,c=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!a||!c||!p)return;let g=a.dataSources.get(this.id)?.[e],m=i.resolveKeysById(this,"xValue",a)[e],y=i.resolveColumnById(this,"yValue-raw",a)[e];if(null==m)return;let f=this.getItemBaseStyle(!1);return Object.assign(f,this.getItemStyleOverrides(String(e),g,m,y,f,!1)),this.formatTooltipWithContext(u,{heading:c.formatDatum(m),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:o,value:p.formatDatum(y)}]},{seriesId:t,datum:g,title:l,xKey:r,xName:n,yKey:o,yName:l,legendItemName:h,stackGroup:d,...f,...this.getModuleTooltipParams()})}legendItemSymbol(){let{fill:e,stroke:t,strokeWidth:i,fillOpacity:a,strokeOpacity:s,lineDash:r,lineDashOffset:n,fillGradientDefaults:o,fillPatternDefaults:l,fillImageDefaults:h}=this.properties;return{marker:oc({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:a,strokeOpacity:s,strokeWidth:i,lineDash:r,lineDashOffset:n},o,l,h)}}getLegendData(e){let{showInLegend:t}=this.properties;if("category"!==e)return[];let{id:i,ctx:{legendManager:a},visible:s}=this,{yKey:r,yName:n,legendItemName:o}=this.properties;return[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:s&&a.getItemEnabled({seriesId:i,itemId:r}),label:{text:o??n??r},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!t}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:i}){let a=cR(cj(this.isVertical(),this.axes,"normal"));rE(this.id,"nodes",this.ctx.animationManager,[e],a),dC(this,"labels",this.ctx.animationManager,t),dC(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){let{datumSelection:t,labelSelection:i,annotationSelections:a,contextData:s,previousContextData:r}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let n=cB(this.id,t,this.getDatumId.bind(this),e.contextData,r,this.processedData),o=null==r?"fade":"normal",l=cR(cj(this.isVertical(),this.axes,o));rE(this.id,"nodes",this.ctx.animationManager,[t],l,(e,t)=>this.getDatumId(t),n),(n?.changed||!uv(s.groupScale,r?.groupScale))&&(dC(this,"labels",this.ctx.animationManager,i),dC(this,"annotations",this.ctx.animationManager,...a))}getDatumId(e){return l3(e.xValue,e.valueIndex,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return cF(this,this.contextNodeData?.nodeData[e].clipBBox)}};c_.className="BarSeries",c_.type="bar";var c$={direction:(0,s.KC)("horizontal","vertical"),showInMiniChart:s.zM,cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),crisp:s.zM,label:{...cm,placement:(0,s.KC)("inside-center","inside-start","inside-end","outside-start","outside-end"),padding:s.Ly},errorBar:cf,shadow:cM,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL};c$.sparklineMode=(0,s._L)(s.zM);var cW={...c$,...cp,type:(0,s.mw)((0,s.dY)("bar")),xKey:(0,s.mw)(s.Yj),yKey:(0,s.mw)(s.Yj),xName:s.Yj,yName:s.Yj,direction:(0,s.KC)("horizontal","vertical"),grouped:s.zM,stacked:s.zM,stackGroup:s.Yj,normalizedTo:s.ai,legendItemName:s.Yj,errorBar:cb};cW.pickOutsideVisibleMinorAxis=(0,s._L)(s.zM),cW.fastDataProcessing=(0,s._L)(s.zM),cW.focusPriority=(0,s._L)(s.ai);var cH={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new c_(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:dx,themeTemplate:{series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:dI,fillImageDefaults:dL,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"backgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:hK,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}}},cZ={type:"series",name:"bar",chartType:"cartesian",options:cW,create:e=>new c_(e)},cK=class extends dY{constructor(){super(...arguments),this.maxSize=30}};l([ew,Z()],cK.prototype,"maxSize",2),l([ew,X()],cK.prototype,"domain",2);var cX=class extends nD{constructor(){super(...arguments),this.placement="top"}};l([ew],cX.prototype,"placement",2);var cQ=class extends dJ{constructor(){super(...arguments),this.label=new cX,this.tooltip=new d_,this.marker=new cK}};l([ew],cQ.prototype,"xKey",2),l([ew],cQ.prototype,"yKey",2),l([ew],cQ.prototype,"sizeKey",2),l([ew],cQ.prototype,"labelKey",2),l([ew],cQ.prototype,"xFilterKey",2),l([ew],cQ.prototype,"yFilterKey",2),l([ew],cQ.prototype,"sizeFilterKey",2),l([ew],cQ.prototype,"xName",2),l([ew],cQ.prototype,"yName",2),l([ew],cQ.prototype,"sizeName",2),l([ew],cQ.prototype,"labelName",2),l([ew],cQ.prototype,"title",2),l([tU("marker.shape")],cQ.prototype,"shape",2),l([tU("marker.size")],cQ.prototype,"size",2),l([tU("marker.maxSize")],cQ.prototype,"maxSize",2),l([tU("marker.domain")],cQ.prototype,"domain",2),l([tU("marker.fillGradientDefaults")],cQ.prototype,"fillGradientDefaults",2),l([tU("marker.fillPatternDefaults")],cQ.prototype,"fillPatternDefaults",2),l([tU("marker.fillImageDefaults")],cQ.prototype,"fillImageDefaults",2),l([tU("marker.fill")],cQ.prototype,"fill",2),l([tU("marker.fillOpacity")],cQ.prototype,"fillOpacity",2),l([tU("marker.stroke")],cQ.prototype,"stroke",2),l([tU("marker.strokeWidth")],cQ.prototype,"strokeWidth",2),l([tU("marker.strokeOpacity")],cQ.prototype,"strokeOpacity",2),l([tU("marker.lineDash")],cQ.prototype,"lineDash",2),l([tU("marker.lineDashOffset")],cQ.prototype,"lineDashOffset",2),l([tU("marker.itemStyler")],cQ.prototype,"itemStyler",2),l([ew],cQ.prototype,"label",2),l([ew],cQ.prototype,"tooltip",2);var cq=class extends dq{constructor(e,t,i,a){super(e,t,i,a),this.sizeKey=a.properties.sizeKey}},cJ=class extends d0{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:dN,marker:uP},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=cq,this.properties=new cQ,this.sizeScale=new hh}get pickModeAxis(){return"main-category"}async processData(e){if(null==this.data||!this.visible)return;let t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:a,yScaleType:s}=this.getScaleInformation({xScale:t,yScale:i}),r=this.sizeScale.type,{xKey:n,yKey:o,sizeKey:l,xFilterKey:h,yFilterKey:d,sizeFilterKey:u,labelKey:c,marker:p}=this.properties,{dataModel:g,processedData:m}=await this.requestDataModel(e,this.data,{props:[lE(n,a,{id:"xValue"}),lE(o,s,{id:"yValue"}),...null!=h?[lE(h,a,{id:"xFilterValue"})]:[],...null!=d?[lE(d,s,{id:"yFilterValue"})]:[],...null!=u?[lE(u,r,{id:"sizeFilterValue"})]:[],lE(l,r,{id:"sizeValue"}),...c?[lE(c,"band",{id:"labelValue"})]:[]]}),y=g.resolveProcessedDataIndexById(this,"sizeValue"),f=p.domain?[p.domain[0],p.domain[1]]:void 0;this.sizeScale.domain=f??m.domain.values[y]??[],this.animationState.transition("updateData")}xCoordinateRange(e,t,i){let{properties:a,sizeScale:s}=this,{size:r,sizeKey:n}=a,o=this.axes.x.scale.convert(e),l=null!=n?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,h=.5*(null!=l?s.convert(l[i]):r)*t;return[o-h,o+h]}yCoordinateRange(e,t,i){let{properties:a,sizeScale:s}=this,{size:r,sizeKey:n}=a,o=this.axes.y.scale.convert(e[0]),l=null!=n?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,h=.5*(null!=l?s.convert(l[i]):r)*t;return[o-h,o+h]}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let a={x:"xValue",y:"yValue"},s=a[e],r=t.resolveProcessedDataDefById(this,s),n=t.getDomain(this,s,"value",i);if(r?.def.type==="value"&&r?.def.valueType==="category")return n;let o=a["x"===e?"y":"x"];return ru(lg(this.domainForClippedRange(e,[s],o,!1)))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t,!1)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValue"],e,t,i)}createNodeData(){let{axes:e,dataModel:t,processedData:i,sizeScale:a,visible:s}=this,{xKey:r,yKey:n,sizeKey:o,xFilterKey:l,yFilterKey:h,sizeFilterKey:d,labelKey:u,xName:c,yName:p,sizeName:g,labelName:m,label:y,marker:f}=this.properties,{placement:b}=y,x=oO.anchor(f.shape),M=e.x,v=e.y;if(!(t&&i&&s&&M&&v))return;let S=t.resolveColumnById(this,"xValue",i),D=t.resolveColumnById(this,"yValue",i),I=null!=o?t.resolveColumnById(this,"sizeValue",i):void 0,L=null!=u?t.resolveColumnById(this,"labelValue",i):void 0,A=null!=l?t.resolveColumnById(this,"xFilterValue",i):void 0,w=null!=h?t.resolveColumnById(this,"yFilterValue",i):void 0,C=null!=d?t.resolveColumnById(this,"sizeFilterValue",i):void 0,k=M.scale,N=v.scale,T=(k.bandwidth??0)/2,E=(N.bandwidth??0)/2,O=[];a.range=[f.size,f.maxSize];let j=y.getFont(),z=it.getMeasurer({font:j});return i.dataSources.get(this.id)?.forEach((e,t)=>{let i,s=S[t],l=D[t],h=I?.[t],d=k.convert(s)+T,M=N.convert(l)+E;null!=A&&null!=w&&(i=A[t]===s&&w[t]===l,null!=C&&i&&(i=C[t]===h));let v=this.getLabelText(y,{value:null!=L?L[t]:l,datum:e,xKey:r,yKey:n,sizeKey:o,labelKey:u,xName:c,yName:p,sizeName:g,labelName:m}),j=z.measureText(String(v)),R=null!=h?a.convert(h):f.size;O.push({series:this,itemId:n,yKey:n,xKey:r,datum:e,datumIndex:t,xValue:s,yValue:l,sizeValue:h,point:{x:d,y:M,size:R},midPoint:{x:d,y:M},label:{text:v,...j},anchor:x,placement:b,selected:i})}),{itemId:n,nodeData:O,labelData:O,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(e){let{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let a=this.properties.marker.enabled?t:[];return i.update(a,void 0,e=>l3([e.xValue,e.yValue,e.sizeValue,e.label.text]))}updateMarkerNodes(e){let{markerSelection:t,isHighlight:i}=e,{xKey:a,yKey:s,sizeKey:r,labelKey:n,marker:o}=this.properties,l=z(i&&this.properties.highlightStyle.item,o.getStyle());this.sizeScale.range=[o.size,o.maxSize];let h=this.getShapeFillBBox();t.each((e,t)=>{this.updateMarkerStyle(o,e,t.datum,t.point,{xKey:a,yKey:s,sizeKey:r,labelKey:n},i,l,h,{selected:t.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){let{label:t}=this.properties;e.labelSelection.each((e,i)=>{e.text=i.label.text,e.fill=t.color,e.x=i.point?.x??0,e.y=i.point?.y??0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"})}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,axes:s,properties:r}=this,{xKey:n,xName:o,yKey:l,yName:h,sizeKey:d,sizeName:u,labelKey:c,labelName:p,title:g,tooltip:m,marker:y}=r,f=s.x,b=s.y;if(!i||!a||!f||!b)return;let x=a.dataSources.get(this.id)?.[e],M=i.resolveColumnById(this,"xValue",a)[e],v=i.resolveColumnById(this,"yValue",a)[e],S=this.contextNodeData?.nodeData[e];if(null==M||null==S)return;let D=[{label:o,fallbackLabel:n,value:f.formatDatum(M)},{label:h,fallbackLabel:l,value:b.formatDatum(v)}];if(null!=d){let t=i.resolveColumnById(this,"sizeValue",a)[e];D.push({label:u,fallbackLabel:d,value:String(t)})}let I=y.getStyle(),L=this.getMarkerStyle(y,x,{xKey:n,yKey:l,sizeKey:d,labelKey:c,highlighted:!0},!1,void 0,I);return this.formatTooltipWithContext(m,{title:g,symbol:this.legendItemSymbol(),data:D},{seriesId:t,datum:x,title:l,xKey:n,xName:o,yKey:l,yName:h,sizeKey:d,sizeName:u,labelKey:c,labelName:p,...L,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(){let{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:a,yName:s,title:r}=this.properties;return[{legendType:"category",id:e,itemId:a,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:a}),label:{text:r??s??a},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:e,labelSelection:t}){uz(this,this.ctx.animationManager,e),dC(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new tu}getFormattedMarkerStyle(e){let{xKey:t,yKey:i,sizeKey:a,labelKey:s,marker:r}=this.properties;return this.getMarkerStyle(r,e,{xKey:t,yKey:i,sizeKey:a,labelKey:s},!1,e.point.size)}computeFocusBounds(e){return uB(this,e)}};cJ.className="BubbleSeries",cJ.type="bubble";var c0={title:s.Yj,domain:(0,s.jk)(s.ai),maxSize:s.Ly,showInMiniChart:s.zM,label:{placement:(0,s.KC)("top","right","bottom","left"),...cm},tooltip:cx,...cc,...B(cg,["enabled"])},c1={...c0,...cp,type:(0,s.mw)((0,s.dY)("bubble")),xKey:(0,s.mw)(s.Yj),yKey:(0,s.mw)(s.Yj),sizeKey:(0,s.mw)(s.Yj),labelKey:s.Yj,xName:s.Yj,yName:s.Yj,sizeName:s.Yj,labelName:s.Yj},c2={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new cJ(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:dI,fillImageDefaults:dL,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},c4={type:"series",name:"bubble",chartType:"cartesian",options:c1,create:e=>new cJ(e)},c3=class extends dJ{constructor(){super(...arguments),this.fillGradientDefaults=new dP,this.fillPatternDefaults=new dF,this.fillImageDefaults=new dB,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new dE,this.label=new nD,this.tooltip=new d_}};l([ew],c3.prototype,"xKey",2),l([ew],c3.prototype,"yKey",2),l([ew],c3.prototype,"xName",2),l([ew],c3.prototype,"yName",2),l([ew],c3.prototype,"fill",2),l([ew],c3.prototype,"fillGradientDefaults",2),l([ew],c3.prototype,"fillPatternDefaults",2),l([ew],c3.prototype,"fillImageDefaults",2),l([ew],c3.prototype,"fillOpacity",2),l([ew],c3.prototype,"stroke",2),l([ew],c3.prototype,"strokeWidth",2),l([ew],c3.prototype,"strokeOpacity",2),l([ew],c3.prototype,"lineDash",2),l([ew],c3.prototype,"lineDashOffset",2),l([ew],c3.prototype,"cornerRadius",2),l([ew],c3.prototype,"areaPlot",2),l([ew],c3.prototype,"bins",2),l([ew],c3.prototype,"aggregation",2),l([ew],c3.prototype,"binCount",2),l([ew],c3.prototype,"shadow",2),l([ew],c3.prototype,"label",2),l([ew],c3.prototype,"tooltip",2);var c5=class extends d0{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:cP,label:dN}}),this.properties=new c3,this.calculatedBins=[]}deriveBins(e){let t=r9(e[0],e[1],10).ticks,i=ne(e[0],e[1],10),[a]=t;return[[a-i,a],...t.map(e=>[e,e+i])]}calculateNiceBins(e,t){let i=Math.floor(e[0]),a=e[1],s=t||1,{start:r,binSize:n}=this.calculateNiceStart(i,a,s);return this.getBins(r,a,n,s)}getBins(e,t,i,a){let s=[],r=this.calculatePrecision(i);for(let n=0;n<a;n++){let o=Math.round((e+n*i)*r)/r,l=Math.round((e+(n+1)*i)*r)/r;n===a-1&&(l=Math.max(l,t)),s[n]=[o,l]}return s}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){let a=Math.abs(t-e)/i,s=Math.pow(10,Math.floor(Math.log10(a)));return{start:Math.floor(e/s)*s,binSize:a}}async processData(e){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));let{xKey:t,yKey:i,areaPlot:a,aggregation:r}=this.properties,n=this.axes.x?.scale,o=this.axes.y?.scale,{xScaleType:l,yScaleType:h}=this.getScaleInformation({yScale:o,xScale:n}),d=[lT(t,l),lU];if(i){let e=lS("groupAgg");"count"===r||("sum"===r?e=lv("groupAgg"):"mean"===r&&(e=lD("groupAgg"))),a&&(e=lI("groupAgg",e)),d.push(lE(i,h,{invalidValue:void 0}),e)}else{d.push(lO("count"));let e=lS("groupAgg");a&&(e=lI("groupAgg",e)),d.push(e)}!this.ctx.animationManager.isSkipped()&&this.processedData&&d.push(l4(this.id,this.processedData,!1)),await this.requestDataModel(e,this.data,{props:d,groupByFn:e=>{let t=ru(e.domain.keys[0]);if(0===t.length)return e.domain.groups=[],()=>[];let i=(0,s.Et)(this.properties.binCount)?this.calculateNiceBins(t,this.properties.binCount):this.properties.bins??this.deriveBins(t),a=i.length;return this.calculatedBins=[...i],e=>{let t=e[0];if((0,s.$P)(t)&&(t=t.getTime()),!(0,s.Et)(t))return[];for(let e=0;e<a;e++){let s=i[e];if(t>=s[0]&&t<s[1]||e===a-1&&t<=s[1])return s}return[]}}}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(e){let{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];let a=i.getDomain(this,"groupAgg","aggregate",t),s=this.calculatedBins?.[0][0],r=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return"x"===e?ru([s,r]):ru(a)}getSeriesRange(e,[t,i]){let{dataModel:a,processedData:s}=this;if(!a||s?.type!=="grouped")return[NaN,NaN];let r=this.axes.x.scale,n=-1/0;return(s.groups.forEach(({keys:e,aggregation:a})=>{let[[s,o]=[0,0]]=a,[l,h]=e,[d,u]=sh([r.convert(l),r.convert(h)]);u>=t&&d<=i&&(n=Math.max(n,s+o))}),0>n)?[NaN,NaN]:[0,n]}frequency(e){return e.datumIndices.reduce((e,t)=>e+t.length,0)}createNodeData(){let{id:e,axes:t,processedData:i,dataModel:a}=this,s=t.x,r=t.y;if(!s||!r||!a)return;let{scale:n}=s,{scale:o}=r,{xKey:l,yKey:h,xName:d,yName:u}=this.properties,c=this.properties.label.formatter,p=[],g={itemId:this.properties.yKey??this.id,nodeData:p,labelData:p,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&null!=i&&"grouped"===i.type&&(i.groups.forEach((t,s)=>{let g,{keys:m,aggregation:y}=t,[[f,b]=[0,0]]=y,x=this.frequency(t),[M,v]=m,S=[...a.forEachDatum(this,i,t)],D=n.convert(M),I=n.convert(v),L=f+b,A=o.convert(0),w=o.convert(L),C=Math.abs(I-D),k=Math.abs(w-A),N=Math.min(D,I),T=Math.min(A,w);0!==L&&(g={x:N+C/2,y:T+k/2,text:this.cachedDatumCallback(l3(s,"label"),()=>c?.({value:L,datum:S,seriesId:e,xKey:l,yKey:h,xName:d,yName:u}))??r.formatDatum(L)});let E=r.isReversed();p.push({series:this,datumIndex:s,datum:S,aggregatedValue:L,frequency:x,domain:m,yKey:h,xKey:l,x:N,y:T,xValue:D,yValue:w,width:C,height:k,midPoint:{x:N+C/2,y:T+k/2},topLeftCornerRadius:!E,topRightCornerRadius:!E,bottomRightCornerRadius:E,bottomLeftCornerRadius:E,label:g,crisp:!0})}),p.sort((e,t)=>e.x-t.x)),g}nodeFactory(){return new hx}updateDatumSelection(e){let{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,e=>e.domain.join("_"))}getItemBaseStyle(e){let{properties:t}=this,i=e?t.highlightStyle.item:void 0;return oc({fill:i?.fill??t.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke??t.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity,lineDash:i?.lineDash??t.lineDash,lineDashOffset:i?.lineDashOffset??t.lineDashOffset,cornerRadius:t.cornerRadius},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}updateDatumNodes(e){let{isHighlight:t}=e,{shadow:i}=this.properties,a=this.getItemBaseStyle(t),s=this.getShapeFillBBox();e.datumSelection.each((e,t)=>{let{cornerRadius:r}=a,{topLeftCornerRadius:n,topRightCornerRadius:o,bottomRightCornerRadius:l,bottomLeftCornerRadius:h}=t;og(e,a,void 0,s),e.topLeftCornerRadius=n?r:0,e.topRightCornerRadius=o?r:0,e.bottomRightCornerRadius=l?r:0,e.bottomLeftCornerRadius=h?r:0,e.crisp=t.crisp,e.fillShadow=i,e.visible=t.height>0})}updateLabelSelection(e){let{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.pointerEvents=1,e.textAlign="center",e.textBaseline="middle"})}updateLabelNodes(e){let{fontStyle:t,fontWeight:i,fontFamily:a,fontSize:s,color:r}=this.properties.label,n=this.isLabelEnabled();e.labelSelection.each((e,o)=>{n&&o?.label?(e.text=o.label.text,e.x=o.label.x,e.y=o.label.y,e.fontStyle=t,e.fontWeight=i,e.fontFamily=a,e.fontSize=s,e.fill=r,e.visible=!0):e.visible=!1})}initQuadTree(e){let{value:t}=this.contentGroup.children().next();t&&cA(e,t.children())}pickNodeClosestDatum(e){return cw(this,e)}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,axes:s,properties:r,ctx:{localeManager:n}}=this,{xKey:o,xName:l,yKey:h,yName:d,tooltip:u}=r,c=s.x,p=s.y;if(!i||a?.type!=="grouped"||!c||!p)return;let g=a.groups[e],{aggregation:m,keys:y}=g,[[f,b]=[0,0]]=m,x=this.frequency(g),[M,v]=y,S=f+b,D={data:[...i.forEachDatum(this,a,g)],aggregatedValue:S,frequency:x,domain:y},I=[{label:l,fallbackLabel:o,value:`${c.formatDatum(M)} - ${c.formatDatum(v)}`},{label:n.t("seriesHistogramTooltipFrequency"),value:p.formatDatum(x)}];if(null!=h){let e;switch(r.aggregation){case"sum":e=n.t("seriesHistogramTooltipSum",{yName:d??h});break;case"mean":e=n.t("seriesHistogramTooltipMean",{yName:d??h});break;case"count":e=n.t("seriesHistogramTooltipCount",{yName:d??h})}I.push({label:e,value:p.formatDatum(S)})}return this.formatTooltipWithContext(u,{symbol:this.legendItemSymbol(),data:I},{seriesId:t,datum:D,title:d,xKey:o,xName:l,yKey:h,yName:d,xRange:[M,v],frequency:x,...this.getItemBaseStyle(!1)})}legendItemSymbol(){let{fill:e,fillOpacity:t,stroke:i,strokeWidth:a,strokeOpacity:s,lineDash:r,lineDashOffset:n,fillGradientDefaults:o,fillPatternDefaults:l,fillImageDefaults:h}=this.properties;return{marker:oc({fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:s,strokeWidth:a,lineDash:r,lineDashOffset:n},o,l,h)}}getLegendData(e){if("category"!==e)return[];let{id:t,ctx:{legendManager:i},visible:a}=this,{xKey:s,yName:r,showInLegend:n}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:a&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:r??s??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!n}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){let i=cR(cj(!0,this.axes,"normal"));rE(this.id,"datums",this.ctx.animationManager,[e],i),dC(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){let t=cR(cj(!0,this.axes,"normal")),i=cB(this.id,e.datumSelection,e=>l3(e.domain),e.contextData,e.previousContextData,this.processedData);rE(this.id,"datums",this.ctx.animationManager,[e.datumSelection],t,(e,t)=>l3(t.domain),i),i?.changed&&dC(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return cF(this,this.contextNodeData?.nodeData[e])}};c5.className="HistogramSeries",c5.type="histogram";var c9={showInMiniChart:s.zM,cornerRadius:s.Ly,label:cm,tooltip:cx,shadow:cM,...cc,...s.Fu,...s.AF,...s.mL},c6={...c9,...cp,type:(0,s.mw)((0,s.dY)("histogram")),xKey:(0,s.mw)(s.Yj),yKey:s.Yj,xName:s.Yj,yName:s.Yj,areaPlot:s.zM,aggregation:(0,s.KC)("count","sum","mean"),bins:(0,s.jk)((0,s.jk)(s.ai)),binCount:s.Ly},c8={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new c5(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:dI,fillImageDefaults:dL,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},shadow:{enabled:!1,color:hK,xOffset:3,yOffset:3,blur:5}}}},c7={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:c6,create:e=>new c5(e)},pe=class extends dJ{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new d1,this.marker=new dY,this.label=new nD,this.tooltip=new d_,this.connectMissingData=!1,this.sparklineMode=!1}};l([ew],pe.prototype,"xKey",2),l([ew],pe.prototype,"yKey",2),l([ew],pe.prototype,"xName",2),l([ew],pe.prototype,"yName",2),l([ew],pe.prototype,"yFilterKey",2),l([ew],pe.prototype,"stackGroup",2),l([ew],pe.prototype,"normalizedTo",2),l([ew],pe.prototype,"title",2),l([ew],pe.prototype,"stroke",2),l([ew],pe.prototype,"strokeWidth",2),l([ew],pe.prototype,"strokeOpacity",2),l([ew],pe.prototype,"lineDash",2),l([ew],pe.prototype,"lineDashOffset",2),l([ew],pe.prototype,"interpolation",2),l([ew],pe.prototype,"marker",2),l([ew],pe.prototype,"label",2),l([ew],pe.prototype,"tooltip",2),l([ew],pe.prototype,"connectMissingData",2),l([ew],pe.prototype,"sparklineMode",2);var pt=class extends d0{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:"xValue",hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:uY({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:dN,marker:(e,t)=>({...uP(e),...uF(e,t)})},clipFocusBox:!1}),this.properties=new pe,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(e){if(null==this.data)return;let{data:t,visible:i,seriesGrouping:{groupIndex:a=this.id,stackCount:r=0}={}}=this,{xKey:n,yKey:o,yFilterKey:l,connectMissingData:h,normalizedTo:d}=this.properties,u=!this.ctx.animationManager.isSkipped(),c=this.axes.x?.scale,p=this.axes.y?.scale,{isContinuousX:g,xScaleType:m,yScaleType:y}=this.getScaleInformation({xScale:c,yScale:p}),f=r>=1||null!=d,b={invalidValue:null};h&&f&&(b.invalidValue=0),f&&!i&&(b.forceValue=0);let x=[];if((!g||f)&&x.push(lT(n,m,{id:"xKey"})),x.push(lE(n,m,{id:"xValue"}),lE(o,y,{id:"yValueRaw",...b,invalidValue:void 0})),null!=l&&x.push(lE(l,y,{id:"yFilterRaw"})),f){let e=[`line-stack-${a}-yValues`,`line-stack-${a}-yValues-trailing`,`line-stack-${a}-yValues-marker`];x.push(...lB(o,"window","current",{id:"yValueEnd",...b,groupId:e[0]},y),...lB(o,"window-trailing","current",{id:"yValueStart",...b,groupId:e[1]},y),...lB(o,"normal","current",{id:"yValueCumulative",...b,groupId:e[2]},y)),(0,s.vM)(d)&&x.push(l$([e[0],e[1],e[2]],d))}u&&(x.push(lK(g?["xValue"]:void 0)),this.processedData&&x.push(l4(this.id,this.processedData)));let{dataModel:M,processedData:v}=await this.requestDataModel(e,t,{props:x,groupByKeys:f,groupByData:!f});this.dataAggregationFilters=this.aggregateData(M,v),this.animationState.transition("updateData")}xCoordinateRange(e,t){let{marker:i}=this.properties,a=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[a-s,a+s]}yCoordinateRange(e,t){let{marker:i}=this.properties,a=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[a-s,a+s]}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!t||!i)return[];if("x"===e){let e=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","value",i);return e?.def.type==="value"&&"category"===e.def.valueType?a:ru(lg(a))}let a=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return ru(this.domainForClippedRange("y",[a],"xValue",!0))}getSeriesRange(e,t){let i=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[i],"xValue",t,!0)}getVisibleItems(e,t,i){let a=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[a],e,t,i)}aggregateData(e,t){}createNodeData(){let e,{dataModel:t,processedData:i,axes:a,dataAggregationFilters:s}=this,r=a.x,n=a.y;if(!t||!i||!r||!n)return;let{xKey:o,yKey:l,yFilterKey:h,xName:d,yName:u,marker:c,label:p,connectMissingData:g,interpolation:m,legendItemName:y}=this.properties,f=this.dataModel?.hasColumnById(this,"yValueEnd"),b=r.scale,x=n.scale,M=(b.bandwidth??0)/2,v=(x.bandwidth??0)/2,S=c.enabled?c.size:0,D=i.dataSources.get(this.id)??[],I=t.resolveColumnById(this,"xValue",i),L=t.resolveColumnById(this,"yValueRaw",i),A=f?t.resolveColumnById(this,"yValueEnd",i):void 0,w=f?t.resolveColumnById(this,"yValueCumulative",i):L,C=null!=h?t.resolveColumnById(this,"yFilterRaw",i):void 0,k=e=>b.convert(I[e])+M,N=e=>x.convert(w[e])+v,T={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},E=[],O=t=>{let i=D[t],a=I[t],s=L[t],r=A?.[t],n=C?.[t],h=k(t),c=N(t);if(!Number.isFinite(h))return;if(null!=s){let e=p.enabled?this.getLabelText(p,{value:s,datum:i,xKey:o,yKey:l,xName:d,yName:u,legendItemName:y}):void 0;E.push({series:this,datum:i,datumIndex:t,yKey:l,xKey:o,point:{x:h,y:c,size:S},midPoint:{x:h,y:c},cumulativeValue:r,yValue:s,xValue:a,capDefaults:T,labelText:e,selected:n})}if(null==e)return;let m=e[e.length-1];if(null!=s){let t={point:{x:h,y:c},xDatum:a,yDatum:s};Array.isArray(m)?m.push(t):(null!=m&&(m.skip+=1),e.push([t]))}else g||(Array.isArray(m)||null==m?e.push({skip:0}):m.skip+=1)},[j,z]=b.range,R=z-j,P=s?.find(e=>e.maxRange>R),F=P?.indices,[B,G]=this.visibleRange("xValue",r.range,F);B=Math.max(B-1,0),G=Math.min(G+1,F?.length??I.length),i.input.count<1e3&&(B=0,G=i.input.count),null==F&&(e=[]);for(let e=B;e<G;e+=1)O(F?.[e]??e);let V=e?.flatMap(e=>Array.isArray(e)?uD(e,m):[]),Y=null!=V?{itemId:l,spans:V}:void 0,U=C?.some((e,t)=>e===L[t])??!1;return{itemId:l,nodeData:E,labelData:E,strokeData:Y,scales:this.calculateScaling(),visible:this.visible,crossFiltering:U}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){let{paths:[t],opacity:i,visible:a,animationEnabled:s}=e,r=this.contextNodeData?.crossFiltering===!0;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(r?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(t.visible=a),uU(this,t)}getMarkerItemBaseStyle(e){let{properties:t}=this,{marker:i}=t,a=e?t.highlightStyle.item:void 0;return oc({size:i.size,shape:i.shape,fill:a?.fill??i.fill,fillOpacity:a?.fillOpacity??i.fillOpacity,stroke:a?.stroke??i.stroke,strokeWidth:a?.strokeWidth??i.strokeWidth,strokeOpacity:a?.strokeOpacity??i.strokeOpacity,lineDash:a?.lineDash??i.lineDash,lineDashOffset:a?.lineDashOffset??i.lineDashOffset},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getMarkerItemStyleOverrides(e,t,i,a){let{id:s,properties:r}=this,{xKey:n,yKey:o,marker:l}=r,{itemStyler:h}=l;if(null!=h)return this.cachedDatumCallback(l3(e,a?"highlight":"node"),()=>{let e=this.getSeriesDomain("x"),r=this.getSeriesDomain("y");return this.callWithContext(h,{seriesId:s,...a8(t,n,o,e,r),datum:t,highlighted:a,...i})})}updateMarkerSelection(e){let{nodeData:t}=e,{markerSelection:i}=e;return t=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,e=>l3(e.xValue))}updateMarkerNodes(e){let{markerSelection:t,isHighlight:i}=e,{xKey:a,yKey:s,stroke:r,strokeWidth:n,strokeOpacity:o,marker:l,highlightStyle:h}=this.properties,d=this.getSeriesDomain("x"),u=this.getSeriesDomain("y"),c=z(i&&h.item,l.getStyle(),{stroke:r,strokeWidth:n,strokeOpacity:o}),p=this.ctx.animationManager.isSkipped(),g=this.getShapeFillBBox();t.each((e,t)=>{this.updateMarkerStyle(l,e,t.datum,t.point,a8(t,a,s,d,u),i,c,g,{applyTranslation:p,selected:t.selected})}),i||l.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){let{enabled:t,fontStyle:i,fontWeight:a,fontSize:s,fontFamily:r,color:n}=this.properties.label;e.labelSelection.each((e,o)=>{t&&o?.labelText?(e.fontStyle=i,e.fontWeight=a,e.fontSize=s,e.fontFamily=r,e.textAlign="center",e.textBaseline="bottom",e.text=o.labelText,e.x=o.point.x,e.y=o.point.y-10,e.fill=n,e.visible=!0):e.visible=!1})}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,axes:s,properties:r}=this,{xKey:n,xName:o,yKey:l,yName:h,tooltip:d}=r,u=s.x,c=s.y;if(!i||!a||!u||!c)return;let p=a.dataSources.get(this.id)?.[e],g=i.resolveColumnById(this,"xValue",a)[e],m=i.resolveColumnById(this,"yValueRaw",a)[e];if(null==g)return;let y=this.getMarkerItemBaseStyle(!1);return Object.assign(y,this.getMarkerItemStyleOverrides(String(e),p,y,!1)),this.formatTooltipWithContext(d,{heading:u.formatDatum(g),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:l,value:c.formatDatum(m)}]},{seriesId:t,datum:p,title:h,xKey:n,xName:o,yKey:l,yName:h,...y,...this.getModuleTooltipParams()})}legendItemSymbol(){let e="rgba(0, 0, 0, 0)",{stroke:t,strokeOpacity:i,strokeWidth:a,lineDash:s,marker:r}=this.properties;return{marker:{...this.getMarkerStyle(r,void 0,void 0,!1,void 0,{fill:r.fill??e,stroke:r.stroke??t??e}),enabled:r.enabled},line:{stroke:t??e,strokeOpacity:i,strokeWidth:a,lineDash:s}}}getLegendData(e){if("category"!==e)return[];let{id:t,ctx:{legendManager:i},visible:a}=this,{yKey:s,yName:r,title:n,legendItemName:o,showInLegend:l}=this.properties;return[{legendType:"category",id:t,itemId:s,legendItemName:o,seriesId:t,enabled:a&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:o??n??r??s},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}plotNodeDataPoints(e,t){if(0===t.length)return;let i=t[0].point;e.moveTo(i.x,i.y);for(let i=1;i<t.length;i+=1){let{x:a,y:s}=t[i].point;e.lineTo(a,s)}}updateLinePaths(e,t){let i=t.strokeData?.spans,[a]=e;a.path.clear(),null!=i?uL(a,i):this.plotNodeDataPoints(a.path,t.nodeData),a.markDirty("LineSeries")}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:i,annotationSelections:a,contextData:s,paths:r}=e,{animationManager:n}=this.ctx;this.updateLinePaths(r,s),uG(this,n,...r),rz([t],uF),uR(this,n,t),dC(this,"labels",n,i),dC(this,"annotations",n,...a)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){let{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:a,annotationSelections:s,contextData:r,paths:n,previousContextData:o}=e,[l]=n;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);let h=()=>{this.resetPathAnimation(e),this.updateLinePaths(n,r)},d=()=>{t.skipCurrentBatch(),h()};if(null==r||null==o){h(),uj(this,t,"added",i),uV(this,"path_properties",t,"add",l),dC(this,"labels",t,a),dC(this,"annotations",t,...s);return}if(r.crossFiltering!==o.crossFiltering)return void d();let u=uk(r,o,this.processedData?.reduced?.diff?.[this.id]);if(void 0===u)return void d();"no-op"!==u.status&&(rE(this.id,"path_properties",t,[l],u.stroke.pathProperties),"added"===u.status?this.updateLinePaths(n,r):"removed"===u.status?this.updateLinePaths(n,o):dw(this.id,"path_update",t,[l],u.stroke.path),u.hasMotion&&(uj(this,t,void 0,i),dC(this,"labels",t,a),dC(this,"annotations",t,...s)))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new tu}getFormattedMarkerStyle(e){let{xKey:t,yKey:i}=this.properties,a=this.getSeriesDomain("x"),s=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e.datum,a8(e,t,i,a,s),!0)}computeFocusBounds(e){return uB(this,e)}};pt.className="LineSeries",pt.type="line";var pi={title:s.Yj,showInMiniChart:s.zM,connectMissingData:s.zM,interpolation:cv,label:cm,marker:cg,tooltip:cx,errorBar:cf,...cc,...s.AF,...s.mL};pi.sparklineMode=(0,s._L)(s.zM);var pa={...pi,...cp,type:(0,s.dY)("line"),xKey:(0,s.mw)(s.Yj),yKey:(0,s.mw)(s.Yj),xName:s.Yj,yName:s.Yj,stacked:s.zM,stackGroup:s.Yj,normalizedTo:s.ai,legendItemName:s.Yj,errorBar:cb};pa.pickOutsideVisibleMinorAxis=(0,s._L)(s.zM),pa.focusPriority=(0,s._L)(s.ai);var ps={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new pt(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{_seriesOverrideType:"node"}},stroke:dS,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:dI,fillImageDefaults:dL},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},pr={type:"series",name:"line",chartType:"cartesian",options:pa,create:e=>new pt(e)},pn=class extends nD{constructor(){super(...arguments),this.placement="top"}};l([ew],pn.prototype,"placement",2);var po=class extends dJ{constructor(){super(...arguments),this.label=new pn,this.tooltip=new d_,this.marker=new dY}};l([ew],po.prototype,"xKey",2),l([ew],po.prototype,"yKey",2),l([ew],po.prototype,"labelKey",2),l([ew],po.prototype,"xFilterKey",2),l([ew],po.prototype,"yFilterKey",2),l([ew],po.prototype,"xName",2),l([ew],po.prototype,"yName",2),l([ew],po.prototype,"labelName",2),l([ew],po.prototype,"title",2),l([tU("marker.shape")],po.prototype,"shape",2),l([tU("marker.size")],po.prototype,"size",2),l([tU("marker.fill")],po.prototype,"fill",2),l([tU("marker.fillGradientDefaults")],po.prototype,"fillGradientDefaults",2),l([tU("marker.fillPatternDefaults")],po.prototype,"fillPatternDefaults",2),l([tU("marker.fillImageDefaults")],po.prototype,"fillImageDefaults",2),l([tU("marker.fillOpacity")],po.prototype,"fillOpacity",2),l([tU("marker.stroke")],po.prototype,"stroke",2),l([tU("marker.strokeWidth")],po.prototype,"strokeWidth",2),l([tU("marker.strokeOpacity")],po.prototype,"strokeOpacity",2),l([tU("marker.lineDash")],po.prototype,"lineDash",2),l([tU("marker.lineDashOffset")],po.prototype,"lineDashOffset",2),l([tU("marker.itemStyler")],po.prototype,"itemStyler",2),l([ew],po.prototype,"label",2),l([ew],po.prototype,"tooltip",2);var pl=class extends d0{constructor(e){super({moduleCtx:e,directionKeys:dX,directionNames:dQ,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:uP,label:dN},usesPlacedLabels:!0,clipFocusBox:!1}),this.properties=new po}get pickModeAxis(){return"main-category"}async processData(e){if(null==this.data||!this.visible)return;let t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:a,yScaleType:s}=this.getScaleInformation({xScale:t,yScale:i}),{xKey:r,yKey:n,xFilterKey:o,yFilterKey:l,labelKey:h}=this.properties;await this.requestDataModel(e,this.data,{props:[lE(r,a,{id:"xValue"}),lE(n,s,{id:"yValue"}),...null!=o?[lE(o,a,{id:"xFilterValue"})]:[],...null!=l?[lE(l,s,{id:"yFilterValue"})]:[],...h?[lE(h,"band",{id:"labelValue"})]:[]]}),this.animationState.transition("updateData")}xCoordinateRange(e,t){let i=this.axes.x.scale.convert(e),a=.5*this.properties.size*t;return[i-a,i+a]}yCoordinateRange(e,t){let i=this.axes.y.scale.convert(e[0]),a=.5*this.properties.size*t;return[i-a,i+a]}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let a={x:"xValue",y:"yValue"},s=a[e],r=t.resolveProcessedDataDefById(this,s),n=t.getDomain(this,s,"value",i);if(r?.def.type==="value"&&r?.def.valueType==="category")return n;let o=a["x"===e?"y":"x"];return ru(lg(this.domainForClippedRange(e,[s],o,!1)))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t,!1)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValue"],e,t,i)}createNodeData(){let{axes:e,dataModel:t,processedData:i,visible:a}=this,{xKey:s,yKey:r,xFilterKey:n,yFilterKey:o,labelKey:l,xName:h,yName:d,labelName:u,marker:c,label:p}=this.properties,{placement:g}=p,m=oO.anchor(c.shape),y=e.x,f=e.y;if(!(t&&i&&a&&y&&f))return;let b=t.resolveColumnById(this,"xValue",i),x=t.resolveColumnById(this,"yValue",i),M=null!=l?t.resolveColumnById(this,"labelValue",i):void 0,v=null!=n?t.resolveColumnById(this,"xFilterValue",i):void 0,S=null!=o?t.resolveColumnById(this,"yFilterValue",i):void 0,D=y.scale,I=f.scale,L=(D.bandwidth??0)/2,A=(I.bandwidth??0)/2,w=[],C=p.getFont(),k=it.getMeasurer({font:C});return(i.dataSources.get(this.id)??[]).forEach((e,t)=>{let i=b[t],a=x[t],n=D.convert(i)+L,o=I.convert(a)+A,y=null!=v&&null!=S?v[t]===i&&S[t]===a:void 0,f=this.getLabelText(p,{value:null!=M?M?.[t]:a,datum:e,xKey:s,yKey:r,labelKey:l,xName:h,yName:d,labelName:u}),C=k.measureText(f);w.push({series:this,itemId:r,yKey:r,xKey:s,datum:e,datumIndex:t,xValue:i,yValue:a,capDefaults:{lengthRatioMultiplier:c.getDiameter(),lengthMax:1/0},point:{x:n,y:o,size:c.size},midPoint:{x:n,y:o},label:{text:f,...C},anchor:m,placement:g,selected:y})}),{itemId:r,nodeData:w,labelData:w,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateMarkerSelection(e){let{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}updateMarkerNodes(e){let{markerSelection:t,isHighlight:i}=e,{xKey:a,yKey:s,labelKey:r,marker:n,highlightStyle:o}=this.properties,l=z(i&&o.item,n.getStyle()),h=this.getShapeFillBBox();t.each((e,t)=>{this.updateMarkerStyle(n,e,t.datum,t.point,{xKey:a,yKey:s,labelKey:r},i,l,h,{selected:t.selected})}),i||n.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}})),e=>{e.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){let{label:t}=this.properties;e.labelSelection.each((e,i)=>{e.text=i.label.text,e.fill=t.color,e.x=i.point?.x??0,e.y=i.point?.y??0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"})}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,axes:s,properties:r}=this,{xKey:n,xName:o,yKey:l,yName:h,labelKey:d,labelName:u,title:c,tooltip:p,marker:g}=r,m=s.x,y=s.y;if(!i||!a||!m||!y)return;let f=a.dataSources.get(this.id)?.[e],b=i.resolveColumnById(this,"xValue",a)[e],x=i.resolveColumnById(this,"yValue",a)[e],M=this.contextNodeData?.nodeData[e];if(null==b||null==M)return;let v=this.getMarkerStyle(g,M.datum,{xKey:n,yKey:l,labelKey:d,highlighted:!0});return this.formatTooltipWithContext(p,{symbol:this.legendItemSymbol(),title:c,data:[{label:o,fallbackLabel:n,value:m.formatDatum(b)},{label:h,fallbackLabel:l,value:y.formatDatum(x)}]},{seriesId:t,datum:f,title:h,xKey:n,xName:o,yKey:l,yName:h,labelKey:d,labelName:u,...v,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(e){if("category"!==e)return[];let{yKey:t,yName:i,title:a,showInLegend:s}=this.properties,{id:r,ctx:{legendManager:n},visible:o}=this;return[{legendType:"category",id:r,itemId:t,seriesId:r,enabled:o&&n.getItemEnabled({seriesId:r,itemId:t}),label:{text:a??i??t},symbol:this.legendItemSymbol(),hideInLegend:!s}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:i,annotationSelections:a}=e;uz(this,this.ctx.animationManager,t),dC(this,"labels",this.ctx.animationManager,i),dC(this,"annotations",this.ctx.animationManager,...a)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new tu}getFormattedMarkerStyle(e){let{xKey:t,yKey:i,labelKey:a}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{xKey:t,yKey:i,labelKey:a},!0)}computeFocusBounds(e){return uB(this,e)}};pl.className="ScatterSeries",pl.type="scatter";var ph={title:s.Yj,showInMiniChart:s.zM,label:{placement:(0,s.KC)("top","right","bottom","left"),...cm},tooltip:cx,errorBar:cf,...cc,...B(cg,["enabled"])},pd={...ph,...cp,type:(0,s.mw)((0,s.dY)("scatter")),xKey:(0,s.mw)(s.Yj),yKey:(0,s.mw)(s.Yj),labelKey:s.Yj,xName:s.Yj,yName:s.Yj,labelName:s.Yj,errorBar:cb},pu={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new pl(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:dI,fillImageDefaults:dL,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},pc={type:"series",name:"scatter",chartType:"cartesian",options:pd,create:e=>new pl(e)},pp=class e{constructor(e,t,i,a){this.startAngle=e,this.endAngle=t,this.innerRadius=i,this.outerRadius=a}clone(){let{startAngle:t,endAngle:i,innerRadius:a,outerRadius:s}=this;return new e(t,i,a,s)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[c](t,i){return new e(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function pg({startAngle:e,endAngle:t,innerRadius:i,outerRadius:a}){let s=1/0,r=1/0,n=-1/0,o=-1/0,l=(e,t)=>{s=Math.min(e,s),r=Math.min(t,r),n=Math.max(e,n),o=Math.max(t,o)};return l(i*Math.cos(e),i*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),l(a*Math.cos(e),a*Math.sin(e)),l(a*Math.cos(t),a*Math.sin(t)),en(0,e,t)&&l(a,0),en(.5*Math.PI,e,t)&&l(0,a),en(Math.PI,e,t)&&l(-a,0),en(1.5*Math.PI,e,t)&&l(0,-a),new y(s,r,n-s,o-r)}function pm(e,t,i){let a=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:s,outerRadius:r}=i;if(i.startAngle===i.endAngle||a<Math.min(s,r)||a>Math.max(s,r))return!1;let n=er(i.startAngle),o=er(i.endAngle),l=Math.atan2(t,e);return n<o?l<=o&&l>=n:l<=o&&l>=-Math.PI||l>=n&&l<=Math.PI}function py(e,t){let{startAngle:i,endAngle:a,innerRadius:s,outerRadius:r}=t,n={x:r*Math.cos(i),y:r*Math.sin(i)},o={x:r*Math.cos(a),y:r*Math.sin(a)},l=0===s?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},h=0===s?{x:0,y:0}:{x:s*Math.cos(a),y:s*Math.sin(a)};return eY(e.start.x,e.start.y,e.end.x,e.end.y,n.x,n.y,l.x,l.y)||eY(e.start.x,e.start.y,e.end.x,e.end.y,o.x,o.y,h.x,h.y)||e_(0,0,r,i,a,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function pf(e,t){let i={x:e.x,y:e.y},a={x:e.x+e.width,y:e.y},s={x:e.x,y:e.y+e.height},r={x:e.x+e.width,y:e.y+e.height};return py({start:i,end:a},t)||py({start:s,end:r},t)}function pb(e,t,i,a){if(0===i&&0===a)return 0;if(Math.asin(Math.abs(+i)/(e+ +i))+Math.asin(Math.abs(+a)/(e+ +a))-t<0)return 1;let s=0,r=1;for(let n=0;n<8;n+=1){let n=(s+r)/2;Math.asin(Math.abs(n*i)/(e+n*i))+Math.asin(Math.abs(n*a)/(e+n*a))-t<0?s=n:r=n}return s}function px(e,t){return 1e-6>eh(e,t)?t:ea(e-t)+t}function pM(e,t,i=0){let a=Math.abs(t-e)>=2*Math.PI?2*Math.PI:ea(t-e);return t=(e=px(e,i))+a,{startAngle:e,endAngle:t}}function pv(e,t,i,a,s,r){let n,o,l,h,d=Math.sin(r),u=Math.cos(r),c=e**2+t**2-i**2;if(u>.5){let i=d/u,a=1+i**2,s=-2*(e+t*i),r=s**2-4*a*c;if(r<0)return;let p=(-s+Math.sqrt(r))/(2*a),g=(-s-Math.sqrt(r))/(2*a);n=p,o=p*i,l=g,h=g*i}else{let i=u/d,a=1+i**2,s=-2*(t+e*i),r=s**2-4*a*c;if(r<0)return;let p=(-s+Math.sqrt(r))/(2*a),g=(-s-Math.sqrt(r))/(2*a);n=p*i,o=p,l=g*i,h=g}let p=n*u+o*d,g=l*u+h*d,m=p>0?px(Math.atan2(o-t,n-e),a):NaN,y=g>0?px(Math.atan2(h-t,l-e),a):NaN;return m>=a&&m<=s?m:y>=a&&y<=s?y:void 0}function pS(e,t,i,a,s,r){let n=Math.hypot(e,t),o=Math.atan2(t,e),l=Math.acos(-(n-(n**2-i**2+r**2)/(2*n))/i),h=px(o+l,a),d=px(o-l,a);return h>=a&&h<=s?h:d>=a&&d<=s?d:void 0}var pD=class{constructor(e,t,i,a,s){this.cx=e,this.cy=t,this.r=i,this.a0=a,this.a1=s,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){null!=e&&this.isValid()&&!(e<this.a0)&&(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){null!=e&&this.isValid()&&!(e>this.a1)&&(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},pI=class extends ox{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return pg(this).translate(this.centerX,this.centerY)}normalizedRadii(){let{concentricEdgeInset:e}=this,{innerRadius:t,outerRadius:i}=this;return{innerRadius:t=t>0?t+e:0,outerRadius:i=Math.max(i-e,0)}}normalizedClipSector(){let{clipSector:e}=this;if(null==e)return;let{startAngle:t,endAngle:i}=pM(this.startAngle,this.endAngle),{innerRadius:a,outerRadius:s}=this.normalizedRadii(),r=pM(e.startAngle,e.endAngle,t);return new pp(Math.max(t,r.startAngle),Math.min(i,r.endAngle),Math.max(a,e.innerRadius),Math.min(s,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,a,s,r,n,o){if(e<=0)return;let{startAngle:l,endAngle:h}=pM(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:u}=this.normalizedRadii(),c=this.normalizedClipSector();if(o&&d<=0)return;let p=o?this.getAngleOffset(d+e):this.getAngleOffset(u-e),g=n?l+p+t:h-p-t,m=o?d+e:u-e,y=m*Math.cos(g),f=m*Math.sin(g);if(null!=c&&(!n&&!(g>=l-1e-6&&g<=c.endAngle-1e-6)||n&&!(g>=c.startAngle+1e-6&&g<=h-1e-6)||o&&m<c.innerRadius-1e-6||!o&&m>c.outerRadius+1e-6))return;let b=new pD(y,f,e,i,a);if(null!=c){let t,h;if(o?(b.clipStart(pv(y,f,e,i,a,c.endAngle)),b.clipEnd(pv(y,f,e,i,a,c.startAngle))):(b.clipStart(pv(y,f,e,i,a,c.startAngle)),b.clipEnd(pv(y,f,e,i,a,c.endAngle))),n?(t=pS(y,f,e,i,a,c.innerRadius),h=pS(y,f,e,i,a,c.outerRadius)):(t=pS(y,f,e,i,a,c.outerRadius),h=pS(y,f,e,i,a,c.innerRadius)),b.clipStart(t),b.clipEnd(h),null!=t){let{x:e,y:i}=b.pointAt(t),a=px(Math.atan2(i,e),l);n?r?.clipStart(a):s.clipEnd(a)}if(null!=h){let{x:e,y:t}=b.pointAt(h),i=px(Math.atan2(t,e),l);n?s.clipStart(i):r?.clipEnd(i)}}if(null!=c){let{x:e,y:t}=b.pointAt((b.a0+b.a1)/2);if(!pm(e,t,c))return}let{x,y:M}=b.pointAt(n===o?b.a0:b.a1),v=px(Math.atan2(M,x),l),S=o?r:s;return n?S?.clipStart(v):S?.clipEnd(v),b}updatePath(){let{path:e,centerX:t,centerY:i,concentricEdgeInset:a,radialEdgeInset:s}=this,{startOuterCornerRadius:r,endOuterCornerRadius:n,startInnerCornerRadius:o,endInnerCornerRadius:l}=this,{startAngle:h,endAngle:d}=pM(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:c}=this.normalizedRadii(),p=this.normalizedClipSector(),g=d-h,m=g>=2*Math.PI-1e-6;if(e.clear(),0===u&&0===c||u>c||(p?.startAngle??h)===(p?.endAngle??d))return;if(m&&null==this.clipSector&&0===r&&0===n&&0===o&&0===l){e.moveTo(t+c*Math.cos(h),i+c*Math.sin(h)),e.arc(t,i,c,h,d),u>a&&(e.moveTo(t+u*Math.cos(d),i+u*Math.sin(d)),e.arc(t,i,u,d,h,!0)),e.closePath();return}if(null==this.clipSector&&1e-6>Math.abs(u-c)){e.arc(t,i,c,h,d,!1),e.arc(t,i,c,d,h,!0),e.closePath();return}let y=this.getAngleOffset(u),f=this.getAngleOffset(c);if(g<2*f)return;let b=(p?.innerRadius??u)>a,x=u<a||g<2*y,M=c-u,v=Math.max(r,o,n,l),S=v>0?Math.min(M/v,1):1;r*=S,n*=S,o*=S,l*=S;let D=pb(c,g-2*f,-r,-n);if(r*=D,n*=D,!x&&b){let e=pb(u,g-2*y,o,l);o*=e,l*=e}else o=0,l=0;let I=Math.max(r+o,n+l),L=I>0?Math.min(M/I,1):1;r*=L,n*=L,o*=L,l*=L;let A=0,w=0,C=r/(c-r),k=n/(c-n);C>=0&&C<.999999?A=Math.asin(C):r=Math.min(c/(1/Math.sin(A=g/2)+1),r),k>=0&&k<.999999?w=Math.asin(k):n=Math.min(c/(1/Math.sin(w=g/2)+1),n);let N=Math.asin(o/(u+o)),T=Math.asin(l/(u+l)),E=p?.outerRadius??c,O=this.getAngleOffset(E),j=new pD(0,0,E,h+O,d-O),z=p?.innerRadius??u,R=this.getAngleOffset(z),P=b?new pD(0,0,z,h+R,d-R):void 0;null!=p&&(j.clipStart(p.startAngle),j.clipEnd(p.endAngle),P?.clipStart(p.startAngle),P?.clipEnd(p.endAngle));let F=this.arc(r,A,h-.5*Math.PI,h+A,j,P,!0,!1),B=this.arc(n,w,d-w,d+.5*Math.PI,j,P,!1,!1),G=this.arc(l,T,d+.5*Math.PI,d+Math.PI-T,j,P,!1,!0),V=this.arc(o,N,h+Math.PI+N,h+1.5*Math.PI,j,P,!0,!0);if(x){let a,r=g<.5*Math.PI?s*(1+Math.cos(g))/Math.sin(g):NaN;a=Math.max(a=r>0&&r<c?Math.max(Math.hypot(s,r),u):s,u);let n=h+.5*g;e.moveTo(t+a*Math.cos(n),i+a*Math.sin(n))}else if(V?.isValid()===!0||P?.isValid()===!0);else{let a=h+g/2,s=u*Math.cos(a),r=u*Math.sin(a);e.moveTo(t+s,i+r)}if(F?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=F;e.arc(t+a,i+s,r,n,o)}if(j.isValid()){let{r:a,a0:s,a1:r}=j;e.arc(t,i,a,s,r)}if(B?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=B;e.arc(t+a,i+s,r,n,o)}if(!x){if(G?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=G;e.arc(t+a,i+s,r,n,o)}if(P?.isValid()===!0){let{r:a,a0:s,a1:r}=P;e.arc(t,i,a,r,s,!0)}if(V?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=V;e.arc(t+a,i+s,r,n,o)}}e.closePath()}isPointInPath(e,t){let{startAngle:i,endAngle:a,innerRadius:s,outerRadius:r}=this.clipSector??this;return pm(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:a,innerRadius:Math.min(s,r),outerRadius:Math.max(s,r)})}};pI.className="Sector",l([Z()],pI.prototype,"centerX",2),l([Z()],pI.prototype,"centerY",2),l([Z()],pI.prototype,"innerRadius",2),l([Z()],pI.prototype,"outerRadius",2),l([Z()],pI.prototype,"startAngle",2),l([Z()],pI.prototype,"endAngle",2),l([Z({equals:(e,t)=>e.equals(t)})],pI.prototype,"clipSector",2),l([Z()],pI.prototype,"concentricEdgeInset",2),l([Z()],pI.prototype,"radialEdgeInset",2),l([Z()],pI.prototype,"startOuterCornerRadius",2),l([Z()],pI.prototype,"endOuterCornerRadius",2),l([Z()],pI.prototype,"startInnerCornerRadius",2),l([Z()],pI.prototype,"endInnerCornerRadius",2);var pL={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},pA={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},pw=class extends iu{constructor(){super(...arguments),this.showInLegend=!1}};l([ew],pw.prototype,"showInLegend",2);var pC=class extends nD{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};l([ew],pC.prototype,"text",2),l([ew],pC.prototype,"spacing",2);var pk=class extends eC{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};l([ew],pk.prototype,"fill",2),l([ew],pk.prototype,"fillOpacity",2);var pN=class extends nD{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};l([ew],pN.prototype,"offset",2),l([ew],pN.prototype,"minAngle",2),l([ew],pN.prototype,"minSpacing",2),l([ew],pN.prototype,"maxCollisionOffset",2),l([ew],pN.prototype,"avoidCollisions",2);var pT=class extends nD{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};l([ew],pT.prototype,"positionOffset",2),l([ew],pT.prototype,"positionRatio",2);var pE=class extends eC{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};l([ew],pE.prototype,"colors",2),l([ew],pE.prototype,"length",2),l([ew],pE.prototype,"strokeWidth",2);var pO=class extends dV{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(pL),this.strokes=Object.values(pA),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new ek(pC),this.title=new pw,this.innerCircle=new pk,this.shadow=new dE,this.calloutLabel=new pN,this.sectorLabel=new pT,this.calloutLine=new pE,this.tooltip=new d_}};function pj(e,t,i,a){let s=[i.convert(0),i.convert(1)],r=[a.convert(0),a.convert(1)],n=-(Math.PI/2)+eo(t),o=e?"initial":"update",l=({radius:e})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*e}),h=({radius:e})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*e});return{nodes:{toFn:(e,t,i,{prevLive:a})=>{let{startAngle:s,endAngle:r,innerRadius:o,outerRadius:h}=t,{stroke:d,fill:u}=t.sectorFormat;if("removed"===i&&a?(s=a.datum?.endAngle,r=a.datum?.endAngle):"removed"!==i||a||(s=n,r=n),"removed"===i){let e=l(t);o=e.innerRadius,h=e.outerRadius}return{startAngle:s,endAngle:r,outerRadius:h,innerRadius:o,stroke:d,fill:u}},fromFn:(t,i,a,{prevFromProps:s})=>{let{startAngle:r,endAngle:l,innerRadius:d,outerRadius:u}=t,{fill:c,stroke:p}=i.sectorFormat;if("updated"===a&&null==t.previousDatum&&(a="added"),"unknown"!==a&&("added"!==a||s)?"added"===a&&s&&(r=s.endAngle??n,l=s.endAngle??n,d=s.innerRadius??i.innerRadius,u=s.outerRadius??i.outerRadius):(r=n,l=n,d=i.innerRadius,u=i.outerRadius),"added"===a&&!e){let e=h(i);d=e.innerRadius,u=e.outerRadius}return"updated"===a&&(c=t.fill??c,p=("string"==typeof t.stroke?t.stroke:void 0)??p),{startAngle:r,endAngle:l,innerRadius:d,outerRadius:u,fill:c,stroke:p,phase:o}}},innerCircle:{fromFn:(e,t)=>({size:e.previousDatum?.radius??e.size??0,phase:o}),toFn:(e,t)=>({size:t.radius??0})}}}function pz(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}function pR(e,t){let i=t.y-e.centerY,a=t.x-e.centerX,s=Math.atan2(i,a);for(let t of e.getItemNodes())if(!0!==t.datum.missing&&en(s,t.startAngle,t.endAngle)){let e=Math.sqrt(a*a+i*i),s=0;return e<t.innerRadius?s=t.innerRadius-e:e>t.outerRadius&&(s=e-t.outerRadius),{datum:t.datum,distance:s}}}l([ew],pO.prototype,"angleKey",2),l([ew],pO.prototype,"angleName",2),l([ew],pO.prototype,"angleFilterKey",2),l([ew],pO.prototype,"radiusKey",2),l([ew],pO.prototype,"radiusName",2),l([ew],pO.prototype,"radiusMin",2),l([ew],pO.prototype,"radiusMax",2),l([ew],pO.prototype,"calloutLabelKey",2),l([ew],pO.prototype,"calloutLabelName",2),l([ew],pO.prototype,"sectorLabelKey",2),l([ew],pO.prototype,"sectorLabelName",2),l([ew],pO.prototype,"legendItemKey",2),l([ew],pO.prototype,"defaultColorRange",2),l([ew],pO.prototype,"defaultPatternFills",2),l([ew],pO.prototype,"fills",2),l([ew],pO.prototype,"strokes",2),l([ew],pO.prototype,"fillOpacity",2),l([ew],pO.prototype,"strokeOpacity",2),l([ew],pO.prototype,"lineDash",2),l([ew],pO.prototype,"lineDashOffset",2),l([ew],pO.prototype,"cornerRadius",2),l([ew],pO.prototype,"itemStyler",2),l([ew],pO.prototype,"rotation",2),l([ew],pO.prototype,"outerRadiusOffset",2),l([ew],pO.prototype,"outerRadiusRatio",2),l([ew],pO.prototype,"innerRadiusOffset",2),l([ew],pO.prototype,"innerRadiusRatio",2),l([ew],pO.prototype,"strokeWidth",2),l([ew],pO.prototype,"sectorSpacing",2),l([ew],pO.prototype,"hideZeroValueSectorsInLegend",2),l([ew],pO.prototype,"innerLabels",2),l([ew],pO.prototype,"title",2),l([ew],pO.prototype,"innerCircle",2),l([ew],pO.prototype,"shadow",2),l([ew],pO.prototype,"calloutLabel",2),l([ew],pO.prototype,"sectorLabel",2),l([ew],pO.prototype,"calloutLine",2),l([ew],pO.prototype,"tooltip",2);var pP=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(pP||{}),pF=class extends dK{constructor({categoryKey:e,useLabelLayer:t=!1,pickModes:i=[1,0],canHaveAxes:a=!1,animationResetFns:s,...r}){super({...r,categoryKey:e,useLabelLayer:t,pickModes:i,directionKeys:{angle:["angleKey"],radius:["radiusKey"]},directionNames:{angle:["angleName"],radius:["radiusName"]},canHaveAxes:a}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new tu),this.nodeData=[],this.itemSelection=rR.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=rR.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=rR.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=rR.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=s,this.animationState=new rU("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3],!0)}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}labelFactory(){let e=new io;return e.pointerEvents=1,e}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager?.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){let e=this.radius;return{series:new y(-e,-e,2*e,2*e),axis:new y(-e,-e,2*e,2*e)}}resetAllAnimation(){let{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&rz([this.itemSelection,this.highlightSelection],e),t&&rz([this.labelSelection,this.highlightLabelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){let{item:t,label:i}=this.animationResetFns??{};t&&rz([this.highlightSelection],t),i&&rz([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){let t=this.getNodeData()?.[e.datumIndex];if(void 0!==t)return this.itemSelection.select(e=>e instanceof ox&&e.datum===t)[0]}getSeriesRange(e,t){return[NaN,NaN]}},pB=class extends oy{constructor(e,t,i,a){super(e,t,i,a),this.angleKey=a.properties.angleKey,this.radiusKey=a.properties.radiusKey,this.calloutLabelKey=a.properties.calloutLabelKey,this.sectorLabelKey=a.properties.sectorLabelKey}},pG=class extends pF{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:pz,label:dN}}),this.properties=new pO,this.phantomNodeData=void 0,this.backgroundGroup=new tg({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new hh,this.radiusScale=new hh,this.phantomGroup=this.backgroundGroup.appendChild(new tu({name:"phantom"})),this.phantomSelection=rR.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new tu({name:"pieCalloutLabels"})),this.calloutLabelSelection=new rR(this.calloutLabelGroup,tu),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new tu({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new oO({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new oO({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new tu({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new tu({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=rR.select(this.innerLabelsGroup,io),this.innerCircleSelection=rR.select(this.innerCircleGroup,()=>new oO({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=pB,this.angleScale=new hh,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e?.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e?.removeChild(this.backgroundGroup)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.backgroundGroup.zIndex=[0,e],!0)}nodeFactory(){return new pI}getSeriesDomain(e){return"angle"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data)return;let{visible:t,id:i,ctx:{legendManager:a}}=this,{angleKey:r,angleFilterKey:n,radiusKey:o,calloutLabelKey:l,sectorLabelKey:h,legendItemKey:d}=this.properties,u=()=>(e,s)=>t&&a.getItemEnabled({seriesId:i,itemId:s})?e:0,c=!this.ctx.animationManager.isSkipped(),p=[],g=[];d?p.push(lT(d,"band",{id:"legendItemKey"})):l?p.push(lT(l,"band",{id:"calloutLabelKey"})):h&&p.push(lT(h,"band",{id:"sectorLabelKey"}));let m=this.radiusScale.type,y=this.angleScale.type;for(let t of(o&&g.push(lR(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:u}),lE(o,m,{id:"radiusRaw",processor:u}),lH("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),l&&g.push(lE(l,"band",{id:"calloutLabelValue"})),h&&g.push(lE(h,"band",{id:"sectorLabelValue"})),d&&g.push(lE(d,"band",{id:"legendItemValue"})),n&&g.push(lP(n,y,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:u}),lE(n,y,{id:"angleFilterRaw"}),lH("angleFilterValue",[0,1],0,0)),c&&this.processedData&&p.length>0&&g.push(l4(this.id,this.processedData)),g.push(lK()),await this.requestDataModel(e,this.data,{props:[...p,lP(r,y,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:u}),lE(r,y,{id:"angleRaw"}),lH("angleValue",[0,1],0,0),...g]}),this.processedData?.defs?.values??[])){let{id:e,missing:i,property:a}=t,r=rc(this,i);"angleRaw"!==e&&r>0&&s.Vy.warnOnce(`no value was found for the key '${String(a)}' on ${r} data element${r>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){let i=e.resolveColumnById(this,"angleValue",t),a=e.resolveColumnById(this,"angleRaw",t),s=null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterValue",t):void 0,r=null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterRaw",t):void 0,n=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,o=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0;return{angleValues:i,angleRawValues:a,angleFilterValues:s,angleFilterRawValues:r,radiusValues:n,radiusRawValues:o,calloutLabelValues:l,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){let{id:e,processedData:t,dataModel:i,angleScale:a,ctx:{legendManager:s},visible:r}=this,{rotation:n,innerRadiusRatio:o}=this.properties;if(!i||t?.type!=="ungrouped")return;let{angleValues:l,angleRawValues:h,angleFilterValues:d,angleFilterRawValues:u,radiusValues:c,radiusRawValues:p,calloutLabelValues:g,sectorLabelValues:m,legendItemValues:y}=this.getProcessedDataValues(i,t),f=u?.some((e,t)=>e>h[t])??!1,b=0,x=0,M=[],v=null!=u?[]:void 0,S=t.dataSources.get(this.id)??[],D=t.invalidData?.get(this.id);return S.forEach((t,i)=>{if(D?.[i]===!0)return;let o=f?d[i]:l[i],S=null==u||f?1:Math.sqrt(u[i]/h[i]),I=a.convert(b)+eo(n);b=o,x+=o;let L=a.convert(b)+eo(n),A=Math.abs(L-I),w=I+A/2,C=h[i],k=(c?.[i]??1)*S,N=p?.[i],T=y?.[i],E=this.getLabels(t,w,A,!0,g?.[i],m?.[i],T),O=this.getSectorFormat(t,i,!1),j={itemId:i,series:this,datum:t,datumIndex:i,angleValue:C,midAngle:w,midCos:Math.cos(w),midSin:Math.sin(w),startAngle:I,endAngle:L,radius:k,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(k),0),sectorFormat:O,radiusValue:N,legendItemValue:T,enabled:r&&s.getItemEnabled({seriesId:e,itemId:i}),focusable:!0,...E};M.push(j),null!=v&&v.push({...j,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=0===x,this.zerosumInnerRing.visible=0===x&&null!=o&&1!==o&&o>0,{itemId:e,nodeData:M,labelData:M,phantomNodeData:v}}getLabels(e,t,i,a,s,r,n){let{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,d=!a||o.enabled?this.properties.calloutLabelKey:void 0,u=!a||l.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!u&&!h)return{};let c={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>=eo(o.minAngle)&&(p.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(o,{...c,value:s}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...c,value:r})}),null!=h&&null!=n&&(p.legendItem={key:h,text:n}),p}getTextAlignment(e){let t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=er(e),a=Math.floor((i- -.75*Math.PI)/(Math.PI/2)),r=(0,s.GT)(a,t.length);return t[r]}getNodeFill(e,t,i){return ou(e,{type:"gradient",bounds:"series",colorStops:t.map(e=>({color:e})),gradient:"radial",rotation:0,reverse:!0},{type:"pattern",pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"none",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0},{type:"image",backgroundFill:i,backgroundFillOpacity:1,fit:"contain",repeat:"no-repeat",rotation:0})}getFillParams(e,t,i){if(e2(e)&&"item"!==e.bounds)return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getSectorFormat(e,t,i){let a,{angleKey:s,radiusKey:r,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:l,fills:h,strokes:d,defaultColorRange:u,defaultPatternFills:c,itemStyler:p}=this.properties,g=d[t%d.length],{fill:m,fillOpacity:y,stroke:f,strokeWidth:b,strokeOpacity:x,lineDash:M,lineDashOffset:v,cornerRadius:S}=z(i&&this.properties.highlightStyle.item,{fill:h.length>0?h[t%h.length]:void 0,stroke:g,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),D=u[t%u.length],I=c[t%c.length],L=m??"black";return p&&(a=this.cachedDatumCallback(this.getDatumId(t)+(i?"-highlight":"-hide"),()=>this.callWithContext(p,{datum:e,angleKey:s,radiusKey:r,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:l,fill:this.getNodeFill(L,D,I),fillOpacity:y,stroke:f,strokeWidth:b,strokeOpacity:x,lineDash:M,lineDashOffset:v,cornerRadius:S,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill(a?.fill??L,D,I),fillOpacity:a?.fillOpacity??y,stroke:a?.stroke??f,strokeWidth:a?.strokeWidth??b,strokeOpacity:a?.strokeOpacity??x,lineDash:a?.lineDash??M,lineDashOffset:a?.lineDashOffset??v,cornerRadius:a?.cornerRadius??S}}getInnerRadius(){let{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,a=e*t+i;return a===e||a<0?0:a}getOuterRadius(){let{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){let t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);let i=e=>({...e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;let t=this.properties.title?.spacing??0,i=Math.max(0,-e);return-e-(2+t)-i}update({seriesRect:e}){let{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},a=null!=tS(this.nodeDataDependencies,i);if(a&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(a),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){let e=this.getTitleTranslationY();t.node.y=isFinite(e)?e:0;let i=t.node.getBBox();t.node.visible=t.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(i)}for(let e of[this.zerosumInnerRing,this.zerosumOuterRing])e.fillOpacity=0,e.stroke=this.properties.calloutLabel.color,e.strokeWidth=1,e.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){let{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&this.labelGroup?.removeChild(e.node),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){let e=e=>{let t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(e),this.phantomNodeData?.forEach(e)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:a,calloutLabelSelection:s,labelSelection:r,innerLabelsSelection:n}=this,o=this.nodeData.map(e=>({...e,sectorFormat:{...e.sectorFormat}})),l=(e,t)=>{e.update(t,void 0,e=>this.getDatumId(e.datumIndex)),this.ctx.animationManager.isSkipped()&&e.cleanup()};l(e,this.nodeData),l(t,o),l(i,this.phantomNodeData??[]),s.update(this.calloutNodeData,e=>{let t=new rP;t.tag=0,t.pointerEvents=1,e.appendChild(t);let i=new io;i.tag=1,i.pointerEvents=1,e.appendChild(i)}),r.update(this.nodeData),a.update(o),n.update(this.properties.innerLabels,e=>{e.pointerEvents=1})}updateInnerCircleSelection(){let{innerCircle:e}=this.properties,t=0,i=this.getInnerRadius();i>0&&(t=Math.ceil(2*Math.min(i,this.getOuterRadius())+1));let a=e?[{radius:t}]:[];this.innerCircleSelection.update(a)}updateNodes(e){let t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.highlightLabel.visible=i&&t?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((e,{radius:t})=>{e.setProperties({fill:this.getNodeFill(this.properties.innerCircle?.fill,["black"],"black"),opacity:this.properties.innerCircle?.fillOpacity,size:t})});let a=this.radiusScale.range[0],s=this.radiusScale.range[1],r=this.getShapeFillBBox(),n=this.ctx.animationManager.isSkipped(),o=(e,t,i,o)=>{let l=this.getSectorFormat(t.datum,t.itemId,o);t.sectorFormat.fill=l.fill,t.sectorFormat.stroke=l.stroke,n&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(o||n)&&(e.fill=l.fill,e.stroke=l.stroke);let h=this.getFillParams(l.fill,a,s);op(e,l.fill,r,h),e.strokeWidth=l.strokeWidth,e.fillOpacity=l.fillOpacity,e.strokeOpacity=l.strokeOpacity,e.lineDash=l.lineDash,e.lineDashOffset=l.lineDashOffset,e.cornerRadius=l.cornerRadius,e.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(null!=l.stroke?l.strokeWidth:0))/2,0);e.inset=d,e.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((e,t,i)=>o(e,t,i,!1)),this.highlightSelection.each((e,i,a)=>{o(e,i,a,!0),e.visible=i.itemId===t?.itemId}),this.phantomSelection.each((e,t,i)=>o(e,t,i,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:{length:e,strokeWidth:t,colors:i},strokes:a}=this.properties,s=e4(i)?i??this.properties.strokes:a,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(i=>{let a=i.closestDatum(),{calloutLabel:n,outerRadius:o,datumIndex:l}=a;if(n?.text&&!n.hidden&&0!==o){i.visible=!0,i.strokeWidth=t,i.stroke=s[l%s.length],i.fill=void 0;let h=a.midCos*o,d=a.midSin*o,u=a.midCos*(o+e),c=a.midSin*(o+e);if((n.collisionTextAlign??0!==n.collisionOffsetY)&&null!=n.box){let e=n.box,t=u,i=c;u<e.x?t=e.x:u>e.x+e.width&&(t=e.x+e.width),c<e.y?i=e.y:c>e.y+e.height&&(i=e.y+e.height);let a=t-u,s=i-c,o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),l=o-r;l>0&&(u+=a*l/o,c+=s*l/o)}i.x1=h,i.y1=d,i.x2=u,i.y2=c}else i.visible=!1})}getLabelOverflow(e,t,i){let a=-this.centerX,s=a+i.width,r=-this.centerY,n=r+i.height,o=1;t.x+1<a?o=(t.x+t.width-a)/t.width:t.x+t.width-1>s&&(o=(s-t.x)/t.width);let l=t.y+1<r||t.y+t.height-1>n;return{textLength:1===o?e.length:Math.floor(e.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){let{surroundingRadius:t}=this;if(null==t)return!1;let i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=t**2;return i.some(e=>e.x**2+e.y**2>a)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:a,minSpacing:s}=t,r=e.convert(0),n=e=>!e.calloutLabel||0===e.outerRadius,o=this.calloutNodeData,l=o.filter(e=>!n(e));if(l.forEach(e=>{let t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)}),l.length<=1)return;let h=l.filter(e=>e.midCos<0).sort((e,t)=>e.midSin-t.midSin),d=l.filter(e=>e.midCos>=0).sort((e,t)=>e.midSin-t.midSin),u=l.filter(e=>e.midSin<0&&e.calloutLabel?.textAlign==="center").sort((e,t)=>e.midCos-t.midCos),c=l.filter(e=>e.midSin>=0&&e.calloutLabel?.textAlign==="center").sort((e,t)=>e.midCos-t.midCos),p=e=>{let t=e.calloutLabel;if(null==t)return y.zero.clone();let s=e.outerRadius+i.length+a,r=e.midCos*s,n=e.midSin*s+t.collisionOffsetY,o=t.collisionTextAlign??t.textAlign,l=t.textBaseline;return io.computeBBox(t.text,r,n,{font:this.properties.calloutLabel,textAlign:o,textBaseline:l})},g=(e,t,i)=>{let a=p(e).grow(s/2),r=p(t).grow(s/2);a.x<r.x+r.width&&a.x+a.width>r.x&&("to-top"===i?a.y<r.y+r.height:a.y+a.height>r.y)&&(t.calloutLabel.collisionOffsetY="to-top"===i?a.y-r.y-r.height:a.y+a.height-r.y)},m=e=>{let t=e.slice().sort((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin))[0],i=e.indexOf(t);for(let t=i-1;t>=0;t--)g(e[t+1],e[t],"to-top");for(let t=i+1;t<e.length;t++)g(e[t-1],e[t],"to-bottom")},f=e=>{let t=l.some(e=>0!==e.calloutLabel.collisionOffsetY),i=e.map(e=>p(e)),a=i.map(e=>e.clone().grow(s/2)),n=!1;for(let t=0;t<a.length&&!n;t++){let i=a[t];for(let s=t+1;s<e.length;s++){let e=a[s];if(i.collidesBBox(e)){n=!0;break}}}let h=o.map(e=>{let{startAngle:t,endAngle:i,outerRadius:a}=e;return{startAngle:t,endAngle:i,innerRadius:r,outerRadius:a}}),d=i.some(e=>h.some(t=>pf(e,t)));(n||t||d)&&e.filter(e=>"center"===e.calloutLabel.textAlign).forEach(e=>{let t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"})};m(h),m(d),f(u),f(c)}updateCalloutLabelNodes(e){let{radiusScale:t}=this,{calloutLabel:i,calloutLine:a}=this.properties,s=a.length,{offset:r,color:n}=i,o=new io;this.calloutLabelSelection.selectByTag(1).forEach(a=>{let l=a.closestDatum(),h=l.calloutLabel,d=Math.max(0,t.convert(l.radius));if(!h?.text||0===d||h.hidden){a.visible=!1;return}let u=d+s+r,c=l.midCos*u,p=l.midSin*u+h.collisionOffsetY,g={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};o.text=h.text,o.x=c,o.y=p,o.setFont(this.properties.calloutLabel),o.setAlign(g);let m=o.getBBox(),y=h.text,f=!0;if(i.avoidCollisions){let{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(h.text,m,e);y=h.text.length===t?h.text:`${h.text.substring(0,t)}\u2026`,f=!i}a.text=y,a.x=c,a.y=p,a.setFont(this.properties.calloutLabel),a.setAlign(g),a.fill=n,a.visible=f})}computeLabelsBBox(e,t){let i,{calloutLabel:a,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:l}=a;if(!a.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let h=[],d=new io,{title:u}=this.properties;if(u?.text&&u.enabled){let e=this.getTitleTranslationY();isFinite(e)&&(d.text=u.text,d.x=0,d.y=e,d.setFont(u),d.setAlign({textBaseline:"bottom",textAlign:"center"}),i=d.getBBox(),h.push(i))}return(this.calloutNodeData.forEach(a=>{let s=a.calloutLabel;if(!s||0===a.outerRadius)return null;let u=a.outerRadius+r+n,c=a.midCos*u,p=a.midSin*u+s.collisionOffsetY;d.text=s.text,d.x=c,d.y=p,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});let g=d.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o){s.hidden=!0;return}if(i){let e=-this.centerY,t=new y(i.x-l,e,i.width+2*l,i.y+i.height+l-e);if(g.collidesBBox(t)){s.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:a}=this.getLabelOverflow(s.text,g,t),r=s.text.length>2&&e<2;if(i||r||a){s.hidden=!0;return}}s.hidden=!1,h.push(g)}),0===h.length)?null:y.merge(h)}updateSectorLabelNodes(){let{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:a,fontWeight:s,fontFamily:r,positionOffset:n,positionRatio:o,color:l}=this.properties.sectorLabel,h=(e,h)=>{let{sectorLabel:d,outerRadius:u}=h,c=!1;if(d&&0!==u){let p=t*(1-o)+u*o+n;e.fill=l,e.fontStyle=a,e.fontWeight=s,e.fontSize=i,e.fontFamily=r,e.text=d.text,e.x=h.midCos*p,e.y=h.midSin*p,e.textAlign="center",e.textBaseline="middle";let g=e.getBBox(),m=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:y,endAngle:f}=h,b={startAngle:y,endAngle:f,innerRadius:t,outerRadius:u};m.every(([e,t])=>pm(e,t,b))&&(c=!0)}e.visible=c};this.labelSelection.each(h),this.highlightLabelSelection.each(h)}updateInnerLabelNodes(){let e=[],t=[];this.innerLabelsSelection.each((i,a)=>{let{fontStyle:s,fontWeight:r,fontSize:n,fontFamily:o,color:l}=a;i.fontStyle=s,i.fontWeight=r,i.fontSize=n,i.fontFamily=o,i.text=a.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",e.push(i.getBBox()),t.push(a.spacing)});let i=e=>0===e?0:t[e],a=e=>e===t.length-1?0:t[e],s=e.reduce((e,t,s)=>e+t.height+i(s)+a(s),0),r=Math.max(...e.map(e=>e.width)),n=this.getInnerRadius(),o=Math.sqrt(Math.pow(r/2,2)+Math.pow(s/2,2))<=(n>0?n:this.getOuterRadius()),l=[];for(let t=0,r=-s/2;t<e.length;t++){let s=e[t].height+r+i(t);l.push(s),r=s+a(t)}this.innerLabelsSelection.each((e,t,i)=>{e.y=l[i],e.visible=o})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(e){return pR(this,e)}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,properties:s}=this,{legendItemKey:r,calloutLabelKey:n,calloutLabelName:o,sectorLabelKey:l,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:c,radiusName:p,tooltip:g}=s,m=this.properties.title.text;if(!i||!a)return;let y=a.dataSources.get(this.id)?.[e],{angleRawValues:f,legendItemValues:b,calloutLabelValues:x,sectorLabelValues:M}=this.getProcessedDataValues(i,a),v=f[e],S=b?.[e]??(n===d?void 0:x?.[e])??(l===d?void 0:M?.[e])??u;return this.formatTooltipWithContext(g,{title:m,symbol:this.legendItemSymbol(e),data:[{label:S,fallbackLabel:d,value:at(v,3)}]},{seriesId:t,datum:y,title:u,legendItemKey:r,calloutLabelKey:n,calloutLabelName:o,sectorLabelKey:l,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:c,radiusName:p,...this.getSectorFormat(y,e,!1)})}legendItemSymbol(e){let t=this.processedData?.dataSources.get(this.id)?.[e],i=this.getSectorFormat(t,e,!1),{fillOpacity:a,strokeOpacity:s,strokeWidth:r,lineDash:n,lineDashOffset:o}=this.properties,{fill:l}=i,{stroke:h}=i;return e2(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:h,fillOpacity:a,strokeOpacity:s,strokeWidth:r,lineDash:n,lineDashOffset:o}}}getLegendData(e){let{visible:t,processedData:i,dataModel:a,id:s,ctx:{legendManager:r}}=this;if(!a||!i||"category"!==e)return[];let{angleKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,showInLegend:d}=this.properties;if(!h&&(!o||o===n)&&(!l||l===n))return[];let{angleRawValues:u,calloutLabelValues:c,sectorLabelValues:p,legendItemValues:g}=this.getProcessedDataValues(a,i),m=this.properties.title?.showInLegend&&this.properties.title.text,y=[],f=this.properties.hideZeroValueSectorsInLegend,b=i.dataSources.get(this.id),x=i.invalidData?.get(this.id);for(let e=0;e<i.input.count;e++){let i=b?.[e],a=u[e];if(x?.[e]===!0||f&&0===a)continue;let M=[];m&&M.push(m);let v=this.getLabels(i,2*Math.PI,2*Math.PI,!1,c?.[e],p?.[e],g?.[e]);h&&void 0!==v.legendItem?M.push(v.legendItem.text):o&&o!==n&&v.calloutLabel?.text!==void 0?M.push(v.calloutLabel?.text):l&&l!==n&&v.sectorLabel?.text!==void 0&&M.push(v.sectorLabel?.text),0!==M.length&&y.push({legendType:"category",id:s,datum:i,itemId:e,seriesId:s,hideToggleOtherSeries:!0,enabled:t&&r.getItemEnabled({seriesId:s,itemId:e}),label:{text:M.join(" - ")},symbol:this.legendItemSymbol(e),legendItemName:null!=h?i[h]:void 0,hideInLegend:!d})}return y}setLegendState(e){let{id:t,ctx:{legendManager:i,updateService:a}}=this;e.forEach((e,a)=>i.toggleItem(e,t,a)),i.update(),a.update(5)}animateEmptyUpdateReady(e){let{animationManager:t}=this.ctx,i=pj(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);rE(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(e,t)=>this.getDatumId(t.datumIndex)),rE(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),dC(this,"callout",t,this.calloutLabelSelection),dC(this,"sector",t,this.labelSelection),dC(this,"highlight",t,this.highlightLabelSelection),dC(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:a,radiusScale:s,previousRadiusScale:r}=this,{animationManager:n}=this.ctx,o=a?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(o?.moved.size??0)===0,h=(a?.defs.keys.length??0)>0,d=a?.reduced?.animationValidation?.uniqueKeys??!0;l&&h&&d||this.ctx.animationManager.skipCurrentBatch();let u=!this.nodeData.some(e=>e.enabled),c=pj(!1,this.properties.rotation,s,r);rE(this.id,"nodes",n,[e,t,i],c.nodes,(e,t)=>this.getDatumId(t.datumIndex),o),rE(this.id,"innerCircle",n,[this.innerCircleSelection],c.innerCircle),dC(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dC(this,"sector",this.ctx.animationManager,this.labelSelection),dC(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==u&&(this.noVisibleData=u,dC(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:a,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=pj(!1,this.properties.rotation,a,s);rE(this.id,"nodes",r,[e,t,i],n.nodes,(e,t)=>this.getDatumId(t.datumIndex)),rE(this.id,"innerCircle",r,[this.innerCircleSelection],n.innerCircle),dk(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dk(this,"sector",this.ctx.animationManager,this.labelSelection),dk(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),dk(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){return`${e}`}};pG.className="DonutSeries",pG.type="donut";var pV={radiusMin:s.Ly,radiusMax:s.Ly,rotation:s.ai,outerRadiusOffset:s.ai,outerRadiusRatio:s.CG,hideZeroValueSectorsInLegend:s.zM,sectorSpacing:s.Ly,cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),title:{enabled:s.zM,text:s.Yj,showInLegend:s.zM,spacing:s.Ly,...s.LV},calloutLabel:{enabled:s.zM,offset:s.ai,minAngle:s.Ly,avoidCollisions:s.zM,formatter:s.E2,...s.LV},sectorLabel:{enabled:s.zM,positionOffset:s.ai,positionRatio:s.CG,formatter:s.E2,...s.LV},calloutLine:{colors:(0,s.jk)(s.yW),length:s.Ly,strokeWidth:s.Ly},fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),tooltip:cx,shadow:cM,...cc,...s.mL,...B(s.Fu,["fill"]),...B(s.AF,["stroke"])},pY={...pV,...cp,type:(0,s.mw)((0,s.dY)("pie")),angleKey:(0,s.mw)(s.Yj),radiusKey:s.Yj,calloutLabelKey:s.Yj,sectorLabelKey:s.Yj,legendItemKey:s.Yj,angleName:s.Yj,radiusName:s.Yj,calloutLabelName:s.Yj,sectorLabelName:s.Yj};pY.defaultColorRange=(0,s._L)((0,s.jk)((0,s.jk)(s.yW))),pY.defaultPatternFills=(0,s._L)((0,s.jk)(s.yW)),pY.title._enabledFromTheme=(0,s._L)(s.zM),pY.calloutLabel._enabledFromTheme=(0,s._L)(s.zM),pY.sectorLabel._enabledFromTheme=(0,s._L)(s.zM);var pU={...pV,innerRadiusOffset:s.ai,innerRadiusRatio:s.CG,innerCircle:{fill:s.Yj,fillOpacity:s.CG},innerLabels:{spacing:s.Ly,...s.LV}},p_={...pU,...pY,type:(0,s.mw)((0,s.dY)("donut")),innerLabels:(0,s.J$)({text:(0,s.mw)(s.Yj),spacing:s.Ly,...s.LV},"inner label options array")},p$={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new pG(e),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]},{$isImage:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:dv,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},shadow:{enabled:!1,color:hK,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},legend:{enabled:!0}}},pW=class extends iu{constructor(){super(...arguments),this.showInLegend=!1}};l([ew],pW.prototype,"showInLegend",2);var pH=class extends nD{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};l([ew],pH.prototype,"offset",2),l([ew],pH.prototype,"minAngle",2),l([ew],pH.prototype,"minSpacing",2),l([ew],pH.prototype,"maxCollisionOffset",2),l([ew],pH.prototype,"avoidCollisions",2);var pZ=class extends nD{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};l([ew],pZ.prototype,"positionOffset",2),l([ew],pZ.prototype,"positionRatio",2);var pK=class extends eC{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};l([ew],pK.prototype,"colors",2),l([ew],pK.prototype,"length",2),l([ew],pK.prototype,"strokeWidth",2);var pX=class extends dV{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(pL),this.strokes=Object.values(pA),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new pW,this.shadow=new dE,this.calloutLabel=new pH,this.sectorLabel=new pZ,this.calloutLine=new pK,this.tooltip=new d_}};l([ew],pX.prototype,"angleKey",2),l([ew],pX.prototype,"angleName",2),l([ew],pX.prototype,"angleFilterKey",2),l([ew],pX.prototype,"radiusKey",2),l([ew],pX.prototype,"radiusName",2),l([ew],pX.prototype,"radiusMin",2),l([ew],pX.prototype,"radiusMax",2),l([ew],pX.prototype,"calloutLabelKey",2),l([ew],pX.prototype,"calloutLabelName",2),l([ew],pX.prototype,"sectorLabelKey",2),l([ew],pX.prototype,"sectorLabelName",2),l([ew],pX.prototype,"legendItemKey",2),l([ew],pX.prototype,"defaultColorRange",2),l([ew],pX.prototype,"defaultPatternFills",2),l([ew],pX.prototype,"fills",2),l([ew],pX.prototype,"strokes",2),l([ew],pX.prototype,"fillOpacity",2),l([ew],pX.prototype,"strokeOpacity",2),l([ew],pX.prototype,"lineDash",2),l([ew],pX.prototype,"lineDashOffset",2),l([ew],pX.prototype,"cornerRadius",2),l([ew],pX.prototype,"itemStyler",2),l([ew],pX.prototype,"rotation",2),l([ew],pX.prototype,"outerRadiusOffset",2),l([ew],pX.prototype,"outerRadiusRatio",2),l([ew],pX.prototype,"strokeWidth",2),l([ew],pX.prototype,"sectorSpacing",2),l([ew],pX.prototype,"hideZeroValueSectorsInLegend",2),l([ew],pX.prototype,"title",2),l([ew],pX.prototype,"shadow",2),l([ew],pX.prototype,"calloutLabel",2),l([ew],pX.prototype,"sectorLabel",2),l([ew],pX.prototype,"calloutLine",2),l([ew],pX.prototype,"tooltip",2);var pQ=class extends oy{constructor(e,t,i,a){super(e,t,i,a),this.angleKey=a.properties.angleKey,this.radiusKey=a.properties.radiusKey,this.calloutLabelKey=a.properties.calloutLabelKey,this.sectorLabelKey=a.properties.sectorLabelKey}},pq=class extends pF{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:pz,label:dN}}),this.properties=new pX,this.phantomNodeData=void 0,this.backgroundGroup=new tg({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new hh,this.radiusScale=new hh,this.phantomGroup=this.backgroundGroup.appendChild(new tu({name:"phantom"})),this.phantomSelection=rR.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new tu({name:"pieCalloutLabels"})),this.calloutLabelSelection=new rR(this.calloutLabelGroup,tu),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new tu({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new oO({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=pQ,this.angleScale=new hh,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e?.removeChild(this.backgroundGroup)}setSeriesIndex(e){return!!super.setSeriesIndex(e)&&(this.backgroundGroup.zIndex=[0,e],!0)}nodeFactory(){let e=new pI;return e.miterLimit=1e9,e}getSeriesDomain(e){return"angle"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data)return;let{visible:t,id:i,ctx:{legendManager:a}}=this,{angleKey:r,angleFilterKey:n,radiusKey:o,calloutLabelKey:l,sectorLabelKey:h,legendItemKey:d}=this.properties,u=()=>(e,s)=>t&&a.getItemEnabled({seriesId:i,itemId:s})?e:0,c=!this.ctx.animationManager.isSkipped(),p=[],g=[];d?p.push(lT(d,"band",{id:"legendItemKey"})):l?p.push(lT(l,"band",{id:"calloutLabelKey"})):h&&p.push(lT(h,"band",{id:"sectorLabelKey"}));let m=this.radiusScale.type,y=this.angleScale.type;for(let t of(o&&g.push(lR(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:u}),lE(o,m,{id:"radiusRaw",processor:u}),lH("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),l&&g.push(lE(l,"band",{id:"calloutLabelValue"})),h&&g.push(lE(h,"band",{id:"sectorLabelValue"})),d&&g.push(lE(d,"band",{id:"legendItemValue"})),n&&g.push(lP(n,y,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:u}),lE(n,y,{id:"angleFilterRaw"}),lH("angleFilterValue",[0,1],0,0)),c&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&p.length>0&&g.push(l4(this.id,this.processedData)),g.push(lK()),await this.requestDataModel(e,this.data,{props:[...p,lP(r,y,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:u}),lE(r,y,{id:"angleRaw"}),lH("angleValue",[0,1],0,0),...g]}),this.processedData?.defs?.values??[])){let{id:e,missing:i,property:a}=t,r=rc(this,i);"angleRaw"!==e&&r>0&&s.Vy.warnOnce(`no value was found for the key '${String(a)}' on ${r} data element${r>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){let i=e.resolveColumnById(this,"angleValue",t),a=e.resolveColumnById(this,"angleRaw",t),s=null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterValue",t):void 0,r=null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterRaw",t):void 0,n=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,o=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0;return{angleValues:i,angleRawValues:a,angleFilterValues:s,angleFilterRawValues:r,radiusValues:n,radiusRawValues:o,calloutLabelValues:l,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){let{id:e,processedData:t,dataModel:i,angleScale:a,ctx:{legendManager:s},visible:r}=this,{rotation:n}=this.properties;if(!i||t?.type!=="ungrouped")return;let{angleValues:o,angleRawValues:l,angleFilterValues:h,angleFilterRawValues:d,radiusValues:u,radiusRawValues:c,calloutLabelValues:p,sectorLabelValues:g,legendItemValues:m}=this.getProcessedDataValues(i,t),y=d?.some((e,t)=>e>l[t])??!1,f=0,b=0,x=[],M=null!=d?[]:void 0,v=t.dataSources.get(this.id)??[],S=t.invalidData?.get(this.id);return v.forEach((t,i)=>{if(S?.[i]===!0)return;let v=y?h[i]:o[i],D=null==d||y?1:Math.sqrt(d[i]/l[i]),I=a.convert(f)+eo(n);f=v,b+=v;let L=a.convert(f)+eo(n),A=Math.abs(L-I),w=I+A/2,C=l[i],k=(u?.[i]??1)*D,N=c?.[i],T=m?.[i],E=this.getLabels(t,w,A,!0,p?.[i],g?.[i],T),O=this.getSectorFormat(t,i,!1),j={itemId:i,series:this,datum:t,datumIndex:i,angleValue:C,midAngle:w,midCos:Math.cos(w),midSin:Math.sin(w),startAngle:I,endAngle:L,radius:k,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(k),0),sectorFormat:O,radiusValue:N,legendItemValue:T,enabled:r&&s.getItemEnabled({seriesId:e,itemId:i}),...E};x.push(j),null!=M&&M.push({...j,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=0===b,{itemId:e,nodeData:x,labelData:x,phantomNodeData:M}}getLabels(e,t,i,a,s,r,n){let{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,d=!a||o.enabled?this.properties.calloutLabelKey:void 0,u=!a||l.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!u&&!h)return{};let c={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>=eo(o.minAngle)&&(p.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(o,{...c,value:s}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...c,value:r})}),null!=h&&null!=n&&(p.legendItem={key:h,text:n}),p}getTextAlignment(e){let t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=er(e),a=Math.floor((i- -.75*Math.PI)/(Math.PI/2)),r=(0,s.GT)(a,t.length);return t[r]}getNodeFill(e,t,i){return ou(e,{type:"gradient",bounds:"series",colorStops:t.map(e=>({color:e})),gradient:"radial",rotation:0,reverse:!0},{type:"pattern",pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"none",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0},{type:"image",backgroundFill:i,backgroundFillOpacity:1,fit:"contain",repeat:"no-repeat",rotation:0})}getFillParams(e,t,i){if(e2(e)&&"item"!==e.bounds)return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getSectorFormat(e,t,i){let a,{angleKey:s,radiusKey:r,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:l,fills:h,strokes:d,defaultColorRange:u,defaultPatternFills:c,itemStyler:p}=this.properties,g=d[t%d.length],{fill:m,fillOpacity:y,stroke:f,strokeWidth:b,strokeOpacity:x,lineDash:M,lineDashOffset:v,cornerRadius:S}=z(i&&this.properties.highlightStyle.item,{fill:h.length>0?h[t%h.length]:void 0,stroke:g,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),D=u[t%u.length],I=c[t%c.length],L=m??"black";return p&&(a=this.cachedDatumCallback(this.getDatumId(t)+(i?"-highlight":"-hide"),()=>this.callWithContext(p,{datum:e,angleKey:s,radiusKey:r,calloutLabelKey:n,sectorLabelKey:o,legendItemKey:l,fill:this.getNodeFill(L,D,I),strokeOpacity:x,stroke:f,strokeWidth:b,fillOpacity:y,lineDash:M,lineDashOffset:v,cornerRadius:S,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill(a?.fill??L,D,I),fillOpacity:a?.fillOpacity??y,stroke:a?.stroke??f,strokeWidth:a?.strokeWidth??b,strokeOpacity:a?.strokeOpacity??x,lineDash:a?.lineDash??M,lineDashOffset:a?.lineDashOffset??v,cornerRadius:a?.cornerRadius??S}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){let t=[0,this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);let i=e=>({...e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;let t=this.properties.title?.spacing??0,i=Math.max(0,-e);return-e-(2+t)-i}update({seriesRect:e}){let{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},a=null!=tS(this.nodeDataDependencies,i);if(a&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(a),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){let e=this.getTitleTranslationY();t.node.y=isFinite(e)?e:0;let i=t.node.getBBox();t.node.visible=t.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(i)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){let{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&this.labelGroup?.removeChild(e.node),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){let e=e=>{let t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(e),this.phantomNodeData?.forEach(e)}updateSelections(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:a,calloutLabelSelection:s,labelSelection:r}=this,n=this.nodeData.map(e=>({...e,sectorFormat:{...e.sectorFormat}})),o=(e,t)=>{e.update(t,void 0,e=>this.getDatumId(e.datumIndex)),this.ctx.animationManager.isSkipped()&&e.cleanup()};o(e,this.nodeData),o(t,n),o(i,this.phantomNodeData??[]),s.update(this.calloutNodeData,e=>{let t=new rP;t.tag=0,t.pointerEvents=1,e.appendChild(t);let i=new io;i.tag=1,i.pointerEvents=1,e.appendChild(i)}),r.update(this.nodeData),a.update(n)}updateNodes(e){let t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.highlightLabel.visible=i&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();let a=this.radiusScale.range[0],s=this.radiusScale.range[1],r=this.getShapeFillBBox(),n=this.ctx.animationManager.isSkipped(),o=(e,t,i,o)=>{let l=this.getSectorFormat(t.datum,t.itemId,o);t.sectorFormat.fill=l.fill,t.sectorFormat.stroke=l.stroke,n&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(o||n)&&(e.fill=l.fill,e.stroke=l.stroke);let h=this.getFillParams(l.fill,a,s);op(e,l.fill,r,h),e.strokeWidth=l.strokeWidth,e.fillOpacity=l.fillOpacity,e.strokeOpacity=l.strokeOpacity,e.lineDash=l.lineDash,e.lineDashOffset=l.lineDashOffset,e.cornerRadius=l.cornerRadius,e.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(null!=l.stroke?l.strokeWidth:0))/2,0);e.inset=d,e.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((e,t,i)=>o(e,t,i,!1)),this.highlightSelection.each((e,i,a)=>{o(e,i,a,!0),e.visible=i.itemId===t?.itemId}),this.phantomSelection.each((e,t,i)=>o(e,t,i,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:{length:e,strokeWidth:t,colors:i},strokes:a}=this.properties,s=e4(i)?i:a,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(i=>{let a=i.closestDatum(),{calloutLabel:n,outerRadius:o,datumIndex:l}=a;if(n?.text&&!n.hidden&&0!==o){i.visible=!0,i.strokeWidth=t,i.stroke=s[l%s.length],i.fill=void 0;let h=a.midCos*o,d=a.midSin*o,u=a.midCos*(o+e),c=a.midSin*(o+e);if((n.collisionTextAlign??0!==n.collisionOffsetY)&&null!=n.box){let e=n.box,t=u,i=c;u<e.x?t=e.x:u>e.x+e.width&&(t=e.x+e.width),c<e.y?i=e.y:c>e.y+e.height&&(i=e.y+e.height);let a=t-u,s=i-c,o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),l=o-r;l>0&&(u+=a*l/o,c+=s*l/o)}i.x1=h,i.y1=d,i.x2=u,i.y2=c}else i.visible=!1})}getLabelOverflow(e,t,i){let a=-this.centerX,s=a+i.width,r=-this.centerY,n=r+i.height,o=1;t.x+1<a?o=(t.x+t.width-a)/t.width:t.x+t.width-1>s&&(o=(s-t.x)/t.width);let l=t.y+1<r||t.y+t.height-1>n;return{textLength:1===o?e.length:Math.floor(e.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){let{surroundingRadius:t}=this;if(null==t)return!1;let i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],a=t**2;return i.some(e=>e.x**2+e.y**2>a)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:a,minSpacing:s}=t,r=e.convert(0),n=e=>!e.calloutLabel||0===e.outerRadius,o=this.calloutNodeData,l=o.filter(e=>!n(e));if(l.forEach(e=>{let t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)}),l.length<=1)return;let h=l.filter(e=>e.midCos<0).sort((e,t)=>e.midSin-t.midSin),d=l.filter(e=>e.midCos>=0).sort((e,t)=>e.midSin-t.midSin),u=l.filter(e=>e.midSin<0&&e.calloutLabel?.textAlign==="center").sort((e,t)=>e.midCos-t.midCos),c=l.filter(e=>e.midSin>=0&&e.calloutLabel?.textAlign==="center").sort((e,t)=>e.midCos-t.midCos),p=e=>{let t=e.calloutLabel;if(null==t)return y.zero.clone();let s=e.outerRadius+i.length+a,r=e.midCos*s,n=e.midSin*s+t.collisionOffsetY,o=t.collisionTextAlign??t.textAlign,l=t.textBaseline;return io.computeBBox(t.text,r,n,{font:this.properties.calloutLabel,textAlign:o,textBaseline:l})},g=(e,t,i)=>{let a=p(e).grow(s/2),r=p(t).grow(s/2);a.x<r.x+r.width&&a.x+a.width>r.x&&("to-top"===i?a.y<r.y+r.height:a.y+a.height>r.y)&&(t.calloutLabel.collisionOffsetY="to-top"===i?a.y-r.y-r.height:a.y+a.height-r.y)},m=e=>{let t=e.slice().sort((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin))[0],i=e.indexOf(t);for(let t=i-1;t>=0;t--)g(e[t+1],e[t],"to-top");for(let t=i+1;t<e.length;t++)g(e[t-1],e[t],"to-bottom")},f=e=>{let t=l.some(e=>0!==e.calloutLabel.collisionOffsetY),i=e.map(e=>p(e)),a=i.map(e=>e.clone().grow(s/2)),n=!1;for(let t=0;t<a.length&&!n;t++){let i=a[t];for(let s=t+1;s<e.length;s++){let e=a[s];if(i.collidesBBox(e)){n=!0;break}}}let h=o.map(e=>{let{startAngle:t,endAngle:i,outerRadius:a}=e;return{startAngle:t,endAngle:i,innerRadius:r,outerRadius:a}}),d=i.some(e=>h.some(t=>pf(e,t)));(n||t||d)&&e.filter(e=>"center"===e.calloutLabel.textAlign).forEach(e=>{let t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"})};m(h),m(d),f(u),f(c)}updateCalloutLabelNodes(e){let{radiusScale:t}=this,{calloutLabel:i,calloutLine:a}=this.properties,s=a.length,{offset:r,color:n}=i,o=new io;this.calloutLabelSelection.selectByTag(1).forEach(a=>{let l=a.closestDatum(),h=l.calloutLabel,d=Math.max(0,t.convert(l.radius));if(!h?.text||0===d||h.hidden){a.visible=!1;return}let u=d+s+r,c=l.midCos*u,p=l.midSin*u+h.collisionOffsetY,g={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};o.text=h.text,o.x=c,o.y=p,o.setFont(this.properties.calloutLabel),o.setAlign(g);let m=o.getBBox(),y=h.text,f=!0;if(i.avoidCollisions){let{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(h.text,m,e);y=h.text.length===t?h.text:`${h.text.substring(0,t)}\u2026`,f=!i}a.text=y,a.x=c,a.y=p,a.setFont(this.properties.calloutLabel),a.setAlign(g),a.fill=n,a.visible=f})}computeLabelsBBox(e,t){let i,{calloutLabel:a,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:l}=a;if(!a.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let h=[],d=new io,{title:u}=this.properties;if(u?.text&&u.enabled){let e=this.getTitleTranslationY();isFinite(e)&&(d.text=u.text,d.x=0,d.y=e,d.setFont(u),d.setAlign({textBaseline:"bottom",textAlign:"center"}),i=d.getBBox(),h.push(i))}return(this.calloutNodeData.forEach(a=>{let s=a.calloutLabel;if(!s||0===a.outerRadius)return null;let u=a.outerRadius+r+n,c=a.midCos*u,p=a.midSin*u+s.collisionOffsetY;d.text=s.text,d.x=c,d.y=p,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});let g=d.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o){s.hidden=!0;return}if(i){let e=-this.centerY,t=new y(i.x-l,e,i.width+2*l,i.y+i.height+l-e);if(g.collidesBBox(t)){s.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:a}=this.getLabelOverflow(s.text,g,t),r=s.text.length>2&&e<2;if(i||r||a){s.hidden=!0;return}}s.hidden=!1,h.push(g)}),0===h.length)?null:y.merge(h)}updateSectorLabelNodes(){let{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:a,fontWeight:s,fontFamily:r,positionOffset:n,positionRatio:o,color:l}=this.properties.sectorLabel,h=t>0,d=this.ctx.legendManager.getData(this.id)?.filter(e=>e.enabled).length===1,u=(e,u)=>{let{sectorLabel:c,outerRadius:p,startAngle:g,endAngle:m}=u,y=!1;if(c&&0!==p){let f=t*(1-o)+p*o+n;e.fill=l,e.fontStyle=a,e.fontWeight=s,e.fontSize=i,e.fontFamily=r,e.text=c.text,!h&&d?(e.x=0,e.y=0):(e.x=u.midCos*f,e.y=u.midSin*f),e.textAlign="center",e.textBaseline="middle";let b=e.getBBox(),x=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]],M={startAngle:g,endAngle:m,innerRadius:t,outerRadius:p};x.every(([e,t])=>pm(e,t,M))&&(y=!0)}e.visible=y};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius()}pickNodeClosestDatum(e){return pR(this,e)}getTooltipContent(e){let{id:t,dataModel:i,processedData:a,properties:s}=this,{legendItemKey:r,calloutLabelKey:n,calloutLabelName:o,sectorLabelKey:l,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:c,radiusName:p,tooltip:g}=s,m=this.properties.title.text;if(!i||!a)return;let y=a.dataSources.get(this.id)?.[e],{angleRawValues:f,legendItemValues:b,calloutLabelValues:x,sectorLabelValues:M}=this.getProcessedDataValues(i,a),v=f[e],S=b?.[e]??(n===d?void 0:x?.[e])??(l===d?void 0:M?.[e])??u;return this.formatTooltipWithContext(g,{title:m,symbol:this.legendItemSymbol(e),data:[{label:S,fallbackLabel:d,value:at(v,3)}]},{seriesId:t,datum:y,title:u,legendItemKey:r,calloutLabelKey:n,calloutLabelName:o,sectorLabelKey:l,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:c,radiusName:p,...this.getSectorFormat(y,e,!1)})}legendItemSymbol(e){let t=this.processedData?.dataSources.get(this.id)?.[e],i=this.getSectorFormat(t,e,!1),{fillOpacity:a,strokeOpacity:s,strokeWidth:r,lineDash:n,lineDashOffset:o}=this.properties,{fill:l}=i,{stroke:h}=i;return e2(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:h,fillOpacity:a,strokeOpacity:s,strokeWidth:r,lineDash:n,lineDashOffset:o}}}getLegendData(e){let{id:t,visible:i,processedData:a,dataModel:s,ctx:{legendManager:r}}=this;if(!s||!a||"category"!==e)return[];let{angleKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,showInLegend:d}=this.properties;if(!h&&(!o||o===n)&&(!l||l===n))return[];let{calloutLabelValues:u,sectorLabelValues:c,legendItemValues:p,angleRawValues:g}=this.getProcessedDataValues(s,a),m=this.properties.title?.showInLegend&&this.properties.title.text,y=[],f=this.properties.hideZeroValueSectorsInLegend,b=a.dataSources.get(this.id),x=a.invalidData?.get(this.id);for(let e=0;e<a.input.count;e++){let a=b?.[e],s=g[e];if(x?.[e]===!0||f&&0===s)continue;let M=[];m&&M.push(m);let v=this.getLabels(a,2*Math.PI,2*Math.PI,!1,u?.[e],c?.[e],p?.[e]);h&&void 0!==v.legendItem?M.push(v.legendItem.text):o&&o!==n&&v.calloutLabel?.text!==void 0?M.push(v.calloutLabel?.text):l&&l!==n&&v.sectorLabel?.text!==void 0&&M.push(v.sectorLabel?.text),0!==M.length&&y.push({legendType:"category",id:t,datum:a,itemId:e,seriesId:t,hideToggleOtherSeries:!0,enabled:i&&r.getItemEnabled({seriesId:t,itemId:e}),label:{text:M.join(" - ")},symbol:this.legendItemSymbol(e),legendItemName:null!=h?a[h]:void 0,hideInLegend:!d})}return y}setLegendState(e){let{id:t,ctx:{legendManager:i,updateService:a}}=this;e.forEach((e,a)=>i.toggleItem(e,t,a)),i.update(),a.update(5)}animateEmptyUpdateReady(e){let{animationManager:t}=this.ctx,i=pj(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);rE(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(e,t)=>this.getDatumId(t.datumIndex)),dC(this,"callout",t,this.calloutLabelSelection),dC(this,"sector",t,this.labelSelection),dC(this,"highlight",t,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:a,radiusScale:s,previousRadiusScale:r}=this,{animationManager:n}=this.ctx,o=a?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(o?.moved.size??0)===0,h=(a?.defs.keys.length??0)>0,d=a?.reduced?.animationValidation?.uniqueKeys??!0;l&&h&&d||this.ctx.animationManager.skipCurrentBatch();let u=pj(!1,this.properties.rotation,s,r);rE(this.id,"nodes",n,[e,t,i],u.nodes,(e,t)=>this.getDatumId(t.datumIndex),o),dC(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dC(this,"sector",this.ctx.animationManager,this.labelSelection),dC(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:a,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=pj(!1,this.properties.rotation,a,s);rE(this.id,"nodes",r,[e,t,i],n.nodes,(e,t)=>this.getDatumId(t.datumIndex)),dk(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dk(this,"sector",this.ctx.animationManager,this.labelSelection),dk(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){return`${e}`}};pq.className="PieSeries",pq.type="pie";var pJ={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new pq(e),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]},{$isImage:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:dv,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:hK,xOffset:3,yOffset:3,blur:5}},legend:{enabled:!0}}};function p0(){for(let e of(d.register(hv,hF,lo,cI,cH,c2,ps,pu,p$,pJ,c8),[hd,lc,hp,ht,hu,hm]))rb.register(e.type,{moduleFactory:t=>new e(t)})}var p1=["bar","line","scatter"],p2=(e=>(e.POINTER="pointer",e.NODE="node",e.CHART="chart",e))(p2||{}),p4=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.TOP_LEFT="top-left",e.CENTER="center",e))(p4||{}),p3=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))(p3||{}),p5=Symbol("IGNORED_PROP");function p9(e,t){let i={};for(let a of Object.keys(t)){let s=t[a];s!==p5&&Object.hasOwn(e,a)&&(i[a]=s)}return i}function p6(e){let{enabled:t,mode:i,showArrow:a,range:s,position:r,pagination:n,delay:o,wrapping:l,interaction:h,renderer:d,...u}=e,c=p9(e,{enabled:t,showArrow:a,range:s,position:r,interaction:h,renderer:d,...u});return{chartTooltipOptions:p9(e,{enabled:p5,showArrow:p5,range:p5,position:p5,mode:i,pagination:n,delay:o,wrapping:l,...u}),seriesTooltipOptions:c}}function p8(e,t){if(null==t)return e;let{targets:i,...a}=t;return null!=(e=z(e,a)).targets&&null!=i&&(e.targets=P(e.targets,i)),e}var p7={fills:(0,s.Uo)((0,s.O9)(2),(0,s.jk)((0,s.fd)({color:s.yW,stop:s.ai},"")),s.hz),fillMode:(0,s.KC)("continuous","discrete")},ge={value:(0,s.mw)(s.ai),text:s.Yj,shape:(0,s.or)((0,s.KC)("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),s.E2),placement:(0,s.KC)("before","after","middle"),spacing:s.Ly,size:s.Ly,rotation:s.ai,...s.Fu,...s.AF,...s.mL},gt={value:(0,s.mw)(s.ai),text:s.Yj,shape:(0,s.or)((0,s.KC)("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),s.E2),placement:(0,s.KC)("inside","outside","middle"),spacing:s.Ly,size:s.Ly,rotation:s.ai,label:{...cm,spacing:s.Ly},...s.Fu,...s.AF,...s.mL},gi={direction:(0,s.KC)("horizontal","vertical"),cornerMode:(0,s.KC)("container","item"),cornerRadius:s.Ly,thickness:s.Ly,segmentation:{enabled:s.zM,spacing:s.Ly,interval:{values:(0,s.jk)(s.ai),step:s.ai,count:s.ai}},bar:{enabled:s.zM,thickness:s.Ly,thicknessRatio:s.CG,...p7,...s.Fu,...s.AF,...s.mL},label:{...cy,text:s.Yj,spacing:s.Ly,avoidCollisions:s.zM,placement:(0,s.KC)("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:cx,...B(cc,["listeners"])},ga={...gi,...B(cp,["listeners"]),type:(0,s.mw)((0,s.dY)("linear-gauge")),value:(0,s.mw)(s.ai),scale:{min:(0,s.Uo)(s.ai,(0,s.Xe)("max")),max:(0,s.Uo)(s.ai,(0,s.MM)("min")),label:{enabled:s.zM,formatter:s.E2,rotation:s.ai,spacing:s.Ly,minSpacing:s.Ly,placement:(0,s.KC)("before","after"),avoidCollisions:s.zM,format:uW,...s.LV},interval:{values:(0,s.jk)(s.ai),step:s.ai},...p7,...s.Fu,...s.AF,...s.mL},targets:(0,s.J$)(ge,"target options array")};ga.margin=(0,s._L)(s.ai),ga.defaultColorRange=(0,s._L)((0,s.jk)(s.yW)),ga.defaultTarget=(0,s._L)({...ge,value:s.ai,label:{...cm,spacing:s.ai}}),ga.defaultScale=(0,s._L)(ga.scale),ga.scale.defaultFill=(0,s._L)(s.yW);var gs={outerRadius:s.Ly,innerRadius:s.Ly,outerRadiusRatio:s.CG,innerRadiusRatio:s.CG,startAngle:s.ai,endAngle:s.ai,spacing:s.Ly,cornerMode:(0,s.KC)("container","item"),cornerRadius:s.Ly,scale:{min:(0,s.Uo)(s.ai,(0,s.Xe)("max")),max:(0,s.Uo)(s.ai,(0,s.MM)("min")),label:{enabled:s.zM,formatter:s.E2,rotation:s.ai,spacing:s.Ly,minSpacing:s.Ly,avoidCollisions:s.zM,format:uW,...s.LV},interval:{values:(0,s.jk)(s.ai),step:s.ai},...p7,...s.Fu,...s.AF,...s.mL},segmentation:{enabled:s.zM,spacing:s.Ly,interval:{values:(0,s.jk)(s.ai),step:s.ai,count:s.ai}},bar:{enabled:s.zM,...p7,...s.Fu,...s.AF,...s.mL},needle:{enabled:s.zM,spacing:s.Ly,radiusRatio:s.CG,...s.Fu,...s.AF,...s.mL},label:{text:s.Yj,spacing:s.Ly,...cy},secondaryLabel:{text:s.Yj,...cy},tooltip:cx,...cc},gr={...gs,...cp,type:(0,s.mw)((0,s.dY)("radial-gauge")),value:(0,s.mw)(s.ai),targets:(0,s.J$)(gt,"target options array")};gr.defaultColorRange=(0,s._L)((0,s.jk)(s.yW)),gr.defaultTarget=(0,s._L)({...gt,value:s.ai,label:{...cm,spacing:s.ai}}),gr.scale.defaultFill=(0,s._L)(s.yW);var gn={stroke:di},go={fill:dn},gl={color:"white",fill:di},gh={color:di},gd={color:ds,fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"}},gu={...gd,fontSize:{$ref:"fontSize"},color:dd,fill:dl,stroke:dh,strokeWidth:1,divider:{stroke:du,strokeWidth:1,strokeOpacity:.5}},gc={...gn,background:{fill:dr,fillOpacity:.2},handle:{...go},text:{...gh},statistics:{...gu}},gp={line:{...gn,handle:{...go},text:{...gh}},"horizontal-line":{...gn,handle:{...go},axisLabel:{...gl},text:{...gh}},"vertical-line":{...gn,handle:{...go},axisLabel:{...gl},text:{...gh}},"disjoint-channel":{...gn,background:{fill:dr,fillOpacity:.2},handle:{...go},text:{...gh}},"parallel-channel":{...gn,background:{fill:dr,fillOpacity:.2},handle:{...go},text:{...gh}},"fibonacci-retracement":{...gn,strokes:da,rangeStroke:di,handle:{...go},text:{...gh,position:"center"},label:{...gd,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...gn,strokes:da,rangeStroke:di,handle:{...go},text:{...gh,position:"center"},label:{...gd,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...gn,...gd,color:{$ref:"textColor"},handle:{...go},fill:dr,fillOpacity:.2},comment:{...gd,color:"white",fontWeight:700,handle:{...go},fill:di},note:{...gd,color:dy,fill:di,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...go},background:{fill:dg,stroke:dm,strokeWidth:1}},text:{...gd,handle:{...go}},arrow:{...gn,handle:{...go},text:{...gh}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...go,stroke:di}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...go,stroke:di}},"date-range":{...gc},"price-range":{...gc},"date-price-range":{...gc},"quick-date-price-range":{up:{...gn,fill:dr,fillOpacity:.2,handle:{...go},statistics:{...gu,color:"#fff",fill:dr,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...gn,stroke:dp,fill:dc,fillOpacity:.2,handle:{...go,stroke:dp},statistics:{...gu,color:"#fff",fill:dc,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},gg=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],gm=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}],gy="range-area";function gf(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function gb(e,t){return t[e]??t.default}var gx={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:dt,lineDash:[0],label:{enabled:!1}}},gM={...gx,nice:!1},gv={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},gS={style:[{stroke:{$ref:"gridLineColor"}}],width:2},gD={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...gM,interval:{values:[0]}},log:{...gM},time:{...gM},category:{...gx}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...gv,position:{...gv.position,anchorTo:"pointer"},range:"nearest"},axes:{number:{gridLine:gS},time:{gridLine:gS},category:{gridLine:gS}}},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:gv},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:gv}}},gI=lb(function(e,t){return"string"==typeof e?{...t,baseTheme:e}:null!=e?{...e,baseTheme:gI(e.baseTheme,t)}:t});function gL(e){if(Array.isArray(e)&&0!==e.length){let t=e[0];if("number"==typeof t)return{data:e.map((e,t)=>({x:t,y:e})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(e=>({x:e[0],y:e[1],datum:e})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:e}}var gA=lb((e,t,i)=>a=>{let s=a.datum[a.xKey],r=a.datum[a.yKey],n=null!=i?a.datum[i]:a.datum,o=t?.renderer?.({context:e,datum:n,xValue:s,yValue:r});if("string"==typeof o)return o;let l=o?.content??r.toFixed(2);return o?.title?{heading:void 0,title:void 0,data:[{label:o.title,value:l}]}:{heading:void 0,title:l,data:[]}}),gw={chartType:(0,s.KC)("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:s.Yj,openKey:s.Yj,highKey:s.Yj,lowKey:s.Yj,closeKey:s.Yj,volumeKey:s.Yj,navigator:s.zM,volume:s.zM,rangeButtons:s.zM,statusBar:s.zM,toolbar:s.zM,zoom:s.zM,sync:s.zM,theme:s.sw,container:s.sw,width:s.sw,height:s.sw,minWidth:s.sw,minHeight:s.sw,listeners:s.sw,initialState:s.sw,title:s.sw,data:s.YO},gC={theme:s.sw,container:s.sw,animation:s.sw,background:s.sw,contextMenu:s.sw,listeners:s.sw,locale:s.sw,width:s.sw,height:s.sw,minWidth:s.sw,minHeight:s.sw,title:s.sw,subtitle:s.sw,footnote:s.sw,padding:s.sw,tooltip:{...cx,...cu.tooltip}};gC.overrideDevicePixelRatio=(0,s._L)(s.Ly);var gk=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],gN={visible:s.zM,reverse:s.zM,stroke:s.yW,strokeWidth:s.Ly},gT={context:s.sw,tooltip:s.sw,theme:s.sw,background:s.sw,container:s.sw,width:s.sw,height:s.sw,minWidth:s.sw,minHeight:s.sw,padding:s.sw,listeners:s.sw,locale:s.sw,data:s.sw,styleNonce:s.Yj,axis:(0,s.is)({number:{...gN,min:(0,s.Uo)(s.ai,(0,s.Xe)("max")),max:(0,s.Uo)(s.ai,(0,s.MM)("min"))},category:{...gN,paddingInner:s.CG,paddingOuter:s.CG},time:{...gN,min:(0,s.Uo)((0,s.or)(s.ai,s.p6),(0,s.Xe)("max")),max:(0,s.Uo)((0,s.or)(s.ai,s.p6),(0,s.MM)("min"))}},"axis options","category"),min:(0,s.Uo)(s.ai,(0,s.Xe)("max")),max:(0,s.Uo)(s.ai,(0,s.MM)("min")),crosshair:{enabled:s.zM,snap:s.zM,...s.AF,...s.mL},xKey:s.Yj,yKey:s.Yj},gE={type:"preset",name:"gauge-preset",enterprise:!0,options:(0,s.is)({"linear-gauge":{...B(ga,["type"]),...gC},"radial-gauge":{...B(gr,["type"]),...gC}},"gauge options"),create:function(e,t){if(e.listeners){let{nodeClick:t,nodeDoubleClick:i,...a}=e.listeners;e={...e,listeners:{seriesNodeClick:t,seriesNodeDoubleClick:i,...a}}}switch(e.type){case"radial-gauge":var i=p8(e,t);let{animation:a,background:s,container:r,contextMenu:n,footnote:o,height:l,listeners:h,locale:d,minHeight:u,minWidth:c,overrideDevicePixelRatio:p,padding:g,subtitle:m,theme:y,title:f,width:b,type:x,cursor:M,nodeClickRange:v,tooltip:S={},value:D,scale:I={},startAngle:L,endAngle:A,highlightStyle:w,segmentation:C,bar:k,needle:N,targets:T,outerRadius:E,innerRadius:O,outerRadiusRatio:j,innerRadiusRatio:z,cornerRadius:R,cornerMode:P,label:F,secondaryLabel:B,spacing:G,...V}=i,{chartTooltipOptions:Y,seriesTooltipOptions:U}=p6(S),_=p9(i,{animation:a,background:s,container:r,contextMenu:n,footnote:o,height:l,listeners:h,locale:d,minHeight:u,minWidth:c,overrideDevicePixelRatio:p,padding:g,subtitle:m,theme:y,title:f,tooltip:Y,width:b}),$=p9(i,{needle:null!=N?{enabled:!0,...N}:p5,startAngle:L,endAngle:A,scale:I,type:x,cursor:M,nodeClickRange:v,tooltip:U,value:D,highlightStyle:w,segmentation:C,bar:k,targets:T,outerRadius:E,innerRadius:O,outerRadiusRatio:j,innerRadiusRatio:z,cornerRadius:R,cornerMode:P,label:F,secondaryLabel:B,spacing:G,...V});return"context"in i&&(_.context=i.context),{..._,series:[$]};case"linear-gauge":var W=p8(e,t);let{animation:H,background:Z,container:K,contextMenu:X,footnote:Q,height:q,listeners:J,locale:ee,minHeight:et,minWidth:ei,overrideDevicePixelRatio:ea,padding:es,subtitle:er,theme:en,title:eo,width:el,type:eh,cursor:ed,nodeClickRange:eu,tooltip:ec={},value:ep,scale:eg={},direction:em="vertical",thickness:ey,highlightStyle:ef,segmentation:eb,bar:ex,targets:eM,cornerRadius:ev,cornerMode:eS,label:eD,...eI}=W,{chartTooltipOptions:eL,seriesTooltipOptions:eA}=p6(ec),ew=p9(W,{animation:H,background:Z,container:K,contextMenu:X,footnote:Q,height:q,listeners:J,locale:ee,minHeight:et,minWidth:ei,overrideDevicePixelRatio:ea,padding:es,subtitle:er,theme:en,title:eo,tooltip:eL,width:el}),eC=p9(W,{scale:eg,type:eh,cursor:ed,nodeClickRange:eu,tooltip:eA,value:ep,direction:em,thickness:ey,highlightStyle:ef,segmentation:eb,bar:ex,targets:eM,cornerRadius:ev,cornerMode:eS,label:eD,...eI});return"context"in W&&(ew.context=W.context),{...ew,series:[eC]};default:return{}}}},gO={type:"preset",name:"sparkline",options:(0,s.is)({area:{...gT,...B(cD,gk)},bar:{...gT,...B(cW,gk)},line:{...gT,...B(pa,gk)}},"sparkline options"),create:function(e){let{background:t,container:i,height:a,listeners:s,locale:r,minHeight:n,minWidth:o,overrideDevicePixelRatio:l,padding:h,width:d,theme:u,data:c,crosshair:p,axis:g,min:m,max:y,tooltip:f,context:b,styleNonce:x,...M}=e,v=p9(e,{background:t,container:i,height:a,listeners:s,locale:r,minHeight:n,minWidth:o,overrideDevicePixelRatio:l,padding:h,width:d,styleNonce:x,tooltip:p5,context:p5,data:p5,crosshair:p5,axis:p5,min:p5,max:p5,theme:p5}),{data:S,series:[D]=[],datumKey:I}=gL(c);null!=D&&Object.assign(M,D),M.tooltip={...f,renderer:gA(b,f,I)},v.theme=gI(u,gD),v.data=S,v.series=[M];let L="bar"!==M.type||"horizontal"!==M.direction,[A,w]=L?["bottom","left"]:["left","bottom"],C={...function(e){switch(e?.type){case"number":{let{type:t,min:i,max:a,reverse:s}=e;return p9(e,{type:t,reverse:s,min:i,max:a})}case"time":{let{type:t,min:i,max:a,reverse:s}=e;return p9(e,{type:t,reverse:s,min:i,max:a})}default:let{paddingInner:t,paddingOuter:i,reverse:a}=e??{};return p9({...e,type:"category"},{type:"category",reverse:a,paddingInner:t,paddingOuter:i})}}(g),position:A,...p9(e,{crosshair:p})},k={type:"number",gridLine:function(e,t,i){let a={};return e?.stroke!=null&&(a.style=[{stroke:e?.stroke}],a.enabled??(a.enabled=!0)),e?.strokeWidth!=null&&(a.width=e?.strokeWidth,a.enabled??(a.enabled=!0)),"bar"===i.type&&"horizontal"!==i.direction&&(a.enabled??(a.enabled=!0)),e?.visible!=null&&(a.enabled=e.visible),a.enabled??(a.enabled=t),a}(g,!1,e),position:w,...p9(e,{min:m,max:y})};return v.axes=L?[k,C]:[C,k],v},processData:gL},gj=["top","right","bottom","left"],gz=class e extends li{constructor(e,t){super(e,t),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(e,t){super.onAxisChange(e,t),this.syncAxisChanges(e,t),null!=this.ctx&&this.ctx.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(e){let{seriesRoot:t,annotationRoot:i}=this;t.setClipRect(e),i.setClipRect(e)}async processData(){await super.processData(),"init"===this.syncStatus&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){for(let e of(await super.processDomains(),this.axes)){let t=await this.getSyncedDomain(e);null!=t&&e.setDomains(t)}}performLayout(e){let{seriesRoot:t,annotationRoot:i}=this,{clipSeries:a,seriesRect:s,visible:r}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=r,this.seriesRect=s,this.animationRect=e.layoutBox;let{x:n,y:o}=s;if(e.width!==this.lastLayoutWidth||e.height!==this.lastLayoutHeight)for(let e of[t,i])e.translationX=Math.floor(n),e.translationY=Math.floor(o);else{let{translationX:e,translationY:a}=t;rO(this.id,"seriesRect",this.ctx.animationManager,[t,i],{translationX:e,translationY:a},{translationX:Math.floor(n),translationY:Math.floor(o)},{phase:"update"})}this.lastLayoutWidth=e.width,this.lastLayoutHeight=e.height;let l=s.clone().grow(this.seriesArea.padding),h=this.seriesArea.clip||a?l:void 0,{lastUpdateClipRect:d}=this;this.lastUpdateClipRect=h,this.ctx.animationManager.isActive()&&null!=d?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:d,to:l,onUpdate:e=>this.setRootClipRects(e),onComplete:()=>this.setRootClipRects(h)}):this.setRootClipRects(h),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map(e=>e.getLayoutState()),series:{visible:r,rect:s,paddedRect:l},clipSeries:a})}updateAxes(e){let{clipSeries:t,seriesRect:i,overflows:a}=this.resolveAxesLayout(e);for(let t of this.axes)t.update(),t.setCrossLinesVisible(!a),this.clipAxis(t,i,e);return{clipSeries:t,seriesRect:i,visible:!a}}resolveAxesLayout(e){let t,i,a=0;do if(i=t??this.getDefaultState(),t=this.updateAxesPass(new Map(i.axisAreaWidths),e.clone()),a++>10){s.Vy.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(t,i));return this.lastAreaWidths=t.axisAreaWidths,t}updateAxesPass(t,i){let a=new Map,r={},n=!1,o=!1;for(let e of gj){let t=this.seriesArea.padding[e],a=this.axes.findLast(t=>t.position===e);a?a.seriesAreaPadding=t:i.shrink(t,e)}let l=(t.get("left")??0)+(t.get("right")??0),h=(t.get("top")??0)+(t.get("bottom")??0),d=this.buildCrossLinePadding(t),u=d.left+d.right,c=d.top+d.bottom;i.width<=l+u||i.height<=h+c?n=!0:i.shrink(d);let p=i.clone().shrink(Object.fromEntries(t));for(let e of this.axes){let{position:t="left",direction:i}=e;this.sizeAxis(e,p,t);let s="y"===i,{primaryTickCount:n,bbox:l}=e.calculateLayout(e.nice?r[i]:void 0,this.padding);r[i]??(r[i]=n),o||(o=e.dataDomain.clipped||e.visibleRange[0]>0||e.visibleRange[1]<1),a.set(e.id,Math.ceil(e.thickness??(s?l?.width:l?.height)??0))}let g=(0,s.$z)(this.axes,e=>e.position??"left"),{width:m,height:y,pixelRatio:f}=this.ctx.scene,b=new Map,x=new Map;for(let[t,i]of(0,s.jO)(g)){let s="left"===t||"right"===t?y%f:m%f,r=0;for(let t of i??[]){x.set(t.id,s);let i=a.get(t.id)??0;r=Math.max(r,s+i),t.layoutConstraints.stacked&&(s+=i+e.AxesPadding)}b.set(t,Math.ceil(r))}for(let[e,t]of(0,s.jO)(g))this.positionAxes({axes:t??[],position:e,axisWidths:a,axisOffsets:x,axisAreaWidths:b,axisBound:i,seriesRect:p});return{clipSeries:o,seriesRect:p,axisAreaWidths:b,overflows:n}}buildCrossLinePadding(e){let t={top:0,right:0,bottom:0,left:0};for(let[i,a=0]of(this.axes.forEach(e=>{let{position:i,label:a}=e;e.crossLines?.forEach(e=>{var s;e instanceof nS&&(e.position=i??"top",(s=e.label).parallel??(s.parallel=a.parallel)),e.calculatePadding?.(t)})}),(0,s.jO)(t)))t[i]=Math.max(a-(e.get(i)??0),0);return t}clampToOutsideSeriesRect(e,t,i,a){let s="x"===i?e.x:e.y,r="x"===i?e.width:e.height;return 1===a?Math.min(t,s+r):Math.max(t,s)}async getSyncedDomain(e){let t=this.modulesManager.getModule("sync");if(t?.enabled)return await t.getSyncedDomain(e)}syncAxisChanges(e,t){let i=this.modulesManager.getModule("sync");if(!i?.enabled)return;let a=new Set(t??[]);for(let t of e)a.delete(t);for(let e of a)i.removeAxis(e)}sizeAxis(e,t,i){let a=e instanceof lc,s="left"===i||"right"===i,{width:r,height:n}=t,o=s?n:r,l=0,h=o,{min:d,max:u}=this.ctx.zoomManager.getAxisZoom(e.id),{width:c,unit:p,align:g}=e.layoutConstraints;h="px"===p?l+c:h*c/100,"end"===g&&(l=o-(h-l),h=o),s&&(a?[d,u]=[1-u,1-d]:[l,h]=[h,l]),e.range=[l,h],e.visibleRange=[d,u],e.gridLength=s?r:n}positionAxes(e){let{axes:t,axisBound:i,axisWidths:a,axisOffsets:s,axisAreaWidths:r,seriesRect:n,position:o}=e,l=r.get(o)??0,h="x",d="y",u=1;("top"===o||"bottom"===o)&&(h="y",d="x");let c=i[h];for(let e of(("right"===o||"bottom"===o)&&(u=-1,c+="x"===h?i.width:i.height),t)){let t=r.get("x"===d?"left":"top")??0,o=a.get(e.id)??0,p=s.get(e.id)??0;e.gridPadding=l-p-o,e.translation[d]=i[d]+t,e.translation[h]=this.clampToOutsideSeriesRect(n,c+u*(p+o),h,u)}}shouldFlipXY(){return this.series.every(e=>e instanceof d0&&e.shouldFlipXY())}getDefaultState(){let e=new Map;if(this.lastAreaWidths)for(let{position:t="left"}of this.axes){let i=this.lastAreaWidths.get(t);null!=i&&e.set(t,i)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,t){if(t.overflows!==e.overflows||t.clipSeries!==e.clipSeries)return!1;for(let i of e.axisAreaWidths.keys())if(!t.axisAreaWidths.has(i))return!1;for(let[i,a]of t.axisAreaWidths.entries()){let t=e.axisAreaWidths.get(i);if((null!=a||null!=t)&&a!==t)return!1}return!0}clipAxis(e,t,i){let a=Math.ceil(e.gridLine?.width??0),s=Math.ceil(e.line?.width??0),{width:r,height:n}=t;switch(r+="x"===e.direction?a:s,n+="y"===e.direction?a:s,e.clipGrid(t.x,t.y,r,n),e.position){case"left":case"right":e.clipTickLines(i.x,t.y-a,i.width+a,t.height+2*a);break;case"top":case"bottom":e.clipTickLines(t.x-a,i.y,t.width+2*a,i.height+a)}}};gz.className="CartesianChart",gz.type="cartesian",gz.AxesPadding=15;var gR={mode:(0,s._L)((0,s.KC)("integrated","standalone")),container:s.Sc,theme:s.sw,series:s.YO,annotations:s.sw,navigator:s.sw,initialState:{chartType:s.Yj,annotations:s.sw,legend:(0,s.J$)({visible:s.zM,seriesId:s.Yj,itemId:s.Yj,legendItemName:s.Yj},"legend state array"),zoom:s.sw}},gP={...cu,...gR,axes:s.sw,data:s.YO},gF={...cu,...gR,axes:s.sw,data:s.YO},gB={...cu,...gR,data:s.YO,topology:s.eW},gG={...cu,...gR,data:s.YO},gV={...cu,...gR,data:s.YO},gY={...cu,...gR,data:s.YO,nodes:s.YO},gU={...cu,...gR,data:s.YO},g_=new Set(["number","log","time"]),g$=e=>(0,s.Gv)(e)&&!g_.has(e.type),gW=()=>{throw Error("Enterprise module placeholder cannot be initialised")},gH=class extends nq{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}layoutCrossLines(){let e=this.label.getSideFlag(),t=this.isAnySeriesActive(),{rotation:i,parallelFlipRotation:a,regularFlipRotation:s}=this.calculateRotations();this.crossLines.forEach(r=>{r.sideFlag=-e,r.direction=i===-Math.PI/2?"angle":"radius",r.parallelFlipRotation=a,r.regularFlipRotation=s,r.calculateLayout?.(t,this.reverse)})}updatePosition(){super.updatePosition();let e=Math.floor(this.translation.x),t=Math.floor(this.translation.y);this.tickLineGroup.translationX=e,this.tickLineGroup.translationY=t,this.tickLabelGroup.translationX=e,this.tickLabelGroup.translationY=t,this.crossLineRangeGroup.translationX=e,this.crossLineRangeGroup.translationY=t,this.crossLineLineGroup.translationX=e,this.crossLineLineGroup.translationY=t,this.crossLineLabelGroup.translationX=e,this.crossLineLabelGroup.translationY=t,this.tickLabelGroupSelection.each(nF())}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};l([ew],gH.prototype,"shape",2),l([ew],gH.prototype,"innerRadiusRatio",2);var gZ=class extends li{constructor(e,t){super(e,t),this.padding=new tY(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(e){let{layoutBox:t}=e;t.shrink(this.seriesArea.padding.toJson());let i=t.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(e=>e.update()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(e,t,i,a){let s=this.axes.find(e=>"angle"===e.direction),r=this.axes.find(e=>"radius"===e.direction);if(!(s instanceof gH)||!(r instanceof gH))return;let n=s.scale,o=r.innerRadiusRatio;s.innerRadiusRatio=o,s.computeRange(),s.gridLength=a,r.gridAngles=n.ticks({nice:s.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(e=>n.convert(e)),r.gridRange=s.range,r.range=[a,a*o],[s,r].forEach(a=>{a.translation.x=e.x+t,a.translation.y=e.y+i,a.calculateLayout()})}async computeCircle(e){let t=this.series.filter(gK),i=this.axes.filter(gX),a=(i,a,s)=>{this.updateAxes(e,i,a,s),t.forEach(e=>{e.centerX=i,e.centerY=a,e.radius=s});let r=t.filter(e=>"donut"===e.type||"pie"===e.type);if(r.length>1){let e=r.map(e=>{let t=e.getInnerRadius();return{series:e,innerRadius:t}}).sort((e,t)=>e.innerRadius-t.innerRadius);e.at(-1).series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},r=e.width/2,n=e.height/2,o=Math.max(0,Math.min(e.width,e.height)/2),l=o;a(r,n,l);let h=async({hideWhenNecessary:h=!1}={})=>{let d=[];for(let a of(0,s.nl)(i,t)){let t=await a.computeLabelsBBox({hideWhenNecessary:h},e);t&&d.push(t)}if(0===d.length)return void a(r,n,o);let u=y.merge(d),c=this.refineCircle(u,l,e);a(c.centerX,c.centerY,c.radius),l=c.radius};for(let a of(await h(),await h(),await h(),await h({hideWhenNecessary:!0}),await h({hideWhenNecessary:!0}),(0,s.nl)(i,t)))await a.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:l,centerX:r,centerY:n}}refineCircle(e,t,i){let a=Math.max(0,-t-e.x),s=Math.max(0,-t-e.y),r=Math.max(0,e.x+e.width-t),n=Math.max(0,e.y+e.height-t);a=r=Math.max(a,r),s=n=Math.max(s,n);let o=Math.min(i.width-a-r,i.height-s-n)/2,l=Math.min(.5*i.width/2,.5*i.height/2);if(o<l){let e=a+r,t=s+n;if(2*(o=l)+t>i.height){let e=i.height-2*o;2*Math.min(s,n)>e?(s=e/2,n=e/2):s>n?s=e-n:n=e-s}if(2*o+e>i.width){let e=i.width-2*o;2*Math.min(a,r)>e?(a=e/2,r=e/2):a>r?a=e-r:r=e-a}}let h=a+2*o+r,d=s+2*o+n;return{centerX:(i.width-h)/2+a+o,centerY:(i.height-d)/2+s+o,radius:o}}};function gK(e){return e instanceof pF}function gX(e){return e instanceof gH}gZ.className="PolarChart",gZ.type="polar";var gQ={...u4,...u5(s.ai),type:(0,s.mw)((0,s.dY)("number")),label:uq,crosshair:u3(!0)},gq={...u4,...u5(s.ai),type:(0,s.mw)((0,s.dY)("log")),base:(0,s.Uo)(s.MX,(0,s.W$)(e=>1!==e,"not equal to 1")),label:uq,crosshair:u3(!0)},gJ={...u4,...u5((0,s.or)(s.ai,s.p6),!0),type:(0,s.mw)((0,s.dY)("time")),label:uJ,parentLevel:u1,crosshair:u3(!0)};gJ.paddingInner=s.Ly,gJ.paddingOuter=s.Ly,gJ.groupPaddingInner=s.Ly;var g0={...u4,type:(0,s.mw)((0,s.dY)("category")),label:uQ,paddingInner:s.CG,paddingOuter:s.CG,groupPaddingInner:s.CG,crosshair:u3()},g1={...u4,type:(0,s.mw)((0,s.dY)("grouped-category")),label:uQ,crosshair:u3(),paddingInner:s.CG,groupPaddingInner:s.CG,depthOptions:(0,s.J$)({label:{enabled:s.zM,avoidCollisions:s.zM,rotation:s.ai,spacing:s.ai,...s.LV},tick:{enabled:s.zM,stroke:s.yW,width:s.Ly}},"depth options objects array")},g2={...u4,...u5((0,s.or)(s.ai,s.p6),!0),type:(0,s.mw)((0,s.dY)("unit-time")),unit:(0,s.or)((0,s.hR)(sm),u$),label:uJ,parentLevel:u1,paddingInner:s.CG,paddingOuter:s.CG,groupPaddingInner:s.CG,crosshair:u3(!0)},g4=(e,t)=>{let i={};for(let a of new Set([...Object.keys(e),...Object.keys(t)])){let r=e[a],n=t[a];(0,s.Qd)(r)&&(0,s.Qd)(n)?i[a]=g4(r,n):null!=r&&null!=n&&r!==n?i[a]=(0,s.or)(r,n):i[a]=r??n}return i},g3=g4(gJ,g2),g5=[{type:"chart",name:"cartesian",options:gP,detect:n6,create:(e,t)=>new gz(e,t),validate(e,t,i){let a=[];e?.series?.[0]?.type==="histogram"&&e?.axes?.some(g$)&&(a.push(new s.yI("invalid","only continuous axis types when histogram series is used",e.axes,i,"axes")),e=B(e,["axes"]));let r=(0,s.tf)(e,t,i);return r.invalid.push(...a),r}},{type:"axis",name:"number",chartType:"cartesian",options:gQ,create:e=>new hd(e)},{type:"axis",name:"log",chartType:"cartesian",options:gq,create:e=>new hu(e)},{type:"axis",name:"time",chartType:"cartesian",options:g3,create:e=>new hp(e)},{type:"axis",name:"category",chartType:"cartesian",options:g0,create:e=>new lc(e)},{type:"axis",name:"grouped-category",chartType:"cartesian",options:g1,create:e=>new ht(e)},{type:"axis",name:"unit-time",chartType:"cartesian",options:g2,create:e=>new hm(e)},cL,cZ,c4,c7,pr,pc,{type:"chart",name:"polar",options:gF,detect:n8,create:(e,t)=>new gZ(e,t),validate(e,t,i){let a=[],r=e?.series?.[0]?.type;("pie"===r||"donut"===r)&&e?.axes&&(a.push(new s.Bk([],e.axes,i,"axes")),e=B(e,["axes"]));let n=(0,s.tf)(e,t,i);return n.invalid.push(...a),n}},{type:"series",name:"donut",chartType:"polar",options:p_,create:e=>new pG(e)},{type:"series",name:"pie",chartType:"polar",options:pY,create:e=>new pq(e)},{type:"chart",name:"flow-proportion",placeholder:!0,options:{},detect:ot,create:gW},{type:"chart",name:"gauge",placeholder:!0,options:{},detect:oa,create:gW},{type:"chart",name:"hierarchy",placeholder:!0,options:{},detect:n7,create:gW},{type:"chart",name:"standalone",placeholder:!0,options:{},detect:oi,create:gW},{type:"chart",name:"topology",placeholder:!0,options:{},detect:oe,create:gW},{type:"preset",name:"price-volume",enterprise:!0,options:gw,create:function(e,t,i){var a,r,n,o,l;let{dateKey:h="date",highKey:d="high",openKey:u="open",lowKey:c="low",closeKey:p="close",volumeKey:g="volume",chartType:m="candlestick",navigator:y=!1,volume:f=!0,rangeButtons:b=!0,statusBar:x=!0,toolbar:M=!0,zoom:v=!0,sync:S=!1,theme:D,data:I,...L}=e,A=function(e,t,i,a,r,n){var o,l,h,d;let u={xKey:t,openKey:r,closeKey:n,highKey:i,lowKey:a},c={xKey:t,yKey:n},p={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return o=p,l=u,[{type:"ohlc",focusPriority:0,...o,...l}];case"line":case"step-line":return h=p,d=c,[{type:"line",focusPriority:0,...h,...d}];case"hlc":return function(e,t,{xKey:i,highKey:a,closeKey:s,lowKey:r}){return[{type:gy,focusPriority:0,...e,xKey:i,yHighKey:a,yLowKey:s,fill:h0,stroke:hq},{type:gy,focusPriority:0,...e,xKey:i,yHighKey:s,yLowKey:r,fill:h1,stroke:hJ},{type:"line",...e,...t}]}(p,c,u);case"high-low":return function(e,{xKey:t,highKey:i,lowKey:a}){return[{type:"range-bar",...e,xKey:t,yHighKey:i,yLowKey:a,fill:h4,stroke:h2,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}(p,u);case"candlestick":case"hollow-candlestick":return gf(p,u);default:return s.Vy.warnOnce(`unknown chart type: ${e}; expected one of: ${gg.join(", ")}`),gf(p,u)}}(m,h,d,c,u,p),w=(a=i,r=u,n=p,o=f,l=g,o?[{type:"bar",xKey:"date",yKey:l,tooltip:{enabled:!1},itemStyler({datum:e}){let{up:t,down:i}=a().palette;return{fill:e[r]<e[n]?t?.fill:i?.fill}},focusPriority:1,fastDataProcessing:!0,highlight:{enabled:!1}}]:[]),C=f?{miniChart:{enabled:y,series:[{type:"line",xKey:h,yKey:g,stroke:dS,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null,k={navigator:{enabled:y,...C}},N=x?{statusBar:{enabled:!0,data:I,highKey:d,openKey:u,lowKey:c,closeKey:p,volumeKey:f?g:void 0}}:null,T=f?[{type:"number",position:"left",keys:[g],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:"string"==typeof D?D:"ag-financial",...z("object"==typeof D?D:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:M},annotations:{...gp},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...gb(m,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...gb(m,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...w,...A],axes:[{type:"number",position:"right",keys:[u,p,d,c],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...T,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:I,...{annotations:{enabled:M,optionsToolbar:{enabled:M},snap:!0,toolbar:{enabled:M,buttons:gm,padding:0},data:I,xKey:h,volumeKey:f?g:void 0}},...k,...N,...{zoom:{enabled:v,autoScaling:{enabled:!0},enableIndependentAxes:!0}},...{ranges:{enabled:b}},...S?{sync:{enabled:S,nodeInteraction:!0,zoom:!0}}:null,...L}}},gE,gO],g9={isEnterprise:!1};function g6(e,t){let i=[],a=oa(e),r=n9(e),n=r?rI.get(r):"unknown";for(let t of rx)if("unknown"===n||t.chartTypes.includes(n)){if("root"===t.type||"legend"===t.type){let a=e[t.optionsKey];if(null==a)continue;t.optionsInnerKey?a[t.optionsInnerKey]&&(i.push(`${t.optionsKey}.${t.optionsInnerKey}`),delete a[t.optionsInnerKey]):(i.push(t.optionsKey),delete e[t.optionsKey])}else if("axis"===t.type){if(!("axes"in e)||!(0,s.cy)(e.axes)||!e.axes?.some(e=>e.type===t.identifier))continue;i.push(`axis[type=${t.identifier}]`),e.axes=e.axes.filter(e=>e.type!==t.identifier)}else if("axis-option"===t.type){if(!("axes"in e)||!(0,s.cy)(e.axes)||!e.axes?.some(e=>e[t.optionsKey]))continue;i.push(`axis.${t.optionsKey}`),e.axes.forEach(e=>{e[t.optionsKey]&&delete e[t.optionsKey]})}else if("series"===t.type){if(t.community||!(0,s.cy)(e.series)||!e.series?.some(e=>e.type===t.identifier))continue;i.push(`series[type=${t.identifier}]`),e.series=e.series.filter(e=>e.type!==t.identifier)}else if("series-option"===t.type){if(!(0,s.cy)(e.series)||!e.series?.some(e=>e[t.optionsKey]))continue;i.push(`series.${t.optionsKey}`),e.series.forEach(e=>{e[t.optionsKey]&&delete e[t.optionsKey]})}}if(i.length&&!t){a&&(i=["AgCharts.createGauge"]);let t="ag-charts-enterprise",r="https://www.ag-grid.com/charts/javascript/installation/";"integrated"===e.mode&&(t="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",r="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),s.Vy.warnOnce([`unable to use these enterprise features as '${t}' has not been loaded:`,"",...i,"",`See: ${r}`].join("\n"))}}function g8(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var g7="white",me={get cartesian(){return{seriesTypes:rI.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:rI.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:rI.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:rI.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:rI.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:rI.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:rI.gaugeTypes,commonOptions:[]}}},mt={"radial-gauge":!0,"linear-gauge":!0},mi={millisecond:"%H:%M:%S.L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %B",month:"%B",year:"%Y"},ma={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},ms=Object.values(me).reduce((e,{commonOptions:t})=>e.concat(t),[]),mr=class e{static getDefaultColors(){return{fills:pL,fillsFallback:Object.values(pL),strokes:pA,sequentialColors:dA(pL),divergingColors:[pL.ORANGE,pL.YELLOW,pL.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:ey.interpolate([ey.fromHexString(pL.BLUE),ey.fromHexString("#cbdef5")],8).map(e=>e.toString()),secondDivergingColors:[pL.GREEN,pL.YELLOW,pL.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:pL.GREEN,stroke:pA.GREEN},down:{fill:pL.RED,stroke:pA.RED},neutral:{fill:pL.GRAY,stroke:pA.GRAY},altUp:{fill:pL.BLUE,stroke:pA.BLUE},altDown:{fill:pL.ORANGE,stroke:pA.ORANGE},altNeutral:{fill:pL.GRAY,stroke:pA.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:[.675]},backgroundColor:g7,borderColor:{$foregroundBackgroundMix:[.818]},foregroundColor:"#464646",fontFamily:"Verdana, sans-serif",fontSize:12,fontWeight:400,gridLineColor:{$foregroundBackgroundAccentMix:[.93,.085]},padding:20,subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:[.975]},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:"#181d1f",chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},inputBackgroundColor:{$ref:"backgroundColor"},inputTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"backgroundColor"}}}static getAxisDefaults(e,{title:t,time:i}){let a="modern"===i?mi:void 0;return z(e,t&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},"off"!==i&&{label:{format:{millisecond:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.millisecond,a?.millisecond]},second:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.second,a?.second]},minute:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.minute,a?.minute]},hour:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.hour,a?.hour]},day:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.day,a?.day]},month:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.month,a?.month]},year:{$if:[{$path:["../../parentLevel/enabled",{$path:"../enabled"}]},ma.year,a?.year]}}},parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},avoidCollisions:{$path:"../../label/avoidCollisions"},format:{millisecond:{$path:["../../../label/format/millisecond",ma.millisecond]},second:{$path:["../../../label/format/second",ma.second]},minute:{$path:["../../../label/format/minute",ma.minute]},hour:{$path:["../../../label/format/hour",ma.hour]},day:{$path:["../../../label/format/day",ma.day]},month:{$path:["../../../label/format/month",ma.month]},year:{$path:["../../../label/format/year",ma.year]}}},tick:{enabled:{$path:"../../tick/enabled"},size:{$path:"../../tick/size"},width:{$path:"../../tick/width"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,style:[{stroke:{$ref:"gridLineColor"},lineDash:[]}]},crossLines:{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.1,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"backgroundColor"}},padding:{top:{$ref:"padding"},right:{$ref:"padding"},bottom:{$ref:"padding"},left:{$ref:"padding"}},seriesArea:{padding:{top:0,right:0,bottom:0,left:0}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.4166666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:hX,textAlign:hQ},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:hX,textAlign:hQ},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:hX,textAlign:hQ},legend:{position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"right"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}}},tooltip:{enabled:!0,darkTheme:hH,delay:0,pagination:!1},overlays:{darkTheme:hH},listeners:{}}}constructor(e={}){let{overrides:t,palette:i,params:a}=tI(e),s=this.createChartConfigPerChartType(this.getDefaults()),r={};t&&this.mergeOverrides(s,r,t);let{fills:n,strokes:o,sequentialColors:l,...h}=this.getDefaultColors();this.palette=_(z(i,{fills:Object.values(n),strokes:Object.values(o),sequentialColors:Object.values(l),...h})),this.paletteType=g8(i),this.params=z(a,this.getPublicParameters()),this.config=_(this.templateTheme(s)),this.presets=_(r)}mergeOverrides(e,t,i){for(let{seriesTypes:t,commonOptions:a}of Object.values(me)){let s={...i.common};for(let e of ms)a.includes(e)||delete s[e];for(let i of t)!0!==mt[i]&&(e[i]=z(s,e[i]))}rI.seriesTypes.forEach(a=>{let s=i[a];!0===mt[a]?t[a]=s:e[a]=z(s,e[a])})}createChartConfigPerChartType(e){for(let[t,{seriesTypes:i}]of(0,s.jO)(me)){let a=rA.get(t);for(let t of i)e[t]??(e[t]=tI(a))}return e}getDefaults(){let t=(t,i)=>{let a={},s={axes:{},...rv.getThemeTemplates(),...this.getChartDefaults(),...rA.get(t)};for(let t of i){a[t]=z(rw.getThemeTemplate(t),a[t]??tI(s));let{axes:i}=a[t];for(let t of rb.keys())i[t]=z(i[t],rb.getThemeTemplate(t),e.axisDefault[t])}return a};return z(t("cartesian",rI.cartesianTypes),t("polar",rI.polarTypes),t("hierarchy",rI.hierarchyTypes),t("topology",rI.topologyTypes),t("flow-proportion",rI.flowProportionTypes),t("standalone",rI.standaloneTypes),t("gauge",rI.gaugeTypes))}static applyTemplateTheme(e,t,i){if((0,s.cy)(e))for(let t=0;t<e.length;t++){let a=e[t];"symbol"==typeof a&&i?.has(a)&&(e[t]=i.get(a))}else for(let t of Object.keys(e)){let a=e[t];"symbol"==typeof a&&i?.has(a)&&(e[t]=i.get(a))}}templateTheme(t,i=!0){let a=i?tI(t):t,s=this.getTemplateParameters();return tA(a,e.applyTemplateTheme,void 0,void 0,s),a}getDefaultColors(){return e.getDefaultColors()}getPublicParameters(){return e.getDefaultPublicParameters()}getTemplateParameters(){let e=new Map;e.set(hH,!1),e.set(hZ,"#d9d9d9"),e.set(hK,"#00000080"),e.set(dt,"#aaa"),e.set(hX,"block"),e.set(hQ,"center"),e.set(da,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),e.set(de,g7),e.set(di,pL.BLUE),e.set(dr,pL.BLUE),e.set(ds,pL.BLUE),e.set(dn,g7),e.set(dl,"#fafafa"),e.set(dh,"#ddd"),e.set(dd,"#000"),e.set(du,"#181d1f"),e.set(dc,"#e35c5c"),e.set(dp,"#e35c5c"),e.set(dg,"#fafafa"),e.set(dm,"#ddd"),e.set(dy,"#000"),e.set(df,"top"),e.set(db,!1);let t=this.getDefaultColors();return e.set(hq,this.palette.up?.stroke??t.up.stroke),e.set(h0,this.palette.up?.fill??t.up.fill),e.set(hJ,this.palette.down?.stroke??t.down.stroke),e.set(h1,this.palette.down?.fill??t.down.fill),e.set(h2,this.palette.neutral?.stroke??t.neutral.stroke),e.set(h4,this.palette.neutral?.fill??t.neutral.fill),e.set(h3,this.palette.altUp?.stroke??t.up.stroke),e.set(h9,this.palette.altUp?.fill??t.up.fill),e.set(h5,this.palette.altDown?.stroke??t.down.stroke),e.set(h6,this.palette.altDown?.fill??t.down.fill),e.set(h8,this.palette.altNeutral?.fill??t.altNeutral.fill),e.set(h7,this.palette.altNeutral?.stroke??t.altNeutral.stroke),e}};mr.axisDefault={number:mr.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:"off"}),log:mr.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:"off"}),category:mr.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:db},crosshair:{enabled:!1}},{title:!0,time:"off"}),"grouped-category":mr.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:hZ},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:"off"}),time:mr.getAxisDefaults({keys:[],gridLine:{enabled:db},crosshair:{enabled:!0}},{title:!0,time:"legacy"}),"ordinal-time":mr.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:db},crosshair:{enabled:!0}},{title:!0,time:"legacy"}),"unit-time":mr.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:db},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:"modern"}),"angle-category":mr.getAxisDefaults({label:{spacing:5},gridLine:{enabled:db},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}},{title:!1,time:"off"}),"angle-number":mr.getAxisDefaults({label:{spacing:5},gridLine:{enabled:db}},{title:!1,time:"off"}),"radius-category":mr.getAxisDefaults({positionAngle:0,line:{enabled:!1}},{title:!0,time:"off"}),"radius-number":mr.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}},{title:!0,time:"off"})};var mn=mr,mo="#192232",ml={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},mh={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},md=class extends mn{getDefaultColors(){return{fills:ml,fillsFallback:Object.values(ml),strokes:mh,sequentialColors:dA(ml),divergingColors:[ml.ORANGE,ml.YELLOW,ml.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[ml.GREEN,ml.YELLOW,ml.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:ml.GREEN,stroke:mh.GREEN},down:{fill:ml.RED,stroke:mh.RED},neutral:{fill:ml.GRAY,stroke:mh.GRAY},altUp:{fill:ml.BLUE,stroke:mh.BLUE},altDown:{fill:ml.ORANGE,stroke:mh.ORANGE},altNeutral:{fill:ml.GRAY,stroke:mh.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:[.263]},backgroundColor:mo,borderColor:{$foregroundBackgroundMix:[.784]},chromeBackgroundColor:{$foregroundBackgroundMix:[.93]},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundAccentMix:[.743,.01]},subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.57]},chromeTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$foregroundBackgroundAccentMix:[.35,.1]}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(hH,!0),e.set(de,mo),e.set(hZ,"#7f8389"),e.set(di,ml.BLUE),e.set(ds,"#fff"),e.set(dr,ml.BLUE),e.set(dn,mo),e.set(dl,"#28313e"),e.set(dh,"#4b525d"),e.set(dd,"#fff"),e.set(du,"#fff"),e.set(dg,"#28313e"),e.set(dm,"#4b525d"),e.set(dy,"#fff"),e}constructor(e){super(e)}},mu={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},mc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},mp=class extends md{getDefaultColors(){return{...super.getDefaultColors(),fills:{...mu},fillsFallback:Object.values({...mu}),strokes:{...mc},sequentialColors:dA(mu),divergingColors:[mu.GREEN,mu.BLUE,mu.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:mu.GREEN,stroke:mc.GREEN},down:{fill:mu.RED,stroke:mc.RED},neutral:{fill:mu.BLUE,stroke:mc.BLUE},altUp:{fill:mu.GREEN,stroke:mc.GREEN},altDown:{fill:mu.RED,stroke:mc.RED},altNeutral:{fill:mu.GRAY,stroke:mc.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.88,.01]},padding:0}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mu.BLUE),e.set(dr,mu.BLUE),e.set(hX,"overlay"),e.set(hQ,"left"),e.set(df,"bottom"),e.set(db,!0),e}},mg={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},mm={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},my=class extends mn{getDefaultColors(){return{...super.getDefaultColors(),fills:{...mg},fillsFallback:Object.values({...mg}),strokes:{...mm},sequentialColors:dA(mg),divergingColors:[mg.GREEN,mg.BLUE,mg.RED],up:{fill:mg.GREEN,stroke:mm.GREEN},down:{fill:mg.RED,stroke:mm.RED},neutral:{fill:mg.BLUE,stroke:mm.BLUE},altUp:{fill:mg.GREEN,stroke:mm.GREEN},altDown:{fill:mg.RED,stroke:mm.RED},altNeutral:{fill:mg.GRAY,stroke:mm.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.94,.01]},padding:0}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mg.BLUE),e.set(dr,mg.BLUE),e.set(hX,"overlay"),e.set(hQ,"left"),e.set(df,"bottom"),e.set(db,!0),e}},mf={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},mb={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},mx=class extends md{getDefaultColors(){return{...super.getDefaultColors(),fills:mf,fillsFallback:Object.values(mf),strokes:mb,sequentialColors:dA(mf),divergingColors:[mf.ORANGE,mf.YELLOW,mf.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[mf.GREEN,mf.YELLOW,mf.RED],up:{fill:mf.GREEN,stroke:mb.GREEN},down:{fill:mf.RED,stroke:mb.RED},neutral:{fill:mf.GRAY,stroke:mb.GRAY},altUp:{fill:mf.BLUE,stroke:mb.BLUE},altDown:{fill:mf.RED,stroke:mb.RED},altNeutral:{fill:mf.GRAY,stroke:mb.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mf.BLUE),e.set(dr,mf.BLUE),e}},mM={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},mv={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},mS=class extends mn{getDefaultColors(){return{...super.getDefaultColors(),fills:mM,fillsFallback:Object.values(mM),strokes:mv,sequentialColors:dA(mM),divergingColors:[mM.ORANGE,mM.YELLOW,mM.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[mM.GREEN,mM.YELLOW,mM.RED],up:{fill:mM.GREEN,stroke:mv.GREEN},down:{fill:mM.RED,stroke:mv.RED},neutral:{fill:mM.GRAY,stroke:mv.GRAY},altUp:{fill:mM.BLUE,stroke:mv.BLUE},altDown:{fill:mM.RED,stroke:mv.RED},altNeutral:{fill:mM.GRAY,stroke:mv.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mM.BLUE),e.set(dr,mM.BLUE),e}},mD={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},mI={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},mL=class extends md{getDefaultColors(){return{fills:mD,fillsFallback:Object.values(mD),strokes:mI,sequentialColors:dA(mD),divergingColors:[mD.BLUE,mD.RED],hierarchyColors:[],secondSequentialColors:[mD.BLUE,mD.PURPLE,mD.MAGENTA,mD.PINK,mD.RED,mD.ORANGE,mD.YELLOW,mD.GREEN],secondDivergingColors:[mD.BLUE,mD.RED],secondHierarchyColors:[],up:{fill:mD.GREEN,stroke:mI.GREEN},down:{fill:mD.RED,stroke:mI.RED},neutral:{fill:mD.GRAY,stroke:mI.GRAY},altUp:{fill:mD.BLUE,stroke:mI.BLUE},altDown:{fill:mD.RED,stroke:mI.RED},altNeutral:{fill:mD.GRAY,stroke:mI.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mD.BLUE),e.set(dr,mD.BLUE),e}},mA={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},mw={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},mC=class extends mn{getDefaultColors(){return{...super.getDefaultColors(),fills:mA,fillsFallback:Object.values(mA),strokes:mw,sequentialColors:dA(mA),divergingColors:[mA.BLUE,mA.RED],hierarchyColors:[],secondSequentialColors:[mA.BLUE,mA.PURPLE,mA.MAGENTA,mA.PINK,mA.RED,mA.ORANGE,mA.YELLOW,mA.GREEN],secondDivergingColors:[mA.BLUE,mA.RED],secondHierarchyColors:[],up:{fill:mA.GREEN,stroke:mw.GREEN},down:{fill:mA.RED,stroke:mw.RED},neutral:{fill:mA.GRAY,stroke:mw.GRAY},altUp:{fill:mA.BLUE,stroke:mw.BLUE},altDown:{fill:mA.RED,stroke:mw.RED},altNeutral:{fill:mA.GRAY,stroke:mw.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mA.BLUE),e.set(dr,mA.BLUE),e}},mk={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},mN={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},mT=class extends md{getDefaultColors(){return{...super.getDefaultColors(),fills:{...mk,RED:mk.ORANGE},fillsFallback:Object.values({...mk,RED:mk.ORANGE}),strokes:{...mN,RED:mN.ORANGE},sequentialColors:dA({...mk,RED:mk.ORANGE}),divergingColors:[mk.ORANGE,mk.YELLOW,mk.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[mk.GREEN,mk.YELLOW,mk.ORANGE],up:{fill:mk.GREEN,stroke:mN.GREEN},down:{fill:mk.ORANGE,stroke:mN.ORANGE},neutral:{fill:mk.GRAY,stroke:mN.GRAY},altUp:{fill:mk.BLUE,stroke:mN.BLUE},altDown:{fill:mk.ORANGE,stroke:mN.ORANGE},altNeutral:{fill:mk.GRAY,stroke:mN.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mk.BLUE),e.set(dr,mk.BLUE),e}},mE={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},mO={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},mj=class extends mn{getDefaultColors(){return{...super.getDefaultColors(),fills:{...mE,RED:mE.ORANGE},fillsFallback:Object.values({...mE,RED:mE.ORANGE}),strokes:{...mO,RED:mO.ORANGE},sequentialColors:dA({...mE,RED:mE.ORANGE}),divergingColors:[mE.ORANGE,mE.YELLOW,mE.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[mE.GREEN,mE.YELLOW,mE.ORANGE],secondHierarchyColors:[],up:{fill:mE.GREEN,stroke:mO.GREEN},down:{fill:mE.ORANGE,stroke:mO.ORANGE},neutral:{fill:mO.GRAY,stroke:mO.GRAY},altUp:{fill:mE.BLUE,stroke:mO.BLUE},altDown:{fill:mE.ORANGE,stroke:mO.ORANGE},altNeutral:{fill:mE.GRAY,stroke:mO.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,mE.BLUE),e.set(dr,mE.BLUE),e}},mz={...u4,type:(0,s.mw)((0,s.dY)("ordinal-time")),paddingInner:s.CG,paddingOuter:s.CG,groupPaddingInner:s.CG,label:uJ,parentLevel:u1,interval:u5((0,s.or)(s.ai,s.p6),!0).interval,crosshair:u3(!0)},mR={...u2,...u5(s.ai),type:(0,s.mw)((0,s.dY)("angle-number")),crossLines:(0,s.J$)(uZ),startAngle:s.ai,endAngle:s.ai,label:{...uX,orientation:(0,s.KC)("fixed","parallel","perpendicular"),format:uW}},mP={innerRadiusRatio:s.CG},mF={...u2,...mP,type:(0,s.mw)((0,s.dY)("angle-category")),shape:(0,s.KC)("polygon","circle"),crossLines:(0,s.J$)(uZ),startAngle:s.ai,endAngle:s.ai,paddingInner:s.CG,groupPaddingInner:s.CG,label:{...uX,orientation:(0,s.KC)("fixed","parallel","perpendicular")}},mB={...u2,...u5(s.ai),type:(0,s.mw)((0,s.dY)("radius-number")),shape:(0,s.KC)("polygon","circle"),positionAngle:s.ai,innerRadiusRatio:s.CG,crossLines:(0,s.J$)({...uZ,label:{...uH,positionAngle:s.ai}},"cross-line options"),title:{enabled:s.zM,text:s.Yj,spacing:s.Ly,formatter:s.E2,...s.LV},label:{...uX,format:uW}},mG={...u2,type:(0,s.mw)((0,s.dY)("radius-category")),positionAngle:s.ai,innerRadiusRatio:s.CG,paddingInner:s.CG,paddingOuter:s.CG,groupPaddingInner:s.CG,label:uX,crossLines:(0,s.J$)({...uZ,label:{...uH,positionAngle:s.ai}},"cross-line options"),title:{enabled:s.zM,text:s.Yj,spacing:s.Ly,formatter:s.E2,...s.LV}},mV={lineStyle:(0,s.KC)("solid","dashed","dotted"),...s.mL},mY={...s.Fu,...s.AF,...s.mL},mU={visible:s.zM,locked:s.zM,handle:mY,...s.LV},m_={position:(0,s.KC)("top","center","bottom"),alignment:(0,s.KC)("left","center","right"),...s.LV},m$={position:(0,s.KC)("top","inside","bottom"),alignment:(0,s.KC)("left","center","right"),...s.LV},mW={enabled:s.zM,cornerRadius:s.Ly,formatter:s.E2,...s.LV,...s.Fu,...s.AF,...s.mL},mH={visible:s.zM,...mV,...s.AF},mZ={divider:s.AF,...s.Fu,...s.AF,...s.LV},mK={handle:mY,statistics:mZ,...mV,...s.Fu,...s.AF},mX={visible:s.zM,locked:s.zM,extendStart:s.zM,extendEnd:s.zM,handle:mY,text:m_,...mV,...s.AF},mQ={visible:s.zM,locked:s.zM,axisLabel:mW,handle:mY,text:m_,...mV,...s.AF},mq={visible:s.zM,locked:s.zM,extendStart:s.zM,extendEnd:s.zM,handle:mY,text:m$,background:s.Fu,...mV,...s.AF},mJ={...mq},m0={...mq,middle:mH},m1={label:s.LV,showFill:s.zM,isMultiColor:s.zM,strokes:(0,s.jk)(s.yW),rangeStroke:s.yW,bands:(0,s.KC)(4,6,10),...mX},m2={...s.Fu,...s.AF,...mU},m4={...s.Fu,...s.AF,...mU},m3={...s.Fu,...s.AF,...mU,background:{...s.Fu,...s.AF}},m5={visible:s.zM,locked:s.zM,handle:mY,...s.Fu},m9={visible:s.zM,locked:s.zM,extendStart:s.zM,extendEnd:s.zM,handle:mY,text:m_,background:s.Fu,statistics:mZ,...mV,...s.AF},m6={visible:s.zM,up:mK,down:mK},m8={enabled:s.zM,axesButtons:{enabled:s.zM,axes:(0,s.KC)("x","y","xy")},toolbar:{enabled:s.zM,padding:s.Ly,buttons:(0,s.J$)({...cd,value:(0,s.KC)("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:s.zM,buttons:(0,s.jk)((0,s.or)((0,s.fd)({...cd,value:(0,s.mw)((0,s.KC)("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),(0,s.fd)({...cd,value:(0,s.mw)((0,s.KC)("lock")),checkedOverrides:cd})))}};m8.data=(0,s._L)(s.YO),m8.xKey=(0,s._L)(s.Yj),m8.volumeKey=(0,s._L)(s.Yj),m8.snap=(0,s._L)(s.zM);var m7={direction:(0,s.KC)("horizontal","vertical"),showInMiniChart:s.zM,cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly,whisker:{...s.AF,...s.mL},cap:{lengthRatio:s.CG}}),whisker:{...s.AF,...s.mL},cap:{lengthRatio:s.CG},tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL},ye={cornerRadius:s.Ly,wick:{...s.AF,...s.mL},...s.Fu,...s.AF,...s.mL},yt={item:{up:ye,down:ye},itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly,wick:{...s.AF,...s.mL}}),showInMiniChart:s.zM,tooltip:cx,...cc},yi={fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),label:{spacing:s.Ly,maxWidth:s.Ly,...cm},link:{tension:s.CG,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,tension:s.CG}),...s.Fu,...s.AF,...s.mL},node:{width:s.Ly,spacing:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),...s.Fu,...s.AF,...s.mL},tooltip:cx,...cc},ya={direction:(0,s.KC)("horizontal","vertical"),fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),showInMiniChart:s.zM,label:{spacing:s.Ly,placement:(0,s.KC)("before","middle","after"),...cm},stageLabel:{rotation:s.ai,spacing:s.Ly,minSpacing:s.Ly,placement:(0,s.KC)("before","after"),avoidCollisions:s.zM,itemStyler:(0,s.YI)({...s.LV,spacing:s.ai}),format:s.Yj,...cm},tooltip:cx,...cc,...B(s.Fu,["fill"]),...B(s.AF,["stroke"]),...s.mL},ys={direction:(0,s.KC)("horizontal","vertical"),fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),showInMiniChart:s.zM,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),spacingRatio:s.CG,crisp:s.zM,dropOff:{enabled:s.zM,...s.Fu,...s.AF,...s.mL},stageLabel:{rotation:s.ai,spacing:s.Ly,minSpacing:s.Ly,placement:(0,s.KC)("before","after"),avoidCollisions:s.zM,itemStyler:(0,s.YI)({...s.LV,spacing:s.ai}),format:s.Yj,...cm},label:cm,tooltip:cx,shadow:cM,...cc,...B(s.Fu,["fill"]),...B(s.AF,["stroke"]),...s.mL},yr={title:s.Yj,textAlign:(0,s.KC)("left","center","right"),verticalAlign:(0,s.KC)("top","middle","bottom"),itemPadding:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF}),showInMiniChart:s.zM,label:cy,tooltip:cx,...cc,...s.AF},yn={showInMiniChart:s.zM,itemStyler:(0,s.YI)({...s.AF,...s.mL}),item:{up:{...s.AF,...s.mL},down:{...s.AF,...s.mL}},tooltip:cx,...cc},yo={maxStrokeWidth:s.Ly,itemStyler:(0,s.YI)({...s.AF,...s.mL}),sizeDomain:(0,s.jk)(s.Ly),label:cm,tooltip:cx,...cc,...s.AF,...s.mL,highlightStyle:{...cc.highlightStyle,...s.AF}},yl={...s.AF,...s.mL},yh={colorRange:(0,s.jk)(s.yW),maxSize:s.Ly,sizeDomain:(0,s.jk)(s.Ly),label:{placement:(0,s.KC)("top","bottom","left","right"),...cm},tooltip:cx,...cc,...B(cg,["enabled"]),highlightStyle:{...cc.highlightStyle,...s.Fu,...s.AF}},yd={colorRange:(0,s.jk)(s.yW),padding:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),label:cy,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL,highlightStyle:{...cc.highlightStyle,...s.Fu,...s.AF}},yu={...cc,...s.Fu,...s.AF,...s.mL},yc={cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),label:cm,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL},yp={direction:(0,s.KC)("horizontal","vertical"),aspectRatio:s.Ly,spacing:s.Ly,reverse:s.zM,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),label:cm,stageLabel:{spacing:s.Ly,placement:(0,s.KC)("before","after"),...cm},tooltip:cx,shadow:cM,...cc,...B(s.Fu,["fill"]),...B(s.AF,["stroke"]),...s.mL},yg={connectMissingData:s.zM,marker:cg,label:cm,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL},ym={connectMissingData:s.zM,marker:cg,label:cm,tooltip:cx,...cc,...s.AF,...s.mL},yy={cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),label:cm,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL},yf={cornerRadius:s.Ly,columnWidthRatio:s.CG,maxColumnWidthRatio:s.CG,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),label:cm,tooltip:cx,...cc,...s.Fu,...s.AF,...s.mL},yb={showInMiniChart:s.zM,connectMissingData:s.zM,interpolation:cv,label:{...cm,padding:s.Ly,placement:(0,s.KC)("inside","outside")},marker:cg,tooltip:cx,shadow:cM,...cc,...s.Fu,...s.AF,...s.mL},yx={direction:(0,s.KC)("horizontal","vertical"),showInMiniChart:s.zM,cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),label:{...cm,padding:s.Ly,placement:(0,s.KC)("inside","outside")},tooltip:cx,shadow:cM,...cc,...s.Fu,...s.AF,...s.mL},yM={fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),label:{...cm,spacing:s.Ly},link:{itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),...s.Fu,...s.AF,...s.mL},node:{width:s.Ly,spacing:s.Ly,alignment:(0,s.KC)("left","center","right","justify"),itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL}),...s.Fu,...s.AF,...s.mL},tooltip:cx,...cc},yv={fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),colorRange:(0,s.jk)(s.yW),sectorSpacing:s.Ly,cornerRadius:s.Ly,padding:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF}),label:{spacing:s.Ly,...cy},secondaryLabel:cy,tooltip:cx,...cc,...B(s.Fu,["fill"]),...B(s.AF,["stroke"]),highlightStyle:{label:{color:s.yW},secondaryLabel:{color:s.yW},...s.Fu,...s.AF}},yS={fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),colorRange:(0,s.jk)(s.yW),itemStyler:(0,s.YI)({...s.Fu,...s.AF}),group:{gap:s.Ly,padding:s.Ly,cornerRadius:s.Ly,textAlign:(0,s.KC)("left","center","right"),interactive:s.zM,label:{...cm,spacing:s.Ly},...s.Fu,...s.AF},tile:{gap:s.Ly,padding:s.Ly,cornerRadius:s.Ly,textAlign:(0,s.KC)("left","center","right"),verticalAlign:(0,s.KC)("top","middle","bottom"),label:{...cm,spacing:s.Ly,lineHeight:s.Ly,minimumFontSize:s.Ly,wrapping:(0,s.KC)("never","always","hyphenate","on-space"),overflowStrategy:(0,s.KC)("ellipsis","hide")},secondaryLabel:{...cm,lineHeight:s.Ly,minimumFontSize:s.Ly,wrapping:(0,s.KC)("never","always","hyphenate","on-space"),overflowStrategy:(0,s.KC)("ellipsis","hide")},...s.Fu,...s.AF},tooltip:cx,...cc,highlightStyle:{group:{label:{color:s.yW},...s.Fu,...s.AF},tile:{label:{color:s.yW},secondaryLabel:{color:s.yW},...s.Fu,...s.AF}}},yD={name:s.Yj,cornerRadius:s.Ly,itemStyler:(0,s.YI)({...s.Fu,...s.AF,...s.mL,cornerRadius:s.Ly}),label:{...cm,padding:s.Ly,placement:(0,s.KC)("inside-start","inside-center","inside-end","outside-start","outside-end")},tooltip:cx,shadow:cM,...s.Fu,...s.AF,...s.mL},yI={direction:(0,s.KC)("horizontal","vertical"),showInMiniChart:s.zM,item:{positive:yD,negative:yD,total:yD},line:{enabled:s.zM,...s.AF,...s.mL},tooltip:cx,...cc},yL=(0,s.fd)({__type:(0,s.mw)((0,s.dY)("date")),value:(0,s.or)(s.Yj,s.ai)},"a serializable date object"),yA={width:s.Ly,height:s.Ly,grip:s.zM,fill:s.yW,stroke:s.yW,strokeWidth:s.Ly,cornerRadius:s.Ly},yw={enabled:s.zM,height:s.Ly,spacing:s.Ly,cornerRadius:s.ai,mask:{fill:s.yW,fillOpacity:s.CG,stroke:s.yW,strokeWidth:s.Ly},minHandle:yA,maxHandle:yA,miniChart:{enabled:s.zM,padding:{top:s.Ly,bottom:s.Ly},label:{enabled:s.zM,avoidCollisions:s.zM,spacing:s.Ly,format:uW,formatter:s.E2,interval:{minSpacing:s.Ly,maxSpacing:s.Ly,values:s.YO,step:s.ai},...s.LV},series:s.sw}},yC={number:{...B(gQ,["type","crossLines"]),top:B(gQ,["type","crossLines","position"]),right:B(gQ,["type","crossLines","position"]),bottom:B(gQ,["type","crossLines","position"]),left:B(gQ,["type","crossLines","position"]),crossLines:B(uK,["type"])},log:{...B(gq,["type","crossLines"]),top:B(gq,["type","crossLines","position"]),right:B(gq,["type","crossLines","position"]),bottom:B(gq,["type","crossLines","position"]),left:B(gq,["type","crossLines","position"]),crossLines:B(uK,["type"])},category:{...B(g0,["type","crossLines"]),top:B(g0,["type","crossLines","position"]),right:B(g0,["type","crossLines","position"]),bottom:B(g0,["type","crossLines","position"]),left:B(g0,["type","crossLines","position"]),crossLines:B(uK,["type"])},time:{...B(gJ,["type","crossLines"]),top:B(gJ,["type","crossLines","position"]),right:B(gJ,["type","crossLines","position"]),bottom:B(gJ,["type","crossLines","position"]),left:B(gJ,["type","crossLines","position"]),crossLines:B(uK,["type"])},"grouped-category":{...B(g1,["type"]),top:B(g1,["type","position"]),right:B(g1,["type","position"]),bottom:B(g1,["type","position"]),left:B(g1,["type","position"]),crossLines:B(uK,["type"])},"unit-time":{...B(g2,["type","crossLines"]),top:B(g2,["type","crossLines","position"]),right:B(g2,["type","crossLines","position"]),bottom:B(g2,["type","crossLines","position"]),left:B(g2,["type","crossLines","position"]),crossLines:B(uK,["type"])},"ordinal-time":{...B(mz,["type","crossLines"]),top:B(mz,["type","crossLines","position"]),right:B(mz,["type","crossLines","position"]),bottom:B(mz,["type","crossLines","position"]),left:B(mz,["type","crossLines","position"]),crossLines:B(uK,["type"])}},yk={"angle-category":{...B(mF,["type","crossLines"]),crossLines:B(uZ,["type"])},"angle-number":{...B(mR,["type","crossLines"]),crossLines:B(uZ,["type"])},"radius-category":{...B(mG,["type","crossLines"]),crossLines:{...B(uZ,["type"]),label:{...uH,positionAngle:s.ai}}},"radius-number":{...B(mB,["type","crossLines"]),crossLines:{...B(uZ,["type"]),label:{...uH,positionAngle:s.ai}}}},yN={visible:s.zM};function yT(e,t){let i={};for(let a of Reflect.ownKeys(e))i[a]=t(e[a],a,e);return i}var yE=yT({common:{...cu,navigator:yw,axes:{...yC,...yk},annotations:{...m8,line:mX,"horizontal-line":mQ,"vertical-line":mQ,"disjoint-channel":mJ,"parallel-channel":m0,"fibonacci-retracement":m1,"fibonacci-retracement-trend-based":m1,callout:m2,comment:m4,note:m3,text:mU,arrow:mX,"arrow-up":m5,"arrow-down":m5,"date-range":m9,"price-range":m9,"date-price-range":m9,"quick-date-price-range":m6},chartToolbar:{enabled:s.zM},initialState:{legend:(0,s.J$)({visible:s.zM,seriesId:s.Yj,itemId:s.Yj,legendItemName:s.Yj},"legend state array"),zoom:{rangeX:{start:(0,s.or)(s.ai,yL),end:(0,s.or)(s.ai,yL)},rangeY:{start:(0,s.or)(s.ai,yL),end:(0,s.or)(s.ai,yL)},ratioX:{start:s.CG,end:s.CG},ratioY:{start:s.CG,end:s.CG},autoScaledAxes:(0,s.jk)((0,s.dY)("y"))}}},line:{...cu,axes:yC,series:pi,navigator:yw,...yN},scatter:{...cu,axes:yC,series:ph,navigator:yw,...yN},bubble:{...cu,axes:yC,series:c0,navigator:yw,...yN},area:{...cu,axes:yC,series:cS,navigator:yw,...yN},bar:{...cu,axes:yC,series:c$,navigator:yw,...yN},"box-plot":{...cu,axes:yC,series:m7,navigator:yw,...yN},candlestick:{...cu,axes:yC,series:yt,navigator:yw,...yN},"cone-funnel":{...cu,axes:yC,series:ya,navigator:yw,...yN},funnel:{...cu,axes:yC,series:ys,navigator:yw,...yN},ohlc:{...cu,axes:yC,series:yn,navigator:yw,...yN},histogram:{...cu,axes:B(yC,["category","grouped-category","ordinal-time","unit-time"]),series:c9,navigator:yw,...yN},heatmap:{...cu,axes:yC,series:yr,navigator:yw,...yN},waterfall:{...cu,axes:yC,series:yI,navigator:yw,...yN},"range-bar":{...cu,axes:yC,series:yx,navigator:yw,...yN},"range-area":{...cu,axes:yC,series:yb,navigator:yw,...yN},donut:{...cu,series:pU,navigator:yw,...yN},pie:{...cu,series:pV,navigator:yw,...yN},"radar-line":{...cu,axes:yk,series:ym,navigator:yw,...yN},"radar-area":{...cu,axes:yk,series:yg,navigator:yw,...yN},"radial-bar":{...cu,axes:yk,series:yy,navigator:yw,...yN},"radial-column":{...cu,axes:yk,series:yf,navigator:yw,...yN},nightingale:{...cu,axes:yk,series:yc,navigator:yw,...yN},sunburst:{...cu,series:yv,navigator:yw,...yN},treemap:{...cu,series:yS,navigator:yw,...yN},"map-shape":{...cu,series:yd,navigator:yw,...yN},"map-line":{...cu,series:yo,navigator:yw,...yN},"map-marker":{...cu,series:yh,navigator:yw,...yN},"map-shape-background":{...cu,series:yu,navigator:yw,...yN},"map-line-background":{...cu,series:yl,navigator:yw,...yN},sankey:{...cu,series:yM,navigator:yw,...yN},chord:{...cu,series:yi,navigator:yw,...yN},pyramid:{...cu,series:yp,navigator:yw,...yN},"radial-gauge":{...cu,...gs,targets:B(gt,["value"]),tooltip:{...gs.tooltip,...cu.tooltip}},"linear-gauge":{...cu,...gi,targets:B(ge,["value"]),tooltip:{...gi.tooltip,...cu.tooltip}}},function e(t,i){if((0,s.Bm)(i))return t;if((0,s.Tn)(t))return(0,s.or)(t,s.I_,s.Bm);if((0,s.Gv)(t))return(0,s.or)((0,s.fd)(s.ie in t?yT(t,t=>(0,s.Gv)(t)?yT(t,e):t):yT(t,e)),s.I_,s.Bm);throw Error(`Invalid theme override value: ${String(t)}`)}),yO={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},yj={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},yz=class extends md{getDefaultColors(){return{fills:yO,fillsFallback:Object.values(yO),strokes:yj,sequentialColors:dA(yO),divergingColors:[yO.ORANGE,yO.YELLOW,yO.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[yO.GREEN,yO.YELLOW,yO.RED],secondHierarchyColors:[],up:{fill:yO.GREEN,stroke:yj.GREEN},down:{fill:yO.RED,stroke:yj.RED},neutral:{fill:yO.GRAY,stroke:yj.GRAY},altUp:{fill:yO.BLUE,stroke:yj.BLUE},altDown:{fill:yO.ORANGE,stroke:yj.ORANGE},altNeutral:{fill:yO.GRAY,stroke:yj.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,yO.BLUE),e.set(dr,yO.BLUE),e}},yR={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},yP={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},yF=class extends mn{getDefaultColors(){return{...super.getDefaultColors(),fills:yR,fillsFallback:Object.values(yR),strokes:yP,sequentialColors:dA(yR),divergingColors:[yR.ORANGE,yR.YELLOW,yR.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[yR.GREEN,yR.YELLOW,yR.RED],secondHierarchyColors:[],up:{fill:yR.GREEN,stroke:yP.GREEN},down:{fill:yR.RED,stroke:yP.RED},neutral:{fill:yR.GRAY,stroke:yP.GRAY},altUp:{fill:yR.BLUE,stroke:yP.BLUE},altDown:{fill:yR.ORANGE,stroke:yP.ORANGE},altNeutral:{fill:yR.GRAY,stroke:yP.GRAY}}}getTemplateParameters(){let e=super.getTemplateParameters();return e.set(di,yR.BLUE),e.set(dr,yR.BLUE),e}},yB=lb(()=>new mn),yG=x.create(!0,"perf"),yV=(e,t,i)=>{yG("[CACHE] ChartTheme",e,t.name,i)},yY={"ag-default-dark":lb(()=>new md),"ag-sheets-dark":lb(()=>new mT,yV),"ag-polychroma-dark":lb(()=>new mL,yV),"ag-vivid-dark":lb(()=>new yz,yV),"ag-material-dark":lb(()=>new mx,yV),"ag-financial-dark":lb(()=>new mp,yV),"ag-default":yB,"ag-sheets":lb(()=>new mj,yV),"ag-polychroma":lb(()=>new mC,yV),"ag-vivid":lb(()=>new yF,yV),"ag-material":lb(()=>new mS,yV),"ag-financial":lb(()=>new my,yV)},yU=lb(function(e){if(e instanceof mn)return e;if(!function(e){let{invalid:t}=(0,s.tf)({theme:e},{theme:(0,s.or)(y$,s.Ik)});for(let e of t)s.Vy.warnOnce(String(e));return 0===t.length}(e))return yB();if(null==e||"string"==typeof e){let t=yY[e??"ag-default"];if(t)return t();throw Error(`Cannot find theme \`${e}\`.`)}let{cleared:t,invalid:i}=(0,s.tf)(function(e){let t,i;if(!(0,s.Gv)(e)||!(0,s.Gv)(e.baseTheme))return e;let a=e,r=[];for(;"object"==typeof a;)t??(t=a.palette),i??(i=a.params),a.overrides&&r.push(a.overrides),a=a.baseTheme;return{baseTheme:a,overrides:z(...r),params:i,palette:t}}(e),y_,"theme");for(let e of i)s.Vy.warnOnce(String(e));let a=t?.baseTheme?yU(t.baseTheme):yB();return t?new a.constructor(t):a},yV),y_={baseTheme:(0,s.or)(s.Yj,s.Ik),overrides:yE,params:{accentColor:s.yW,axisColor:s.yW,backgroundColor:s.yW,borderColor:s.yW,foregroundColor:s.yW,fontFamily:s.jj,fontSize:s.ai,fontWeight:(0,s.or)(s.Yj,s.ai),gridLineColor:s.yW,padding:s.ai,subtleTextColor:s.yW,textColor:s.yW,chromeBackgroundColor:s.yW,chromeFontFamily:s.jj,chromeFontSize:s.ai,chromeFontWeight:(0,s.or)(s.Yj,s.ai),chromeSubtleTextColor:s.yW,chromeTextColor:s.yW,inputBackgroundColor:s.yW,inputTextColor:s.yW,crosshairLabelBackgroundColor:s.yW,crosshairLabelTextColor:s.yW},palette:{fills:(0,s.jk)(s.Jp),strokes:(0,s.jk)(s.yW),up:{fill:(0,s.or)(s.yW,s.MP),stroke:s.yW},down:{fill:(0,s.or)(s.yW,s.MP),stroke:s.yW},neutral:{fill:(0,s.or)(s.yW,s.MP),stroke:s.yW}}},y$=(0,s.KC)("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark"),yW=e=>`'${e}'`,yH=class e{constructor(t,i,a,s,r,n,o=!1){let l,h,d,u,c,p,g;this.themeParameters={},this.optionMetadata=r??{},this.processedOverrides=a??{};let m=null;t instanceof e?(m=t,this.specialOverrides=m.specialOverrides,void 0===n&&(n=tS(m.userOptions,i,e.JSON_DIFF_OPTS)),this.userOptions=tI(R(n,m.userOptions),{...e.OPTIONS_CLONE_OPTS,seen:[]})):(this.userOptions=tI(t??i,{...e.OPTIONS_CLONE_OPTS,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...s})),o&&this.removeLeftoverSymbols(this.userOptions),!o&&void 0!==n&&e.isFastPathDelta(n)&&null!=m?({activeTheme:l,processedOptions:h,defaultAxes:d,fastDelta:u}=this.fastSetup(n,m),c=m.themeParameters,p=m.annotationThemes):(e.perfDebug("ChartOptions.slowSetup()"),{activeTheme:l,processedOptions:h,defaultAxes:d,themeParameters:c,annotationThemes:p,googleFonts:g}=this.slowSetup(a,n,o)),this.activeTheme=l,this.processedOptions=h,this.defaultAxes=d,this.fastDelta=u??void 0,this.themeParameters=c,this.annotationThemes=p,this.googleFonts=g,x.inDevelopmentMode(()=>_(this))}static isFastPathDelta(t){for(let i of Object.keys(t??{}))if(!this.FAST_PATH_OPTIONS.has(i))return e.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return e.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(t,i){let{activeTheme:a,defaultAxes:r,processedOptions:n}=i,{presetType:o}=this.optionMetadata;if(null!=o&&t?.data!=null){let e=s.sy.getPresetModule(o);if(e?.processData){let{series:i,data:a}=e.processData(t.data);t=z({series:i,data:a},t)}}this.fastSeriesSetup(t,n);let l=z(t,n);return e.debug("ChartOptions.fastSetup() - processed options",l),{activeTheme:a,defaultAxes:r,processedOptions:l,fastDelta:t}}fastSeriesSetup(e,t){e?.series&&(e.series?.every((e,i)=>tD(e,t.series?.[i]??{}))?delete e.series:e.series=e.series.map((e,i)=>R(e,t.series?.[i]??{})))}slowSetup(t,i,a=!1){let r=tI(this.userOptions,e.OPTIONS_CLONE_OPTS);i&&(r=z(i,r),a&&this.removeLeftoverSymbols(r));let{presetType:n}=this.optionMetadata;if(null!=n){let t=s.sy.getPresetModule(n);if(t){let{validate:i=s.tf}=t,a=r,n=r.type,o=null!=n?yU(r.theme).presets[n]:void 0,{cleared:l,invalid:h}=i(a,t.options,"");h.forEach(e=>s.Vy.warn(e)),(0,s.eh)(h,"")?r={}:(e.debug(">>> AgCharts.createOrUpdate() - applying preset",l),r=t.create(l,o,()=>this.activeTheme))}}this.soloSeriesIntegrity(r),g9.isEnterprise||g6(r);let o=yU(r.theme);if(null!=n&&o.templateTheme(r,!1),this.validateSeriesOptions(r),this.chartDef=s.sy.detectChartDefinition(r),!this.chartDef.placeholder){let{validate:e=s.tf}=this.chartDef,{cleared:t,invalid:i}=e(r,this.chartDef.options,"");i.forEach(e=>s.Vy.warn(e)),r=t}this.validateAxesOptions(r),this.removeDisabledOptions(r);let l=this.optionsType(r),{annotations:h={},axes:u={},series:c,...p}=this.getSeriesThemeConfig(l,o),[g,m]=this.splitAnnotationsOptions(h),y=tI(m),f=this.getDefaultAxes(r,c),b=z(t,r,g,p,f);this.processAxesOptions(b,u),this.processSeriesOptions(b,o),(n6(b=tI(b,e.OPTIONS_CLONE_OPTS))||oi(b)||function(e){let t=n9(e);return n8(e)&&"pie"!==t&&"donut"!==t}(b))&&b.legend?.enabled==null&&(b.legend??(b.legend={}),b.legend.enabled=b.series.length>1),this.enableConfiguredOptions(b,r);let x=this.processFonts(b),M=o.params;x=this.processFonts(M,x),M.__palette=tI(o.palette),M.__palette.type=(0,s.Gv)(r.theme)?g8(r.theme?.palette):"inbuilt",this.resolveThemeOperations(M,M),this.resolveThemeOperations(M,b),this.resolveThemeOperations(M,y),o.templateTheme(b,!1);var v=b;let S="mode"in v&&"integrated"===v.mode;for(let e of d.byType("root","legend")){let t=v[e.optionsKey],i=null!=t&&!1===t.enabled,a=!("removable"in e)||!0===e.removable||"standalone-only"===e.removable&&!S;i&&a&&delete v[e.optionsKey]}return g9.isEnterprise||g6(b,!0),this.validateSeriesOptions(b),this.validateAxesOptions(b),this.validatePluginOptions(b),this.processMiniChartSeriesOptions(b),b.loadGoogleFonts||x.clear(),e.debug(()=>["ChartOptions.slowSetup() - processed options",tI(b)]),{activeTheme:o,processedOptions:b,defaultAxes:f,themeParameters:M,annotationThemes:y,googleFonts:x}}validatePluginOptions(e){for(let t of s.sy.listModulesByType(s.nR.Plugin)){let i=t.name;if(i in e&&(!t.chartType||t.chartType===this.chartDef?.name)){let{cleared:a,invalid:r}=(0,s.tf)(e[i],t.options,t.name);r.forEach(e=>s.Vy.warn(e)),e[i]=a}}}validateSeriesOptions(e){let t,i=this.chartDef?.name,a=[],r=e.series?.length??0;for(let n=0;n<r;n++){let r=`series[${n}]`,o=e.series[n],l=s.sy.getSeriesModule(o.type??"line");if(null==l){t??(t=(0,s.lp)(Array.from(s.sy.listModulesByType(s.nR.Series)).filter(e=>!i||e.chartType===i).map(e=>e.name),"or",yW)),s.Vy.warn(`Unknown type \`${o.type}\` at \`${r}.type\`; expecting ${t}, ignoring.`);continue}if(i&&l.chartType!==i){s.Vy.warn(`Series type \`${l.name}\` at \`${r}.type\` is not supported by chart type \`${i}\`, ignoring.`);continue}let{validate:h=s.tf}=l,{cleared:d,invalid:u}=h(o,l.options,r);u.forEach(e=>s.Vy.warn(e)),(0,s.eh)(u,r)||a.push(d)}e.series=a}validateAxesOptions(e){let t;if(!("axes"in e)||!e.axes)return;let i=this.chartDef?.name,a=[],r=e.axes.length??0;for(let n=0;n<r;n++){let r=`axes[${n}]`,o=e.axes[n];"time"===o.type&&null!=o.unit&&(o={...o,type:"unit-time"});let l=s.sy.getAxisModule(o.type);if(null==l){t??(t=(0,s.lp)(Array.from(s.sy.listModulesByType(s.nR.Axis)).filter(e=>e.chartType===i).map(e=>e.name),"or",yW)),s.Vy.warn(`Unknown type \`${o.type}\` at  \`${r}.type\`; expecting one of ${t}, ignoring all axes options.`),delete e.axes;break}if(l.chartType!==i){s.Vy.warn(`Axis type \`${l.name}\` at  \`${r}.type\` is not supported by chart type \`${i}\`, ignoring.`);break}let{validate:h=s.tf}=l,{cleared:d,invalid:u}=h(o,l.options,r);u.forEach(e=>s.Vy.warn(e)),(0,s.eh)(u,r)||a.push(d)}e.axes=a}diffOptions(t){return this===t?{}:null==t?this.processedOptions:this.fastDelta??tS(t.processedOptions,this.processedOptions,e.JSON_DIFF_OPTS)}getSeriesThemeConfig(e,t){return t?.config[e]??{}}getDefaultAxes(e,t){let i=this.optionsType(e),a=e.series?.find(e=>(e.type??"line")===i)??{},s=rw.cloneDefaultAxes(i);return tk(s,{},void 0,z(a,t)),s}optionsType(e){return e.series?.[0]?.type??"line"}splitAnnotationsOptions(e){let{axesButtons:t=null,enabled:i=null,optionsToolbar:a=null,toolbar:s=null,...r}=e;return null==t&&null==i&&null==a&&null==s?[{},r]:[{annotations:{axesButtons:t,enabled:i,optionsToolbar:a,toolbar:s}},r]}processAxesOptions(e,t){"axes"in e&&(e.axes=e.axes?.map(e=>{let{crossLines:i,...a}=z(t[e.type]?.[e.position],t[e.type]);e.crossLines&&(e.crossLines=P(e.crossLines,i));let s=a.gridLine?.style;e.gridLine?.style&&s?.length&&(e.gridLine.style=e.gridLine.style.map((e,t)=>null!=e.stroke||null!=e.lineDash?z(e,s.at(t%s.length)):e));let{top:r,right:n,bottom:o,left:l,...h}=z(e,a);return h}))}processSeriesOptions(e,t){let i=this.getTooltipPositionDefaults(e),a=e.series?.map(a=>{a.type??(a.type="line");let{innerLabels:r,...n}=this.getSeriesThemeConfig(a.type,t).series??{},o=s.sy.getSeriesModule(a.type),l=!!o?.options.tooltip,h=!!o?.options.visible,d=l&&this.getTooltipRangeDefaults(e,a.type),u=z(this.getSeriesGroupingOptions(a),a,l&&i,d,n,h&&{visible:!0});return u.innerLabels&&(u.innerLabels=P(u.innerLabels,r)),u});e.series=this.setSeriesGroupingOptions(a??[])}processMiniChartSeriesOptions(e){let t=e.navigator?.miniChart?.series;null!=t&&(t=t.map(e=>(e.type??(e.type="line"),e)),e.navigator.miniChart.series=this.setSeriesGroupingOptions(t))}resolveThemeOperations(t,i){let a=tk(i,t,new Set(["palette","data","theme"]));e.debug("ChartOptions.resolveTheme()",a)}getSeriesGroupingOptions(e){let t=rw.isGroupable(e.type),i=rw.isStackable(e.type),a=rw.isStackedByDefault(e.type);e.grouped&&!t&&s.Vy.warnOnce(`unsupported grouping of series type "${e.type}".`),(e.stacked||e.stackGroup)&&!i&&s.Vy.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:r,stacked:n}=e;return n??(n=(a||null!=e.stackGroup)&&!(t&&r)),r??(r=!0),{stacked:i&&n,grouped:t&&r&&!(i&&n)}}setSeriesGroupingOptions(t){let i=this.getSeriesGrouping(t);e.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);let a={},s=i.reduce((e,t)=>{var i;return"default"===t.groupType||(e[i=t.seriesType]??(e[i]=0),e[t.seriesType]+="stack"===t.groupType?1:t.series.length),e},{});return i.flatMap(e=>{var t;switch(a[t=e.seriesType]??(a[t]=0),e.groupType){case"stack":{let t=a[e.seriesType]++;return e.series.map((i,a)=>Object.assign(i,{seriesGrouping:{groupId:e.groupId,groupIndex:t,groupCount:s[e.seriesType],stackIndex:a,stackCount:e.series.length}}))}case"group":return e.series.map(t=>Object.assign(t,{seriesGrouping:{groupId:e.groupId,groupIndex:a[e.seriesType]++,groupCount:s[e.seriesType],stackIndex:0,stackCount:0}}))}return e.series}).map(({stacked:e,grouped:t,...i})=>i)}getSeriesGroupId(e){return[e.type,e.xKey,e.stacked?e.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){let t=new Map;return e.reduce((e,i)=>{let a=i.type;if(i.stacked||i.grouped){let s=this.getSeriesGroupId(i);if(!t.has(s)){let r={groupType:i.stacked?"stack":"group",seriesType:a,series:[],groupId:s};t.set(s,r),e.push(r)}t.get(s).series.push(i)}else e.push({groupType:"default",seriesType:a,series:[i],groupId:"__default__"});return e},[])}getTooltipPositionDefaults(e){let t=e.tooltip?.position;if(!(0,s.Qd)(t))return;let{type:i,anchorTo:a,placement:r,xOffset:n,yOffset:o}=t,l={};return(0,s.Kg)(i)&&(0,s.Xl)(p3,i)&&(l.type=i),(0,s.Kg)(a)&&(0,s.Xl)(p2,a)&&(l.anchorTo=a),(0,s.Kg)(r)&&(0,s.Xl)(p4,r)&&(l.placement=r),(0,s.Bf)(n)&&(l.xOffset=n),(0,s.Bf)(o)&&(l.yOffset=o),{tooltip:{position:l}}}getTooltipRangeDefaults(e,t){return{tooltip:{range:e.tooltip?.range??rw.getTooltipDefauls(t)?.range}}}soloSeriesIntegrity(e){if(!(0,s.cy)(e.series))return;let t=e.series;if(t&&t.length>1&&t.some(e=>rw.isSolo(e.type))){let i=this.optionsType(e);if(rw.isSolo(i))s.Vy.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),e.series=t.slice(0,1);else{let{solo:i,nonSolo:a}=(0,s.$z)(t,e=>rw.isSolo(e.type)?"solo":"nonSolo"),r=(0,s.Am)(i.map(e=>e.type)).join(", ");s.Vy.warn(`Unable to mix these series types with the lead series type: ${r}`),e.series=a}}}static enableConfiguredJsonOptions(e,t){"object"==typeof t&&"enabled"in t&&!t._enabledFromTheme&&null==e.enabled&&(t.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(e){null!=e._enabledFromTheme&&delete e._enabledFromTheme}enableConfiguredOptions(t,i){tA(i,e.enableConfiguredJsonOptions,new Set(["data","theme"]),t),tA(t,e.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static processFontOptions(e,t,i,a=new Set){if("object"==typeof e&&"fontFamily"in e)if(Array.isArray(e.fontFamily)){let t=[];for(let i of e.fontFamily)"object"==typeof i&&"googleFont"in i?(t.push(i.googleFont),a?.add(i.googleFont)):t.push(i);e.fontFamily=t.join(", ")}else"object"==typeof e.fontFamily&&"googleFont"in e.fontFamily&&(e.fontFamily=e.fontFamily.googleFont,a?.add(e.fontFamily));return a}processFonts(t,i=new Set){return tA(t,e.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(e){"enabled"in e&&!1===e.enabled&&Object.keys(e).forEach(t=>{"enabled"!==t&&delete e[t]})}removeDisabledOptions(t){tA(t,e.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(e){if(e&&(0,s.Gv)(e))for(let t of Object.keys(e)){let i=e[t];(0,s.Bm)(i)&&delete e[t]}}removeLeftoverSymbols(t){tA(t,e.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(e){if(null==e.window?e.window=(0,s.zk)():(0,s.d1)(e.window),null==e.document?e.document=(0,s.YE)():(0,s._9)(e.document),null==e.window)throw Error("AG Charts - unable to resolve global window");if(null==e.document)throw Error("AG Charts - unable to resolve global document");return e}};yH.OPTIONS_CLONE_OPTS={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])},yH.JSON_DIFF_OPTS=new Set(["data"]),yH.perfDebug=x.create(!0,"perf"),yH.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]),yH.debug=x.create(!0,"opts");var yZ=class e{constructor(e,t,i,a,s,r=1e3){this.name=e,this.buildItem=t,this.releaseItem=i,this.destroyItem=a,this.maxPoolSize=s,this.cleanupTimeMs=r,this.freePool=[],this.busyPool=new Set}static getPool(t,i,a,s,r){return this.pools.has(t)||this.pools.set(t,new e(t,i,a,s,r)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw Error("AG Charts - pool exhausted");let i=this.freePool.pop();return null==i?(i=this.buildItem(t),e.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])):e.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){let t=this.freePool.pop();if(null==t)throw Error("AG Charts - pool has no free instances");return e.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,t]),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){if(!this.busyPool.has(t))throw Error("AG Charts - cannot free item from pool which is not tracked as busy.");e.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),e.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]);let i=Date.now(),a=i+.5*this.cleanupTimeMs;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<a&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){let t=this.freePool.splice(0);for(let e of t)this.destroyItem(e);e.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){for(let e of(this.cleanPool(),this.busyPool.values()))this.destroyItem(e);this.busyPool.clear()}};yZ.pools=new Map,yZ.debug=x.create(!0,"pool"),s.sy.registerMany(g5);var yK=x.create(!0,"opts"),yX=class{static licenseCheck(e){this.licenseChecked||(this.licenseManager=g9.licenseManager?.(e),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(e){return g9.licenseManager?.({}).getLicenseDetails(e)}static getInstance(e){return yq.getInstance(e)}static create(e,t){return yK.group("AgCharts.create()",()=>{e=x.inDevelopmentMode(()=>_(tI(e)))??e,this.licenseCheck(e);let i=yq.createOrUpdate({userOptions:e,licenseManager:this.licenseManager,optionsMetadata:t});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&g9.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i})}static createFinancialChart(e){return yK.group("AgCharts.createFinancialChart()",()=>this.create(e,{presetType:"price-volume"}))}static createGauge(e){return yK.group("AgCharts.createGauge()",()=>this.create(e,{presetType:"gauge-preset"}))}static __createSparkline(e){return yK.group("AgCharts.__createSparkline()",()=>{let{pool:t,...i}=e;return this.create(i,{presetType:"sparkline",pool:t??!0,domMode:"minimal"})})}};yX.licenseChecked=!1;var yQ=class e{static getInstance(e){let t=li.getInstance(e);return t?lr.chartInstances.get(t):void 0}static initialiseModules(){if(!e.initialised){for(let e of(p0(),d.modules)){if("enterprise"===e.packageType&&!function(e){if("enterprise"!==e.packageType)throw Error("AG Charts - internal configuration error, only enterprise modules need verification.");let t=rx.find(t=>t.type===e.type&&(!("optionsKey"in t)||!("optionsKey"in e)||t.optionsKey===e.optionsKey)&&(!("contextKey"in t)||!("contextKey"in e)||t.contextKey===e.contextKey)&&t.identifier===e.identifier&&e.chartTypes.every(e=>t.chartTypes.includes(e)));return t&&(t.useCount??(t.useCount=0),t.useCount++),null!=t}(e)&&s.Vy.errorOnce("Unexpected enterprise module registered: "+e.identifier),"root"===e.type&&e.themeTemplate)for(let t of e.chartTypes)rA.set(t,e.themeTemplate);if("series"===e.type){if(e.chartTypes.length>1)throw Error(`AG Charts - Module definition error: ${e.identifier}`);rw.register(e.identifier,e)}if("series-option"===e.type&&e.themeTemplate)for(let t of e.seriesTypes)rw.setThemeTemplate(t,e.themeTemplate);if("axis-option"===e.type&&e.themeTemplate)for(let t of e.axisTypes){let i=rb.getThemeTemplate(t),a=z(e.themeTemplate,i);rb.setThemeTemplate(t,a)}"axis"===e.type&&rb.register(e.identifier,e),"legend"===e.type&&rv.register(e.identifier,e)}if(d.hasEnterpriseModules()){let e=rx.filter(({useCount:e})=>null==e||0===e);e.length>0&&s.Vy.errorOnce("Enterprise modules expected but not registered: ",e)}e.initialised=!0}}static createOrUpdate(t){let i,{proxy:a}=t,{userOptions:r,licenseManager:n,processedOverrides:o=a?.chart?.chartOptions.processedOverrides??{},specialOverrides:l=a?.chart?.chartOptions.specialOverrides??{},optionsMetadata:h=a?.chart?.chartOptions.optionMetadata??{},deltaOptions:d,stripSymbols:u=!1}=t,c=null!=g9.styles?[["ag-charts-enterprise",g9.styles]]:[],{presetType:p}=h;e.initialiseModules(),yK(()=>[">>> AgCharts.createOrUpdate() user options",tI(r)]);let g=r;yX.optionsMutationFn&&g&&(g=yX.optionsMutationFn(tI(g),p),yK(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",tI(g)]));let m=this.getPool(h),y=!1,f=a?.chart;null==f&&m?.hasFree()&&(f=(i=m.obtainFree()).item);let{document:b,window:x,styleContainer:M,...v}=g??{},S=new yH(f?.getChartOptions(),v,o,{...l,document:b,window:x,styleContainer:M},h,d,u);return(null==f||s.sy.detectChartDefinition(S.processedOptions)!==s.sy.detectChartDefinition(f.chartOptions.processedOptions))&&(i?.release(),(i=this.getPool(S.optionMetadata)?.obtain(S))?f=i.item:(y=!0,f=e.createChartInstance(S,f))),c.forEach(([e,t])=>{f.ctx.domManager.addStyles(e,t)}),f.ctx.fontManager.updateFonts(S.googleFonts),null==a?(a=new lr(f,e.callbackApi,n)).releaseChart=i?.release:(i||y)&&(a.releaseChart?.(),a.chart=f,a.releaseChart=i?.release),yK.check()&&"undefined"!=typeof window&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[f.id]=f),f.queuedUserOptions.push(S.userOptions),f.queuedChartOptions.push(S),f.requestFactoryUpdate(e=>{yK.group(">>>> Chart.applyOptions()",()=>{e.applyOptions(S);let t=e.queuedUserOptions.indexOf(S.userOptions)+1;e.queuedUserOptions.splice(0,t),e.queuedChartOptions.splice(0,t)})}),a}static markRemovedProperties(e,t,i=!1){if("object"!=typeof e)return i;for(let t of Object.keys(e))void 0===e[t]&&(Object.assign(e,{[t]:Symbol("UNSET")}),i||(i=!0));return i}static updateUserDelta(t,i){let a=tA(i=tI(i,yH.OPTIONS_CLONE_OPTS),e.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);yK(()=>[">>> AgCharts.updateUserDelta() user delta",tI(i)]),e.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:a})}static createChartInstance(e,t){let i=t?.destroy({keepTransferableResources:!0});return s.sy.detectChartDefinition(e.processedOptions).create(e,i)}static getPool(e){if(!0===e.pool)return yZ.getPool(e.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};yQ.caretaker=new iL(iS),yQ.initialised=!1,yQ.callbackApi={caretaker:yQ.caretaker,create:(e,t,i,a)=>yQ.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:a}),update:(e,t)=>yQ.createOrUpdate({userOptions:e,proxy:t}),updateUserDelta:(e,t)=>yQ.updateUserDelta(e,t)},yQ.detachAndClear=e=>e.detachAndClear(),yQ.destroy=e=>e.destroy();var yq=yQ,yJ={};o(yJ,{Arc:()=>y0,BBox:()=>y,Caption:()=>iu,CategoryScale:()=>lh,Group:()=>tu,Line:()=>rP,LinearScale:()=>hh,Marker:()=>oO,Path:()=>ox,RadialColumnShape:()=>y2,Rect:()=>hx,Scene:()=>aL,Sector:()=>pI,Shape:()=>e8,TranslatableGroup:()=>tg,getRadialColumnWidth:()=>y4,toRadians:()=>eo});var y0=class extends ox{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return(0,s.YX)(ea(this.startAngle),ea(this.endAngle))}updatePath(){let e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?e.closePath():2!==this.type||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new y(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){let i=this.getBBox();return 0!==this.type&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};function y1(e,t,i){let a=Math.sqrt(e**2+t**2),s=Math.atan2(t,e)+i;return{x:Math.cos(s)*a,y:Math.sin(s)*a}}y0.className="Arc",l([Z()],y0.prototype,"centerX",2),l([Z()],y0.prototype,"centerY",2),l([Z()],y0.prototype,"radius",2),l([Z()],y0.prototype,"startAngle",2),l([Z()],y0.prototype,"endAngle",2),l([Z()],y0.prototype,"counterClockwise",2),l([Z()],y0.prototype,"type",2);var y2=class extends ox{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){let{innerRadius:e,outerRadius:t,columnWidth:i}=this,a=this.getRotation(),s=-i/2,r=i/2,n=-t,o=-e,l=1/0,h=1/0,d=-1/0,u=-1/0;for(let e=0;e<4;e+=1){let{x:t,y:i}=y1(e%2==0?s:r,e<2?n:o,a);l=Math.min(t,l),h=Math.min(i,h),d=Math.max(t,d),u=Math.max(i,u)}return new y(l,h,d-l,u-h)}getRotation(){let{startAngle:e,endAngle:t}=this,i=eh(e,t);return ea(e+i/2+Math.PI/2)}updatePath(){let{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:e,innerRadius:t,outerRadius:i,path:a}=this,s=-e/2,r=e/2,n=-i,o=-t,l=this.getRotation(),h=[[s,o],[s,n],[r,n],[r,o]].map(([e,t])=>y1(e,t,l));a.clear(!0),a.moveTo(h[0].x,h[0].y),a.lineTo(h[1].x,h[1].y),a.lineTo(h[2].x,h[2].y),a.lineTo(h[3].x,h[3].y),a.closePath()}updateBeveledPath(){let{columnWidth:e,path:t,outerRadius:i,innerRadius:a,axisInnerRadius:r,axisOuterRadius:n,isRadiusAxisReversed:o}=this,l=(0,s.YX)(a,r),h=Math.asin(e/2/a),d=this.getRotation(),u=(e,t)=>y1(e,t,d),c=(e,t)=>Math.sqrt(e**2+t**2),p=(e,t)=>t>e?0:Math.sqrt(e**2-t**2),g=(e,t,i)=>i?e<t:e>t,m=l&&!isNaN(h)&&h<Math.PI/6,y=-e/2,f=e/2,b=-i,x=-a*(m?Math.cos(h):1),M=g(n,c(a,e/2),!o);if(M){let e=p(n,a);y=-e,f=e}t.clear(!0);let v=u(y,x);t.moveTo(v.x,v.y);let S=(0,s.YX)(a,i),D=g(n,c(i,e/2),!o);if(S&&m)t.arc(0,0,a,ea(-h-Math.PI/2)+d,ea(h-Math.PI/2)+d,!1);else if(D){let a=-p(n,e/2),r=p(n,i);if(!M){let e=u(y,a);t.lineTo(e.x,e.y)}if(t.arc(0,0,n,Math.atan2(a,y)+d,Math.atan2(b,-r)+d,!1),!(0,s.YX)(r,0)){let e=u(r,b);t.lineTo(e.x,e.y)}t.arc(0,0,n,Math.atan2(b,r)+d,Math.atan2(a,f)+d,!1)}else{let e=u(y,b),i=u(f,b);t.lineTo(e.x,e.y),t.lineTo(i.x,i.y)}let I=u(f,x);if(t.lineTo(I.x,I.y),m)t.arc(0,0,a,ea(h-Math.PI/2)+d,ea(-h-Math.PI/2)+d,!0);else{let e=u(y,x);t.lineTo(e.x,e.y)}t.closePath()}};function y4(e,t,i,a,s){let r=eh(e,t),n=r*(1-a)/2;if(e+=n,t-=n,r<.001)return 2*i*s;if(r>=2*Math.PI){let i=e+r/2;e=i-Math.PI,t=i+Math.PI}let o=i*Math.cos(e),l=i*Math.sin(e),h=Math.floor(Math.sqrt((o-i*Math.cos(t))**2+(l-i*Math.sin(t))**2));return Math.max(1,Math.min(2*i*s,h))}y2.className="RadialColumnShape",l([Z()],y2.prototype,"isBeveled",2),l([Z()],y2.prototype,"columnWidth",2),l([Z()],y2.prototype,"startAngle",2),l([Z()],y2.prototype,"endAngle",2),l([Z()],y2.prototype,"outerRadius",2),l([Z()],y2.prototype,"innerRadius",2),l([Z()],y2.prototype,"axisInnerRadius",2),l([Z()],y2.prototype,"axisOuterRadius",2),l([Z()],y2.prototype,"isRadiusAxisReversed",2);var y3={};o(y3,{ChartTheme:()=>mn,DEFAULT_ANNOTATION_HANDLE_FILL:()=>dn,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>dd,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>du,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>dc,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>dp,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>dl,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>dh,DEFAULT_CAPTION_ALIGNMENT:()=>hQ,DEFAULT_CAPTION_LAYOUT_STYLE:()=>hX,DEFAULT_FIBONACCI_STROKES:()=>da,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>dr,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>di,DEFAULT_GRIDLINE_ENABLED:()=>db,DEFAULT_POLAR_SERIES_STROKE:()=>de,DEFAULT_SEPARATION_LINES_COLOUR:()=>hZ,DEFAULT_SHADOW_COLOUR:()=>hK,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>dt,DEFAULT_TEXTBOX_COLOR:()=>dy,DEFAULT_TEXTBOX_FILL:()=>dg,DEFAULT_TEXTBOX_STROKE:()=>dm,DEFAULT_TEXT_ANNOTATION_COLOR:()=>ds,DEFAULT_TOOLBAR_POSITION:()=>df,IS_DARK_THEME:()=>hH,PALETTE_ALT_DOWN_FILL:()=>h6,PALETTE_ALT_DOWN_STROKE:()=>h5,PALETTE_ALT_NEUTRAL_FILL:()=>h8,PALETTE_ALT_NEUTRAL_STROKE:()=>h7,PALETTE_ALT_UP_FILL:()=>h9,PALETTE_ALT_UP_STROKE:()=>h3,PALETTE_DOWN_FILL:()=>h1,PALETTE_DOWN_STROKE:()=>hJ,PALETTE_NEUTRAL_FILL:()=>h4,PALETTE_NEUTRAL_STROKE:()=>h2,PALETTE_UP_FILL:()=>h0,PALETTE_UP_STROKE:()=>hq,getChartTheme:()=>yU,resolveOperation:()=>y9,themeNames:()=>y5,themeSymbols:()=>hW,themes:()=>yY});var y5=Object.keys(yY);function y9(e){let t=mn.getDefaultPublicParameters();t.__palette=mn.getDefaultColors();let i={operation:e};return tk(i,t),i.operation}var y6={};o(y6,{Color:()=>ey,interpolateColor:()=>az});var y8={};o(y8,{AbstractBarSeries:()=>ck,AbstractBarSeriesProperties:()=>cC,ActionOnSet:()=>tW,AnchoredPopover:()=>fO,Animation:()=>aK,AnimationManager:()=>a0,Arc:()=>y0,Axis:()=>nq,AxisGroupZIndexMap:()=>nX,AxisInterval:()=>nw,AxisLabel:()=>nC,AxisTick:()=>nN,AxisTickGenerator:()=>n0,AxisTicks:()=>fm,BBox:()=>y,BBoxValues:()=>u,Background:()=>hM,BackgroundModule:()=>hv,BandScale:()=>sX,BarSeries:()=>c_,BarSeriesModule:()=>cH,BaseModuleInstance:()=>h,BaseProperties:()=>eC,BaseToolbar:()=>fB,ButtonWidget:()=>i5,CachedTextMeasurer:()=>ii,CachedTextMeasurerPool:()=>it,CallbackCache:()=>aC,Caption:()=>iu,CartesianAxis:()=>n4,CartesianSeries:()=>d0,CartesianSeriesNodeEvent:()=>dq,CartesianSeriesProperties:()=>dJ,CategoryAxis:()=>lc,CategoryScale:()=>lh,ChangeDetectableProperties:()=>dT,Chart:()=>li,ChartAxisDirection:()=>ic,ChartEventManager:()=>a1,ChartOptions:()=>yH,ChartUpdateType:()=>aE,CollapseMode:()=>ur,Color:()=>ey,ColorScale:()=>eS,ConicGradient:()=>eI,ContextMenuBuiltins:()=>a3,ContextMenuRegistry:()=>a5,ContinuousScale:()=>sc,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>dX,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>dQ,DEFAULT_TOOLTIP_CLASS:()=>oz,DEFAULT_TOOLTIP_DARK_CLASS:()=>oR,DIRECTION_SWAP_AXES:()=>dx,DOMManager:()=>i2,DataController:()=>rf,DataModel:()=>ry,DataModelSeries:()=>dK,DataService:()=>aO,Debug:()=>x,Deprecated:()=>oI,DeprecatedAndRenamedTo:()=>oL,DiscreteTimeScale:()=>sQ,DragInterpreter:()=>sr,DraggablePopover:()=>fz,DropShadow:()=>dE,ExtendedPath2D:()=>eX,FILL_IMAGE_DEFAULTS:()=>dL,FILL_PATTERN_DEFAULTS:()=>dI,FONT_SIZE_RATIO:()=>hV,FillGradientDefaults:()=>dP,FillImageDefaults:()=>dB,FillPatternDefaults:()=>dF,FloatingToolbar:()=>fY,Gradient:()=>eD,Group:()=>tu,GroupedCategoryAxis:()=>ht,HdpiCanvas:()=>ay,HierarchyNode:()=>fs,HierarchySeries:()=>fr,HierarchySeriesProperties:()=>fn,HighlightManager:()=>a9,HighlightProperties:()=>dR,HighlightStyle:()=>dG,Image:()=>fA,InteractionManager:()=>aq,InteractionState:()=>aQ,InterpolationProperties:()=>d1,Invalidating:()=>eb,LARGEST_KEY_INTERVAL:()=>lY,Label:()=>nD,LayoutElement:()=>ig,LayoutManager:()=>im,LegendMarkerLabel:()=>hC,Line:()=>rP,LineSeries:()=>pt,LineSeriesModule:()=>ps,LinearGradient:()=>eL,LinearScale:()=>hh,Listeners:()=>iw,LogScale:()=>hl,LonLatBBox:()=>fo,Marker:()=>oO,Menu:()=>fj,MenuItemWidget:()=>fC,MenuWidget:()=>fN,MercatorScale:()=>fp,ModuleRegistry:()=>s.sy,Motion:()=>aR,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>rT,NativeWidget:()=>i7,NewAreaSeriesModule:()=>cL,NewBarSeriesModule:()=>cZ,NewBubbleSeriesModule:()=>c4,NewHistogramSeriesModule:()=>c7,NewLineSeriesModule:()=>pr,NewScatterSeriesModule:()=>pc,NiceMode:()=>nE,Node:()=>ee,NumberAxis:()=>hd,ObserveChanges:()=>tH,OrdinalTimeScale:()=>nd,PHASE_METADATA:()=>aW,PHASE_ORDER:()=>a$,PREV_NEXT_KEYS:()=>iB,Padding:()=>tY,ParallelStateMachine:()=>r_,Path:()=>ox,PointerEvents:()=>q,PolarAxis:()=>gH,PolarSeries:()=>pF,PolarZIndexMap:()=>pP,Popover:()=>fE,PropertiesArray:()=>ek,Property:()=>ew,ProxyInteractionService:()=>ad,ProxyOnWrite:()=>t_,ProxyProperty:()=>tU,ProxyPropertyOnWrite:()=>t$,QUICK_TRANSITION:()=>.2,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>100,RadialColumnShape:()=>y2,Range:()=>nc,Rect:()=>hx,RepeatType:()=>aH,Rotatable:()=>ts,RotatableGroup:()=>tp,RotatableText:()=>il,SAFE_FILLS_OPERATION:()=>dv,SAFE_FILL_OPERATION:()=>dM,SAFE_RANGE2_OPERATION:()=>dD,SAFE_STROKE_FILL_OPERATION:()=>dS,SKIP_JS_BUILTINS:()=>V,SMALLEST_KEY_INTERVAL:()=>lV,SORT_DOMAIN_GROUPS:()=>lU,Scalable:()=>tr,ScalableGroup:()=>tc,Scene:()=>aL,SceneArrayChangeDetection:()=>X,SceneChangeDetection:()=>Z,SceneObjectChangeDetection:()=>K,Sector:()=>pI,SectorBox:()=>pp,Selection:()=>rR,Series:()=>ob,SeriesContentZIndexMap:()=>od,SeriesGroupingChangedEvent:()=>of,SeriesItemHighlightStyle:()=>dO,SeriesMarker:()=>dY,SeriesNodeEvent:()=>oy,SeriesNodePickMode:()=>om,SeriesProperties:()=>dV,SeriesTooltip:()=>d_,SeriesZIndexMap:()=>oh,Shape:()=>e8,SimpleTextMeasurer:()=>is,SliderWidget:()=>ar,StateMachine:()=>rU,StateMachineProperty:()=>rG,StopProperties:()=>eT,SvgPath:()=>fL,TRIPLE_EQ:()=>H,Text:()=>io,TextUtils:()=>ia,TextWrapper:()=>id,ThemeConstants:()=>hB,ThemeSymbols:()=>hW,TimeAxisParentLevel:()=>hc,TimeScale:()=>no,Toolbar:()=>fG,ToolbarButtonProperties:()=>fR,ToolbarButtonWidget:()=>fP,ToolbarWidget:()=>ao,Tooltip:()=>oZ,TooltipManager:()=>si,TooltipPosition:()=>oH,Transformable:()=>to,TransformableGroup:()=>tm,TransformableText:()=>ih,Translatable:()=>tn,TranslatableGroup:()=>tg,TranslatableLine:()=>nK,UnitTimeScale:()=>rQ,UpdateService:()=>rs,Vec2:()=>y7,Vec4:()=>sq,WIDGET_HTML_EVENTS:()=>tK,Widget:()=>t7,WidgetEventUtil:()=>tJ,ZIndexMap:()=>aN,ZoomManager:()=>s5,accumulateGroup:()=>lq,accumulateStack:()=>l0,accumulatedValue:()=>lL,accumulativeValueProperty:()=>lP,addEscapeEventListener:()=>iT,addHitTestersToQuadtree:()=>cA,addMouseCloseListener:()=>iE,addOverrideFocusVisibleEventListener:()=>iz,addTouchCloseListener:()=>iO,adjustLabelPlacement:()=>cU,angleBetween:()=>eh,angleCategoryAxisOptionsDefs:()=>mF,angleNumberAxisOptionsDefs:()=>mR,angularPadding:()=>eu,animationValidation:()=>lK,annotationCalloutStylesDefs:()=>m2,annotationChannelStyleDefs:()=>mq,annotationChannelTextDefs:()=>m$,annotationCommentStylesDefs:()=>m4,annotationCrossLineStyleDefs:()=>mQ,annotationDisjointChannelStyleDefs:()=>mJ,annotationFibonacciStylesDefs:()=>m1,annotationLineStyleDefs:()=>mX,annotationLineTextDefs:()=>m_,annotationMeasurerStylesDefs:()=>m9,annotationNoteStylesDefs:()=>m3,annotationOptionsDef:()=>m8,annotationParallelChannelStyleDefs:()=>m0,annotationQuickMeasurerStylesDefs:()=>m6,annotationShapeStylesDefs:()=>m5,annotationTextStylesDef:()=>mU,applyShapeFillBBox:()=>op,applyShapeStyle:()=>og,areScalingEqual:()=>uv,area:()=>lI,autoSizedLabelOptionsDefs:()=>cy,boxPlotSeriesThemeableOptionsDef:()=>m7,buildFormatter:()=>s$,buildResetPathFn:()=>uY,calculateDataDiff:()=>cB,calculateDefaultTimeTickFormat:()=>sZ,calculateDerivativeExtrema:()=>eZ,calculateDerivativeExtremaXY:()=>eK,calculateLabelTranslation:()=>fb,calculatePlacement:()=>oA,callWithContext:()=>aw,candlestickSeriesThemeableOptionsDef:()=>yt,cartesianAxisCrosshairOptions:()=>u3,cartesianAxisLabelOptionsDefs:()=>uQ,cartesianAxisOptionsDefs:()=>u4,cartesianChartOptionsDefs:()=>gP,cartesianCrossLineOptionsDefs:()=>uK,cartesianNumericAxisLabel:()=>uq,cartesianTimeAxisLabel:()=>uJ,cartesianTimeAxisParentLevel:()=>u1,checkCrisp:()=>cE,chordSeriesThemeableOptionsDef:()=>yi,clampArray:()=>sl,clippedRoundRect:()=>hb,collapsedStartingBarPosition:()=>cj,commonAxisLabelOptionsDefs:()=>uX,commonAxisOptionsDefs:()=>u2,commonChartOptionsDefs:()=>cu,commonCrossLineLabelOptionsDefs:()=>uH,commonCrossLineOptionsDefs:()=>uZ,commonSeriesOptionsDefs:()=>cp,commonSeriesThemeableOptionsDefs:()=>cc,compareDates:()=>rq,computeBarFocusBounds:()=>cF,computeMarkerFocusBounds:()=>uB,coneFunnelSeriesThemeableOptionsDef:()=>ya,continuousAxisOptions:()=>u5,countExpandingSearch:()=>st,createButton:()=>fx,createCheckbox:()=>fM,createDatumId:()=>l3,createDeprecationWarning:()=>oD,createIcon:()=>fD,createSelect:()=>fv,createTextArea:()=>fS,dateToNumber:()=>sW,datesSortOrder:()=>r0,datumKeys:()=>rg,datumStylerProperties:()=>a8,deconstructSelectionsOrNodes:()=>aZ,deepClone:()=>tI,deepFreeze:()=>_,defaultTimeTickFormat:()=>sH,diff:()=>l4,drawCorner:()=>hy,drawMarkerUnitPolygon:()=>oN,easing:()=>aR,enterpriseModule:()=>g9,errorBarOptionsDefs:()=>cb,errorBarThemeableOptionsDefs:()=>cf,evaluateBezier:()=>e$,extent:()=>lg,extractDecoratedProperties:()=>E,fillsOptionsDef:()=>p7,findMinMax:()=>sh,findQuadtreeMatch:()=>cw,findRangeExtent:()=>sd,fixNumericExtent:()=>ru,flowProportionChartOptionsDefs:()=>gY,focusCursorAtEnd:()=>tb,formatNumber:()=>as,formatPercent:()=>ai,formatValue:()=>at,fromToMotion:()=>rE,funnelSeriesThemeableOptionsDef:()=>ys,gaugeChartOptionsDefs:()=>gU,getAngleRatioRadians:()=>ed,getColorStops:()=>eO,getCrossLineValue:()=>nm,getDateTicksForInterval:()=>nh,getDatumRefPoint:()=>se,getElementBBox:()=>tf,getIconClassNames:()=>tM,getLastFocus:()=>i$,getMissCount:()=>rc,getPath:()=>G,getPathComponents:()=>rm,getRadialColumnWidth:()=>y4,getSequentialColors:()=>dA,getShapeFill:()=>ou,getShapeStyle:()=>oc,groupAccumulativeValueProperty:()=>lB,groupAverage:()=>lD,groupCount:()=>lS,groupStackValueProperty:()=>lG,groupSum:()=>lv,hasNoModifiers:()=>iR,heatmapSeriesThemeableOptionsDef:()=>yr,hierarchyChartOptionsDefs:()=>gV,initMenuKeyNav:()=>iY,initRovingTabIndex:()=>iG,interpolatePoints:()=>uD,interpolationOptionsDefs:()=>cv,isAgFlowProportionChartOptions:()=>ot,isAgGaugeChartOptions:()=>oa,isAgHierarchyChartOptions:()=>n7,isAgStandaloneChartOptions:()=>oi,isAgTopologyChartOptions:()=>oe,isBetweenAngles:()=>en,isButtonClickEvent:()=>i_,isChartAxisDirection:()=>ip,isContinuous:()=>np,isDecoratedObject:()=>N,isDenseInterval:()=>ns,isGradientFill:()=>e2,isGradientOrPatternFill:()=>e9,isImageFill:()=>e5,isInputPending:()=>tx,isObjectWithProperty:()=>$,isObjectWithStringProperty:()=>W,isPatternFill:()=>e3,isProperties:()=>eN,isScaleValid:()=>uS,jsonApply:()=>tw,jsonDiff:()=>tS,jsonPropertyCompare:()=>tD,jsonResolveOperations:()=>tk,jsonWalk:()=>tA,keyProperty:()=>lT,legendSymbolSvg:()=>oj,lineDistanceSquared:()=>eV,linearGaugeSeriesOptionsDef:()=>ga,linearGaugeSeriesThemeableOptionsDef:()=>gi,linearGaugeTargetOptionsDef:()=>ge,listDecoratedProperties:()=>T,makeAccessibleClickListener:()=>iU,mapLineBackgroundSeriesThemeableOptionsDef:()=>yl,mapLineSeriesThemeableOptionsDef:()=>yo,mapMarkerSeriesThemeableOptionsDef:()=>yh,mapShapeBackgroundSeriesThemeableOptionsDef:()=>yu,mapShapeSeriesThemeableOptionsDef:()=>yd,mapValues:()=>F,markerFadeInAnimation:()=>uj,markerOptionsDefs:()=>cg,markerScaleInAnimation:()=>uz,markerSwipeScaleInAnimation:()=>uR,merge:()=>R,mergeArrayDefaults:()=>P,mergeDefaults:()=>z,midpointStartingBarPosition:()=>cz,moduleRegistry:()=>d,motion:()=>f_,nearestSquared:()=>g,nearestSquaredInContainer:()=>m,nightingaleSeriesThemeableOptionsDef:()=>yc,normaliseGroupTo:()=>l$,normalisePropertyTo:()=>lH,normalisedExtentWithMetadata:()=>lm,normalizeAngle180:()=>er,normalizeAngle360:()=>ea,normalizeAngle360FromDegrees:()=>ec,normalizeAngle360Inclusive:()=>es,normalizeContinuousDomains:()=>sp,numberFormatValidator:()=>uW,objectsEqual:()=>O,objectsEqualWith:()=>j,ohlcSeriesThemeableOptionsDef:()=>yn,ordinalTimeAxisOptionsDefs:()=>mz,pairUpSpans:()=>ub,partialAssign:()=>U,pathFadeInAnimation:()=>uV,pathMotion:()=>dw,pathSwipeInAnimation:()=>uG,pickByMatchingAngle:()=>pR,plotAreaPathFill:()=>uN,plotInterpolatedAreaSeriesFillSpans:()=>uT,plotInterpolatedLinePathStroke:()=>uA,plotLinePathStroke:()=>uL,polarChartOptionsDefs:()=>gF,prepareAreaFillAnimationFns:()=>uE,prepareAreaPathAnimation:()=>uO,prepareAxisAnimationContext:()=>nO,prepareAxisAnimationFunctions:()=>nR,prepareBarAnimationFunctions:()=>cR,prepareLinePathAnimation:()=>uk,prepareLinePathPropertyAnimation:()=>uC,prepareLinePathStrokeAnimationFns:()=>uw,preparePieSeriesAnimationFunctions:()=>pj,pyramidSeriesThemeableOptionsDef:()=>yp,radarAreaSeriesThemeableOptionsDef:()=>yg,radarLineSeriesThemeableOptionsDef:()=>ym,radialBarSeriesThemeableOptionsDef:()=>yy,radialColumnSeriesThemeableOptionsDef:()=>yf,radialGaugeSeriesOptionsDef:()=>gr,radialGaugeSeriesThemeableOptionsDef:()=>gs,radialGaugeTargetOptionsDef:()=>gt,radiusCategoryAxisOptionsDefs:()=>mG,radiusNumberAxisOptionsDefs:()=>mB,range:()=>na,rangeAreaSeriesThemeableOptionsDef:()=>yb,rangeBarSeriesThemeableOptionsDef:()=>yx,rangeValidator:()=>ce,rangedValueProperty:()=>lR,resetAxisGroupFn:()=>nP,resetAxisLabelSelectionFn:()=>nF,resetAxisLineSelectionFn:()=>nB,resetBarSelectionsFn:()=>cP,resetLabelFn:()=>dN,resetMarkerFn:()=>uP,resetMarkerPositionFn:()=>uF,resetMotion:()=>rz,resetPieSelectionsFn:()=>pz,rowCountProperty:()=>lO,sankeySeriesThemeableOptionsDef:()=>yM,scale:()=>un,sectorBox:()=>pg,seriesLabelFadeInAnimation:()=>dC,seriesLabelFadeOutAnimation:()=>dk,seriesLabelOptionsDefs:()=>cm,setElementBBox:()=>ty,setPath:()=>Y,shadowOptionsDefs:()=>cM,shallowClone:()=>tL,solveBezier:()=>eW,sortAndUniqueDates:()=>rJ,splitBezier:()=>eH,standaloneChartOptionsDefs:()=>gG,staticFromToMotion:()=>rO,stopPageScrolling:()=>iW,sum:()=>lM,sumValues:()=>lx,sunburstSeriesThemeableOptionsDef:()=>yv,timeIntervalUnit:()=>u$,toDegrees:()=>el,toRadians:()=>eo,toolbarButtonOptionsDefs:()=>cd,tooltipContentAriaLabel:()=>oF,tooltipHtml:()=>oY,tooltipOptionsDefs:()=>cx,topologyChartOptionsDefs:()=>gB,trailingAccumulatedValue:()=>lA,trailingAccumulatedValueProperty:()=>lF,treemapSeriesThemeableOptionsDef:()=>yS,updateClipPath:()=>uU,updateLabelNode:()=>cV,validateCrossLineValue:()=>ny,valueProperty:()=>lE,visibleRangeIndices:()=>a7,waterfallSeriesThemeableOptionsDef:()=>yI,without:()=>B});var y7={add:function(e,t){return"number"==typeof t?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}},angle:function(e,t){return null==t?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},apply:function(e,t){return e.x=t.x,e.y=t.y,e},equal:function(e,t){return e.x===t.x&&e.y===t.y},distance:function(e,t){let i=fe(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(e,t){let i=fe(e,t);return i.x*i.x+i.y*i.y},from:function(e,t){if("number"==typeof e)return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)},gradient:function(e,t,i){let a=t.x-e.x;return(null==i?t.y-e.y:i-t.y-(i-e.y))/a},intercept:function(e,t,i){return(null==i?e.y:i-e.y)-t*e.x},intersectAtX:function(e,t,i=0,a){let s=e===1/0?1/0:e*i+t;return{x:i,y:null==a?s:a-s}},intersectAtY:function(e,t,i=0,a){return{x:e===1/0?1/0:(i-t)/e,y:null==a?i:a-i}},length:ft,lengthSquared:function(e){return e.x*e.x+e.y*e.y},multiply:function(e,t){return"number"==typeof t?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}},normalized:function(e){let t=ft(e);return{x:e.x/t,y:e.y/t}},origin:fi,required:function(e){return{x:e?.x??0,y:e?.y??0}},rotate:function(e,t,i=fi()){let a=ft(e);return{x:i.x+a*Math.cos(t),y:i.y+a*Math.sin(t)}},round:function(e,t=2){return{x:(0,s.GB)(e.x,t),y:(0,s.GB)(e.y,t)}},sub:fe};function fe(e,t){return"number"==typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function ft(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function fi(){return{x:0,y:0}}var fa=class e{constructor(e,t,i,a,s,r,n,o,l){this.series=e,this.datumIndex=t,this.datum=i,this.sizeValue=a,this.colorValue=s,this.sumSize=r,this.depth=n,this.parent=o,this.children=l,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t,i=e.Walk.PreOrder){i===e.Walk.PreOrder&&t(this),this.children.forEach(e=>{e.walk(t,i)}),i===e.Walk.PostOrder&&t(this)}*[Symbol.iterator](){for(let e of(yield this,this.children))yield*e}};fa.Walk={PreOrder:0,PostOrder:1};var fs=fa,fr=class extends ob{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new eS,this.animationState=new rU("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}processData(){let{NodeClass:e}=this,{childrenKey:t,sizeKey:i,colorKey:a,colorRange:s}=this.properties,r=0,n=1/0,o=-1/0,l=(s,l,d)=>{let u=null!=d.depth?d.depth+1:0,c=null!=t?s[t]:void 0,p=null==c||0===c.length,g=null!=i?s[i]:void 0,m=g=Number.isFinite(g)?Math.max(g,0):+!!p;r=Math.max(r,u);let y=null!=a?s[a]:void 0;return"number"==typeof y&&(n=Math.min(n,y),o=Math.max(o,y)),h(new e(this,l,s,g,y,m,u,d,[]),c)},h=(e,t)=>{let{datumIndex:i}=e;return t?.forEach((t,a)=>{let s=l(t,i.concat(a),e);e.children.push(s),e.sumSize+=s.sumSize}),e},d=h(new e(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),u=[n,o];this.colorScale.domain=n<o?[n,o]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=d,this.maxDepth=r,this.colorDomain=u}update({seriesRect:e}){this.updateSelections(),this.updateNodes();let t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){let{colorKey:t,colorName:i,colorRange:a}=this.properties,{id:s,ctx:{legendManager:r},visible:n}=this;return"gradient"===e&&null!=t&&null!=a?[{legendType:"gradient",enabled:n&&r.getItemEnabled({seriesId:s}),seriesId:s,colorName:i,colorRange:a,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){return this.datumSelection.at(e+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(e){for(let{index:t,datum:i}of this.datumSelection)if((0,s.r1)(i.datumIndex,e))return t-1;return 0}pickFocus(e){if(!this.rootNode?.children.length)return;let t=(0,s.qE)(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:a}=e,r=this.removeMeIndexPathForIndex(t),n=r.reduce((e,t)=>e.children[t],this.rootNode);if(a>0&&n.hasChildren)r=[...r,0];else if(a<0&&r.length>1)r=r.slice(0,-1);else if(0===a&&0!==i){let e=n.parent.children.length-1;(r=r.slice())[r.length-1]=(0,s.qE)(0,r[r.length-1]+i,e)}let o=r.reduce((e,t)=>e.children[t],this.rootNode),l=this.computeFocusBounds(this.datumSelection.at(t+1));if(null!=l)return{datum:o,datumIndex:this.removeMeIndexForIndexPath(r),otherIndex:o.depth,bounds:l,clipFocusBox:!0}}getDatumAriaText(e,t){return e instanceof this.NodeClass?this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t}):void s.Vy.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`)}getCategoryValue(e){}datumIndexForCategoryValue(e){}},fn=class extends dV{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(pL),this.fillGradientDefaults=new dP,this.fillPatternDefaults=new dF,this.fillImageDefaults=new dB,this.strokes=Object.values(pA)}};l([ew],fn.prototype,"childrenKey",2),l([ew],fn.prototype,"sizeKey",2),l([ew],fn.prototype,"colorKey",2),l([ew],fn.prototype,"colorName",2),l([ew],fn.prototype,"fills",2),l([ew],fn.prototype,"fillGradientDefaults",2),l([ew],fn.prototype,"fillPatternDefaults",2),l([ew],fn.prototype,"fillImageDefaults",2),l([ew],fn.prototype,"strokes",2),l([ew],fn.prototype,"colorRange",2);var fo=class{constructor(e,t,i,a){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=a}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}},fl=Math.PI/180,fh=e=>e*fl,fd=e=>-Math.log(Math.tan(.25*Math.PI+e*fl*.5)),fu=e=>e/fl,fc=e=>(Math.atan(Math.exp(-e))-.25*Math.PI)/(.5*fl),fp=class e extends ef{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.bounds=e.bounds(t)}static bounds(e){let[[t,i],[a,s]]=e,r=fh(t),n=fd(i),o=fh(a),l=fd(s);return new y(Math.min(r,o),Math.min(n,l),Math.abs(o-r),Math.abs(l-n))}static fixedScale(){return new e([[fu(0),fc(0)],[fu(1),fc(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...e){let t=-1/0,i=1/0,a=-1/0,s=1/0;for(let r of e)for(let[e,n]of r)t=Math.min(e,t),i=Math.max(e,i),a=Math.min(n,a),s=Math.max(n,s);return{domain:[[t,a],[i,s]],animatable:!0}}convert([e,t]){let[[i,a],[s,r]]=this.range,n=(s-i)/this.bounds.width,o=(r-a)/this.bounds.height;return[(fh(e)-this.bounds.x)*n+i,(fd(t)-this.bounds.y)*o+a]}invert([e,t]){let[[i,a],[s,r]]=this.range,n=(s-i)/this.bounds.width,o=(r-a)/this.bounds.height;return[fu((e-i)/n+this.bounds.x),fc((t-a)/o+this.bounds.y)]}},fg=class e{constructor(){this.id=(0,s.sX)(this),this.axisGroup=new tg({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=rR.select(this.axisGroup,io),this.interval=new nw,this.label=new nC,this.scale=new hh,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){let e=[],t=this.generateTicks(),{translationX:i,translationY:a}=this;return this.labelSelection.update(t.ticks.map(e=>this.createLabelDatum(e)),void 0,e=>e.tickId),this.labelSelection.each((t,i)=>{t.setProperties(i),i.visible&&e.push(t.getBBox())}),this.axisGroup.setProperties({translationX:i,translationY:a}),e.length>0?y.merge(e):void 0}getLabelParams(e){let{padding:t}=this,{translate:i}=e;switch(this.position){case"top":case"bottom":return{x:i,y:t,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:t,y:i,textAlign:"start",textBaseline:"middle"}}}inRange(e,t=.001){let[i,a]=sh(this.scale.range);return e>=i-t&&e<=a+t}createLabelDatum(e){let{x:t,y:i,textBaseline:a,textAlign:s}=this.getLabelParams(e);return{visible:!!e.tickLabel,tickId:e.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:e.tickLabel,textAlign:s,textBaseline:a,x:t,y:i}}generateTicks(){let{minSpacing:t,maxSpacing:i}=this.interval,{maxTickCount:a,minTickCount:s,tickCount:r}=nn(sd(this.scale.range),1,t,i,e.DefaultTickCount,e.DefaultMinSpacing),n=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:r,minTickCount:s,maxTickCount:a});if("bottom"===this.position||"top"===this.position){let e=it.getMeasurer({font:this.label}),{domain:t}=this.scale,i=t[0]>t[1]?-1:1,a=-1/0*i;n.ticks=n.ticks.filter(t=>Math.sign(t.translate-a)===i&&(a=t.translate+e.textWidth(t.tickLabel,!0)*i,!0))}return n}getTicksData(e){let t=[],i=e.nice?this.scale.niceDomain(e):this.scale.domain,a=this.scale.ticks(e,i)?.ticks??[],r=a.reduce((e,t)=>Math.max(e,(0,s.o3)(t)),0),n=[],o=nJ(),l="string"==typeof this.label.format?this.scale.tickFormatter({domain:i,ticks:a,fractionDigits:r,specifier:this.label.format}):e=>at(e,r);for(let e=0;e<a.length;e++){let s=a[e],h=this.scale.convert(s);if(!this.inRange(h))continue;let d=this.label.formatter?.({value:s,index:e,domain:i,fractionDigits:r,boundSeries:n})??l(s),u=o(d);t.push({tick:s,tickId:u,tickLabel:d,translate:h})}return{rawTicks:a,fractionDigits:r,ticks:t}}};fg.DefaultTickCount=5,fg.DefaultMinSpacing=10;var fm=fg,fy={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},ff={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function fb({yDirection:e,padding:t=0,position:i="top",bbox:a}){let{xTranslationDirection:s,yTranslationDirection:r}=(e?fy:ff)[i];return{xTranslation:s*(t+a.width/2),yTranslation:r*(t+a.height/2)}}function fx(e,t){let i=(0,s.n)("button",fI("ag-charts-input ag-charts-button",t));return void 0!==e.label?i.append(e.label):(i.append(fD(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),(0,s.Wp)(i,t),i}function fM(e,t){let i=(0,s.n)("input",fI("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",t=>e.onChange(i.checked,t)),i.addEventListener("keydown",e=>{i_(e)&&(e.preventDefault(),i.click())}),(0,s.Wp)(i,t),i}function fv(e,t){let i=(0,s.n)("select",fI("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(e=>{let t=(0,s.n)("option");return t.value=e.value,t.textContent=e.label,t})),(0,s.Bq)(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",t=>e.onChange(i.value,t)),(0,s.Wp)(i,t),i}function fS(e,t){let i=(0,s.n)("textarea",fI("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",t=>e.onChange(i.value,t)),(0,s.Wp)(i,t),(0,s.Bq)(i,"data-preventdefault",!1),i}function fD(e){let t=(0,s.n)("span",`ag-charts-icon ag-charts-icon-${e}`);return(0,s.Bq)(t,"aria-hidden",!0),t}function fI(e,t){return null==t?e:`${e} ${t.class}`}var fL=class extends ox{constructor(e=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){for(let[t,i,a]of(this._d=e,this.commands.length=0,e.matchAll(/([A-Z])([0-9. ]*)/g))){let e=a.split(/\s+/g).map(Number);this.commands.push([i,e])}this.checkPathDirty()}}updatePath(){let{path:e,x:t,y:i}=this;e.clear();let a=t,s=i;for(let[r,n]of this.commands)switch(r){case"M":e.moveTo(t+n[0],i+n[1]),a=t+n[0];break;case"C":e.cubicCurveTo(t+n[0],i+n[1],t+n[2],i+n[3],t+n[4],i+n[5]),a=t+n[4],s=i+n[5];break;case"H":e.lineTo(t+n[0],s),a=i+n[0];break;case"L":e.lineTo(t+n[0],i+n[1]),a=t+n[0],s=i+n[1];break;case"V":e.lineTo(a,i+n[0]),s=i+n[0];break;case"Z":e.closePath();break;default:throw Error(`Could not translate command '${r}' with '${n.join(" ")}'`)}e.closePath()}};l([Z()],fL.prototype,"x",2),l([Z()],fL.prototype,"y",2);var fA=class extends ee{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){let{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};l([Z()],fA.prototype,"x",2),l([Z()],fA.prototype,"y",2),l([Z()],fA.prototype,"width",2),l([Z()],fA.prototype,"height",2),l([Z()],fA.prototype,"opacity",2);var fw={};o(fw,{ButtonWidget:()=>i5,MenuItemWidget:()=>fC,MenuWidget:()=>fN,NativeWidget:()=>i7,SliderWidget:()=>ar,ToolbarWidget:()=>ao,WIDGET_HTML_EVENTS:()=>tK,Widget:()=>t7,WidgetEventUtil:()=>tJ});var fC=class extends i3{constructor(){super((0,s.n)("div"),"menuitem")}},fk=["Escape","ArrowLeft"],fN=class e extends i6{constructor(e="vertical"){super(e,"menu"),this.closeSubMenu=e=>this.openSubMenu(e,void 0)}destructor(){this.selfClose("2")}addSeparator(){let e=(0,s.YE)().createElement("div");return(0,s.Bq)(e,"role","separator"),this.elem.appendChild(e),e}onChildAdded(e){super.onChildAdded(e),e.hasPopup()||e.addListener("mouseenter",this.closeSubMenu)}onChildRemoved(e){super.onChildRemoved(e),e.hasPopup()||e.removeListener("mouseenter",this.closeSubMenu)}addSubMenu(){let t=new fC,i=(0,s.wW)(),a=new e(this.orientation),r=e=>{t.isDisabled()||this.openSubMenu(e,a)};return t.setAriaHasPopup("menu"),t.setAriaExpanded(!1),t.setAriaControls(i),t.addListener("click",r),t.addListener("mouseenter",r),t.addListener("keydown",e=>{iR(e.sourceEvent)&&"ArrowRight"===e.sourceEvent.code&&r(e)}),a.addListener("close-widget",()=>t.setAriaExpanded(!1)),a.addListener("open-widget",()=>t.setAriaExpanded(!0)),a.id=i,this.addChild(t),{subMenuButton:t,subMenu:a}}openSubMenu(e,t){let{openScope:i}=this;i&&(i.openSubMenu?.selfClose("4"),t?.open(e),i.openSubMenu=t)}open(e,t){let{overrideFocusVisible:i}=t??{};if(null!=this.openScope)return;this.openScope={lastFocus:i$(e.sourceEvent),openSubMenu:void 0,abort:()=>this.selfClose("1"),close:()=>this.selfClose("0"),removers:new iv};let a=this.children.map(e=>e.getElement());for(let e of((0,s.Bq)(this.openScope.lastFocus,"aria-expanded",!0),iE(this.openScope.removers,this.elem,this.openScope.abort),iO(this.openScope.removers,this.elem,this.openScope.abort),this.children))iT(this.openScope.removers,e.getElement(),this.openScope.close,fk);void 0!==i&&iz(this.openScope.removers,this.elem,a,i),this.internalListener?.dispatch("open-widget",this,{type:"open-widget"}),this.children[0]?.focus({preventScroll:!0})}selfClose(e){if(void 0===this.openScope)return;let{lastFocus:t,removers:i,openSubMenu:a}=this.openScope;this.openScope=void 0,a?.selfClose("3"),(0,s.Bq)(t,"aria-expanded",!1),"0"===e&&t?.focus({preventScroll:!0}),i.destroy(),this.internalListener?.dispatch("close-widget",this,{type:"close-widget"})}close(){this.selfClose("0")}},fT="canvas-overlay",fE=class extends h{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.moduleId=`popover-${t}`,i?.detached?this.element=(0,s.n)("div"):this.element=e.domManager.addChild(fT,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>e.domManager.removeChild(fT,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){let{lastFocus:t=this.lastFocus}=e??{};0!==this.element.children.length&&(this.hideFns.forEach(e=>e()),t?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw Error("Can not show popover that has not been attached to a parent.");let i=(0,s.n)("div","ag-charts-popover");if(null!=t.ariaLabel&&i.setAttribute("aria-label",t.ariaLabel),null!=t.class&&i.classList.add(t.class),i.replaceChildren(...e),this.element.replaceChildren(i),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){let e=i$(t.sourceEvent);void 0!==e&&(this.lastFocus=e,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){let t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),null!=e.x&&t.style.setProperty("left",`${Math.floor(e.x)}px`),null!=e.y&&t.style.setProperty("top",`${Math.floor(e.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},fO=class extends fE{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){let i=t.anchor??this.anchor,a=t.fallbackAnchor??this.fallbackAnchor,r=super.showWithChildren(e,t);return i&&this.setAnchor(i,a),(0,s.zk)().requestAnimationFrame(()=>{this.repositionWithinBounds()}),r}repositionWithinBounds(){let{anchor:e,ctx:t,fallbackAnchor:i}=this,a=this.getPopoverElement();if(!e||!a)return;let r=t.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:o}=a,l=(0,s.qE)(0,e.x,r.width-n),h=(0,s.qE)(0,e.y,r.height-o);l!==e.x&&i?.x!=null&&(l=(0,s.qE)(0,i.x-n,r.width-n)),h!==e.y&&i?.y!=null&&(h=(0,s.qE)(0,i.y-o,r.height-o)),this.updatePosition({x:l,y:h})}},fj=class extends fO{show(e){let t=e.items.map(t=>this.createRow(e,t)),i=this.showWithChildren(t,e);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=iY({orientation:"vertical",menu:i,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{this.menuCloser?.finishClosing(),this.menuCloser=void 0})}createRow(e,t){let{menuItemRole:i="menuitem"}=e,a=t.value===e.value,r=(0,s.n)("div","ag-charts-menu__row");if(r.setAttribute("role",i),"menuitemradio"===i&&r.setAttribute("aria-checked",(e.value===t.value).toString()),"string"==typeof t.value&&(r.dataset.popoverId=t.value),r.classList.toggle("ag-charts-menu__row--active",a),null!=t.icon){let e=(0,s.n)("span",`ag-charts-menu__icon ${tM(t.icon)}`);r.appendChild(e)}let n=null!=t.strokeWidth;if(n&&(r.classList.toggle("ag-charts-menu__row--stroke-width-visible",n),r.style.setProperty("--strokeWidth",n?`${t.strokeWidth}px`:null)),null!=t.label){let e=(0,s.n)("span","ag-charts-menu__label");e.textContent=this.ctx.localeManager.t(t.label),r.appendChild(e)}"altText"in t&&(r.ariaLabel=this.ctx.localeManager.t(t.altText));let o=()=>{e.onPress?.(t)},l=e=>{i_(e)&&(o(),e.preventDefault(),e.stopPropagation())};return r.addEventListener("keydown",l),r.addEventListener("click",l),r.addEventListener("mousemove",()=>{r.focus({preventScroll:!0})}),r}},fz=class extends fE{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){let t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:y7.from(e.clientX,e.clientY),position:y7.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){let{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;let a=y7.sub(y7.from(e.clientX,e.clientY),t.client),s=y7.add(t.position,a),r=this.ctx.domManager.getBoundingClientRect(),n={};s.x>=0&&s.x+i.offsetWidth<=r.width&&(n.x=s.x),s.y>=0&&s.y+i.offsetHeight<=r.height&&(n.y=s.y),this.updatePosition(n)}onDragEnd(){this.dragStartState=void 0}},fR=class extends eC{};l([ew],fR.prototype,"icon",2),l([ew],fR.prototype,"label",2),l([ew],fR.prototype,"ariaLabel",2),l([ew],fR.prototype,"tooltip",2);var fP=class extends i5{constructor(e){super(),this.localeManager=e}update(e){let{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(null!=e.icon&&(i=`<span class="${tM(e.icon)} ag-charts-toolbar__icon"></span>`),null!=e.label){let a=t.t(e.label);i=`${i}<span class="ag-charts-toolbar__label">${a}</span>`}this.elem.innerHTML=i}setChecked(e){(0,s.Bq)(this.elem,"aria-checked",e)}},fF="ag-charts-toolbar__button--active",fB=class extends ao{constructor(e,t="horizontal"){super(t),this.localeManager=e,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new iw,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===t),this.toggleClass("ag-charts-toolbar--vertical","vertical"===t)}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(let e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){let{buttonWidgets:t}=this;for(let[t,i]of e.entries())(this.buttonWidgets.at(t)??this.createButton(t,i)).update(i);for(let i=e.length;i<t.length;i++){let e=this.buttonWidgets.at(i);e?.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){this.buttonWidgets.at(e)?.update(t)}clearActiveButton(){for(let e of this.buttonWidgets)e.toggleClass(fF,!1)}toggleActiveButtonByIndex(e){if(-1!==e)for(let[t,i]of this.buttonWidgets.entries())i.toggleClass(fF,null!=e&&e===t)}toggleButtonEnabledByIndex(e,t){-1!==e&&this.buttonWidgets.at(e)?.setEnabled(t)}toggleSwitchCheckedByIndex(e,t){-1!==e&&this.buttonWidgets.at(e)?.setChecked(t)}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){this.buttonWidgets.at(e)?.setHidden(t)}getButtonWidgetBounds(e){let t=this.getBounds(),i=e.getBounds();return new y(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){let e,t,i,{buttonWidgets:a,hasPrefix:s}=this;for(let[r,n]of a.entries())e=!s&&0===r||i!=n.section,t=r===a.length-1||n.section!=a.at(r+1)?.section,n.toggleClass("ag-charts-toolbar__button--first",e),n.toggleClass("ag-charts-toolbar__button--last",t),n.toggleClass("ag-charts-toolbar__button--gap",r>0&&e),i=n.section}createButton(e,t){let i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",a=>{let s={index:e,...t instanceof eC?t.toJson():t},r=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:a,button:s,buttonBounds:r})}),i.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:e}})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},fG=class extends fB{createButtonWidget(){return new fP(this.localeManager)}},fV=class extends fz{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t={}){this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){let e=this.getPopoverElement();return new y(e?.offsetLeft??0,e?.offsetTop??0,e?.offsetWidth??0,e?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){let a=this.getPopoverElement();if(!a)return;let s=e.position??"above",{offsetWidth:r,offsetHeight:n}=a,o=e.y-n-i,l=e.x-r/2;"below"===s?o=e.y+i:"right"===s?(o=e.y-n/2,l=e.x+t):"above-left"===s&&(l=e.x),this.updatePosition({x:l,y:o})}ignorePointerEvents(){let e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){let e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){let t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor((0,s.qE)(0,e.x,i.width-t.width)),e.y=Math.floor((0,s.qE)(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},fY=class extends fB{constructor(e,t){super(e.localeManager),this.hasPrefix=!0,this.popover=new fV(e,t,this.onPopoverMoved.bind(this)),this.dragHandle=new fU(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(e={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){let e=this.popover.getBounds();if(this.popoverBounds?.equals(e))return;this.popoverBounds=e.clone();let t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){let t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),a=this.dragHandle.getBounds();return new y(i.x+t.x-a.width,i.y+t.y,i.width,i.height)}},fU=class extends i7{constructor(e){super((0,s.n)("div","ag-charts-floating-toolbar__drag-handle"));let t=new i7((0,s.n)("span",`${tM("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},f_={...rN,...rj};yX.create.bind(yX),yX.__createSparkline.bind(yX)}}]);